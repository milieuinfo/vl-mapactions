parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"gvrh":[function(require,module,exports) {
"use strict";function t(){return function(){throw new Error("Unimplemented abstract method.")}()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.abstract=t,exports.getUid=r,exports.VERSION=void 0;let e=0;function r(t){return t.ol_uid||(t.ol_uid=String(++e))}const o="latest";exports.VERSION=o;
},{}],"ixPR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./util.js");class s extends Error{constructor(s){const r="Assertion failed. See https://openlayers.org/en/"+("latest"===e.VERSION?e.VERSION:"v"+e.VERSION.split("-")[0])+"/doc/errors/#"+s+" for details.";super(r),this.code=s,this.name="AssertionError",this.message=r}}var r=s;exports.default=r;
},{"./util.js":"gvrh"}],"kWiW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=t;var e=r(require("./AssertionError.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if(!r)throw new e.default(t)}
},{"./AssertionError.js":"ixPR"}],"An1B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};exports.default=t;
},{}],"sf50":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};exports.default=e;
},{}],"E4kN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.boundingExtent=o,exports.buffer=a,exports.clone=s,exports.closestSquaredDistanceXY=i,exports.containsCoordinate=f,exports.containsExtent=c,exports.containsXY=p,exports.coordinateRelationship=l,exports.createEmpty=x,exports.createOrUpdate=d,exports.createOrUpdateEmpty=h,exports.createOrUpdateFromCoordinate=g,exports.createOrUpdateFromCoordinates=m,exports.createOrUpdateFromFlatCoordinates=M,exports.createOrUpdateFromRings=E,exports.equals=T,exports.approximatelyEquals=O,exports.extend=C,exports.extendCoordinate=R,exports.extendCoordinates=F,exports.extendFlatCoordinates=I,exports.extendRings=N,exports.extendXY=y,exports.forEachCorner=B,exports.getArea=L,exports.getBottomLeft=U,exports.getBottomRight=G,exports.getCenter=_,exports.getCorner=b,exports.getEnlargedArea=A,exports.getForViewAndSize=S,exports.getHeight=W,exports.getIntersectionArea=q,exports.getIntersection=H,exports.getMargin=X,exports.getSize=j,exports.getTopLeft=V,exports.getTopRight=P,exports.getWidth=Y,exports.intersects=v,exports.isEmpty=w,exports.returnOrUpdate=z,exports.scaleFromCenter=K,exports.intersectsSegment=D,exports.applyTransform=k,exports.wrapX=J;var t=require("./asserts.js"),e=r(require("./extent/Corner.js")),n=r(require("./extent/Relationship.js"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){const e=x();for(let n=0,r=t.length;n<r;++n)R(e,t[n]);return e}function u(t,e,n){return d(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}function a(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function s(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function i(t,e,n){let r,o;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(o=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*o}function f(t,e){return p(t,e[0],e[1])}function c(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function p(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function l(t,e){const r=t[0],o=t[1],u=t[2],a=t[3],s=e[0],i=e[1];let f=n.default.UNKNOWN;return s<r?f|=n.default.LEFT:s>u&&(f|=n.default.RIGHT),i<o?f|=n.default.BELOW:i>a&&(f|=n.default.ABOVE),f===n.default.UNKNOWN&&(f=n.default.INTERSECTING),f}function x(){return[1/0,1/0,-1/0,-1/0]}function d(t,e,n,r,o){return o?(o[0]=t,o[1]=e,o[2]=n,o[3]=r,o):[t,e,n,r]}function h(t){return d(1/0,1/0,-1/0,-1/0,t)}function g(t,e){const n=t[0],r=t[1];return d(n,r,n,r,e)}function m(t,e){return F(h(e),t)}function M(t,e,n,r,o){return I(h(o),t,e,n,r)}function E(t,e){return N(h(e),t)}function T(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function O(t,e,n){return Math.abs(t[0]-e[0])<n&&Math.abs(t[2]-e[2])<n&&Math.abs(t[1]-e[1])<n&&Math.abs(t[3]-e[3])<n}function C(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function R(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function F(t,e){for(let n=0,r=e.length;n<r;++n)R(t,e[n]);return t}function I(t,e,n,r,o){for(;n<r;n+=o)y(t,e[n],e[n+1]);return t}function N(t,e){for(let n=0,r=e.length;n<r;++n)F(t,e[n]);return t}function y(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function B(t,e){let n;return(n=e(U(t)))?n:(n=e(G(t)))?n:(n=e(P(t)))?n:(n=e(V(t)))||!1}function L(t){let e=0;return w(t)||(e=Y(t)*W(t)),e}function U(t){return[t[0],t[1]]}function G(t){return[t[2],t[1]]}function _(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function b(n,r){let o;return r===e.default.BOTTOM_LEFT?o=U(n):r===e.default.BOTTOM_RIGHT?o=G(n):r===e.default.TOP_LEFT?o=V(n):r===e.default.TOP_RIGHT?o=P(n):(0,t.assert)(!1,13),o}function A(t,e){const n=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-n)*(Math.max(t[3],e[3])-r)}function S(t,e,n,r,o){const u=e*r[0]/2,a=e*r[1]/2,s=Math.cos(n),i=Math.sin(n),f=u*s,c=u*i,p=a*s,l=a*i,x=t[0],h=t[1],g=x-f+l,m=x-f-l,M=x+f-l,E=x+f+l,T=h-c-p,O=h-c+p,C=h+c+p,R=h+c-p;return d(Math.min(g,m,M,E),Math.min(T,O,C,R),Math.max(g,m,M,E),Math.max(T,O,C,R),o)}function W(t){return t[3]-t[1]}function q(t,e){return L(H(t,e))}function H(t,e,n){const r=n||x();return v(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):h(r),r}function X(t){return Y(t)+W(t)}function j(t){return[t[2]-t[0],t[3]-t[1]]}function V(t){return[t[0],t[3]]}function P(t){return[t[2],t[3]]}function Y(t){return t[2]-t[0]}function v(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function w(t){return t[2]<t[0]||t[3]<t[1]}function z(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function K(t,e){const n=(t[2]-t[0])/2*(e-1),r=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=r,t[3]+=r}function D(t,e,r){let o=!1;const u=l(t,e),a=l(t,r);if(u===n.default.INTERSECTING||a===n.default.INTERSECTING)o=!0;else{const s=t[0],i=t[1],f=t[2],c=t[3],p=e[0],l=e[1],x=r[0],d=r[1],h=(d-l)/(x-p);let g,m;a&n.default.ABOVE&&!(u&n.default.ABOVE)&&(o=(g=x-(d-c)/h)>=s&&g<=f),o||!(a&n.default.RIGHT)||u&n.default.RIGHT||(o=(m=d-(x-f)*h)>=i&&m<=c),o||!(a&n.default.BELOW)||u&n.default.BELOW||(o=(g=x-(d-i)/h)>=s&&g<=f),o||!(a&n.default.LEFT)||u&n.default.LEFT||(o=(m=d-(x-s)*h)>=i&&m<=c)}return o}function k(t,e,n,r){let o=[];if(r>1){const e=t[2]-t[0],n=t[3]-t[1];for(let u=0;u<r;++u)o.push(t[0]+e*u/r,t[1],t[2],t[1]+n*u/r,t[2]-e*u/r,t[3],t[0],t[3]-n*u/r)}else o=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(o,o,2);const a=[],s=[];for(let u=0,i=o.length;u<i;u+=2)a.push(o[u]),s.push(o[u+1]);return u(a,s,n)}function J(t,e){const n=e.getExtent(),r=_(t);if(e.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){const e=Y(n),o=Math.floor((r[0]-n[0])/e)*e;t[0]-=o,t[2]-=o}return t}
},{"./asserts.js":"kWiW","./extent/Corner.js":"An1B","./extent/Relationship.js":"sf50"}],"I79K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};exports.default=e;
},{}],"ptNe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PROPERTYCHANGE:"propertychange"};exports.default=e;
},{}],"c6bJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=e,exports.isEmpty=o,exports.getValues=exports.assign=void 0;const t="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");const n=Object(t);for(let o=1,s=arguments.length;o<s;++o){const t=arguments[o];if(null!=t)for(const e in t)t.hasOwnProperty(e)&&(n[e]=t[e])}return n};function e(t){for(const e in t)delete t[e]}exports.assign=t;const n="function"==typeof Object.values?Object.values:function(t){const e=[];for(const n in t)e.push(t[n]);return e};function o(t){let e;for(e in t)return!1;return!e}exports.getValues=n;
},{}],"TEtv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.listen=t,exports.listenOnce=n,exports.unlistenByKey=r;var e=require("./obj.js");function t(e,t,n,r,o){if(r&&r!==e&&(n=n.bind(r)),o){const r=n;n=function(){e.removeEventListener(t,n),r.apply(this,arguments)}}const s={target:e,type:t,listener:n};return e.addEventListener(t,n),s}function n(e,n,r,o){return t(e,n,r,o,!0)}function r(t){console.log(t),t&&t.target&&(console.log(t.target),t.target.removeEventListener(t.type,t.listener),(0,e.clear)(t))}
},{"./obj.js":"c6bJ"}],"g7g6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class s{constructor(){this.disposed_=!1}dispose(){this.disposed_||(this.disposed_=!0,this.disposeInternal())}disposeInternal(){}}var e=s;exports.default=e;
},{}],"uHwP":[function(require,module,exports) {
"use strict";function e(e,n,t){let o,u;const i=t||r;let f=0,s=e.length,l=!1;for(;f<s;)(u=+i(e[o=f+(s-f>>1)],n))<0?f=o+1:(s=o,l=!u);return l?f:~f}function r(e,r){return e>r?1:e<r?-1:0}function n(e,r){return e.indexOf(r)>=0}function t(e,r,n){const t=e.length;if(e[0]<=r)return 0;if(r<=e[t-1])return t-1;{let o;if(n>0){for(o=1;o<t;++o)if(e[o]<r)return o-1}else if(n<0){for(o=1;o<t;++o)if(e[o]<=r)return o}else for(o=1;o<t;++o){if(e[o]==r)return o;if(e[o]<r)return e[o-1]-r<r-e[o]?o-1:o}return t-1}}function o(e,r,n){for(;r<n;){const t=e[r];e[r]=e[n],e[n]=t,++r,--n}}function u(e,r){const n=Array.isArray(r)?r:[r],t=n.length;for(let o=0;o<t;o++)e[e.length]=n[o]}function i(e,r){const n=e.indexOf(r),t=n>-1;return t&&e.splice(n,1),t}function f(e,r){const n=e.length>>>0;let t;for(let o=0;o<n;o++)if(r(t=e[o],o,e))return t;return null}function s(e,r){const n=e.length;if(n!==r.length)return!1;for(let t=0;t<n;t++)if(e[t]!==r[t])return!1;return!0}function l(e,r){const n=e.length,t=Array(e.length);let o;for(o=0;o<n;o++)t[o]={index:o,value:e[o]};for(t.sort(function(e,n){return r(e.value,n.value)||e.index-n.index}),o=0;o<e.length;o++)e[o]=t[o].value}function c(e,r){let n;return!e.every(function(t,o){return n=o,!r(t,o,e)})?n:-1}function x(e,n,t){const o=n||r;return e.every(function(r,n){if(0===n)return!0;const u=o(e[n-1],r);return!(u>0||t&&0===u)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.binarySearch=e,exports.numberSafeCompareFunction=r,exports.includes=n,exports.linearFindNearest=t,exports.reverseSubArray=o,exports.extend=u,exports.remove=i,exports.find=f,exports.equals=s,exports.stableSort=l,exports.findIndex=c,exports.isSorted=x;
},{}],"mKAY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TRUE=t,exports.FALSE=r,exports.VOID=n,exports.memoizeOne=o;var e=require("./array.js");function t(){return!0}function r(){return!1}function n(){}function o(t){let r,n,o,s=!1;return function(){const u=Array.prototype.slice.call(arguments);return s&&this===o&&(0,e.equals)(u,n)||(s=!0,o=this,n=u,r=t.apply(this,arguments)),r}}
},{"./array.js":"uHwP"}],"rYf1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stopPropagation=o,exports.preventDefault=e,exports.default=void 0;class t{constructor(t){this.propagationStopped,this.type=t,this.target=null}preventDefault(){this.propagationStopped=!0}stopPropagation(){this.propagationStopped=!0}}function o(t){t.stopPropagation()}function e(t){t.preventDefault()}var p=t;exports.default=p;
},{}],"VT2J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("../Disposable.js")),t=require("../functions.js"),s=n(require("./Event.js")),i=require("../obj.js");function n(e){return e&&e.__esModule?e:{default:e}}class r extends e.default{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}addEventListener(e,t){if(!e||!t)return;let s=this.listeners_[e];s||(s=[],this.listeners_[e]=s),-1===s.indexOf(t)&&s.push(t)}dispatchEvent(e){const i="string"==typeof e?new s.default(e):e,n=i.type;i.target||(i.target=this.eventTarget_||this);const r=this.listeners_[n];let h;if(r){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(let e=0,t=r.length;e<t;++e)if(!1===(h="handleEvent"in r[e]?r[e].handleEvent(i):r[e].call(this,i))||i.propagationStopped){h=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){let e=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];e--;)this.removeEventListener(n,t.VOID);delete this.dispatching_[n]}return h}}disposeInternal(){(0,i.clear)(this.listeners_)}getListeners(e){return this.listeners_[e]}hasListener(e){return e?e in this.listeners_:Object.keys(this.listeners_).length>0}removeEventListener(e,s){const i=this.listeners_[e];if(i){const n=i.indexOf(s);-1!==n&&(e in this.pendingRemovals_?(i[n]=t.VOID,++this.pendingRemovals_[e]):(i.splice(n,1),0===i.length&&delete this.listeners_[e]))}}}var h=r;exports.default=h;
},{"../Disposable.js":"g7g6","../functions.js":"mKAY","./Event.js":"rYf1","../obj.js":"c6bJ"}],"Ak1Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};exports.default=e;
},{}],"VYsY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unByKey=i,exports.default=void 0;var e=require("./events.js"),r=s(require("./events/Target.js")),t=s(require("./events/EventType.js"));function s(e){return e&&e.__esModule?e:{default:e}}class n extends r.default{constructor(){super(),this.revision_=0}changed(){++this.revision_,this.dispatchEvent(t.default.CHANGE)}getRevision(){return this.revision_}on(r,t){if(Array.isArray(r)){const s=r.length,n=new Array(s);for(let i=0;i<s;++i)n[i]=(0,e.listen)(this,r[i],t);return n}return(0,e.listen)(this,r,t)}once(r,t){if(Array.isArray(r)){const s=r.length,n=new Array(s);for(let i=0;i<s;++i)n[i]=(0,e.listenOnce)(this,r[i],t);return n}return(0,e.listenOnce)(this,r,t)}un(e,r){if(Array.isArray(e))for(let t=0,s=e.length;t<s;++t)this.removeEventListener(e[t],r);else this.removeEventListener(e,r)}}function i(r){if(Array.isArray(r))for(let t=0,s=r.length;t<s;++t)(0,e.unlistenByKey)(r[t]);else(0,e.unlistenByKey)(r)}var o=n;exports.default=o;
},{"./events.js":"TEtv","./events/Target.js":"VT2J","./events/EventType.js":"Ak1Z"}],"X18S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getChangeEventType=l,exports.default=exports.ObjectEvent=void 0;var e=require("./util.js"),t=u(require("./ObjectEventType.js")),s=u(require("./Observable.js")),r=u(require("./events/Event.js")),i=require("./obj.js");function u(e){return e&&e.__esModule?e:{default:e}}class n extends r.default{constructor(e,t,s){super(e),this.key=t,this.oldValue=s}}exports.ObjectEvent=n;class o extends s.default{constructor(t){super(),(0,e.getUid)(this),this.values_={},void 0!==t&&this.setProperties(t)}get(e){let t;return this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return Object.keys(this.values_)}getProperties(){return(0,i.assign)({},this.values_)}notify(e,s){let r;r=l(e),this.dispatchEvent(new n(r,e,s)),r=t.default.PROPERTYCHANGE,this.dispatchEvent(new n(r,e,s))}set(e,t,s){if(s)this.values_[e]=t;else{const s=this.values_[e];this.values_[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const s in e)this.set(s,e[s],t)}unset(e,t){if(e in this.values_){const s=this.values_[e];delete this.values_[e],t||this.notify(e,s)}}}const a={};function l(e){return a.hasOwnProperty(e)?a[e]:a[e]="change:"+e}var h=o;exports.default=h;
},{"./util.js":"gvrh","./ObjectEventType.js":"ptNe","./Observable.js":"VYsY","./events/Event.js":"rYf1","./obj.js":"c6bJ"}],"XBOy":[function(require,module,exports) {
"use strict";function t(t,e,n,o,r,l){const s=l||[];let c=0;for(let f=e;f<n;f+=o){const e=t[f],n=t[f+1];s[c++]=r[0]*e+r[2]*n+r[4],s[c++]=r[1]*e+r[3]*n+r[5]}return l&&s.length!=c&&(s.length=c),s}function e(t,e,n,o,r,l,s){const c=s||[],f=Math.cos(r),u=Math.sin(r),h=l[0],a=l[1];let g=0;for(let i=e;i<n;i+=o){const e=t[i]-h,n=t[i+1]-a;c[g++]=h+e*f-n*u,c[g++]=a+e*u+n*f;for(let r=i+2;r<i+o;++r)c[g++]=t[r]}return s&&c.length!=g&&(c.length=g),c}function n(t,e,n,o,r,l,s,c){const f=c||[],u=s[0],h=s[1];let a=0;for(let g=e;g<n;g+=o){const e=t[g]-u,n=t[g+1]-h;f[a++]=u+r*e,f[a++]=h+l*n;for(let r=g+2;r<g+o;++r)f[a++]=t[r]}return c&&f.length!=a&&(f.length=a),f}function o(t,e,n,o,r,l,s){const c=s||[];let f=0;for(let u=e;u<n;u+=o){c[f++]=t[u]+r,c[f++]=t[u+1]+l;for(let e=u+2;e<u+o;++e)c[f++]=t[e]}return s&&c.length!=f&&(c.length=f),c}Object.defineProperty(exports,"__esModule",{value:!0}),exports.transform2D=t,exports.rotate=e,exports.scale=n,exports.translate=o;
},{}],"crjC":[function(require,module,exports) {
"use strict";function t(t,e,n){return Math.min(Math.max(t,e),n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.clamp=t,exports.squaredSegmentDistance=n,exports.squaredDistance=o,exports.solveLinearSystem=r,exports.toDegrees=s,exports.toRadians=c,exports.modulo=u,exports.lerp=a,exports.cosh=void 0;const e=function(){let t;return t="cosh"in Math?Math.cosh:function(t){const e=Math.exp(t);return(e+1/e)/2}}();function n(t,e,n,r,s,c){const u=s-n,a=c-r;if(0!==u||0!==a){const o=((t-n)*u+(e-r)*a)/(u*u+a*a);o>1?(n=s,r=c):o>0&&(n+=u*o,r+=a*o)}return o(t,e,n,r)}function o(t,e,n,o){const r=n-t,s=o-e;return r*r+s*s}function r(t){const e=t.length;for(let o=0;o<e;o++){let n=o,r=Math.abs(t[o][o]);for(let c=o+1;c<e;c++){const e=Math.abs(t[c][o]);e>r&&(r=e,n=c)}if(0===r)return null;const s=t[n];t[n]=t[o],t[o]=s;for(let c=o+1;c<e;c++){const n=-t[c][o]/t[o][o];for(let r=o;r<e+1;r++)o==r?t[c][r]=0:t[c][r]+=n*t[o][r]}}const n=new Array(e);for(let o=e-1;o>=0;o--){n[o]=t[o][e]/t[o][o];for(let r=o-1;r>=0;r--)t[r][e]-=t[r][o]*n[o]}return n}function s(t){return 180*t/Math.PI}function c(t){return t*Math.PI/180}function u(t,e){const n=t%e;return n*e<0?n+e:n}function a(t,e,n){return t+n*(e-t)}exports.cosh=e;
},{}],"U9gN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDistance=o,exports.getLength=r,exports.getArea=i,exports.offset=u,exports.DEFAULT_RADIUS=void 0;var t=require("./math.js"),e=a(require("./geom/GeometryType.js"));function a(t){return t&&t.__esModule?t:{default:t}}const s=6371008.8;function o(e,a,o){const n=o||s,r=(0,t.toRadians)(e[1]),c=(0,t.toRadians)(a[1]),i=(c-r)/2,u=(0,t.toRadians)(a[0]-e[0])/2,h=Math.sin(i)*Math.sin(i)+Math.sin(u)*Math.sin(u)*Math.cos(r)*Math.cos(c);return 2*n*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function n(t,e){let a=0;for(let s=0,n=t.length;s<n-1;++s)a+=o(t[s],t[s+1],e);return a}function r(t,a){const o=a||{},c=o.radius||s,i=o.projection||"EPSG:3857",u=t.getType();u!==e.default.GEOMETRY_COLLECTION&&(t=t.clone().transform(i,"EPSG:4326"));let h,f,l,d,M,g,I=0;switch(u){case e.default.POINT:case e.default.MULTI_POINT:break;case e.default.LINE_STRING:case e.default.LINEAR_RING:I=n(h=t.getCoordinates(),c);break;case e.default.MULTI_LINE_STRING:case e.default.POLYGON:for(l=0,d=(h=t.getCoordinates()).length;l<d;++l)I+=n(h[l],c);break;case e.default.MULTI_POLYGON:for(l=0,d=(h=t.getCoordinates()).length;l<d;++l)for(M=0,g=(f=h[l]).length;M<g;++M)I+=n(f[M],c);break;case e.default.GEOMETRY_COLLECTION:{const e=t.getGeometries();for(l=0,d=e.length;l<d;++l)I+=r(e[l],a);break}default:throw new Error("Unsupported geometry type: "+u)}return I}function c(e,a){let s=0;const o=e.length;let n=e[o-1][0],r=e[o-1][1];for(let c=0;c<o;c++){const a=e[c][0],o=e[c][1];s+=(0,t.toRadians)(a-n)*(2+Math.sin((0,t.toRadians)(r))+Math.sin((0,t.toRadians)(o))),n=a,r=o}return s*a*a/2}function i(t,a){const o=a||{},n=o.radius||s,r=o.projection||"EPSG:3857",u=t.getType();u!==e.default.GEOMETRY_COLLECTION&&(t=t.clone().transform(r,"EPSG:4326"));let h,f,l,d,M,g,I=0;switch(u){case e.default.POINT:case e.default.MULTI_POINT:case e.default.LINE_STRING:case e.default.MULTI_LINE_STRING:case e.default.LINEAR_RING:break;case e.default.POLYGON:for(h=t.getCoordinates(),I=Math.abs(c(h[0],n)),l=1,d=h.length;l<d;++l)I-=Math.abs(c(h[l],n));break;case e.default.MULTI_POLYGON:for(l=0,d=(h=t.getCoordinates()).length;l<d;++l)for(f=h[l],I+=Math.abs(c(f[0],n)),M=1,g=f.length;M<g;++M)I-=Math.abs(c(f[M],n));break;case e.default.GEOMETRY_COLLECTION:{const e=t.getGeometries();for(l=0,d=e.length;l<d;++l)I+=i(e[l],a);break}default:throw new Error("Unsupported geometry type: "+u)}return I}function u(e,a,o,n){const r=n||s,c=(0,t.toRadians)(e[1]),i=(0,t.toRadians)(e[0]),u=a/r,h=Math.asin(Math.sin(c)*Math.cos(u)+Math.cos(c)*Math.sin(u)*Math.cos(o)),f=i+Math.atan2(Math.sin(o)*Math.sin(u)*Math.cos(c),Math.cos(u)-Math.sin(c)*Math.sin(h));return[(0,t.toDegrees)(f),(0,t.toDegrees)(h)]}exports.DEFAULT_RADIUS=s;
},{"./math.js":"crjC","./geom/GeometryType.js":"I79K"}],"Y6nE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.METERS_PER_UNIT=void 0;const E={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},e={};exports.METERS_PER_UNIT=e,e[E.DEGREES]=2*Math.PI*6370997/360,e[E.FEET]=.3048,e[E.METERS]=1,e[E.USFEET]=1200/3937;var t=E;exports.default=t;
},{}],"bQ8N":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./Units.js");class i{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||e.METERS_PER_UNIT[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}var n=i;exports.default=n;
},{"./Units.js":"Y6nE"}],"mW4I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromEPSG4326=a,exports.toEPSG4326=i,exports.PROJECTIONS=exports.WORLD_EXTENT=exports.EXTENT=exports.HALF_SIZE=exports.RADIUS=void 0;var e=require("../math.js"),t=r(require("./Projection.js")),o=r(require("./Units.js"));function r(e){return e&&e.__esModule?e:{default:e}}const n=6378137;exports.RADIUS=n;const s=Math.PI*n;exports.HALF_SIZE=s;const c=[-s,-s,s,s];exports.EXTENT=c;const u=[-180,-85,180,85];exports.WORLD_EXTENT=u;class l extends t.default{constructor(t){super({code:t,units:o.default.METERS,extent:c,global:!0,worldExtent:u,getPointResolution:function(t,o){return t/(0,e.cosh)(o[1]/n)}})}}const E=[new l("EPSG:3857"),new l("EPSG:102100"),new l("EPSG:102113"),new l("EPSG:900913"),new l("urn:ogc:def:crs:EPSG:6.18:3:3857"),new l("urn:ogc:def:crs:EPSG::3857"),new l("http://www.opengis.net/gml/srs/epsg.xml#3857")];function a(e,t,o){const r=e.length,c=o>1?o:2;let u=t;void 0===u&&(u=c>2?e.slice():new Array(r));const l=s;for(let s=0;s<r;s+=c){u[s]=l*e[s]/180;let t=n*Math.log(Math.tan(Math.PI*(+e[s+1]+90)/360));t>l?t=l:t<-l&&(t=-l),u[s+1]=t}return u}function i(e,t,o){const r=e.length,c=o>1?o:2;let u=t;void 0===u&&(u=c>2?e.slice():new Array(r));for(let l=0;l<r;l+=c)u[l]=180*e[l]/s,u[l+1]=360*Math.atan(Math.exp(e[l+1]/n))/Math.PI-90;return u}exports.PROJECTIONS=E;
},{"../math.js":"crjC","./Projection.js":"bQ8N","./Units.js":"Y6nE"}],"b4ZQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PROJECTIONS=exports.METERS_PER_UNIT=exports.EXTENT=exports.RADIUS=void 0;var e=n(require("./Projection.js")),t=n(require("./Units.js"));function n(e){return e&&e.__esModule?e:{default:e}}const r=6378137;exports.RADIUS=r;const s=[-180,-90,180,90];exports.EXTENT=s;const o=Math.PI*r/180;exports.METERS_PER_UNIT=o;class u extends e.default{constructor(e,n){super({code:e,units:t.default.DEGREES,extent:s,axisOrientation:n,global:!0,metersPerUnit:o,worldExtent:s})}}const c=[new u("CRS:84"),new u("EPSG:4326","neu"),new u("urn:ogc:def:crs:EPSG::4326","neu"),new u("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new u("urn:ogc:def:crs:OGC:1.3:CRS84"),new u("urn:ogc:def:crs:OGC:2:84"),new u("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new u("urn:x-ogc:def:crs:EPSG:4326","neu")];exports.PROJECTIONS=c;
},{"./Projection.js":"bQ8N","./Units.js":"Y6nE"}],"UeYV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=o,exports.add=r,exports.remove=n,exports.get=s;var e=require("../obj.js");let t={};function o(){t={}}function r(e,o,r){const n=e.getCode(),s=o.getCode();n in t||(t[n]={}),t[n][s]=r}function n(o,r){const n=o.getCode(),s=r.getCode(),i=t[n][s];return delete t[n][s],(0,e.isEmpty)(t[n])&&delete t[n],i}function s(e,o){let r;return e in t&&o in t[e]&&(r=t[e][o]),r}
},{"../obj.js":"c6bJ"}],"MaPe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=t,exports.get=r,exports.add=n;let e={};function t(){e={}}function r(t){return e[t]||null}function n(t,r){e[t]=r}
},{}],"HKfS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneTransform=l,exports.identityTransform=d,exports.addProjection=E,exports.addProjections=P,exports.get=j,exports.getPointResolution=g,exports.addEquivalentProjections=x,exports.addEquivalentTransforms=m,exports.clearAllProjections=T,exports.createProjection=v,exports.createTransformFromCoordinateTransform=O,exports.addCoordinateTransforms=S,exports.fromLonLat=U,exports.toLonLat=y,exports.equivalent=R,exports.getTransformFromProjections=h,exports.getTransform=C,exports.transform=_,exports.transformExtent=q,exports.transformWithProjections=b,exports.setUserProjection=M,exports.clearUserProjection=I,exports.getUserProjection=N,exports.useGeographic=D,exports.toUserCoordinate=w,exports.fromUserCoordinate=J,exports.toUserExtent=L,exports.fromUserExtent=F,exports.addCommon=W,Object.defineProperty(exports,"Projection",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"METERS_PER_UNIT",{enumerable:!0,get:function(){return s.METERS_PER_UNIT}});var e=require("./sphere.js"),t=require("./extent.js"),r=require("./math.js"),n=require("./proj/epsg3857.js"),o=require("./proj/epsg4326.js"),i=p(require("./proj/Projection.js")),s=a(require("./proj/Units.js")),u=require("./proj/transforms.js"),c=require("./proj/projections.js");function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function p(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r){let n;if(void 0!==t){for(let r=0,n=e.length;r<n;++r)t[r]=e[r];n=t}else n=e.slice();return n}function d(e,t,r){if(void 0!==t&&e!==t){for(let r=0,n=e.length;r<n;++r)t[r]=e[r];e=t}return e}function E(e){(0,c.add)(e.getCode(),e),(0,u.add)(e,e,l)}function P(e){e.forEach(E)}function j(e){return"string"==typeof e?(0,c.get)(e):e||null}function g(t,r,n,o){let i;const u=(t=j(t)).getPointResolutionFunc();if(u){if(i=u(r,n),o&&o!==t.getUnits()){const e=t.getMetersPerUnit();e&&(i=i*e/s.METERS_PER_UNIT[o])}}else{if(t.getUnits()==s.default.DEGREES&&!o||o==s.default.DEGREES)i=r;else{const u=h(t,j("EPSG:4326"));let c=[n[0]-r/2,n[1],n[0]+r/2,n[1],n[0],n[1]-r/2,n[0],n[1]+r/2];c=u(c,c,2),i=((0,e.getDistance)(c.slice(0,2),c.slice(2,4))+(0,e.getDistance)(c.slice(4,6),c.slice(6,8)))/2;const f=o?s.METERS_PER_UNIT[o]:t.getMetersPerUnit();void 0!==f&&(i/=f)}}return i}function x(e){P(e),e.forEach(function(t){e.forEach(function(e){t!==e&&(0,u.add)(t,e,l)})})}function m(e,t,r,n){e.forEach(function(e){t.forEach(function(t){(0,u.add)(e,t,r),(0,u.add)(t,e,n)})})}function T(){(0,c.clear)(),(0,u.clear)()}function v(e,t){return e?"string"==typeof e?j(e):e:j(t)}function O(e){return function(t,r,n){const o=t.length,i=void 0!==n?n:2,s=void 0!==r?r:new Array(o);for(let u=0;u<o;u+=i){const r=e([t[u],t[u+1]]);s[u]=r[0],s[u+1]=r[1];for(let e=i-1;e>=2;--e)s[u+e]=t[u+e]}return s}}function S(e,t,r,n){const o=j(e),i=j(t);(0,u.add)(o,i,O(r)),(0,u.add)(i,o,O(n))}function U(e,t){return _(e,"EPSG:4326",void 0!==t?t:"EPSG:3857")}function y(e,t){const n=_(e,void 0!==t?t:"EPSG:3857","EPSG:4326"),o=n[0];return(o<-180||o>180)&&(n[0]=(0,r.modulo)(o+180,360)-180),n}function R(e,t){if(e===t)return!0;const r=e.getUnits()===t.getUnits();if(e.getCode()===t.getCode())return r;return h(e,t)===l&&r}function h(e,t){const r=e.getCode(),n=t.getCode();let o=(0,u.get)(r,n);return o||(o=d),o}function C(e,t){return h(j(e),j(t))}function _(e,t,r){return C(t,r)(e,void 0,e.length)}function q(e,r,n,o){const i=C(r,n);return(0,t.applyTransform)(e,i,void 0,o)}function b(e,t,r){return h(t,r)(e)}let G=null;function M(e){G=j(e)}function I(){G=null}function N(){return G}function D(){M("EPSG:4326")}function w(e,t){return G?_(e,t,G):e}function J(e,t){return G?_(e,G,t):e}function L(e,t){return G?q(e,t,G):e}function F(e,t){return G?q(e,G,t):e}function W(){x(n.PROJECTIONS),x(o.PROJECTIONS),m(o.PROJECTIONS,n.PROJECTIONS,n.fromEPSG4326,n.toEPSG4326)}W();
},{"./sphere.js":"U9gN","./extent.js":"E4kN","./math.js":"crjC","./proj/epsg3857.js":"mW4I","./proj/epsg4326.js":"b4ZQ","./proj/Projection.js":"bQ8N","./proj/Units.js":"Y6nE","./proj/transforms.js":"UeYV","./proj/projections.js":"MaPe"}],"fXLG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.reset=e,exports.multiply=o,exports.set=s,exports.setFromArray=u,exports.apply=c,exports.rotate=i,exports.scale=p,exports.makeScale=a,exports.translate=f,exports.compose=x,exports.composeCssTransform=m,exports.invert=l,exports.makeInverse=y,exports.determinant=M,exports.toString=h;var t=require("./asserts.js");const r=new Array(6);function n(){return[1,0,0,1,0,0]}function e(t){return s(t,1,0,0,1,0,0)}function o(t,r){const n=t[0],e=t[1],o=t[2],s=t[3],u=t[4],c=t[5],i=r[0],p=r[1],a=r[2],f=r[3],x=r[4],m=r[5];return t[0]=n*i+o*p,t[1]=e*i+s*p,t[2]=n*a+o*f,t[3]=e*a+s*f,t[4]=n*x+o*m+u,t[5]=e*x+s*m+c,t}function s(t,r,n,e,o,s,u){return t[0]=r,t[1]=n,t[2]=e,t[3]=o,t[4]=s,t[5]=u,t}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t}function c(t,r){const n=r[0],e=r[1];return r[0]=t[0]*n+t[2]*e+t[4],r[1]=t[1]*n+t[3]*e+t[5],r}function i(t,n){const e=Math.cos(n),u=Math.sin(n);return o(t,s(r,e,u,-u,e,0,0))}function p(t,n,e){return o(t,s(r,n,0,0,e,0,0))}function a(t,r,n){return s(t,r,0,0,n,0,0)}function f(t,n,e){return o(t,s(r,1,0,0,1,n,e))}function x(t,r,n,e,o,s,u,c){const i=Math.sin(s),p=Math.cos(s);return t[0]=e*p,t[1]=o*i,t[2]=-e*i,t[3]=o*p,t[4]=u*e*p-c*e*i+r,t[5]=u*o*i+c*o*p+n,t}function m(t,r,e,o,s,u,c){return h(x(n(),t,r,e,o,s,u,c))}function l(t){return y(t,t)}function y(r,n){const e=M(n);(0,t.assert)(0!==e,32);const o=n[0],s=n[1],u=n[2],c=n[3],i=n[4],p=n[5];return r[0]=c/e,r[1]=-s/e,r[2]=-u/e,r[3]=o/e,r[4]=(u*p-c*i)/e,r[5]=-(o*p-s*i)/e,r}function M(t){return t[0]*t[3]-t[1]*t[2]}function h(t){return"matrix("+t.join(", ")+")"}
},{"./asserts.js":"kWiW"}],"feOh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=u(require("../Object.js")),r=require("../extent.js"),s=require("./flat/transform.js"),i=require("../proj.js"),n=u(require("../proj/Units.js")),o=require("../transform.js"),a=require("../functions.js");function u(t){return t&&t.__esModule?t:{default:t}}const c=(0,o.create)();class l extends e.default{constructor(){super(),this.extent_=(0,r.createEmpty)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,a.memoizeOne)(function(t,e,r){if(!r)return this.getSimplifiedGeometry(e);const s=this.clone();return s.applyTransform(r),s.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return(0,t.abstract)()}closestPointXY(e,r,s,i){return(0,t.abstract)()}containsXY(t,e){const r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e}getClosestPoint(t,e){const r=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(e){return(0,t.abstract)()}getExtent(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),(0,r.returnOrUpdate)(this.extent_,t)}rotate(e,r){(0,t.abstract)()}scale(e,r,s){(0,t.abstract)()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(e){return(0,t.abstract)()}getType(){return(0,t.abstract)()}applyTransform(e){(0,t.abstract)()}intersectsExtent(e){return(0,t.abstract)()}translate(e,r){(0,t.abstract)()}transform(t,e){const a=(0,i.get)(t),u=a.getUnits()==n.default.TILE_PIXELS?function(t,n,u){const l=a.getExtent(),f=a.getWorldExtent(),m=(0,r.getHeight)(f)/(0,r.getHeight)(l);return(0,o.compose)(c,f[0],f[3],m,-m,0,0,0),(0,s.transform2D)(t,0,t.length,u,c,n),(0,i.getTransform)(a,e)(t,n,u)}:(0,i.getTransform)(a,e);return this.applyTransform(u),this}}var f=l;exports.default=f;
},{"../util.js":"gvrh","../Object.js":"X18S","../extent.js":"E4kN","./flat/transform.js":"XBOy","../proj.js":"HKfS","../proj/Units.js":"Y6nE","../transform.js":"fXLG","../functions.js":"mKAY"}],"TBKt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};exports.default=e;
},{}],"leyx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStrideForLayout=l,exports.transformGeom2D=d,exports.default=void 0;var t=require("../util.js"),e=require("../extent.js"),i=o(require("./Geometry.js")),r=o(require("./GeometryLayout.js")),s=require("./flat/transform.js");function o(t){return t&&t.__esModule?t:{default:t}}class a extends i.default{constructor(){super(),this.layout=r.default.XY,this.stride=2,this.flatCoordinates=null}computeExtent(t){return(0,e.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return(0,t.abstract)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=l(t),this.layout=t,this.flatCoordinates=e}setCoordinates(e,i){(0,t.abstract)()}setLayout(t,e,i){let s;if(t)s=l(t);else{for(let t=0;t<i;++t){if(0===e.length)return this.layout=r.default.XY,void(this.stride=2);e=e[0]}t=n(s=e.length)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const r=this.getStride();(0,s.rotate)(i,0,i.length,r,t,e,i),this.changed()}}scale(t,i,r){let o=i;void 0===o&&(o=t);let a=r;a||(a=(0,e.getCenter)(this.getExtent()));const n=this.getFlatCoordinates();if(n){const e=this.getStride();(0,s.scale)(n,0,n.length,e,t,o,a,n),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const r=this.getStride();(0,s.translate)(i,0,i.length,r,t,e,i),this.changed()}}}function n(t){let e;return 2==t?e=r.default.XY:3==t?e=r.default.XYZ:4==t&&(e=r.default.XYZM),e}function l(t){let e;return t==r.default.XY?e=2:t==r.default.XYZ||t==r.default.XYM?e=3:t==r.default.XYZM&&(e=4),e}function d(t,e,i){const r=t.getFlatCoordinates();if(r){const o=t.getStride();return(0,s.transform2D)(r,0,r.length,o,e,i)}return null}var h=a;exports.default=h;
},{"../util.js":"gvrh","../extent.js":"E4kN","./Geometry.js":"feOh","./GeometryLayout.js":"TBKt","./flat/transform.js":"XBOy"}],"tAC2":[function(require,module,exports) {
"use strict";function t(t,e,n,o){for(let r=0,l=n.length;r<l;++r)t[e++]=n[r];return e}function e(t,e,n,o){for(let r=0,l=n.length;r<l;++r){const l=n[r];for(let n=0;n<o;++n)t[e++]=l[n]}return e}function n(t,n,o,r,l){const s=l||[];let f=0;for(let u=0,a=o.length;u<a;++u){const l=e(t,n,o[u],r);s[f++]=l,n=l}return s.length=f,s}function o(t,e,o,r,l){const s=l||[];let f=0;for(let u=0,a=o.length;u<a;++u){const l=n(t,e,o[u],r,s[f]);s[f++]=l,e=l[l.length-1]}return s.length=f,s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deflateCoordinate=t,exports.deflateCoordinates=e,exports.deflateCoordinatesArray=n,exports.deflateMultiCoordinatesArray=o;
},{}],"baQX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),e=n(require("./GeometryType.js")),s=n(require("./SimpleGeometry.js")),i=require("./flat/deflate.js"),r=require("./flat/transform.js");function n(t){return t&&t.__esModule?t:{default:t}}class o extends s.default{constructor(t,e,s){if(super(),void 0!==s&&void 0===e)this.setFlatCoordinates(s,t);else{const i=e||0;this.setCenterAndRadius(t,i,s)}}clone(){return new o(this.flatCoordinates.slice(),void 0,this.layout)}closestPointXY(t,e,s,i){const r=this.flatCoordinates,n=t-r[0],o=e-r[1],a=n*n+o*o;if(a<i){if(0===a)for(let t=0;t<this.stride;++t)s[t]=r[t];else{const t=this.getRadius()/Math.sqrt(a);s[0]=r[0]+t*n,s[1]=r[1]+t*o;for(let e=2;e<this.stride;++e)s[e]=r[e]}return s.length=this.stride,a}return i}containsXY(t,e){const s=this.flatCoordinates,i=t-s[0],r=e-s[1];return i*i+r*r<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const s=this.flatCoordinates,i=s[this.stride]-s[0];return(0,t.createOrUpdate)(s[0]-i,s[1]-i,s[0]+i,s[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return e.default.CIRCLE}intersectsExtent(e){const s=this.getExtent();if((0,t.intersects)(e,s)){const s=this.getCenter();return e[0]<=s[0]&&e[2]>=s[0]||(e[1]<=s[1]&&e[3]>=s[1]||(0,t.forEachCorner)(e,this.intersectsCoordinate.bind(this)))}return!1}setCenter(t){const e=this.stride,s=this.flatCoordinates[e]-this.flatCoordinates[0],i=t.slice();i[e]=i[0]+s;for(let r=1;r<e;++r)i[e+r]=t[r];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(t,e,s){this.setLayout(s,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let n=(0,i.deflateCoordinate)(r,0,t,this.stride);r[n++]=r[0]+e;for(let i=1,o=this.stride;i<o;++i)r[n++]=r[i];r.length=n,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const s=this.getCenter(),i=this.getStride();this.setCenter((0,r.rotate)(s,0,s.length,i,t,e,s)),this.changed()}translate(t,e){const s=this.getCenter(),i=this.getStride();this.setCenter((0,r.translate)(s,0,s.length,i,t,e,s)),this.changed()}}o.prototype.transform;var a=o;exports.default=a;
},{"../extent.js":"E4kN","./GeometryType.js":"I79K","./SimpleGeometry.js":"leyx","./flat/deflate.js":"tAC2","./flat/transform.js":"XBOy"}],"knKK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../events.js"),t=n(require("../events/EventType.js")),s=require("../extent.js"),i=n(require("./Geometry.js")),r=n(require("./GeometryType.js"));function n(e){return e&&e.__esModule?e:{default:e}}class o extends i.default{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(e.unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let s=0,i=this.geometries_.length;s<i;++s)this.changeEventsKeys_.push((0,e.listen)(this.geometries_[s],t.default.CHANGE,this.changed,this))}clone(){const e=new o(null);return e.setGeometries(this.geometries_),e}closestPointXY(e,t,i,r){if(r<(0,s.closestSquaredDistanceXY)(this.getExtent(),e,t))return r;const n=this.geometries_;for(let s=0,o=n.length;s<o;++s)r=n[s].closestPointXY(e,t,i,r);return r}containsXY(e,t){const s=this.geometries_;for(let i=0,r=s.length;i<r;++i)if(s[i].containsXY(e,t))return!0;return!1}computeExtent(e){(0,s.createOrUpdateEmpty)(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)(0,s.extend)(e,t[i].getExtent());return e}getGeometries(){return h(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let s=0,i=t.length;s<i;++s)t[s].getType()===this.getType()?e=e.concat(t[s].getGeometriesArrayRecursive()):e.push(t[s]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],s=this.geometries_;let i=!1;for(let r=0,n=s.length;r<n;++r){const n=s[r],o=n.getSimplifiedGeometry(e);t.push(o),o!==n&&(i=!0)}if(i){const e=new o(null);return e.setGeometriesArray(t),e}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return r.default.GEOMETRY_COLLECTION}intersectsExtent(e){const t=this.geometries_;for(let s=0,i=t.length;s<i;++s)if(t[s].intersectsExtent(e))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(e,t){const s=this.geometries_;for(let i=0,r=s.length;i<r;++i)s[i].rotate(e,t);this.changed()}scale(e,t,i){let r=i;r||(r=(0,s.getCenter)(this.getExtent()));const n=this.geometries_;for(let s=0,o=n.length;s<o;++s)n[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(h(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let s=0,i=t.length;s<i;++s)t[s].applyTransform(e);this.changed()}translate(e,t){const s=this.geometries_;for(let i=0,r=s.length;i<r;++i)s[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function h(e){const t=[];for(let s=0,i=e.length;s<i;++s)t.push(e[s].clone());return t}var l=o;exports.default=l;
},{"../events.js":"TEtv","../events/EventType.js":"Ak1Z","../extent.js":"E4kN","./Geometry.js":"feOh","./GeometryType.js":"I79K"}],"iDhe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxSquaredDelta=r,exports.arrayMaxSquaredDelta=n,exports.multiArrayMaxSquaredDelta=s,exports.assignClosestPoint=o,exports.assignClosestArrayPoint=a,exports.assignClosestMultiArrayPoint=l;var t=require("../../math.js");function e(e,r,n,s,o,a,l){const i=e[r],u=e[r+1],f=e[n]-i,c=e[n+1]-u;let h;if(0===f&&0===c)h=r;else{const g=((o-i)*f+(a-u)*c)/(f*f+c*c);if(g>1)h=n;else{if(g>0){for(let o=0;o<s;++o)l[o]=(0,t.lerp)(e[r+o],e[n+o],g);return void(l.length=s)}h=r}}for(let t=0;t<s;++t)l[t]=e[h+t];l.length=s}function r(e,r,n,s,o){let a=e[r],l=e[r+1];for(r+=s;r<n;r+=s){const n=e[r],s=e[r+1],i=(0,t.squaredDistance)(a,l,n,s);i>o&&(o=i),a=n,l=s}return o}function n(t,e,n,s,o){for(let a=0,l=n.length;a<l;++a){const l=n[a];o=r(t,e,l,s,o),e=l}return o}function s(t,e,r,s,o){for(let a=0,l=r.length;a<l;++a){const l=r[a];o=n(t,e,l,s,o),e=l[l.length-1]}return o}function o(r,n,s,o,a,l,i,u,f,c,h){if(n==s)return c;let g,N;if(0===a){if((N=(0,t.squaredDistance)(i,u,r[n],r[n+1]))<c){for(g=0;g<o;++g)f[g]=r[n+g];return f.length=o,N}return c}const x=h||[NaN,NaN];let d=n+o;for(;d<s;)if(e(r,d-o,d,o,i,u,x),(N=(0,t.squaredDistance)(i,u,x[0],x[1]))<c){for(c=N,g=0;g<o;++g)f[g]=x[g];f.length=o,d+=o}else d+=o*Math.max((Math.sqrt(N)-Math.sqrt(c))/a|0,1);if(l&&(e(r,s-o,n,o,i,u,x),(N=(0,t.squaredDistance)(i,u,x[0],x[1]))<c)){for(c=N,g=0;g<o;++g)f[g]=x[g];f.length=o}return c}function a(t,e,r,n,s,a,l,i,u,f,c){const h=c||[NaN,NaN];for(let g=0,N=r.length;g<N;++g){const c=r[g];f=o(t,e,c,n,s,a,l,i,u,f,h),e=c}return f}function l(t,e,r,n,s,o,l,i,u,f,c){const h=c||[NaN,NaN];for(let g=0,N=r.length;g<N;++g){const c=r[g];f=a(t,e,c,n,s,o,l,i,u,f,h),e=c[c.length-1]}return f}
},{"../../math.js":"crjC"}],"RTsg":[function(require,module,exports) {
"use strict";function t(t,e,n,o,r){const l=void 0!==r?r:[];let i=0;for(let s=e;s<n;s+=o)l[i++]=t.slice(s,s+o);return l.length=i,l}function e(e,n,o,r,l){const i=void 0!==l?l:[];let s=0;for(let c=0,f=o.length;c<f;++c){const l=o[c];i[s++]=t(e,n,l,r,i[s]),n=l}return i.length=s,i}function n(t,n,o,r,l){const i=void 0!==l?l:[];let s=0;for(let c=0,f=o.length;c<f;++c){const l=o[c];i[s++]=e(t,n,l,r,i[s]),n=l[l.length-1]}return i.length=s,i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.inflateCoordinates=t,exports.inflateCoordinatesArray=e,exports.inflateMultiCoordinatesArray=n;
},{}],"OevD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolatePoint=r,exports.lineStringCoordinateAtM=n,exports.lineStringsCoordinateAtM=l;var e=require("../../array.js"),t=require("../../math.js");function r(r,n,l,i,s,u){let o=NaN,f=NaN;const c=(l-n)/i;if(1===c)o=r[n],f=r[n+1];else if(2==c)o=(1-s)*r[n]+s*r[n+i],f=(1-s)*r[n+1]+s*r[n+i+1];else if(0!==c){let u=r[n],c=r[n+1],a=0;const p=[0];for(let e=n+i;e<l;e+=i){const t=r[e],n=r[e+1];a+=Math.sqrt((t-u)*(t-u)+(n-c)*(n-c)),p.push(a),u=t,c=n}const h=s*a,g=(0,e.binarySearch)(p,h);if(g<0){const e=(h-p[-g-2])/(p[-g-1]-p[-g-2]),l=n+(-g-2)*i;o=(0,t.lerp)(r[l],r[l+i],e),f=(0,t.lerp)(r[l+1],r[l+i+1],e)}else o=r[n+g*i],f=r[n+g*i+1]}return u?(u[0]=o,u[1]=f,u):[o,f]}function n(e,r,n,l,i,s){if(n==r)return null;let u;if(i<e[r+l-1])return s?((u=e.slice(r,r+l))[l-1]=i,u):null;if(e[n-1]<i)return s?((u=e.slice(n-l,n))[l-1]=i,u):null;if(i==e[r+l-1])return e.slice(r,r+l);let o=r/l,f=n/l;for(;o<f;){const t=o+f>>1;i<e[(t+1)*l-1]?f=t:o=t+1}const c=e[o*l-1];if(i==c)return e.slice((o-1)*l,(o-1)*l+l);const a=(i-c)/(e[(o+1)*l-1]-c);u=[];for(let p=0;p<l-1;++p)u.push((0,t.lerp)(e[(o-1)*l+p],e[o*l+p],a));return u.push(i),u}function l(e,t,r,l,i,s,u){if(u)return n(e,t,r[r.length-1],l,i,s);let o;if(i<e[l-1])return s?((o=e.slice(0,l))[l-1]=i,o):null;if(e[e.length-1]<i)return s?((o=e.slice(e.length-l))[l-1]=i,o):null;for(let f=0,c=r.length;f<c;++f){const s=r[f];if(t!=s){if(i<e[t+l-1])return null;if(i<=e[s-1])return n(e,t,s,l,i,!1);t=s}}return null}
},{"../../array.js":"uHwP","../../math.js":"crjC"}],"sGa2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingContainsExtent=t,exports.linearRingContainsXY=e,exports.linearRingsContainsXY=r,exports.linearRingssContainsXY=i;var n=require("../../extent.js");function t(t,r,i,o,u){return!(0,n.forEachCorner)(u,function(n){return!e(t,r,i,o,n[0],n[1])})}function e(n,t,e,r,i,o){let u=0,s=n[e-r],f=n[e-r+1];for(;t<e;t+=r){const e=n[t],r=n[t+1];f<=o?r>o&&(e-s)*(o-f)-(i-s)*(r-f)>0&&u++:r<=o&&(e-s)*(o-f)-(i-s)*(r-f)<0&&u--,s=e,f=r}return 0!==u}function r(n,t,r,i,o,u){if(0===r.length)return!1;if(!e(n,t,r[0],i,o,u))return!1;for(let s=1,f=r.length;s<f;++s)if(e(n,r[s-1],r[s],i,o,u))return!1;return!0}function i(n,t,e,i,o,u){if(0===e.length)return!1;for(let s=0,f=e.length;s<f;++s){const f=e[s];if(r(n,t,f,i,o,u))return!0;t=f[f.length-1]}return!1}
},{"../../extent.js":"E4kN"}],"Kyj8":[function(require,module,exports) {
"use strict";function e(e,r,t,o,n){const s=[e[r],e[r+1]],u=[];let c;for(;r+o<t;r+=o){if(u[0]=e[r+o],u[1]=e[r+o+1],c=n(s,u))return c;s[0]=u[0],s[1]=u[1]}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=e;
},{}],"EDhT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.intersectsLineString=r,exports.intersectsLineStringArray=i,exports.intersectsLinearRing=s,exports.intersectsLinearRingArray=o,exports.intersectsLinearRingMultiArray=a;var n=require("../../extent.js"),e=require("./contains.js"),t=require("./segments.js");function r(e,r,i,s,o){const a=(0,n.extendFlatCoordinates)((0,n.createEmpty)(),e,r,i,s);return!!(0,n.intersects)(o,a)&&(!!(0,n.containsExtent)(o,a)||(a[0]>=o[0]&&a[2]<=o[2]||(a[1]>=o[1]&&a[3]<=o[3]||(0,t.forEach)(e,r,i,s,function(e,t){return(0,n.intersectsSegment)(o,e,t)}))))}function i(n,e,t,i,s){for(let o=0,a=t.length;o<a;++o){if(r(n,e,t[o],i,s))return!0;e=t[o]}return!1}function s(n,t,i,s,o){return!!r(n,t,i,s,o)||(!!(0,e.linearRingContainsXY)(n,t,i,s,o[0],o[1])||(!!(0,e.linearRingContainsXY)(n,t,i,s,o[0],o[3])||(!!(0,e.linearRingContainsXY)(n,t,i,s,o[2],o[1])||!!(0,e.linearRingContainsXY)(n,t,i,s,o[2],o[3]))))}function o(n,t,i,o,a){if(!s(n,t,i[0],o,a))return!1;if(1===i.length)return!0;for(let s=1,u=i.length;s<u;++s)if((0,e.linearRingContainsExtent)(n,i[s-1],i[s],o,a)&&!r(n,i[s-1],i[s],o,a))return!1;return!0}function a(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const a=t[s];if(o(n,e,a,r,i))return!0;e=a[a.length-1]}return!1}
},{"../../extent.js":"E4kN","./contains.js":"sGa2","./segments.js":"Kyj8"}],"i6SQ":[function(require,module,exports) {
"use strict";function t(t,e,n,r){let o=t[e],s=t[e+1],i=0;for(let l=e+r;l<n;l+=r){const e=t[l],n=t[l+1];i+=Math.sqrt((e-o)*(e-o)+(n-s)*(n-s)),o=e,s=n}return i}function e(e,n,r,o){let s=t(e,n,r,o);const i=e[r-o]-e[n],l=e[r-o+1]-e[n+1];return s+=Math.sqrt(i*i+l*l)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineStringLength=t,exports.linearRingLength=e;
},{}],"o8JQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.simplifyLineString=e,exports.douglasPeucker=r,exports.douglasPeuckerArray=n,exports.douglasPeuckerMultiArray=o,exports.radialDistance=u,exports.snap=s,exports.quantize=i,exports.quantizeArray=c,exports.quantizeMultiArray=l;var t=require("../../math.js");function e(t,e,n,o,s,i,c){const l=void 0!==c?c:[];return i||(n=u(t,e,n,o,s,l,0),t=l,e=0,o=2),l.length=r(t,e,n,o,s,l,0),l}function r(e,r,n,o,u,s,i){const c=(n-r)/o;if(c<3){for(;r<n;r+=o)s[i++]=e[r],s[i++]=e[r+1];return i}const l=new Array(c);l[0]=1,l[c-1]=1;const f=[r,n-o];let a=0;for(;f.length>0;){const n=f.pop(),s=f.pop();let i=0;const c=e[s],p=e[s+1],h=e[n],g=e[n+1];for(let r=s+o;r<n;r+=o){const n=e[r],o=e[r+1],u=(0,t.squaredSegmentDistance)(n,o,c,p,h,g);u>i&&(a=r,i=u)}i>u&&(l[(a-r)/o]=1,s+o<a&&f.push(s,a),a+o<n&&f.push(a,n))}for(let t=0;t<c;++t)l[t]&&(s[i++]=e[r+t*o],s[i++]=e[r+t*o+1]);return i}function n(t,e,n,o,u,s,i,c){for(let l=0,f=n.length;l<f;++l){const f=n[l];i=r(t,e,f,o,u,s,i),c.push(i),e=f}return i}function o(t,e,r,o,u,s,i,c){for(let l=0,f=r.length;l<f;++l){const f=r[l],a=[];i=n(t,e,f,o,u,s,i,a),c.push(a),e=f[f.length-1]}return i}function u(e,r,n,o,u,s,i){if(n<=r+o){for(;r<n;r+=o)s[i++]=e[r],s[i++]=e[r+1];return i}let c=e[r],l=e[r+1];s[i++]=c,s[i++]=l;let f=c,a=l;for(r+=o;r<n;r+=o)f=e[r],a=e[r+1],(0,t.squaredDistance)(c,l,f,a)>u&&(s[i++]=f,s[i++]=a,c=f,l=a);return f==c&&a==l||(s[i++]=f,s[i++]=a),i}function s(t,e){return e*Math.round(t/e)}function i(t,e,r,n,o,u,i){if(e==r)return i;let c,l,f=s(t[e],o),a=s(t[e+1],o);e+=n,u[i++]=f,u[i++]=a;do{if(c=s(t[e],o),l=s(t[e+1],o),(e+=n)==r)return u[i++]=c,u[i++]=l,i}while(c==f&&l==a);for(;e<r;){const r=s(t[e],o),p=s(t[e+1],o);if(e+=n,r==c&&p==l)continue;const h=c-f,g=l-a,d=r-f,x=p-a;h*x==g*d&&(h<0&&d<h||h==d||h>0&&d>h)&&(g<0&&x<g||g==x||g>0&&x>g)?(c=r,l=p):(u[i++]=c,u[i++]=l,f=c,a=l,c=r,l=p)}return u[i++]=c,u[i++]=l,i}function c(t,e,r,n,o,u,s,c){for(let l=0,f=r.length;l<f;++l){const f=r[l];s=i(t,e,f,n,o,u,s),c.push(s),e=f}return s}function l(t,e,r,n,o,u,s,i){for(let l=0,f=r.length;l<f;++l){const f=r[l],a=[];s=c(t,e,f,n,o,u,s,a),i.push(a),e=f[f.length-1]}return s}
},{"../../math.js":"crjC"}],"nG5b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),i=C(require("./GeometryLayout.js")),s=C(require("./GeometryType.js")),r=C(require("./SimpleGeometry.js")),a=require("./flat/closest.js"),o=require("./flat/deflate.js"),n=require("./flat/inflate.js"),l=require("./flat/interpolate.js"),h=require("./flat/intersectsextent.js"),d=require("./flat/length.js"),f=require("./flat/segments.js"),u=require("./flat/simplify.js");function C(t){return t&&t.__esModule?t:{default:t}}class g extends r.default{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){return new g(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,i,s,r){return r<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,a.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,a.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,s,r))}forEachSegment(t){return(0,f.forEach)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){if(this.layout!=i.default.XYM&&this.layout!=i.default.XYZM)return null;const s=void 0!==e&&e;return(0,l.lineStringCoordinateAtM)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,s)}getCoordinates(){return(0,n.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return(0,l.interpolatePoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)}getLength(){return(0,d.lineStringLength)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=(0,u.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new g(e,i.default.XY)}getType(){return s.default.LINE_STRING}intersectsExtent(t){return(0,h.intersectsLineString)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}var c=g;exports.default=c;
},{"../array.js":"uHwP","../extent.js":"E4kN","./GeometryLayout.js":"TBKt","./GeometryType.js":"I79K","./SimpleGeometry.js":"leyx","./flat/closest.js":"iDhe","./flat/deflate.js":"tAC2","./flat/inflate.js":"RTsg","./flat/interpolate.js":"OevD","./flat/intersectsextent.js":"EDhT","./flat/length.js":"i6SQ","./flat/segments.js":"Kyj8","./flat/simplify.js":"o8JQ"}],"GJ0c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),s=f(require("./GeometryLayout.js")),i=f(require("./GeometryType.js")),r=f(require("./LineString.js")),n=f(require("./SimpleGeometry.js")),a=require("./flat/closest.js"),o=require("./flat/deflate.js"),l=require("./flat/inflate.js"),d=require("./flat/interpolate.js"),h=require("./flat/intersectsextent.js"),u=require("./flat/simplify.js");function f(t){return t&&t.__esModule?t:{default:t}}class g extends n.default{constructor(e,s,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,s);else if(void 0!==s&&i)this.setFlatCoordinates(s,e),this.ends_=i;else{let s=this.getLayout();const i=e,r=[],n=[];for(let e=0,a=i.length;e<a;++e){const a=i[e];0===e&&(s=a.getLayout()),(0,t.extend)(r,a.getFlatCoordinates()),n.push(r.length)}this.setFlatCoordinates(s,r),this.ends_=n}}appendLineString(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){return new g(this.flatCoordinates.slice(),this.layout,this.ends_.slice())}closestPointXY(t,s,i,r){return r<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,s)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,a.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,a.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,s,i,r))}getCoordinateAtM(t,e,i){if(this.layout!=s.default.XYM&&this.layout!=s.default.XYZM||0===this.flatCoordinates.length)return null;const r=void 0!==e&&e,n=void 0!==i&&i;return(0,d.lineStringsCoordinateAtM)(this.flatCoordinates,0,this.ends_,this.stride,t,r,n)}getCoordinates(){return(0,l.inflateCoordinatesArray)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new r.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,s=this.layout,i=[];let n=0;for(let a=0,o=e.length;a<o;++a){const o=e[a],l=new r.default(t.slice(n,o),s);i.push(l),n=o}return i}getFlatMidpoints(){const e=[],s=this.flatCoordinates;let i=0;const r=this.ends_,n=this.stride;for(let a=0,o=r.length;a<o;++a){const o=r[a],l=(0,d.interpolatePoint)(s,i,o,n,.5);(0,t.extend)(e,l),i=o}return e}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=(0,u.douglasPeuckerArray)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new g(e,s.default.XY,i)}getType(){return i.default.MULTI_LINE_STRING}intersectsExtent(t){return(0,h.intersectsLineStringArray)(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const s=(0,o.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===s.length?0:s[s.length-1],this.changed()}}var c=g;exports.default=c;
},{"../array.js":"uHwP","../extent.js":"E4kN","./GeometryLayout.js":"TBKt","./GeometryType.js":"I79K","./LineString.js":"nG5b","./SimpleGeometry.js":"leyx","./flat/closest.js":"iDhe","./flat/deflate.js":"tAC2","./flat/inflate.js":"RTsg","./flat/interpolate.js":"OevD","./flat/intersectsextent.js":"EDhT","./flat/simplify.js":"o8JQ"}],"xPgY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),e=i(require("./GeometryType.js")),s=i(require("./SimpleGeometry.js")),r=require("./flat/deflate.js"),o=require("../math.js");function i(t){return t&&t.__esModule?t:{default:t}}class a extends s.default{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){return new a(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,s,r){const i=this.flatCoordinates,a=(0,o.squaredDistance)(t,e,i[0],i[1]);if(a<r){const t=this.stride;for(let e=0;e<t;++e)s[e]=i[e];return s.length=t,a}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return(0,t.createOrUpdateFromCoordinate)(this.flatCoordinates,e)}getType(){return e.default.POINT}intersectsExtent(e){return(0,t.containsXY)(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,r.deflateCoordinate)(this.flatCoordinates,0,t,this.stride),this.changed()}}var n=a;exports.default=n;
},{"../extent.js":"E4kN","./GeometryType.js":"I79K","./SimpleGeometry.js":"leyx","./flat/deflate.js":"tAC2","../math.js":"crjC"}],"FLg1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),s=l(require("./GeometryType.js")),i=l(require("./Point.js")),r=l(require("./SimpleGeometry.js")),o=require("./flat/deflate.js"),a=require("./flat/inflate.js"),n=require("../math.js");function l(t){return t&&t.__esModule?t:{default:t}}class d extends r.default{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){return new d(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,s,i,r){if(r<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,s))return r;const o=this.flatCoordinates,a=this.stride;for(let e=0,l=o.length;e<l;e+=a){const l=(0,n.squaredDistance)(t,s,o[e],o[e+1]);if(l<r){r=l;for(let t=0;t<a;++t)i[t]=o[e+t];i.length=a}}return r}getCoordinates(){return(0,a.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new i.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,s=this.stride,r=[];for(let o=0,a=t.length;o<a;o+=s){const a=new i.default(t.slice(o,o+s),e);r.push(a)}return r}getType(){return s.default.MULTI_POINT}intersectsExtent(t){const s=this.flatCoordinates,i=this.stride;for(let r=0,o=s.length;r<o;r+=i){const i=s[r],o=s[r+1];if((0,e.containsXY)(t,i,o))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}var h=d;exports.default=h;
},{"../array.js":"uHwP","../extent.js":"E4kN","./GeometryType.js":"I79K","./Point.js":"xPgY","./SimpleGeometry.js":"leyx","./flat/deflate.js":"tAC2","./flat/inflate.js":"RTsg","../math.js":"crjC"}],"q2Lq":[function(require,module,exports) {
"use strict";function e(e,t,n,r){let o=0,l=e[n-r],s=e[n-r+1];for(;t<n;t+=r){const n=e[t],r=e[t+1];o+=s*n-l*r,l=n,s=r}return o/2}function t(t,n,r,o){let l=0;for(let s=0,i=r.length;s<i;++s){const i=r[s];l+=e(t,n,i,o),n=i}return l}function n(e,n,r,o){let l=0;for(let s=0,i=r.length;s<i;++s){const i=r[s];l+=t(e,n,i,o),n=i[i.length-1]}return l}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRing=e,exports.linearRings=t,exports.linearRingss=n;
},{}],"p64G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),e=d(require("./GeometryLayout.js")),s=d(require("./GeometryType.js")),i=d(require("./SimpleGeometry.js")),r=require("./flat/area.js"),a=require("./flat/closest.js"),o=require("./flat/deflate.js"),n=require("./flat/inflate.js"),l=require("./flat/simplify.js");function d(t){return t&&t.__esModule?t:{default:t}}class h extends i.default{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new h(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,s,i,r){return r<(0,t.closestSquaredDistanceXY)(this.getExtent(),e,s)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,a.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,a.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,s,i,r))}getArea(){return(0,r.linearRing)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,n.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const s=[];return s.length=(0,l.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,s,0),new h(s,e.default.XY)}getType(){return s.default.LINEAR_RING}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}var u=h;exports.default=u;
},{"../extent.js":"E4kN","./GeometryLayout.js":"TBKt","./GeometryType.js":"I79K","./SimpleGeometry.js":"leyx","./flat/area.js":"q2Lq","./flat/closest.js":"iDhe","./flat/deflate.js":"tAC2","./flat/inflate.js":"RTsg","./flat/simplify.js":"o8JQ"}],"SFVH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInteriorPointOfArray=r,exports.getInteriorPointsOfMultiArray=n;var t=require("../../array.js"),e=require("./contains.js");function r(r,n,o,s,i,a,u){let l,c,f,g,h,p,y;const N=i[a+1],b=[];for(let t=0,e=o.length;t<e;++t){const e=o[t];for(g=r[e-s],p=r[e-s+1],l=n;l<e;l+=s)h=r[l],y=r[l+1],(N<=p&&y<=N||p<=N&&N<=y)&&(f=(N-p)/(y-p)*(h-g)+g,b.push(f)),g=h,p=y}let j=NaN,x=-1/0;for(b.sort(t.numberSafeCompareFunction),g=b[0],l=1,c=b.length;l<c;++l){h=b[l];const t=Math.abs(h-g);t>x&&(f=(g+h)/2,(0,e.linearRingsContainsXY)(r,n,o,s,f,N)&&(j=f,x=t)),g=h}return isNaN(j)&&(j=i[a]),u?(u.push(j,N,x),u):[j,N,x]}function n(t,e,n,o,s){let i=[];for(let a=0,u=n.length;a<u;++a){const u=n[a];i=r(t,e,u,o,s,2*a,i),e=u[u.length-1]}return i}
},{"../../array.js":"uHwP","./contains.js":"sGa2"}],"xHA5":[function(require,module,exports) {
"use strict";function e(e,o,t,r){for(;o<t-r;){for(let s=0;s<r;++s){const c=e[o+s];e[o+s]=e[t-r+s],e[t-r+s]=c}o+=r,t-=r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.coordinates=e;
},{}],"F7Ci":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingIsClockwise=r,exports.linearRingsAreOriented=n,exports.linearRingssAreOriented=t,exports.orientLinearRings=o,exports.orientLinearRingsArray=i;var e=require("./reverse.js");function r(e,r,n,t){let o=0,i=e[n-t],s=e[n-t+1];for(;r<n;r+=t){const n=e[r],t=e[r+1];o+=(n-i)*(t+s),i=n,s=t}return o>0}function n(e,n,t,o,i){const s=void 0!==i&&i;for(let l=0,u=t.length;l<u;++l){const i=t[l],u=r(e,n,i,o);if(0===l){if(s&&u||!s&&!u)return!1}else if(s&&!u||!s&&u)return!1;n=i}return!0}function t(e,r,t,o,i){for(let s=0,l=t.length;s<l;++s){const l=t[s];if(!n(e,r,l,o,i))return!1;l.length&&(r=l[l.length-1])}return!0}function o(n,t,o,i,s){const l=void 0!==s&&s;for(let u=0,c=o.length;u<c;++u){const s=o[u],c=r(n,t,s,i);(0===u?l&&c||!l&&!c:l&&!c||!l&&c)&&(0,e.coordinates)(n,t,s,i),t=s}return t}function i(e,r,n,t,i){for(let s=0,l=n.length;s<l;++s)r=o(e,r,n[s],t,i);return r}
},{"./reverse.js":"xHA5"}],"AvIG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.circular=p,exports.fromExtent=v,exports.fromCircle=j,exports.makeRegular=m,exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),i=q(require("./GeometryLayout.js")),s=q(require("./GeometryType.js")),n=q(require("./LinearRing.js")),r=q(require("./Point.js")),o=q(require("./SimpleGeometry.js")),a=require("../sphere.js"),l=require("./flat/area.js"),d=require("./flat/closest.js"),h=require("./flat/contains.js"),u=require("./flat/deflate.js"),f=require("./flat/inflate.js"),g=require("./flat/interiorpoint.js"),_=require("./flat/intersectsextent.js"),c=require("./flat/orient.js"),C=require("./flat/simplify.js"),R=require("../math.js");function q(t){return t&&t.__esModule?t:{default:t}}class x extends o.default{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){return new x(this.flatCoordinates.slice(),this.layout,this.ends_.slice())}closestPointXY(t,i,s,n){return n<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,d.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,d.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,s,n))}containsXY(t,e){return(0,h.linearRingsContainsXY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return(0,l.linearRings)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,c.orientLinearRings)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,f.inflateCoordinatesArray)(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=(0,e.getCenter)(this.getExtent());this.flatInteriorPoint_=(0,g.getInteriorPointOfArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new r.default(this.getFlatInteriorPoint(),i.default.XYM)}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new n.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const a=i[o],l=new n.default(e.slice(r,a),t);s.push(l),r=a}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,c.linearRingsAreOriented)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,c.orientLinearRings)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],s=[];return e.length=(0,C.quantizeArray)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,s),new x(e,i.default.XY,s)}getType(){return s.default.POLYGON}intersectsExtent(t){return(0,_.intersectsLinearRingArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=(0,u.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}var y=x;function p(e,s,n,r){const o=n||32,l=[];for(let i=0;i<o;++i)(0,t.extend)(l,(0,a.offset)(e,s,2*Math.PI*i/o,r));return l.push(l[0],l[1]),new x(l,i.default.XY,[l.length])}function v(t){const e=t[0],s=t[1],n=t[2],r=t[3],o=[e,s,e,r,n,r,n,s,e,s];return new x(o,i.default.XY,[o.length])}function j(t,e,i){const s=e||32,n=t.getStride(),r=t.getLayout(),o=t.getCenter(),a=n*(s+1),l=new Array(a);for(let u=0;u<a;u+=n){l[u]=0,l[u+1]=0;for(let t=2;t<n;t++)l[u+t]=o[t]}const d=[l.length],h=new x(l,r,d);return m(h,o,t.getRadius(),i),h}function m(t,e,i,s){const n=t.getFlatCoordinates(),r=t.getStride(),o=n.length/r-1,a=s||0;for(let l=0;l<=o;++l){const t=l*r,s=a+2*(0,R.modulo)(l,o)*Math.PI/o;n[t]=e[0]+i*Math.cos(s),n[t+1]=e[1]+i*Math.sin(s)}t.changed()}exports.default=y;
},{"../array.js":"uHwP","../extent.js":"E4kN","./GeometryLayout.js":"TBKt","./GeometryType.js":"I79K","./LinearRing.js":"p64G","./Point.js":"xPgY","./SimpleGeometry.js":"leyx","../sphere.js":"U9gN","./flat/area.js":"q2Lq","./flat/closest.js":"iDhe","./flat/contains.js":"sGa2","./flat/deflate.js":"tAC2","./flat/inflate.js":"RTsg","./flat/interiorpoint.js":"SFVH","./flat/intersectsextent.js":"EDhT","./flat/orient.js":"F7Ci","./flat/simplify.js":"o8JQ","../math.js":"crjC"}],"tyDd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingss=t;var e=require("../../extent.js");function t(t,r,n,s){const o=[];let a=(0,e.createEmpty)();for(let l=0,c=n.length;l<c;++l){const c=n[l];a=(0,e.createOrUpdateFromFlatCoordinates)(t,r,c[0],s),o.push((a[0]+a[2])/2,(a[1]+a[3])/2),r=c[c.length-1]}return o}
},{"../../extent.js":"E4kN"}],"UyXA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),s=y(require("./GeometryLayout.js")),i=y(require("./GeometryType.js")),n=y(require("./MultiPoint.js")),r=y(require("./Polygon.js")),o=y(require("./SimpleGeometry.js")),a=require("./flat/area.js"),l=require("./flat/center.js"),h=require("./flat/closest.js"),d=require("./flat/contains.js"),u=require("./flat/deflate.js"),f=require("./flat/inflate.js"),g=require("./flat/interiorpoint.js"),_=require("./flat/intersectsextent.js"),c=require("./flat/orient.js"),C=require("./flat/simplify.js");function y(t){return t&&t.__esModule?t:{default:t}}class q extends o.default{constructor(e,s,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){let n=this.getLayout();const r=e,o=[],a=[];for(let e=0,s=r.length;e<s;++e){const s=r[e];0===e&&(n=s.getLayout());const i=o.length,l=s.getEnds();for(let t=0,e=l.length;t<e;++t)l[t]+=i;(0,t.extend)(o,s.getFlatCoordinates()),a.push(l)}s=n,e=o,i=a}void 0!==s&&i?(this.setFlatCoordinates(s,e),this.endss_=i):this.setCoordinates(e,s)}appendPolygon(e){let s;if(this.flatCoordinates){const i=this.flatCoordinates.length;(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates());for(let t=0,n=(s=e.getEnds().slice()).length;t<n;++t)s[t]+=i}else this.flatCoordinates=e.getFlatCoordinates().slice(),s=e.getEnds().slice(),this.endss_.push();this.endss_.push(s),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=this.endss_[s].slice();return new q(this.flatCoordinates.slice(),this.layout,e)}closestPointXY(t,s,i,n){return n<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,s)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,h.multiArrayMaxSquaredDelta)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,h.assignClosestMultiArrayPoint)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,s,i,n))}containsXY(t,e){return(0,d.linearRingssContainsXY)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return(0,a.linearRingss)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,c.orientLinearRingsArray)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,f.inflateMultiCoordinatesArray)(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=(0,l.linearRingss)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,g.getInteriorPointsOfMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new n.default(this.getFlatInteriorPoints().slice(),s.default.XYM)}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,c.linearRingssAreOriented)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,c.orientLinearRingsArray)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=(0,C.quantizeMultiArray)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new q(e,s.default.XY,i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const s=this.endss_[t-1];e=s[s.length-1]}const s=this.endss_[t].slice(),i=s[s.length-1];if(0!==e)for(let n=0,r=s.length;n<r;++n)s[n]-=e;return new r.default(this.flatCoordinates.slice(e,i),this.layout,s)}getPolygons(){const t=this.layout,e=this.flatCoordinates,s=this.endss_,i=[];let n=0;for(let o=0,a=s.length;o<a;++o){const a=s[o].slice(),l=a[a.length-1];if(0!==n)for(let t=0,e=a.length;t<e;++t)a[t]-=n;const h=new r.default(e.slice(n,l),t,a);i.push(h),n=l}return i}getType(){return i.default.MULTI_POLYGON}intersectsExtent(t){return(0,_.intersectsLinearRingMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const s=(0,u.deflateMultiCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===s.length)this.flatCoordinates.length=0;else{const t=s[s.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}var R=q;exports.default=R;
},{"../array.js":"uHwP","../extent.js":"E4kN","./GeometryLayout.js":"TBKt","./GeometryType.js":"I79K","./MultiPoint.js":"FLg1","./Polygon.js":"AvIG","./SimpleGeometry.js":"leyx","./flat/area.js":"q2Lq","./flat/center.js":"tyDd","./flat/closest.js":"iDhe","./flat/contains.js":"sGa2","./flat/deflate.js":"tAC2","./flat/inflate.js":"RTsg","./flat/interiorpoint.js":"SFVH","./flat/intersectsextent.js":"EDhT","./flat/orient.js":"F7Ci","./flat/simplify.js":"o8JQ"}],"q8kg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Geometry",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"GeometryCollection",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"LineString",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"MultiLineString",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"MultiPoint",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"MultiPolygon",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Point",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Polygon",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"LinearRing",{enumerable:!0,get:function(){return g.default}});var e=c(require("./geom/Circle.js")),r=c(require("./geom/Geometry.js")),t=c(require("./geom/GeometryCollection.js")),n=c(require("./geom/LineString.js")),o=c(require("./geom/MultiLineString.js")),u=c(require("./geom/MultiPoint.js")),i=c(require("./geom/MultiPolygon.js")),l=c(require("./geom/Point.js")),f=c(require("./geom/Polygon.js")),g=c(require("./geom/LinearRing.js"));function c(e){return e&&e.__esModule?e:{default:e}}
},{"./geom/Circle.js":"baQX","./geom/Geometry.js":"feOh","./geom/GeometryCollection.js":"knKK","./geom/LineString.js":"nG5b","./geom/MultiLineString.js":"GJ0c","./geom/MultiPoint.js":"FLg1","./geom/MultiPolygon.js":"UyXA","./geom/Point.js":"xPgY","./geom/Polygon.js":"AvIG","./geom/LinearRing.js":"p64G"}],"ZfC4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStyleFunction=y,exports.default=void 0;var e=require("./asserts.js"),t=require("./events.js"),r=o(require("./events/EventType.js")),n=i(require("./Object.js"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function o(e){return e&&e.__esModule?e:{default:e}}class h extends n.default{constructor(e){if(super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addEventListener((0,n.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new h(this.getProperties());e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,t.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=(0,t.listen)(e,r.default.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?y(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeEventListener((0,n.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=e,this.addEventListener((0,n.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()}}function y(t){if("function"==typeof t)return t;{let r;if(Array.isArray(t))r=t;else{(0,e.assert)("function"==typeof t.getZIndex,41),r=[t]}return function(){return r}}}var a=h;exports.default=a;
},{"./asserts.js":"kWiW","./events.js":"TEtv","./events/EventType.js":"Ak1Z","./Object.js":"X18S"}],"vFoD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./events/EventType.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r={SINGLECLICK:"singleclick",CLICK:e.default.CLICK,DBLCLICK:e.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=r;
},{"./events/EventType.js":"Ak1Z"}],"FgSC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./events/Event.js"));function t(e){return e&&e.__esModule?e:{default:e}}class r extends e.default{constructor(e,t,r){super(e),this.map=t,this.frameState=void 0!==r?r:null}}var s=r;exports.default=s;
},{"./events/Event.js":"rYf1"}],"JgEB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./MapEvent.js"));function e(t){return t&&t.__esModule?t:{default:t}}class i extends t.default{constructor(t,e,i,o,r){super(t,e,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==o&&o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),this.originalEvent.stopPropagation()}}var o=i;exports.default=o;
},{"./MapEvent.js":"FgSC"}],"tNGF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./MapBrowserEvent.js"));function t(e){return e&&e.__esModule?e:{default:e}}class r extends e.default{constructor(e,t,r,s,u){super(e,t,r,s,u),this.pointerEvent=r}}var s=r;exports.default=s;
},{"./MapBrowserEvent.js":"JgEB"}],"lTU8":[function(require,module,exports) {
"use strict";function e(e,t,r){const n=void 0!==r?e.toFixed(r):""+e;let o=n.indexOf(".");return(o=-1===o?n.length:o)>t?n:new Array(1+t-o).join("0")+n}function t(e,t){const r=(""+e).split("."),n=(""+t).split(".");for(let o=0;o<Math.max(r.length,n.length);o++){const e=parseInt(r[o]||"0",10),t=parseInt(n[o]||"0",10);if(e>t)return 1;if(t>e)return-1}return 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.padNumber=e,exports.compareVersions=t;
},{}],"irUP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=n,exports.closestOnCircle=o,exports.closestOnSegment=s,exports.createStringXY=u,exports.degreesToStringHDMS=c,exports.format=i,exports.equals=a,exports.rotate=f,exports.scale=p,exports.squaredDistance=x,exports.distance=l,exports.squaredDistanceToSegment=d,exports.toStringHDMS=h,exports.toStringXY=g,exports.wrapX=M;var t=require("./math.js"),e=require("./string.js"),r=require("./extent.js");function n(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function o(t,e){const r=e.getRadius(),n=e.getCenter(),o=n[0],s=n[1];let u=t[0]-o;const c=t[1]-s;0===u&&0===c&&(u=1);const i=Math.sqrt(u*u+c*c);return[o+r*u/i,s+r*c/i]}function s(t,e){const r=t[0],n=t[1],o=e[0],s=e[1],u=o[0],c=o[1],i=s[0],a=s[1],f=i-u,p=a-c,x=0===f&&0===p?0:(f*(r-u)+p*(n-c))/(f*f+p*p||0);let l,d;return x<=0?(l=u,d=c):x>=1?(l=i,d=a):(l=u+x*f,d=c+x*p),[l,d]}function u(t){return function(e){return g(e,t)}}function c(r,n,o){const s=(0,t.modulo)(n+180,360)-180,u=Math.abs(3600*s),c=o||0,i=Math.pow(10,c);let a=Math.floor(u/3600),f=Math.floor((u-3600*a)/60),p=u-3600*a-60*f;return(p=Math.ceil(p*i)/i)>=60&&(p=0,f+=1),f>=60&&(f=0,a+=1),a+"° "+(0,e.padNumber)(f,2)+"′ "+(0,e.padNumber)(p,2,c)+"″"+(0==s?"":" "+r.charAt(s<0?1:0))}function i(t,e,r){return t?e.replace("{x}",t[0].toFixed(r)).replace("{y}",t[1].toFixed(r)):""}function a(t,e){let r=!0;for(let n=t.length-1;n>=0;--n)if(t[n]!=e[n]){r=!1;break}return r}function f(t,e){const r=Math.cos(e),n=Math.sin(e),o=t[0]*r-t[1]*n,s=t[1]*r+t[0]*n;return t[0]=o,t[1]=s,t}function p(t,e){return t[0]*=e,t[1]*=e,t}function x(t,e){const r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function l(t,e){return Math.sqrt(x(t,e))}function d(t,e){return x(t,s(t,e))}function h(t,e){return t?c("NS",t[1],e)+" "+c("EW",t[0],e):""}function g(t,e){return i(t,"{x}, {y}",e)}function M(t,e){const n=e.getExtent();if(e.canWrapX()&&(t[0]<n[0]||t[0]>=n[2])){const e=(0,r.getWidth)(n),o=Math.floor((t[0]-n[0])/e);t[0]-=o*e}return t}
},{"./math.js":"crjC","./string.js":"lTU8","./extent.js":"E4kN"}],"E1VY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PASSIVE_EVENT_LISTENERS=exports.IMAGE_DECODE=exports.WORKER_OFFSCREEN_CANVAS=exports.DEVICE_PIXEL_RATIO=exports.MAC=exports.WEBKIT=exports.SAFARI=exports.FIREFOX=void 0;const e="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",o=-1!==e.indexOf("firefox");exports.FIREFOX=o;const t=-1!==e.indexOf("safari")&&-1==e.indexOf("chrom");exports.SAFARI=t;const n=-1!==e.indexOf("webkit")&&-1==e.indexOf("edge");exports.WEBKIT=n;const r=-1!==e.indexOf("macintosh");exports.MAC=r;const s="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;exports.DEVICE_PIXEL_RATIO=s;const i="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope;exports.WORKER_OFFSCREEN_CANVAS=i;const E="undefined"!=typeof Image&&Image.prototype.decode;exports.IMAGE_DECODE=E;const d=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(o){}return e}();exports.PASSIVE_EVENT_LISTENERS=d;
},{}],"TePD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.primaryAction=exports.penOnly=exports.touchOnly=exports.mouseOnly=exports.targetNotEditable=exports.shiftKeyOnly=exports.platformModifierKeyOnly=exports.noModifierKeys=exports.doubleClick=exports.singleClick=exports.pointerMove=exports.never=exports.mouseActionButton=exports.click=exports.always=exports.focus=exports.altShiftKeysOnly=exports.altKeyOnly=void 0;var t=r(require("../MapBrowserEventType.js")),e=require("../asserts.js"),n=require("../functions.js"),o=require("../has.js");function r(t){return t&&t.__esModule?t:{default:t}}const s=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};exports.altKeyOnly=s;const i=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey};exports.altShiftKeysOnly=i;const c=function(t){return t.target.getTargetElement()===document.activeElement};exports.focus=c;const p=n.TRUE;exports.always=p;const u=function(e){return e.type==t.default.CLICK};exports.click=u;const l=function(t){const e=t.originalEvent;return 0==e.button&&!(o.WEBKIT&&o.MAC&&e.ctrlKey)};exports.mouseActionButton=l;const y=n.FALSE;exports.never=y;const a=function(t){return"pointermove"==t.type};exports.pointerMove=a;const f=function(e){return e.type==t.default.SINGLECLICK};exports.singleClick=f;const x=function(e){return e.type==t.default.DBLCLICK};exports.doubleClick=x;const K=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};exports.noModifierKeys=K;const v=function(t){const e=t.originalEvent;return!e.altKey&&(o.MAC?e.metaKey:e.ctrlKey)&&!e.shiftKey};exports.platformModifierKeyOnly=v;const E=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey};exports.shiftKeyOnly=E;const d=function(t){const e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e};exports.targetNotEditable=d;const m=function(t){const n=t.pointerEvent;return(0,e.assert)(void 0!==n,56),"mouse"==n.pointerType};exports.mouseOnly=m;const g=function(t){const n=t.pointerEvent;return(0,e.assert)(void 0!==n,56),"touch"===n.pointerType};exports.touchOnly=g;const O=function(t){const n=t.pointerEvent;return(0,e.assert)(void 0!==n,56),"pen"===n.pointerType};exports.penOnly=O;const h=function(t){const n=t.pointerEvent;return(0,e.assert)(void 0!==n,56),n.isPrimary&&0===n.button};exports.primaryAction=h;
},{"../MapBrowserEventType.js":"vFoD","../asserts.js":"kWiW","../functions.js":"mKAY","../has.js":"E1VY"}],"xZ2c":[function(require,module,exports) {
"use strict";function e(e){return Math.pow(e,3)}function t(t){return 1-e(1-t)}function n(e){return 3*e*e-2*e*e*e}function r(e){return e}function u(e){return e<.5?n(2*e):1-n(2*(e-.5))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.easeIn=e,exports.easeOut=t,exports.inAndOut=n,exports.linear=r,exports.upAndDown=u;
},{}],"oxEL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ACTIVE:"active"};exports.default=e;
},{}],"kIie":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pan=s,exports.zoomByDelta=a,exports.default=void 0;var e=r(require("../Object.js")),t=require("../easing.js"),n=r(require("./Property.js"));function r(e){return e&&e.__esModule?e:{default:e}}class o extends e.default{constructor(e){super(),e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(n.default.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(n.default.ACTIVE,e)}setMap(e){this.map_=e}}function s(e,n,r){const o=e.getCenterInternal();if(o){const s=[o[0]+n[0],o[1]+n[1]];e.animateInternal({duration:void 0!==r?r:250,easing:t.linear,center:e.getConstrainedCenter(s)})}}function a(e,n,r,o){const s=e.getZoom();if(void 0===s)return;const a=e.getConstrainedZoom(s+n),i=e.getResolutionForZoom(a);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:i,anchor:r,duration:void 0!==o?o:250,easing:t.easeOut})}var i=o;exports.default=i;
},{"../Object.js":"X18S","../easing.js":"xZ2c","./Property.js":"oxEL"}],"qhn4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.centroid=i,exports.default=void 0;var e=r(require("../MapBrowserEventType.js")),t=r(require("./Interaction.js")),n=require("../obj.js");function r(e){return e&&e.__esModule?e:{default:e}}class s extends t.default{constructor(e){const t=e||{};super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(t){if(!t.pointerEvent)return!0;let n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==e.default.POINTERDRAG)this.handleDragEvent(t);else if(t.type==e.default.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==e.default.POINTERDOWN){const e=this.handleDownEvent(t);this.handlingDownUpSequence=e,n=this.stopDown(e)}else t.type==e.default.POINTERMOVE&&this.handleMoveEvent(t);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(t){if(o(t)){const r=t.pointerEvent,s=r.pointerId.toString();t.type==e.default.POINTERUP?delete this.trackedPointers_[s]:t.type==e.default.POINTERDOWN?this.trackedPointers_[s]=r:s in this.trackedPointers_&&(this.trackedPointers_[s]=r),this.targetPointers=(0,n.getValues)(this.trackedPointers_)}}}function i(e){const t=e.length;let n=0,r=0;for(let s=0;s<t;s++)n+=e[s].clientX,r+=e[s].clientY;return[n/t,r/t]}function o(t){const n=t.type;return n===e.default.POINTERDOWN||n===e.default.POINTERDRAG||n===e.default.POINTERUP}var a=s;exports.default=a;
},{"../MapBrowserEventType.js":"vFoD","./Interaction.js":"kIie","../obj.js":"c6bJ"}],"dirP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"};exports.default=e;
},{}],"RwT5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=r(require("../Object.js")),s=r(require("./Property.js")),a=require("../math.js"),i=require("../obj.js"),o=require("../asserts.js");function r(t){return t&&t.__esModule?t:{default:t}}class u extends e.default{constructor(t){super();const e=(0,i.assign)({},t);e[s.default.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,o.assert)("number"==typeof e[s.default.OPACITY],64),e[s.default.VISIBLE]=void 0===t.visible||t.visible,e[s.default.Z_INDEX]=t.zIndex,e[s.default.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[s.default.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[s.default.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[s.default.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?t.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},s=this.getZIndex();return e.opacity=(0,a.clamp)(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==s?s:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(e){return(0,t.abstract)()}getLayerStatesArray(e){return(0,t.abstract)()}getExtent(){return this.get(s.default.EXTENT)}getMaxResolution(){return this.get(s.default.MAX_RESOLUTION)}getMinResolution(){return this.get(s.default.MIN_RESOLUTION)}getMinZoom(){return this.get(s.default.MIN_ZOOM)}getMaxZoom(){return this.get(s.default.MAX_ZOOM)}getOpacity(){return this.get(s.default.OPACITY)}getSourceState(){return(0,t.abstract)()}getVisible(){return this.get(s.default.VISIBLE)}getZIndex(){return this.get(s.default.Z_INDEX)}setExtent(t){this.set(s.default.EXTENT,t)}setMaxResolution(t){this.set(s.default.MAX_RESOLUTION,t)}setMinResolution(t){this.set(s.default.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(s.default.MAX_ZOOM,t)}setMinZoom(t){this.set(s.default.MIN_ZOOM,t)}setOpacity(t){(0,o.assert)("number"==typeof t,64),this.set(s.default.OPACITY,t)}setVisible(t){this.set(s.default.VISIBLE,t)}setZIndex(t){this.set(s.default.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}var l=u;exports.default=l;
},{"../util.js":"gvrh","../Object.js":"X18S","./Property.js":"dirP","../math.js":"crjC","../obj.js":"c6bJ","../asserts.js":"kWiW"}],"w2aV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};exports.default=e;
},{}],"mqbu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};exports.default=e;
},{}],"t6QM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inView=d,exports.default=void 0;var e=require("../events.js"),r=h(require("../events/EventType.js")),t=require("../Object.js"),s=h(require("./Base.js")),n=h(require("./Property.js")),u=require("../obj.js"),a=h(require("../render/EventType.js")),i=h(require("../source/State.js")),o=require("../asserts.js");function h(e){return e&&e.__esModule?e:{default:e}}class l extends s.default{constructor(e){const r=(0,u.assign)({},e);delete r.source,super(r),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addEventListener((0,t.getChangeEventType)(n.default.SOURCE),this.handleSourcePropertyChange_);const s=e.source?e.source:null;this.setSource(s)}getLayersArray(e){const r=e||[];return r.push(this),r}getLayerStatesArray(e){const r=e||[];return r.push(this.getLayerState()),r}getSource(){return this.get(n.default.SOURCE)||null}getSourceState(){const e=this.getSource();return e?e.getState():i.default.UNDEFINED}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,e.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null);const t=this.getSource();t&&(this.sourceChangeKey_=(0,e.listen)(t,r.default.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(e){return this.renderer_.getFeatures(e)}render(e,r){const t=this.getRenderer();if(t.prepareFrame(e))return t.renderFrame(e,r)}setMap(t){this.mapPrecomposeKey_&&((0,e.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,e.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,e.listen)(t,a.default.PRECOMPOSE,function(e){const r=e.frameState.layerStatesArray,t=this.getLayerState(!1);(0,o.assert)(!r.some(function(e){return e.layer===t.layer}),67),r.push(t)},this),this.mapRenderKey_=(0,e.listen)(this,r.default.CHANGE,t.render,t),this.changed())}setSource(e){this.set(n.default.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.setSource(null),super.disposeInternal()}}function d(e,r){if(!e.visible)return!1;const t=r.resolution;if(t<e.minResolution||t>=e.maxResolution)return!1;const s=r.zoom;return s>e.minZoom&&s<=e.maxZoom}var c=l;exports.default=c;
},{"../events.js":"TEtv","../events/EventType.js":"Ak1Z","../Object.js":"X18S","./Base.js":"RwT5","./Property.js":"dirP","../obj.js":"c6bJ","../render/EventType.js":"w2aV","../source/State.js":"mqbu","../asserts.js":"kWiW"}],"UVET":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asString=s,exports.asArray=u,exports.normalize=l,exports.toString=a,exports.isStringColor=p,exports.fromString=void 0;var t=require("./asserts.js"),e=require("./math.js");const r=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,n=/^([a-z]*)$|^hsla?\(.*\)$/i;function s(t){return"string"==typeof t?t:a(t)}function o(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const i=function(){const t={};let e=0;return function(r){let n;if(t.hasOwnProperty(r))n=t[r];else{if(e>=1024){let r=0;for(const n in t)0==(3&r++)&&(delete t[n],--e)}n=c(r),t[r]=n,++e}return n}}();function u(t){return Array.isArray(t)?t:i(t)}function c(e){let s,i,u,c,a;if(n.exec(e)&&(e=o(e)),r.exec(e)){const t=e.length-1;let r;r=t<=4?1:2;const n=4===t||8===t;s=parseInt(e.substr(1+0*r,r),16),i=parseInt(e.substr(1+1*r,r),16),u=parseInt(e.substr(1+2*r,r),16),c=n?parseInt(e.substr(1+3*r,r),16):255,1==r&&(s=(s<<4)+s,i=(i<<4)+i,u=(u<<4)+u,n&&(c=(c<<4)+c)),a=[s,i,u,c/255]}else 0==e.indexOf("rgba(")?l(a=e.slice(5,-1).split(",").map(Number)):0==e.indexOf("rgb(")?((a=e.slice(4,-1).split(",").map(Number)).push(1),l(a)):(0,t.assert)(!1,14);return a}function l(t){return t[0]=(0,e.clamp)(t[0]+.5|0,0,255),t[1]=(0,e.clamp)(t[1]+.5|0,0,255),t[2]=(0,e.clamp)(t[2]+.5|0,0,255),t[3]=(0,e.clamp)(t[3],0,1),t}function a(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let r=t[1];r!=(0|r)&&(r=r+.5|0);let n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+r+","+n+","+(void 0===t[3]?1:t[3])+")"}function p(t){return n.test(t)&&(t=o(t)),r.test(t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(")}exports.fromString=i;
},{"./asserts.js":"kWiW","./math.js":"crjC"}],"PxyX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asColorLike=e;var r=require("./color.js");function e(e){return Array.isArray(e)?(0,r.toString)(e):e}
},{"./color.js":"UVET"}],"MHGO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCanvasContext2D=t,exports.outerWidth=r,exports.outerHeight=n,exports.replaceNode=o,exports.removeNode=i,exports.removeChildren=s,exports.replaceChildren=a;var e=require("./has.js");function t(t,r,n){const o=n&&n.length?n.shift():e.WORKER_OFFSCREEN_CANVAS?new OffscreenCanvas(t||300,r||300):document.createElement("canvas");return t&&(o.width=t),r&&(o.height=r),o.getContext("2d")}function r(e){let t=e.offsetWidth;const r=getComputedStyle(e);return t+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function n(e){let t=e.offsetHeight;const r=getComputedStyle(e);return t+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function o(e,t){const r=t.parentNode;r&&r.replaceChild(e,t)}function i(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function s(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function a(e,t){const r=e.childNodes;for(let n=0;;++n){const o=r[n],i=t[n];if(!o&&!i)break;o!==i&&(o?i?e.insertBefore(i,o):(e.removeChild(o),--n):e.appendChild(i))}}
},{"./has.js":"E1VY"}],"ujHu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};exports.default=e;
},{}],"omMx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFontParameters=exports.CLASS_COLLAPSED=exports.CLASS_CONTROL=exports.CLASS_UNSUPPORTED=exports.CLASS_UNSELECTABLE=exports.CLASS_SELECTABLE=exports.CLASS_HIDDEN=void 0;const e="ol-hidden";exports.CLASS_HIDDEN="ol-hidden";const o="ol-selectable";exports.CLASS_SELECTABLE="ol-selectable";const t="ol-unselectable";exports.CLASS_UNSELECTABLE="ol-unselectable";const s="ol-unsupported";exports.CLASS_UNSUPPORTED="ol-unsupported";const l="ol-control";exports.CLASS_CONTROL="ol-control";const r="ol-collapsed";exports.CLASS_COLLAPSED="ol-collapsed";const n=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),a=["style","variant","weight","size","lineHeight","family"],i=function(e){const o=e.match(n);if(!o)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let s=0,l=a.length;s<l;++s){const e=o[s+1];void 0!==e&&(t[a[s]]=e)}return t.families=t.family.split(/,\s?/),t};exports.getFontParameters=i;
},{}],"lTc7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.measureTextWidth=O,exports.measureAndCacheTextWidth=w,exports.measureTextWidths=H,exports.rotateAtOffset=M,exports.drawImageOrLabel=N,exports.createTransformString=q,exports.measureTextHeight=exports.registerFont=exports.textHeights=exports.labelCache=exports.checkedFonts=exports.defaultLineWidth=exports.defaultPadding=exports.defaultTextBaseline=exports.defaultTextAlign=exports.defaultStrokeStyle=exports.defaultMiterLimit=exports.defaultLineJoin=exports.defaultLineDashOffset=exports.defaultLineDash=exports.defaultLineCap=exports.defaultFillStyle=exports.defaultFont=void 0;var t=require("../css.js"),e=require("../dom.js"),n=require("../obj.js"),s=l(require("../Object.js")),r=l(require("../events/Target.js")),o=require("../has.js"),a=require("../transform.js");function l(t){return t&&t.__esModule?t:{default:t}}const i="10px sans-serif";exports.defaultFont=i;const u="#000";exports.defaultFillStyle="#000";const c="round";exports.defaultLineCap="round";const d=[];exports.defaultLineDash=d;const f=0;exports.defaultLineDashOffset=0;const p="round";exports.defaultLineJoin="round";const x=10;exports.defaultMiterLimit=10;const g="#000";exports.defaultStrokeStyle="#000";const h="center";exports.defaultTextAlign="center";const m="middle";exports.defaultTextBaseline="middle";const y=[0,0,0,0];exports.defaultPadding=y;const v=1;exports.defaultLineWidth=1;const C=new s.default;exports.checkedFonts=C;const L=new r.default;exports.labelCache=L,L.setSize=function(){console.warn("labelCache is deprecated.")};let T,F=null;const S={};exports.textHeights=S;const b=function(){const e=100,s="32px ",r=["monospace","serif"],o=r.length,a="wmytzilWMYTZIL@#/&?$%10";let l,i;function u(t,e,n){let l=!0;for(let u=0;u<o;++u){const o=r[u];if(i=O(t+" "+e+" "+s+o,a),n!=o){const r=O(t+" "+e+" "+s+n+","+o,a);l=l&&r!=i}}return!!l}function c(){let t=!0;const s=C.getKeys();for(let r=0,o=s.length;r<o;++r){const o=s[r];C.get(o)<e&&(u.apply(this,o.split("\n"))?((0,n.clear)(S),F=null,T=void 0,C.set(o,e)):(C.set(o,C.get(o)+1,!0),t=!1))}t&&(clearInterval(l),l=void 0)}return function(n){const s=(0,t.getFontParameters)(n);if(!s)return;const r=s.families;for(let t=0,o=r.length;t<o;++t){const n=r[t],o=s.style+"\n"+s.weight+"\n"+n;void 0===C.get(o)&&(C.set(o,e,!0),u(s.style,s.weight,n)||(C.set(o,0,!0),void 0===l&&(l=setInterval(c,32))))}}}();exports.registerFont=b;const A=function(){let e;const n=S;return function(s){let r=n[s];if(null==r)if(o.WORKER_OFFSCREEN_CANVAS){const e=(0,t.getFontParameters)(s),n=j(s,"Žg"),r=isNaN(Number(e.lineHeight))?1.2:Number(e.lineHeight);S[s]=r*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else e||((e=document.createElement("div")).innerHTML="M",e.style.margin="0 !important",e.style.padding="0 !important",e.style.position="absolute !important",e.style.left="-99999px !important"),e.style.font=s,document.body.appendChild(e),r=e.offsetHeight,n[s]=r,document.body.removeChild(e);return r}}();function j(t,n){return F||(F=(0,e.createCanvasContext2D)(1,1)),t!=T&&(F.font=t,T=F.font),F.measureText(n)}function O(t,e){return j(t,e).width}function w(t,e,n){if(e in n)return n[e];const s=O(t,e);return n[e]=s,s}function H(t,e,n){const s=e.length;let r=0;for(let o=0;o<s;++o){const s=O(t,e[o]);r=Math.max(r,s),n.push(s)}return r}function M(t,e,n,s){0!==e&&(t.translate(n,s),t.rotate(e),t.translate(-n,-s))}function N(t,e,n,s,r,o,a,l,i,u,c){t.save(),1!==n&&(t.globalAlpha*=n),e&&t.setTransform.apply(t,e),s.contextInstructions?(t.translate(i,u),t.scale(c,c),W(s,t)):t.drawImage(s,r,o,a,l,i,u,a*c,l*c),t.restore()}function W(t,e){const n=t.contextInstructions;for(let s=0,r=n.length;s<r;s+=2)Array.isArray(n[s+1])?e[n[s]].apply(e,n[s+1]):e[n[s]]=n[s+1]}exports.measureTextHeight=A;let _=null;function q(t){return o.WORKER_OFFSCREEN_CANVAS?(0,a.toString)(t):(_||(_=(0,e.createCanvasContext2D)(1,1).canvas),_.style.transform=(0,a.toString)(t),_.style.transform)}
},{"../css.js":"omMx","../dom.js":"MHGO","../obj.js":"c6bJ","../Object.js":"X18S","../events/Target.js":"VT2J","../has.js":"E1VY","../transform.js":"fXLG"}],"iiKG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js");class e{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.displacement_=t.displacement}clone(){return new e({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getDisplacement(){return this.displacement_}getAnchor(){return(0,t.abstract)()}getImage(e){return(0,t.abstract)()}getHitDetectionImage(e){return(0,t.abstract)()}getImageState(){return(0,t.abstract)()}getImageSize(){return(0,t.abstract)()}getHitDetectionImageSize(){return(0,t.abstract)()}getOrigin(){return(0,t.abstract)()}getSize(){return(0,t.abstract)()}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t}listenImageChange(e){(0,t.abstract)()}load(){(0,t.abstract)()}unlistenImageChange(e){(0,t.abstract)()}}var a=e;exports.default=a;
},{"../util.js":"gvrh"}],"nYUC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../color.js"),e=require("../colorlike.js"),i=require("../dom.js"),s=r(require("../ImageState.js")),a=require("../render/canvas.js"),n=r(require("./Image.js"));function r(t){return t&&t.__esModule?t:{default:t}}class l extends n.default{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0]}),this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.render()}clone(){const t=new l({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t}getAnchor(){return this.anchor_}getAngle(){return this.angle_}getFill(){return this.fill_}getHitDetectionImage(t){return this.hitDetectionCanvas_}getImage(t){return this.canvas_}getImageSize(){return this.imageSize_}getHitDetectionImageSize(){return this.hitDetectionImageSize_}getImageState(){return s.default.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}listenImageChange(t){}load(){}unlistenImageChange(t){}render(){let t,s=a.defaultLineCap,n=a.defaultLineJoin,r=0,l=null,o=0,h=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=a.defaultStrokeStyle),t=(0,e.asColorLike)(t),void 0===(h=this.stroke_.getWidth())&&(h=a.defaultLineWidth),l=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(n=this.stroke_.getLineJoin())&&(n=a.defaultLineJoin),void 0===(s=this.stroke_.getLineCap())&&(s=a.defaultLineCap),void 0===(r=this.stroke_.getMiterLimit())&&(r=a.defaultMiterLimit));let u=2*(this.radius_+h)+1;const d={strokeStyle:t,strokeWidth:h,size:u,lineCap:s,lineDash:l,lineDashOffset:o,lineJoin:n,miterLimit:r},_=(0,i.createCanvasContext2D)(u,u);this.canvas_=_.canvas;const g=u=this.canvas_.width,c=this.getDisplacement();this.draw_(d,_,0,0),this.createHitDetectionCanvas_(d),this.anchor_=[u/2-c[0],u/2+c[1]],this.size_=[u,u],this.imageSize_=[g,g]}draw_(t,i,s,n){let r,l,o;i.setTransform(1,0,0,1,0,0),i.translate(s,n),i.beginPath();let h=this.points_;if(h===1/0)i.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{const e=void 0!==this.radius2_?this.radius2_:this.radius_;for(e!==this.radius_&&(h*=2),r=0;r<=h;r++)l=2*r*Math.PI/h-Math.PI/2+this.angle_,o=r%2==0?this.radius_:e,i.lineTo(t.size/2+o*Math.cos(l),t.size/2+o*Math.sin(l))}if(this.fill_){let t=this.fill_.getColor();null===t&&(t=a.defaultFillStyle),i.fillStyle=(0,e.asColorLike)(t),i.fill()}this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,i.setLineDash&&t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineCap=t.lineCap,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke()),i.closePath()}createHitDetectionCanvas_(e){if(this.hitDetectionImageSize_=[e.size,e.size],this.hitDetectionCanvas_=this.canvas_,this.fill_){let s=this.fill_.getColor(),a=0;if("string"==typeof s&&(s=(0,t.asArray)(s)),null===s?a=1:Array.isArray(s)&&(a=4===s.length?s[3]:1),0===a){const t=(0,i.createCanvasContext2D)(e.size,e.size);this.hitDetectionCanvas_=t.canvas,this.drawHitDetectionCanvas_(e,t,0,0)}}}drawHitDetectionCanvas_(t,e,i,s){e.setTransform(1,0,0,1,0,0),e.translate(i,s),e.beginPath();let n=this.points_;if(n===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{const i=void 0!==this.radius2_?this.radius2_:this.radius_;let s,a,r;for(i!==this.radius_&&(n*=2),s=0;s<=n;s++)r=2*s*Math.PI/n-Math.PI/2+this.angle_,a=s%2==0?this.radius_:i,e.lineTo(t.size/2+a*Math.cos(r),t.size/2+a*Math.sin(r))}e.fillStyle=a.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()}}var o=l;exports.default=o;
},{"../color.js":"UVET","../colorlike.js":"PxyX","../dom.js":"MHGO","../ImageState.js":"ujHu","../render/canvas.js":"lTc7","./Image.js":"iiKG"}],"fCIq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./RegularShape.js"));function t(e){return e&&e.__esModule?e:{default:e}}class s extends e.default{constructor(e){const t=e||{};super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,displacement:void 0!==t.displacement?t.displacement:[0,0]})}clone(){const e=new s({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return e.setOpacity(this.getOpacity()),e.setScale(this.getScale()),e}setRadius(e){this.radius_=e,this.render()}}var i=s;exports.default=i;
},{"./RegularShape.js":"nYUC"}],"BtYk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class o{constructor(o){const r=o||{};this.color_=void 0!==r.color?r.color:null}clone(){const r=this.getColor();return new o({color:Array.isArray(r)?r.slice():r||void 0})}getColor(){return this.color_}setColor(o){this.color_=o}}var r=o;exports.default=r;
},{}],"PPeM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class i{constructor(i){const t=i||{};this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new i({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(i){this.color_=i}setLineCap(i){this.lineCap_=i}setLineDash(i){this.lineDash_=i}setLineDashOffset(i){this.lineDashOffset_=i}setLineJoin(i){this.lineJoin_=i}setMiterLimit(i){this.miterLimit_=i}setWidth(i){this.width_=i}}var t=i;exports.default=t;
},{}],"AL4u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toFunction=s,exports.createDefaultStyle=d,exports.createEditingStyle=f,exports.default=void 0;var e=require("../asserts.js"),t=n(require("../geom/GeometryType.js")),r=n(require("./Circle.js")),i=n(require("./Fill.js")),o=n(require("./Stroke.js"));function n(e){return e&&e.__esModule?e:{default:e}}class l{constructor(e){const t=e||{};this.geometry_=null,this.geometryFunction_=a,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new l({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=a,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function s(t){let r;if("function"==typeof t)r=t;else{let i;if(Array.isArray(t))i=t;else{(0,e.assert)("function"==typeof t.getZIndex,41),i=[t]}r=function(){return i}}return r}let u=null;function d(e,t){if(!u){const e=new i.default({color:"rgba(255,255,255,0.4)"}),t=new o.default({color:"#3399CC",width:1.25});u=[new l({image:new r.default({fill:e,stroke:t,radius:5}),fill:e,stroke:t})]}return u}function f(){const e={},n=[255,255,255,1],s=[0,153,255,1];return e[t.default.POLYGON]=[new l({fill:new i.default({color:[255,255,255,.5]})})],e[t.default.MULTI_POLYGON]=e[t.default.POLYGON],e[t.default.LINE_STRING]=[new l({stroke:new o.default({color:n,width:5})}),new l({stroke:new o.default({color:s,width:3})})],e[t.default.MULTI_LINE_STRING]=e[t.default.LINE_STRING],e[t.default.CIRCLE]=e[t.default.POLYGON].concat(e[t.default.LINE_STRING]),e[t.default.POINT]=[new l({image:new r.default({radius:6,fill:new i.default({color:s}),stroke:new o.default({color:n,width:1.5})}),zIndex:1/0})],e[t.default.MULTI_POINT]=e[t.default.POINT],e[t.default.GEOMETRY_COLLECTION]=e[t.default.POLYGON].concat(e[t.default.LINE_STRING],e[t.default.POINT]),e}function a(e){return e.getGeometry()}var g=l;exports.default=g;
},{"../asserts.js":"kWiW","../geom/GeometryType.js":"I79K","./Circle.js":"fCIq","./Fill.js":"BtYk","./Stroke.js":"PPeM"}],"QB7Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./Layer.js")),t=require("../obj.js"),r=require("../style/Style.js");function i(e){return e&&e.__esModule?e:{default:e}}const n={RENDER_ORDER:"renderOrder"};class s extends e.default{constructor(e){const r=e||{},i=(0,t.assign)({},r);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,super(i),this.declutter_=void 0!==r.declutter&&r.declutter,this.renderBuffer_=void 0!==r.renderBuffer?r.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(r.style),this.updateWhileAnimating_=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,this.updateWhileInteracting_=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(n.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}setRenderOrder(e){this.set(n.RENDER_ORDER,e)}setStyle(e){this.style_=void 0!==e?e:r.createDefaultStyle,this.styleFunction_=null===e?void 0:(0,r.toFunction)(this.style_),this.changed()}}var u=s;exports.default=u;
},{"./Layer.js":"t6QM","../obj.js":"c6bJ","../style/Style.js":"AL4u"}],"LSsd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ANIMATING:0,INTERACTING:1};exports.default=e;
},{}],"TEZU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class e{drawCustom(e,t,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}var t=e;exports.default=t;
},{}],"wcyw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.closePathInstruction=exports.beginPathInstruction=exports.strokeInstruction=exports.fillInstruction=void 0;const t={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},o=[t.FILL];exports.fillInstruction=o;const s=[t.STROKE];exports.strokeInstruction=s;const e=[t.BEGIN_PATH];exports.beginPathInstruction=e;const r=[t.CLOSE_PATH];exports.closePathInstruction=r;var n=t;exports.default=n;
},{}],"VnmA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../array.js"),e=require("../../colorlike.js"),i=require("../../extent.js"),n=u(require("../../extent/Relationship.js")),s=u(require("../../geom/GeometryType.js")),r=require("../../geom/flat/inflate.js"),o=u(require("../VectorContext.js")),l=require("../canvas.js"),a=u(require("./Instruction.js"));function u(t){return t&&t.__esModule?t:{default:t}}class h extends o.default{constructor(t,e,i,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})}appendFlatCoordinates(t,e,s,r,o,l){let a=this.coordinates.length;const u=this.getBufferedMaxExtent();l&&(e+=r);let h=t[e],d=t[e+1];const c=this.tmpCoordinate_;let f,p,L,g=!0;for(f=e+r;f<s;f+=r)c[0]=t[f],c[1]=t[f+1],(L=(0,i.coordinateRelationship)(u,c))!==p?(g&&(this.coordinates[a++]=h,this.coordinates[a++]=d),this.coordinates[a++]=c[0],this.coordinates[a++]=c[1],g=!1):L===n.default.INTERSECTING?(this.coordinates[a++]=c[0],this.coordinates[a++]=c[1],g=!1):g=!0,h=c[0],d=c[1],p=L;return(o&&g||f===e+r)&&(this.coordinates[a++]=h,this.coordinates[a++]=d),a}drawCustomCoordinates_(t,e,i,n,s){for(let r=0,o=i.length;r<o;++r){const o=i[r],l=this.appendFlatCoordinates(t,e,o,n,!1,!1);s.push(l),e=o}return e}drawCustom(t,e,i){this.beginGeometry(t,e);const n=t.getType(),o=t.getStride(),l=this.coordinates.length;let u,h,d,c,f;if(n==s.default.MULTI_POLYGON){u=(t=t).getOrientedFlatCoordinates(),c=[];const e=t.getEndss();f=0;for(let t=0,i=e.length;t<i;++t){const i=[];f=this.drawCustomCoordinates_(u,f,e[t],o,i),c.push(i)}this.instructions.push([a.default.CUSTOM,l,c,t,i,r.inflateMultiCoordinatesArray])}else n==s.default.POLYGON||n==s.default.MULTI_LINE_STRING?(d=[],u=n==s.default.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),f=this.drawCustomCoordinates_(u,0,t.getEnds(),o,d),this.instructions.push([a.default.CUSTOM,l,d,t,i,r.inflateCoordinatesArray])):n==s.default.LINE_STRING||n==s.default.MULTI_POINT?(u=t.getFlatCoordinates(),h=this.appendFlatCoordinates(u,0,u.length,o,!1,!1),this.instructions.push([a.default.CUSTOM,l,h,t,i,r.inflateCoordinates])):n==s.default.POINT&&(u=t.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),h=this.coordinates.length,this.instructions.push([a.default.CUSTOM,l,h,t,i]));this.endGeometry(e)}beginGeometry(t,e){const i=t.getExtent();this.beginGeometryInstruction1_=[a.default.BEGIN_GEOMETRY,e,0,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[a.default.BEGIN_GEOMETRY,e,0,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let i;e.reverse();const n=e.length;let s,r,o=-1;for(i=0;i<n;++i)(r=(s=e[i])[0])==a.default.END_GEOMETRY?o=i:r==a.default.BEGIN_GEOMETRY&&(s[2]=i,(0,t.reverseSubArray)(this.hitDetectionInstructions,o,i),o=-1)}setFillStrokeStyle(t,i){const n=this.state;if(t){const i=t.getColor();n.fillStyle=(0,e.asColorLike)(i||l.defaultFillStyle)}else n.fillStyle=void 0;if(i){const t=i.getColor();n.strokeStyle=(0,e.asColorLike)(t||l.defaultStrokeStyle);const s=i.getLineCap();n.lineCap=void 0!==s?s:l.defaultLineCap;const r=i.getLineDash();n.lineDash=r?r.slice():l.defaultLineDash;const o=i.getLineDashOffset();n.lineDashOffset=o||l.defaultLineDashOffset;const a=i.getLineJoin();n.lineJoin=void 0!==a?a:l.defaultLineJoin;const u=i.getWidth();n.lineWidth=void 0!==u?u:l.defaultLineWidth;const h=i.getMiterLimit();n.miterLimit=void 0!==h?h:l.defaultMiterLimit,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[a.default.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[a.default.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(e,i){const n=e.strokeStyle,s=e.lineCap,r=e.lineDash,o=e.lineDashOffset,l=e.lineJoin,a=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=s||r!=e.currentLineDash&&!(0,t.equals)(e.currentLineDash,r)||e.currentLineDashOffset!=o||e.currentLineJoin!=l||e.currentLineWidth!=a||e.currentMiterLimit!=u)&&(void 0!==n&&i.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=s,e.currentLineDash=r,e.currentLineDashOffset=o,e.currentLineJoin=l,e.currentLineWidth=a,e.currentMiterLimit=u)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[a.default.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,i.clone)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;(0,i.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}var d=h;exports.default=d;
},{"../../array.js":"uHwP","../../colorlike.js":"PxyX","../../extent.js":"E4kN","../../extent/Relationship.js":"sf50","../../geom/GeometryType.js":"I79K","../../geom/flat/inflate.js":"RTsg","../VectorContext.js":"TEZU","../canvas.js":"lTc7","./Instruction.js":"wcyw"}],"C74D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("./Instruction.js")),i=h(require("./Builder.js"));function h(t){return t&&t.__esModule?t:{default:t}}class s extends i.default{constructor(t,i,h,s){super(t,i,h,s),this.declutterGroups_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}drawCoordinates_(t,i,h,s){return this.appendFlatCoordinates(t,i,h,s,!1,!1)}drawPoint(i,h){if(!this.image_)return;this.beginGeometry(i,h);const s=i.getFlatCoordinates(),e=i.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(s,0,s.length,e);this.instructions.push([t.default.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([t.default.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(h)}drawMultiPoint(i,h){if(!this.image_)return;this.beginGeometry(i,h);const s=i.getFlatCoordinates(),e=i.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(s,0,s.length,e);this.instructions.push([t.default.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([t.default.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(h)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,i){const h=t.getAnchor(),s=t.getSize(),e=t.getHitDetectionImage(1),o=t.getImage(1),r=t.getOrigin();this.anchorX_=h[0],this.anchorY_=h[1],this.declutterGroups_=i,this.hitDetectionImage_=e,this.image_=o,this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=s[0]}}var e=s;exports.default=e;
},{"./Instruction.js":"wcyw","./Builder.js":"VnmA"}],"Ifpf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./Instruction.js")),e=i(require("./Builder.js"));function i(t){return t&&t.__esModule?t:{default:t}}function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=s?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(i,r,o):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}class r extends e.default{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinates_(e,i,n,s){const r=this.coordinates.length,o=this.appendFlatCoordinates(e,i,n,s,!1,!1),u=[t.default.MOVE_TO_LINE_TO,r,o];return this.instructions.push(u),this.hitDetectionInstructions.push(u),n}drawLineString(e,i){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(void 0===s||void 0===r)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,i),this.hitDetectionInstructions.push([t.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],t.beginPathInstruction);const o=e.getFlatCoordinates(),u=e.getStride();this.drawFlatCoordinates_(o,0,o.length,u),this.hitDetectionInstructions.push(t.strokeInstruction),this.endGeometry(i)}drawMultiLineString(e,i){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(void 0===s||void 0===r)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,i),this.hitDetectionInstructions.push([t.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],t.beginPathInstruction);const o=e.getEnds(),u=e.getFlatCoordinates(),a=e.getStride();let l=0;for(let t=0,h=o.length;t<h;++t)l=this.drawFlatCoordinates_(u,l,o[t],a);this.hitDetectionInstructions.push(t.strokeInstruction),this.endGeometry(i)}finish(){const e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(t.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(t.strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(t.beginPathInstruction)}}var o=r;exports.default=o;
},{"./Instruction.js":"wcyw","./Builder.js":"VnmA"}],"qTuD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../geom/flat/simplify.js"),e=require("../canvas.js"),i=r(require("./Instruction.js")),s=n(require("./Builder.js"));function n(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=s?Object.getOwnPropertyDescriptor(t,n):null;r&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]}return i.default=t,e&&e.set(t,i),i}class l extends s.default{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinatess_(t,e,s,n){const o=this.state,r=void 0!==o.fillStyle,l=void 0!==o.strokeStyle,u=s.length;this.instructions.push(i.beginPathInstruction),this.hitDetectionInstructions.push(i.beginPathInstruction);for(let h=0;h<u;++h){const o=s[h],r=this.coordinates.length,u=this.appendFlatCoordinates(t,e,o,n,!0,!l),c=[i.default.MOVE_TO_LINE_TO,r,u];this.instructions.push(c),this.hitDetectionInstructions.push(c),l&&(this.instructions.push(i.closePathInstruction),this.hitDetectionInstructions.push(i.closePathInstruction)),e=o}return r&&(this.instructions.push(i.fillInstruction),this.hitDetectionInstructions.push(i.fillInstruction)),l&&(this.instructions.push(i.strokeInstruction),this.hitDetectionInstructions.push(i.strokeInstruction)),e}drawCircle(t,s){const n=this.state,o=n.fillStyle,r=n.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,s),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([i.default.SET_FILL_STYLE,e.defaultFillStyle]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([i.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const l=t.getFlatCoordinates(),u=t.getStride(),h=this.coordinates.length;this.appendFlatCoordinates(l,0,l.length,u,!1,!1);const c=[i.default.CIRCLE,h];this.instructions.push(i.beginPathInstruction,c),this.hitDetectionInstructions.push(i.beginPathInstruction,c),void 0!==n.fillStyle&&(this.instructions.push(i.fillInstruction),this.hitDetectionInstructions.push(i.fillInstruction)),void 0!==n.strokeStyle&&(this.instructions.push(i.strokeInstruction),this.hitDetectionInstructions.push(i.strokeInstruction)),this.endGeometry(s)}drawPolygon(t,s){const n=this.state,o=n.fillStyle,r=n.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,s),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([i.default.SET_FILL_STYLE,e.defaultFillStyle]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([i.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const l=t.getEnds(),u=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(u,0,l,h),this.endGeometry(s)}drawMultiPolygon(t,s){const n=this.state,o=n.fillStyle,r=n.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,s),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([i.default.SET_FILL_STYLE,e.defaultFillStyle]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([i.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const l=t.getEndss(),u=t.getOrientedFlatCoordinates(),h=t.getStride();let c=0;for(let e=0,i=l.length;e<i;++e)c=this.drawFlatCoordinatess_(u,c,l[e],h);this.endGeometry(s)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(0!==e){const i=this.coordinates;for(let s=0,n=i.length;s<n;++s)i[s]=(0,t.snap)(i[s],e)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}var u=l;exports.default=u;
},{"../../geom/flat/simplify.js":"o8JQ","../canvas.js":"lTc7","./Instruction.js":"wcyw","./Builder.js":"VnmA"}],"xmED":[function(require,module,exports) {
"use strict";function t(t,e,o,r,s){let n,c,i,u,a,d,h,f,l,p,v=o,M=o,x=0,_=0,b=o;for(c=o;c<r;c+=s){const o=e[c],r=e[c+1];void 0!==a&&(l=o-a,p=r-d,u=Math.sqrt(l*l+p*p),void 0!==h&&(_+=i,(n=Math.acos((h*l+f*p)/(i*u)))>t&&(_>x&&(x=_,v=b,M=c),_=0,b=c-s)),i=u,h=l,f=p),a=o,d=r}return(_+=u)>x?[b,c]:[v,M]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchingChunk=t;
},{}],"AxYm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINT:"point",LINE:"line"};exports.default=e;
},{}],"WEnl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TEXT_ALIGN=void 0;var t=require("../../util.js"),e=require("../../colorlike.js"),i=require("../../extent.js"),s=require("../../geom/flat/straightchunk.js"),l=h(require("../../geom/GeometryType.js")),a=require("../canvas.js"),n=h(require("./Instruction.js")),o=h(require("./Builder.js")),r=h(require("../../style/TextPlacement.js"));function h(t){return t&&t.__esModule?t:{default:t}}const u={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};exports.TEXT_ALIGN=u;class f extends o.default{constructor(t,e,i,s){super(t,e,i,s),this.declutterGroups_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_=""}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const o=this.textFillState_,h=this.textStrokeState_,u=this.textState_;if(""===this.text_||!u||!o&&!h)return;let f=this.coordinates.length;const d=t.getType();let g,c,x=null,_=2,S=2;if(u.placement===r.default.LINE){if(!(0,i.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;let a;if(x=t.getFlatCoordinates(),S=t.getStride(),d==l.default.LINE_STRING)a=[x.length];else if(d==l.default.MULTI_LINE_STRING)a=t.getEnds();else if(d==l.default.POLYGON)a=t.getEnds().slice(0,1);else if(d==l.default.MULTI_POLYGON){const e=t.getEndss();for(a=[],g=0,c=e.length;g<c;++g)a.push(e[g][0])}this.beginGeometry(t,e);const n=u.textAlign;let o,r=0;for(let t=0,e=a.length;t<e;++t){if(null==n){const e=(0,s.matchingChunk)(u.maxAngle,x,r,a[t],S);r=e[0],o=e[1]}else o=a[t];for(g=r;g<o;g+=S)this.coordinates.push(x[g],x[g+1]);_=this.coordinates.length,r=a[t];const e=this.declutterGroups_?0===t?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(f,_,e),f=_}this.endGeometry(e)}else{let i=null;switch(u.overflow||(i=[]),d){case l.default.POINT:case l.default.MULTI_POINT:_=(x=t.getFlatCoordinates()).length;break;case l.default.LINE_STRING:x=t.getFlatMidpoint();break;case l.default.CIRCLE:x=t.getCenter();break;case l.default.MULTI_LINE_STRING:_=(x=t.getFlatMidpoints()).length;break;case l.default.POLYGON:x=t.getFlatInteriorPoint(),u.overflow||i.push(x[2]/this.resolution),S=3;break;case l.default.MULTI_POLYGON:const e=t.getFlatInteriorPoints();for(x=[],g=0,c=e.length;g<c;g+=3)u.overflow||i.push(e[g+2]/this.resolution),x.push(e[g],e[g+1]);if(0==(_=x.length))return}_=this.appendFlatCoordinates(x,0,_,S,!1,!1),this.saveTextStates_(),(u.backgroundFill||u.backgroundStroke)&&(this.setFillStrokeStyle(u.backgroundFill,u.backgroundStroke),u.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),u.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);const s=this.pixelRatio;this.instructions.push([n.default.DRAW_IMAGE,f,_,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,u.padding==a.defaultPadding?a.defaultPadding:u.padding.map(function(t){return t*s}),!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),this.hitDetectionInstructions.push([n.default.DRAW_IMAGE,f,_,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,u.padding,!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:e.font,textAlign:e.textAlign||a.defaultTextAlign,textBaseline:e.textBaseline||a.defaultTextBaseline,scale:e.scale});const n=this.fillKey_;i&&(n in this.fillStates||(this.fillStates[n]={fillStyle:i.fillStyle}))}drawChars_(t,e,i){const s=this.textStrokeState_,l=this.textState_,a=this.strokeKey_,o=this.textKey_,r=this.fillKey_;this.saveTextStates_();const h=this.pixelRatio,f=u[l.textBaseline],d=this.textOffsetY_*h,g=this.text_,c=l.scale,x=s?s.lineWidth*c/2:0;this.instructions.push([n.default.DRAW_CHARS,t,e,f,i,l.overflow,r,l.maxAngle,h,d,a,x*h,g,o,1]),this.hitDetectionInstructions.push([n.default.DRAW_CHARS,t,e,f,i,l.overflow,r,l.maxAngle,1,d,a,x,g,o,1/h])}setTextStyle(i,s){let l,n,o;if(i){this.declutterGroups_=s;const r=i.getFill();r?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=(0,e.asColorLike)(r.getColor()||a.defaultFillStyle)):(n=null,this.textFillState_=n);const h=i.getStroke();if(h){(o=this.textStrokeState_)||(o={},this.textStrokeState_=o);const t=h.getLineDash(),i=h.getLineDashOffset(),s=h.getWidth(),l=h.getMiterLimit();o.lineCap=h.getLineCap()||a.defaultLineCap,o.lineDash=t?t.slice():a.defaultLineDash,o.lineDashOffset=void 0===i?a.defaultLineDashOffset:i,o.lineJoin=h.getLineJoin()||a.defaultLineJoin,o.lineWidth=void 0===s?a.defaultLineWidth:s,o.miterLimit=void 0===l?a.defaultMiterLimit:l,o.strokeStyle=(0,e.asColorLike)(h.getColor()||a.defaultStrokeStyle)}else o=null,this.textStrokeState_=o;l=this.textState_;const u=i.getFont()||a.defaultFont;(0,a.registerFont)(u);const f=i.getScale();l.overflow=i.getOverflow(),l.font=u,l.maxAngle=i.getMaxAngle(),l.placement=i.getPlacement(),l.textAlign=i.getTextAlign(),l.textBaseline=i.getTextBaseline()||a.defaultTextBaseline,l.backgroundFill=i.getBackgroundFill(),l.backgroundStroke=i.getBackgroundStroke(),l.padding=i.getPadding()||a.defaultPadding,l.scale=void 0===f?1:f;const d=i.getOffsetX(),g=i.getOffsetY(),c=i.getRotateWithView(),x=i.getRotation();this.text_=i.getText()||"",this.textOffsetX_=void 0===d?0:d,this.textOffsetY_=void 0===g?0:g,this.textRotateWithView_=void 0!==c&&c,this.textRotation_=void 0===x?0:x,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:(0,t.getUid)(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=l.font+l.scale+(l.textAlign||"?")+(l.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+(0,t.getUid)(n.fillStyle):""}else this.text_=""}}var d=f;exports.default=d;
},{"../../util.js":"gvrh","../../colorlike.js":"PxyX","../../extent.js":"E4kN","../../geom/flat/straightchunk.js":"xmED","../../geom/GeometryType.js":"I79K","../canvas.js":"lTc7","./Instruction.js":"wcyw","./Builder.js":"VnmA","../../style/TextPlacement.js":"AxYm"}],"ln4p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../extent.js"),t=l(require("./Builder.js")),i=l(require("./ImageBuilder.js")),r=l(require("./LineStringBuilder.js")),s=l(require("./PolygonBuilder.js")),u=l(require("./TextBuilder.js"));function l(e){return e&&e.__esModule?e:{default:e}}const n={Circle:s.default,Default:t.default,Image:i.default,LineString:r.default,Polygon:s.default,Text:u.default};class d{constructor(e,t,i,r,s){this.declutter_=s,this.declutterGroups_=null,this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}addDeclutter(t){let i=null;return this.declutter_&&(t?(i=this.declutterGroups_)[0][4]++:(i=[(0,e.createEmpty)()],this.declutterGroups_=i,i[0].push(1))),i}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=void 0!==e?e.toString():"0";let r=this.buildersByZIndex_[i];void 0===r&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];if(void 0===s){s=new(0,n[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}}var o=d;exports.default=o;
},{"../../extent.js":"E4kN","./Builder.js":"VnmA","./ImageBuilder.js":"C74D","./LineStringBuilder.js":"Ifpf","./PolygonBuilder.js":"qTuD","./TextBuilder.js":"WEnl"}],"NNDA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};exports.default=e;
},{}],"mSaU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawTextOnPath=a;var t=require("../../math.js");function a(a,e,r,h,o,M,n,s,l,p,u){const P=[],c=a[e]>a[r-h],i=o.length;let f,I,w=a[e],d=a[e+1],q=a[e+=h],v=a[e+1],x=0,b=Math.sqrt(Math.pow(q-w,2)+Math.pow(v-d,2)),j=!1;for(let O=0;O<i;++O){const _=o[f=c?i-O-1:O],g=s*l(p,_,u),m=M+g/2;for(;e<r-h&&x+b<m;)w=q,d=v,q=a[e+=h],v=a[e+1],x+=b,b=Math.sqrt(Math.pow(q-w,2)+Math.pow(v-d,2));const y=m-x;let T=Math.atan2(v-d,q-w);if(c&&(T+=T>0?-Math.PI:Math.PI),void 0!==I){let t=T-I;if(j=j||0!==t,t+=t>Math.PI?-2*Math.PI:t<-Math.PI?2*Math.PI:0,Math.abs(t)>n)return null}I=T;const k=y/b,z=(0,t.lerp)(w,q,k),A=(0,t.lerp)(d,v,k);P[f]=[z,A,g/2,T,_],M+=g}return j?P:[[P[0][0],P[0][1],P[0][2],P[0][3],o]]}
},{"../../math.js":"crjC"}],"tMOH":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,i=arguments[3];!function(i,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t&&t.amd?t(n):(i=i||self).RBush=n()}(this,function(){"use strict";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1),m=Math.max(e,Math.floor(r-s*f/o+u)),c=Math.min(a,Math.floor(r+(o-s)*f/o+u));t(n,r,m,c,h)}var p=n[r],d=e,x=a;for(i(n,e,r),h(n[a],p)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;h(n[d],p)<0;)d++;for(;h(n[x],p)>0;)x--}0===h(n[e],p)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,o=void 0,s=void 0,l=void 0,u=void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});
},{}],"nM8P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../array.js"),e=require("../../extent.js"),i=require("../../geom/flat/length.js"),s=require("../../geom/flat/textpath.js"),l=require("../../geom/flat/transform.js"),a=require("../canvas.js"),n=u(require("./Instruction.js")),r=require("./TextBuilder.js"),h=require("../../transform.js"),o=u(require("rbush/rbush.js")),c=require("../../has.js");function u(t){return t&&t.__esModule?t:{default:t}}const d=(0,e.createEmpty)(),f=(0,h.create)(),p=[],_=[],g=[],x=[];class m{constructor(t,e,i,s){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,h.create)(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,s){const l=t+e+i+s;if(this.labels_[l])return this.labels_[l];const n=s?this.strokeStates[s]:null,h=i?this.fillStates[i]:null,o=this.textStates[e],u=this.pixelRatio,d=o.scale*u,f=r.TEXT_ALIGN[o.textAlign||a.defaultTextAlign],p=s&&n.lineWidth?n.lineWidth:0,_=t.split("\n"),g=_.length,x=[],m=(0,a.measureTextWidths)(o.font,_,x),T=(0,a.measureTextHeight)(o.font),b=T*g,S=m+p,y=[],k={width:Math.ceil((S+2)*d),height:Math.ceil((b+p)*d),contextInstructions:y};if(1!=d&&y.push("scale",[d,d]),y.push("font",o.font),s){y.push("strokeStyle",n.strokeStyle),y.push("lineWidth",p),y.push("lineCap",n.lineCap),y.push("lineJoin",n.lineJoin),y.push("miterLimit",n.miterLimit),(c.WORKER_OFFSCREEN_CANVAS?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(y.push("setLineDash",[n.lineDash]),y.push("lineDashOffset",n.lineDashOffset))}i&&y.push("fillStyle",h.fillStyle),y.push("textBaseline","middle"),y.push("textAlign","center");const L=.5-f,E=f*S+L*p;let I;if(s)for(I=0;I<g;++I)y.push("strokeText",[_[I],E+L*x[I],.5*(p+T)+I*T]);if(i)for(I=0;I<g;++I)y.push("fillText",[_[I],E+L*x[I],.5*(p+T)+I*T]);return this.labels_[l]=k,k}replayTextBackground_(t,e,i,s,l,a,n){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,l),t.lineTo.apply(t,e),a&&(this.alignFill_=a[2],this.fill_(t)),n&&(this.setStrokeStyle_(t,n),t.stroke())}replayImageOrLabel_(t,i,s,l,n,r,o,c,u,m,T,b,S,y,k,L,E,I){const R=E||I;i-=n*=S,s-=r*=S;const v=k+m>l.width?l.width-m:k,O=c+T>l.height?l.height-T:c,w=L[3]+v*S+L[1],A=L[0]+O*S+L[2],C=i-L[3],M=s-L[0];(R||0!==b)&&(p[0]=C,x[0]=C,p[1]=M,_[1]=M,_[0]=C+w,g[0]=_[0],g[1]=M+A,x[1]=g[1]);let D=null;if(0!==b){const t=i+n,l=s+r;D=(0,h.compose)(f,t,l,1,1,b,-t,-l),(0,h.apply)(f,p),(0,h.apply)(f,_),(0,h.apply)(f,g),(0,h.apply)(f,x),(0,e.createOrUpdate)(Math.min(p[0],_[0],g[0],x[0]),Math.min(p[1],_[1],g[1],x[1]),Math.max(p[0],_[0],g[0],x[0]),Math.max(p[1],_[1],g[1],x[1]),d)}else(0,e.createOrUpdate)(C,M,C+w,M+A,d);const P=t.canvas,N=I?I[2]*S/2:0,W=d[0]-N<=P.width&&d[2]+N>=0&&d[1]-N<=P.height&&d[3]+N>=0;if(y&&(i=Math.round(i),s=Math.round(s)),o){if(!W&&1==o[4])return;(0,e.extend)(o,d);const a=W?[t,D?D.slice(0):null,u,l,m,T,v,O,i,s,S]:null;a&&(R&&a.push(E,I,p.slice(0),_.slice(0),g.slice(0),x.slice(0)),o.push(a))}else W&&(R&&this.replayTextBackground_(t,p,_,g,x,E,I),(0,a.drawImageOrLabel)(t,D,u,l,m,T,v,O,i,s,S))}fill_(t){if(this.alignFill_){const e=(0,h.apply)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))}renderDeclutter(t,i,s,l){if(t&&t.length>5){const n=t[4];if(1==n||n==t.length-5){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:i};if(l||(l=new o.default(9)),!l.collides(n)){l.insert(n);for(let e=5,i=t.length;e<i;++e){const i=t[e],l=i[0],n=l.globalAlpha;n!==s&&(l.globalAlpha=s),i.length>11&&this.replayTextBackground_(i[0],i[13],i[14],i[15],i[16],i[11],i[12]),a.drawImageOrLabel.apply(void 0,i),n!==s&&(l.globalAlpha=n)}}t.length=5,(0,e.createOrUpdateEmpty)(t)}}return l}drawLabelWithPointPlacement_(t,e,i,s){const l=this.textStates[e],n=this.createLabel(t,e,s,i),h=this.strokeStates[i],o=this.pixelRatio,c=r.TEXT_ALIGN[l.textAlign||a.defaultTextAlign],u=r.TEXT_ALIGN[l.textBaseline||a.defaultTextBaseline],d=h&&h.lineWidth?h.lineWidth:0;return{label:n,anchorX:c*(n.width/o-2*l.scale)+2*(.5-c)*d,anchorY:u*n.height/o+2*(.5-u)*d}}execute_(o,c,u,d,f,p){let _;this.declutterItems.length=0,this.pixelCoordinates_&&(0,t.equals)(c,this.renderedTransform_)?_=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),_=(0,l.transform2D)(this.coordinates,0,this.coordinates.length,2,c,this.pixelCoordinates_),(0,h.setFromArray)(this.renderedTransform_,c));let g=0;const x=u.length;let m,T,b,S,y,k,L,E,I,R,v,O,w,A,C=0,M=0,D=0,P=null,N=null;const W=this.coordinateCache_,q=this.viewRotation_,j=Math.round(1e12*Math.atan2(-c[1],c[0]))/1e12,F={context:o,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:q},G=this.instructions!=u||this.overlaps?0:200;let B,X,Y;for(;g<x;){const t=u[g];switch(t[0]){case n.default.BEGIN_GEOMETRY:(B=t[1]).getGeometry()?void 0===p||(0,e.intersects)(p,t[3])?++g:g=t[2]+1:g=t[2];break;case n.default.BEGIN_PATH:M>G&&(this.fill_(o),M=0),D>G&&(o.stroke(),D=0),M||D||(o.beginPath(),S=NaN,y=NaN),++g;break;case n.default.CIRCLE:const l=_[C=t[1]],h=_[C+1],c=_[C+2]-l,u=_[C+3]-h,x=Math.sqrt(c*c+u*u);o.moveTo(l+x,h),o.arc(l,h,x,0,2*Math.PI,!0),++g;break;case n.default.CLOSE_PATH:o.closePath(),++g;break;case n.default.CUSTOM:C=t[1],m=t[2];const H=t[3],U=t[4],J=6==t.length?t[5]:void 0;F.geometry=H,F.feature=B,g in W||(W[g]=[]);const K=W[g];J?J(_,C,m,2,K):(K[0]=_[C],K[1]=_[C+1],K.length=2),U(K,F),++g;break;case n.default.DRAW_IMAGE:C=t[1],m=t[2],R=t[3],T=t[4],b=t[5],I=f?null:t[6];let V=t[7];const z=t[8],Q=t[9],Z=t[10],$=t[11];let tt=t[12];const et=t[13];let it,st,lt,at,nt=t[14];if(!R&&t.length>=19){v=t[18],O=t[19],w=t[20],A=t[21];const e=this.drawLabelWithPointPlacement_(v,O,w,A);R=e.label,t[3]=R;const i=t[22];T=(e.anchorX-i)*this.pixelRatio,t[4]=T;const s=t[23];b=(e.anchorY-s)*this.pixelRatio,t[5]=b,V=R.height,t[7]=V,nt=R.width,t[14]=nt}t.length>24&&(it=t[24]),t.length>16?(st=t[15],lt=t[16],at=t[17]):(st=a.defaultPadding,lt=!1,at=!1),$&&j?tt+=q:$||j||(tt-=q);let rt=0,ht=0;for(;C<m;C+=2)if(!(it&&it[rt++]<nt/this.pixelRatio)){if(I){const t=Math.floor(ht);I.length<t+1&&((E=(0,e.createEmpty)()).push(I[0][4]),I.push(E)),E=I[t]}this.replayImageOrLabel_(o,_[C],_[C+1],R,T,b,E,V,z,Q,Z,tt,et,d,nt,st,lt?P:null,at?N:null),E&&(ht===Math.floor(ht)&&this.declutterItems.push(this,E,B),ht+=1/E[4])}++g;break;case n.default.DRAW_CHARS:const ot=t[1],ct=t[2],ut=t[3];E=f?null:t[4];const dt=t[5];A=t[6];const ft=t[7],pt=t[8],_t=t[9];w=t[10];const gt=t[11];v=t[12],O=t[13];const xt=t[14],mt=this.textStates[O],Tt=mt.font,bt=mt.scale*pt;let St;Tt in this.widths_?St=this.widths_[Tt]:(St={},this.widths_[Tt]=St);const yt=(0,i.lineStringLength)(_,ot,ct,2),kt=bt*(0,a.measureAndCacheTextWidth)(Tt,v,St);if(dt||kt<=yt){const t=this.textStates[O].textAlign,e=(yt-kt)*r.TEXT_ALIGN[t],i=(0,s.drawTextOnPath)(_,ot,ct,2,v,e,ft,bt,a.measureAndCacheTextWidth,Tt,St);if(i){let t,e,s,l,n;if(w)for(t=0,e=i.length;t<e;++t)s=(n=i[t])[4],l=this.createLabel(s,O,"",w),T=n[2]+gt,b=ut*l.height+2*(.5-ut)*gt-_t,this.replayImageOrLabel_(o,n[0],n[1],l,T,b,E,l.height,1,0,0,n[3],xt,!1,l.width,a.defaultPadding,null,null);if(A)for(t=0,e=i.length;t<e;++t)s=(n=i[t])[4],l=this.createLabel(s,O,A,""),T=n[2],b=ut*l.height-_t,this.replayImageOrLabel_(o,n[0],n[1],l,T,b,E,l.height,1,0,0,n[3],xt,!1,l.width,a.defaultPadding,null,null)}}this.declutterItems.push(this,E,B),++g;break;case n.default.END_GEOMETRY:if(void 0!==f){const e=f(B=t[1]);if(e)return e}++g;break;case n.default.FILL:G?M++:this.fill_(o),++g;break;case n.default.MOVE_TO_LINE_TO:for(C=t[1],m=t[2],X=_[C],L=(Y=_[C+1])+.5|0,(k=X+.5|0)===S&&L===y||(o.moveTo(X,Y),S=k,y=L),C+=2;C<m;C+=2)k=(X=_[C])+.5|0,L=(Y=_[C+1])+.5|0,C!=m-2&&k===S&&L===y||(o.lineTo(X,Y),S=k,y=L);++g;break;case n.default.SET_FILL_STYLE:P=t,this.alignFill_=t[2],M&&(this.fill_(o),M=0,D&&(o.stroke(),D=0)),o.fillStyle=t[1],++g;break;case n.default.SET_STROKE_STYLE:N=t,D&&(o.stroke(),D=0),this.setStrokeStyle_(o,t),++g;break;case n.default.STROKE:G?D++:o.stroke(),++g;break;default:++g}}M&&this.fill_(o),D&&o.stroke()}execute(t,e,i,s){this.viewRotation_=i,this.execute_(t,e,this.instructions,s,void 0,void 0)}executeHitDetection(t,e,i,s,l){return this.viewRotation_=i,this.execute_(t,e,this.hitDetectionInstructions,!0,s,l)}}var T=m;exports.default=T;
},{"../../array.js":"uHwP","../../extent.js":"E4kN","../../geom/flat/length.js":"i6SQ","../../geom/flat/textpath.js":"mSaU","../../geom/flat/transform.js":"XBOy","../canvas.js":"lTc7","./Instruction.js":"wcyw","./TextBuilder.js":"WEnl","../../transform.js":"fXLG","rbush/rbush.js":"tMOH","../../has.js":"E1VY"}],"bDMr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCircleArray=x,exports.replayDeclutter=d,exports.default=void 0;var t=require("../../array.js"),e=require("../../dom.js"),r=require("../../extent.js"),o=require("../../geom/flat/transform.js"),n=require("../../obj.js"),s=u(require("./BuilderType.js")),i=require("../../transform.js"),c=u(require("./Executor.js"));function u(t){return t&&t.__esModule?t:{default:t}}const a=[s.default.POLYGON,s.default.CIRCLE,s.default.LINE_STRING,s.default.IMAGE,s.default.TEXT,s.default.DEFAULT];class l{constructor(t,e,r,o,n,s){this.maxExtent_=t,this.overlaps_=o,this.pixelRatio_=r,this.resolution_=e,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,i.create)(),this.createExecutors_(n)}clip(t,e){const r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()}createExecutors_(t){for(const e in t){let r=this.executorsByZIndex_[e];void 0===r&&(r={},this.executorsByZIndex_[e]=r);const o=t[e];for(const t in o){const e=o[t];r[t]=new c.default(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const r=this.executorsByZIndex_[e];for(let e=0,o=t.length;e<o;++e)if(t[e]in r)return!0}return!1}forEachFeatureAtCoordinate(o,n,c,u,l,f){const h=2*(u=Math.round(u))+1,d=(0,i.compose)(this.hitDetectionTransform_,u+.5,u+.5,1/n,-1/n,-c,-o[0],-o[1]);this.hitDetectionContext_||(this.hitDetectionContext_=(0,e.createCanvasContext2D)(h,h));const _=this.hitDetectionContext_;let m;_.canvas.width!==h||_.canvas.height!==h?(_.canvas.width=h,_.canvas.height=h):_.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(m=(0,r.createEmpty)(),(0,r.extendCoordinate)(m,o),(0,r.buffer)(m,n*(this.renderBuffer_+u),m));const p=x(u);let y;function E(t){const e=_.getImageData(0,0,h,h).data;for(let r=0;r<h;r++)for(let o=0;o<h;o++)if(p[r][o]&&e[4*(o*h+r)+3]>0){let e;return(!f||y!=s.default.IMAGE&&y!=s.default.TEXT||-1!==f.indexOf(t))&&(e=l(t)),e||void _.clearRect(0,0,h,h)}}const g=Object.keys(this.executorsByZIndex_).map(Number);let v,C,I,T,B;for(g.sort(t.numberSafeCompareFunction),v=g.length-1;v>=0;--v){const t=g[v].toString();for(I=this.executorsByZIndex_[t],C=a.length-1;C>=0;--C)if(void 0!==(T=I[y=a[C]])&&(B=T.executeHitDetection(_,d,c,E,m)))return B}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const r=e[0],n=e[1],s=e[2],i=e[3],c=[r,n,r,i,s,i,s,n];return(0,o.transform2D)(c,0,8,2,t,c),c}isEmpty(){return(0,n.isEmpty)(this.executorsByZIndex_)}execute(e,r,o,n,i,c){const u=Object.keys(this.executorsByZIndex_).map(Number);u.sort(t.numberSafeCompareFunction),this.maxExtent_&&(e.save(),this.clip(e,r));const l=i||a;let f,h,x,d,_,m;for(f=0,h=u.length;f<h;++f){const t=u[f].toString();for(_=this.executorsByZIndex_[t],x=0,d=l.length;x<d;++x){const i=l[x];if(void 0!==(m=_[i]))if(!c||i!=s.default.IMAGE&&i!=s.default.TEXT)m.execute(e,r,o,n);else{const e=c[t];e?e.push(m,r.slice(0)):c[t]=[m,r.slice(0)]}}}this.maxExtent_&&e.restore()}}const f={0:[[!0]]};function h(t,e,r){let o;const n=Math.floor(t.length/2);if(e>=n)for(o=n;o<e;o++)t[o][r]=!0;else if(e<n)for(o=e+1;o<n;o++)t[o][r]=!0}function x(t){if(void 0!==f[t])return f[t];const e=2*t+1,r=new Array(e);for(let i=0;i<e;i++)r[i]=new Array(e);let o=t,n=0,s=0;for(;o>=n;)h(r,t+o,t+n),h(r,t+n,t+o),h(r,t-n,t+o),h(r,t-o,t+n),h(r,t-o,t-n),h(r,t-n,t-o),h(r,t+n,t-o),h(r,t+o,t-n),2*((s+=1+2*++n)-o)+1>0&&(s+=1-2*(o-=1));return f[t]=r,r}function d(e,r,o,n,s,i){const c=Object.keys(e).map(Number).sort(t.numberSafeCompareFunction);for(let t=0,u=c.length;t<u;++t){const u=e[c[t].toString()];let a;for(let t=0,e=u.length;t<e;){const e=u[t++];e!==a&&(a=e,i.push({items:e.declutterItems,opacity:n}));const c=u[t++];e.execute(r,c,o,s)}}}var _=l;exports.default=_;
},{"../../array.js":"uHwP","../../dom.js":"MHGO","../../extent.js":"E4kN","../../geom/flat/transform.js":"XBOy","../../obj.js":"c6bJ","./BuilderType.js":"NNDA","../../transform.js":"fXLG","./Executor.js":"nM8P"}],"X9aH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../events/Event.js"));function t(e){return e&&e.__esModule?e:{default:e}}class r extends e.default{constructor(e,t,r,s){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=s}}var s=r;exports.default=s;
},{"../events/Event.js":"rYf1"}],"lRtM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=n(require("../ImageState.js")),a=n(require("../Observable.js")),r=n(require("../events/EventType.js")),d=n(require("../source/State.js"));function n(e){return e&&e.__esModule?e:{default:e}}class s extends a.default{constructor(e){super(),this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e}getFeatures(t){return(0,e.abstract)()}prepareFrame(t){return(0,e.abstract)()}renderFrame(t,a){return(0,e.abstract)()}loadedTileCallback(e,t,a){e[t]||(e[t]={}),e[t][a.tileCoord.toString()]=a}createLoadedTileFinder(e,t,a){return function(r,d){const n=this.loadedTileCallback.bind(this,a,r);return e.forEachLoadedTile(t,r,d,n)}.bind(this)}forEachFeatureAtCoordinate(e,t,a,r,d){}getDataAtPixel(t,a,r){return(0,e.abstract)()}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){e.target.getState()===t.default.LOADED&&this.renderIfReadyAndVisible()}loadImage(e){let a=e.getState();return a!=t.default.LOADED&&a!=t.default.ERROR&&e.addEventListener(r.default.CHANGE,this.boundHandleImageChange_),a==t.default.IDLE&&(e.load(),a=e.getState()),a==t.default.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e.getVisible()&&e.getSourceState()==d.default.READY&&e.changed()}}var l=s;exports.default=l;
},{"../util.js":"gvrh","../ImageState.js":"ujHu","../Observable.js":"VYsY","../events/EventType.js":"Ak1Z","../source/State.js":"mqbu"}],"XFdq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../extent.js"),t=require("../../dom.js"),n=s(require("../../render/Event.js")),r=s(require("../../render/EventType.js")),o=require("../../render/canvas.js"),a=s(require("../Layer.js")),i=require("../../transform.js");function s(e){return e&&e.__esModule?e:{default:e}}class l extends a.default{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform_=(0,i.create)(),this.pixelTransform=(0,i.create)(),this.inversePixelTransform=(0,i.create)(),this.context=null,this.containerReused=!1}useContainer(e,n,r){const o=this.getLayer().getClassName();let a,i;if(e&&""===e.style.opacity&&e.className===o){const t=e.firstElementChild;t instanceof HTMLCanvasElement&&(i=t.getContext("2d"))}if(i&&i.canvas.style.transform===n?(this.container=e,this.context=i,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(a=document.createElement("div")).className=o;let e=a.style;e.position="absolute",e.width="100%",e.height="100%";const n=(i=(0,t.createCanvasContext2D)()).canvas;a.appendChild(n),(e=n.style).position="absolute",e.left="0",e.transformOrigin="top left",this.container=a,this.context=i}}clip(t,n,r){const a=n.pixelRatio,s=n.size[0]*a/2,l=n.size[1]*a/2,c=n.viewState.rotation,d=(0,e.getTopLeft)(r),p=(0,e.getTopRight)(r),h=(0,e.getBottomRight)(r),u=(0,e.getBottomLeft)(r);(0,i.apply)(n.coordinateToPixelTransform,d),(0,i.apply)(n.coordinateToPixelTransform,p),(0,i.apply)(n.coordinateToPixelTransform,h),(0,i.apply)(n.coordinateToPixelTransform,u),t.save(),(0,o.rotateAtOffset)(t,-c,s,l),t.beginPath(),t.moveTo(d[0]*a,d[1]*a),t.lineTo(p[0]*a,p[1]*a),t.lineTo(h[0]*a,h[1]*a),t.lineTo(u[0]*a,u[1]*a),t.clip(),(0,o.rotateAtOffset)(t,c,s,l)}clipUnrotated(t,n,r){const o=(0,e.getTopLeft)(r),a=(0,e.getTopRight)(r),s=(0,e.getBottomRight)(r),l=(0,e.getBottomLeft)(r);(0,i.apply)(n.coordinateToPixelTransform,o),(0,i.apply)(n.coordinateToPixelTransform,a),(0,i.apply)(n.coordinateToPixelTransform,s),(0,i.apply)(n.coordinateToPixelTransform,l);const c=this.inversePixelTransform;(0,i.apply)(c,o),(0,i.apply)(c,a),(0,i.apply)(c,s),(0,i.apply)(c,l),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.clip()}dispatchRenderEvent_(e,t,r){const o=this.getLayer();if(o.hasListener(e)){const a=new n.default(e,this.inversePixelTransform,r,t);o.dispatchEvent(a)}}preRender(e,t){this.dispatchRenderEvent_(r.default.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(r.default.POSTRENDER,e,t)}getRenderTransform(e,t,n,r,o,a,s){const l=o/2,c=a/2,d=r/t,p=-d,h=-e[0]+s,u=-e[1];return(0,i.compose)(this.tempTransform_,l,c,d,p,-n,h,u)}getDataAtPixel(e,t,n){const r=(0,i.apply)(this.inversePixelTransform,e.slice()),o=this.context;let a;try{a=o.getImageData(Math.round(r[0]),Math.round(r[1]),1,1).data}catch(s){return"SecurityError"===s.name?new Uint8Array:a}return 0===a[3]?null:a}}var c=l;exports.default=c;
},{"../../extent.js":"E4kN","../../dom.js":"MHGO","../../render/Event.js":"X9aH","../../render/EventType.js":"w2aV","../../render/canvas.js":"lTc7","../Layer.js":"lRtM","../../transform.js":"fXLG"}],"NODI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOrder=o,exports.getSquaredTolerance=u,exports.getTolerance=g,exports.renderFeature=s;var e=require("../util.js"),t=l(require("../ImageState.js")),n=l(require("../geom/GeometryType.js")),r=l(require("../render/canvas/BuilderType.js"));function l(e){return e&&e.__esModule?e:{default:e}}const d=.5,i={Point:y,LineString:x,Polygon:E,MultiPoint:m,MultiLineString:I,MultiPolygon:S,GeometryCollection:T,Circle:a};function o(t,n){return parseInt((0,e.getUid)(t),10)-parseInt((0,e.getUid)(n),10)}function u(e,t){const n=g(e,t);return n*n}function g(e,t){return d*e/t}function a(e,t,n,l){const d=n.getFill(),i=n.getStroke();if(d||i){const o=e.getBuilder(n.getZIndex(),r.default.CIRCLE);o.setFillStrokeStyle(d,i),o.drawCircle(t,l)}const o=n.getText();if(o){const d=e.getBuilder(n.getZIndex(),r.default.TEXT);d.setTextStyle(o,e.addDeclutter(!1)),d.drawText(t,l)}}function s(e,n,r,l,d,i){let o=!1;const u=r.getImage();if(u){let e=u.getImageState();e==t.default.LOADED||e==t.default.ERROR?u.unlistenImageChange(d):(e==t.default.IDLE&&u.load(),e=u.getImageState(),u.listenImageChange(d),o=!0)}return c(e,n,r,l,i),o}function c(e,t,n,r,l){const d=n.getGeometryFunction()(t);if(!d)return;const o=d.simplifyTransformed(r,l);if(n.getRenderer())f(e,o,n,t);else{(0,i[o.getType()])(e,o,n,t)}}function f(e,t,l,d){if(t.getType()==n.default.GEOMETRY_COLLECTION){const n=t.getGeometries();for(let t=0,r=n.length;t<r;++t)f(e,n[t],l,d);return}e.getBuilder(l.getZIndex(),r.default.DEFAULT).drawCustom(t,d,l.getRenderer())}function T(e,t,n,r){const l=t.getGeometriesArray();let d,o;for(d=0,o=l.length;d<o;++d){(0,i[l[d].getType()])(e,l[d],n,r)}}function x(e,t,n,l){const d=n.getStroke();if(d){const i=e.getBuilder(n.getZIndex(),r.default.LINE_STRING);i.setFillStrokeStyle(null,d),i.drawLineString(t,l)}const i=n.getText();if(i){const d=e.getBuilder(n.getZIndex(),r.default.TEXT);d.setTextStyle(i,e.addDeclutter(!1)),d.drawText(t,l)}}function I(e,t,n,l){const d=n.getStroke();if(d){const i=e.getBuilder(n.getZIndex(),r.default.LINE_STRING);i.setFillStrokeStyle(null,d),i.drawMultiLineString(t,l)}const i=n.getText();if(i){const d=e.getBuilder(n.getZIndex(),r.default.TEXT);d.setTextStyle(i,e.addDeclutter(!1)),d.drawText(t,l)}}function S(e,t,n,l){const d=n.getFill(),i=n.getStroke();if(i||d){const o=e.getBuilder(n.getZIndex(),r.default.POLYGON);o.setFillStrokeStyle(d,i),o.drawMultiPolygon(t,l)}const o=n.getText();if(o){const d=e.getBuilder(n.getZIndex(),r.default.TEXT);d.setTextStyle(o,e.addDeclutter(!1)),d.drawText(t,l)}}function y(e,n,l,d){const i=l.getImage();if(i){if(i.getImageState()!=t.default.LOADED)return;const o=e.getBuilder(l.getZIndex(),r.default.IMAGE);o.setImageStyle(i,e.addDeclutter(!1)),o.drawPoint(n,d)}const o=l.getText();if(o){const t=e.getBuilder(l.getZIndex(),r.default.TEXT);t.setTextStyle(o,e.addDeclutter(!!i)),t.drawText(n,d)}}function m(e,n,l,d){const i=l.getImage();if(i){if(i.getImageState()!=t.default.LOADED)return;const o=e.getBuilder(l.getZIndex(),r.default.IMAGE);o.setImageStyle(i,e.addDeclutter(!1)),o.drawMultiPoint(n,d)}const o=l.getText();if(o){const t=e.getBuilder(l.getZIndex(),r.default.TEXT);t.setTextStyle(o,e.addDeclutter(!!i)),t.drawText(n,d)}}function E(e,t,n,l){const d=n.getFill(),i=n.getStroke();if(d||i){const o=e.getBuilder(n.getZIndex(),r.default.POLYGON);o.setFillStrokeStyle(d,i),o.drawPolygon(t,l)}const o=n.getText();if(o){const d=e.getBuilder(n.getZIndex(),r.default.TEXT);d.setTextStyle(o,e.addDeclutter(!1)),d.drawText(t,l)}}
},{"../util.js":"gvrh","../ImageState.js":"ujHu","../geom/GeometryType.js":"I79K","../render/canvas/BuilderType.js":"NNDA"}],"L8fg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../array.js"),e=require("../../colorlike.js"),i=require("../../extent.js"),s=h(require("../../geom/GeometryType.js")),a=require("../../geom/SimpleGeometry.js"),l=require("../../geom/flat/transform.js"),n=h(require("../VectorContext.js")),o=require("../canvas.js"),r=require("../../transform.js");function h(t){return t&&t.__esModule?t:{default:t}}class _ extends n.default{constructor(t,e,i,s,a,l,n){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=s,this.viewRotation_=a,this.squaredTolerance_=l,this.userTransform_=n,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,r.create)()}drawImages_(t,e,i,s){if(!this.image_)return;const a=(0,l.transform2D)(t,e,i,2,this.transform_,this.pixelCoordinates_),n=this.context_,o=this.tmpLocalTransform_,h=n.globalAlpha;1!=this.imageOpacity_&&(n.globalAlpha=h*this.imageOpacity_);let _=this.imageRotation_;this.imageRotateWithView_&&(_+=this.viewRotation_);for(let l=0,f=a.length;l<f;l+=2){const t=a[l]-this.imageAnchorX_,e=a[l+1]-this.imageAnchorY_;if(0!==_||1!=this.imageScale_){const i=t+this.imageAnchorX_,s=e+this.imageAnchorY_;(0,r.compose)(o,i,s,this.imageScale_,this.imageScale_,_,-i,-s),n.setTransform.apply(n,o)}n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,e,this.imageWidth_,this.imageHeight_)}0===_&&1==this.imageScale_||n.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(n.globalAlpha=h)}drawText_(t,e,i,s){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const a=(0,l.transform2D)(t,e,i,s,this.transform_,this.pixelCoordinates_),n=this.context_;let o=this.textRotation_;for(this.textRotateWithView_&&(o+=this.viewRotation_);e<i;e+=s){const t=a[e]+this.textOffsetX_,i=a[e+1]+this.textOffsetY_;if(0!==o||1!=this.textScale_){const e=(0,r.compose)(this.tmpLocalTransform_,t,i,this.textScale_,this.textScale_,o,-t,-i);n.setTransform.apply(n,e)}this.textStrokeState_&&n.strokeText(this.text_,t,i),this.textFillState_&&n.fillText(this.text_,t,i)}0===o&&1==this.textScale_||n.setTransform(1,0,0,1,0,0)}moveToLineTo_(t,e,i,s,a){const n=this.context_,o=(0,l.transform2D)(t,e,i,s,this.transform_,this.pixelCoordinates_);n.moveTo(o[0],o[1]);let r=o.length;a&&(r-=2);for(let l=2;l<r;l+=2)n.lineTo(o[l],o[l+1]);return a&&n.closePath(),i}drawRings_(t,e,i,s){for(let a=0,l=i.length;a<l;++a)e=this.moveToLineTo_(t,e,i[a],s,!0);return e}drawCircle(t){if((0,i.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=(0,a.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],l=Math.sqrt(i*i+s*s),n=this.context_;n.beginPath(),n.arc(e[0],e[1],l,0,2*Math.PI),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case s.default.POINT:this.drawPoint(t);break;case s.default.LINE_STRING:this.drawLineString(t);break;case s.default.POLYGON:this.drawPolygon(t);break;case s.default.MULTI_POINT:this.drawMultiPoint(t);break;case s.default.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case s.default.MULTI_POLYGON:this.drawMultiPolygon(t);break;case s.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case s.default.CIRCLE:this.drawCircle(t)}}drawFeature(t,e){const s=e.getGeometryFunction()(t);s&&(0,i.intersects)(this.extent_,s.getExtent())&&(this.setStyle(e),this.drawGeometry(s))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if((0,i.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();let s=0;const a=t.getEnds(),l=t.getStride();e.beginPath();for(let t=0,n=a.length;t<n;++t)s=this.moveToLineTo_(i,s,a[t],l,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let s=0;const a=t.getEndss(),l=t.getStride();e.beginPath();for(let t=0,n=a.length;t<n;++t){const e=a[t];s=this.drawRings_(i,s,e,l)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(e){const i=this.context_,s=this.contextStrokeState_;s?(s.lineCap!=e.lineCap&&(s.lineCap=e.lineCap,i.lineCap=e.lineCap),i.setLineDash&&((0,t.equals)(s.lineDash,e.lineDash)||i.setLineDash(s.lineDash=e.lineDash),s.lineDashOffset!=e.lineDashOffset&&(s.lineDashOffset=e.lineDashOffset,i.lineDashOffset=e.lineDashOffset)),s.lineJoin!=e.lineJoin&&(s.lineJoin=e.lineJoin,i.lineJoin=e.lineJoin),s.lineWidth!=e.lineWidth&&(s.lineWidth=e.lineWidth,i.lineWidth=e.lineWidth),s.miterLimit!=e.miterLimit&&(s.miterLimit=e.miterLimit,i.miterLimit=e.miterLimit),s.strokeStyle!=e.strokeStyle&&(s.strokeStyle=e.strokeStyle,i.strokeStyle=e.strokeStyle)):(i.lineCap=e.lineCap,i.setLineDash&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineJoin=e.lineJoin,i.lineWidth=e.lineWidth,i.miterLimit=e.miterLimit,i.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:o.defaultTextAlign;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,i){if(t){const i=t.getColor();this.fillState_={fillStyle:(0,e.asColorLike)(i||o.defaultFillStyle)}}else this.fillState_=null;if(i){const t=i.getColor(),s=i.getLineCap(),a=i.getLineDash(),l=i.getLineDashOffset(),n=i.getLineJoin(),r=i.getWidth(),h=i.getMiterLimit();this.strokeState_={lineCap:void 0!==s?s:o.defaultLineCap,lineDash:a||o.defaultLineDash,lineDashOffset:l||o.defaultLineDashOffset,lineJoin:void 0!==n?n:o.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==r?r:o.defaultLineWidth),miterLimit:void 0!==h?h:o.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(t||o.defaultStrokeStyle)}}else this.strokeState_=null}setImageStyle(t){if(t){const e=t.getAnchor(),i=t.getImage(1),s=t.getOrigin(),a=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=a[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=a[0]}else this.image_=null}setTextStyle(t){if(t){const i=t.getFill();if(i){const t=i.getColor();this.textFillState_={fillStyle:(0,e.asColorLike)(t||o.defaultFillStyle)}}else this.textFillState_=null;const s=t.getStroke();if(s){const t=s.getColor(),i=s.getLineCap(),a=s.getLineDash(),l=s.getLineDashOffset(),n=s.getLineJoin(),r=s.getWidth(),h=s.getMiterLimit();this.textStrokeState_={lineCap:void 0!==i?i:o.defaultLineCap,lineDash:a||o.defaultLineDash,lineDashOffset:l||o.defaultLineDashOffset,lineJoin:void 0!==n?n:o.defaultLineJoin,lineWidth:void 0!==r?r:o.defaultLineWidth,miterLimit:void 0!==h?h:o.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(t||o.defaultStrokeStyle)}}else this.textStrokeState_=null;const a=t.getFont(),l=t.getOffsetX(),n=t.getOffsetY(),r=t.getRotateWithView(),h=t.getRotation(),_=t.getScale(),f=t.getText(),g=t.getTextAlign(),S=t.getTextBaseline();this.textState_={font:void 0!==a?a:o.defaultFont,textAlign:void 0!==g?g:o.defaultTextAlign,textBaseline:void 0!==S?S:o.defaultTextBaseline},this.text_=void 0!==f?f:"",this.textOffsetX_=void 0!==l?this.pixelRatio_*l:0,this.textOffsetY_=void 0!==n?this.pixelRatio_*n:0,this.textRotateWithView_=void 0!==r&&r,this.textRotation_=void 0!==h?h:0,this.textScale_=this.pixelRatio_*(void 0!==_?_:1)}else this.text_=""}}var f=_;exports.default=f;
},{"../../array.js":"uHwP","../../colorlike.js":"PxyX","../../extent.js":"E4kN","../../geom/GeometryType.js":"I79K","../../geom/SimpleGeometry.js":"leyx","../../geom/flat/transform.js":"XBOy","../VectorContext.js":"TEZU","../canvas.js":"lTc7","../../transform.js":"fXLG"}],"OeU5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={FRACTION:"fraction",PIXELS:"pixels"};exports.default=e;
},{}],"nKYw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shared=exports.default=void 0;var e=require("../color.js");class t{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const c=this.cache_[t];0!=(3&e++)||c.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,s){const i=c(e,t,s);return i in this.cache_?this.cache_[i]:null}set(e,t,s,i){const h=c(e,t,s);this.cache_[h]=i,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function c(t,c,s){return c+":"+t+":"+(s?(0,e.asString)(s):"null")}var s=t;exports.default=s;const i=new t;exports.shared=i;
},{"../color.js":"UVET"}],"rzjL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./util.js"),e=s(require("./events/Target.js")),r=s(require("./events/EventType.js"));function s(t){return t&&t.__esModule?t:{default:t}}class i extends e.default{constructor(t,e,r,s){super(),this.extent=t,this.pixelRatio_=r,this.resolution=e,this.state=s}changed(){this.dispatchEvent(r.default.CHANGE)}getExtent(){return this.extent}getImage(){return(0,t.abstract)()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){(0,t.abstract)()}}var u=i;exports.default=u;
},{"./util.js":"gvrh","./events/Target.js":"VT2J","./events/EventType.js":"Ak1Z"}],"Wj4C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.listenImage=h,exports.default=void 0;var e=u(require("./ImageBase.js")),t=u(require("./ImageState.js")),s=require("./events.js"),i=u(require("./events/EventType.js")),n=require("./extent.js"),a=require("./has.js");function u(e){return e&&e.__esModule?e:{default:e}}class r extends e.default{constructor(e,s,i,n,a,u){super(e,s,i,t.default.IDLE),this.src_=n,this.image_=new Image,null!==a&&(this.image_.crossOrigin=a),this.unlisten_=null,this.state=t.default.IDLE,this.imageLoadFunction_=u}getImage(){return this.image_}handleImageError_(){this.state=t.default.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){void 0===this.resolution&&(this.resolution=(0,n.getHeight)(this.extent)/this.image_.height),this.state=t.default.LOADED,this.unlistenImage_(),this.changed()}load(){this.state!=t.default.IDLE&&this.state!=t.default.ERROR||(this.state=t.default.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=h(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(e){this.image_=e}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function h(e,t,n){const u=e;if(u.src&&a.IMAGE_DECODE){const e=u.decode();let s=!0;const i=function(){s=!1};return e.then(function(){s&&t()}).catch(function(e){s&&("EncodingError"===e.name&&"Invalid image type."===e.message?t():n())}),i}const r=[(0,s.listenOnce)(u,i.default.LOAD,t),(0,s.listenOnce)(u,i.default.ERROR,n)];return function(){r.forEach(s.unlistenByKey)}}var l=r;exports.default=l;
},{"./ImageBase.js":"rzjL","./ImageState.js":"ujHu","./events.js":"TEtv","./events/EventType.js":"Ak1Z","./extent.js":"E4kN","./has.js":"E1VY"}],"AAxt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=_,exports.default=void 0;var t=require("../dom.js"),e=n(require("../events/Target.js")),i=n(require("../events/EventType.js")),s=n(require("../ImageState.js")),a=require("./IconImageCache.js"),h=require("../Image.js");function n(t){return t&&t.__esModule?t:{default:t}}class r extends e.default{constructor(t,e,i,s,a,h){super(),this.hitDetectionImage_=null,this.image_=t||new Image,null!==s&&(this.image_.crossOrigin=s),this.canvas_=h?document.createElement("canvas"):null,this.color_=h,this.unlisten_=null,this.imageState_=a,this.size_=i,this.src_=e,this.tainted_}isTainted_(e){if(void 0===this.tainted_&&this.imageState_===s.default.LOADED){e||(e=(0,t.createCanvasContext2D)(1,1)).drawImage(this.image_,0,0);try{e.getImageData(0,0,1,1),this.tainted_=!1}catch(i){this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(i.default.CHANGE)}handleImageError_(){this.imageState_=s.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=s.default.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()}getImage(t){return this.canvas_?this.canvas_:this.image_}getImageState(){return this.imageState_}getHitDetectionImage(e){if(!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],i=this.size_[1],s=(0,t.createCanvasContext2D)(e,i);s.fillRect(0,0,e,i),this.hitDetectionImage_=s.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_==s.default.IDLE){this.imageState_=s.default.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,h.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(){if(!this.color_)return;this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;const t=this.canvas_.getContext("2d");if(t.drawImage(this.image_,0,0),this.isTainted_(t)){const e=this.color_;return t.globalCompositeOperation="multiply",t.fillStyle="rgb("+e[0]+","+e[1]+","+e[2]+")",t.fillRect(0,0,this.image_.width,this.image_.height),t.globalCompositeOperation="destination-in",void t.drawImage(this.image_,0,0)}const e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,s=this.color_[0]/255,a=this.color_[1]/255,h=this.color_[2]/255;for(let n=0,r=i.length;n<r;n+=4)i[n]*=s,i[n+1]*=a,i[n+2]*=h;t.putImageData(e,0,0)}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function _(t,e,i,s,h,n){let _=a.shared.get(e,s,n);return _||(_=new r(t,e,i,s,h,n),a.shared.set(e,s,n,_)),_}var g=r;exports.default=g;
},{"../dom.js":"MHGO","../events/Target.js":"VT2J","../events/EventType.js":"Ak1Z","../ImageState.js":"ujHu","./IconImageCache.js":"nKYw","../Image.js":"Wj4C"}],"sFIN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=require("../util.js"),t=c(require("../ImageState.js")),e=require("../asserts.js"),s=require("../color.js"),r=c(require("../events/EventType.js")),n=c(require("./IconAnchorUnits.js")),o=require("./IconImage.js"),a=c(require("./IconOrigin.js")),h=c(require("./Image.js"));function c(i){return i&&i.__esModule?i:{default:i}}class l extends h.default{constructor(r){const h=r||{},c=void 0!==h.opacity?h.opacity:1,l=void 0!==h.rotation?h.rotation:0,g=void 0!==h.scale?h.scale:1,_=void 0!==h.rotateWithView&&h.rotateWithView;super({opacity:c,rotation:l,scale:g,displacement:void 0!==h.displacement?h.displacement:[0,0],rotateWithView:_}),this.anchor_=void 0!==h.anchor?h.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==h.anchorOrigin?h.anchorOrigin:a.default.TOP_LEFT,this.anchorXUnits_=void 0!==h.anchorXUnits?h.anchorXUnits:n.default.FRACTION,this.anchorYUnits_=void 0!==h.anchorYUnits?h.anchorYUnits:n.default.FRACTION,this.crossOrigin_=void 0!==h.crossOrigin?h.crossOrigin:null;const u=void 0!==h.img?h.img:null,f=void 0!==h.imgSize?h.imgSize:null;let d=h.src;(0,e.assert)(!(void 0!==d&&u),4),(0,e.assert)(!u||u&&f,5),void 0!==d&&0!==d.length||!u||(d=u.src||(0,i.getUid)(u)),(0,e.assert)(void 0!==d&&d.length>0,6);const O=void 0!==h.src?t.default.IDLE:t.default.LOADED;this.color_=void 0!==h.color?(0,s.asArray)(h.color):null,this.iconImage_=(0,o.get)(u,d,f,this.crossOrigin_,O,this.color_),this.offset_=void 0!==h.offset?h.offset:[0,0],this.offsetOrigin_=void 0!==h.offsetOrigin?h.offsetOrigin:a.default.TOP_LEFT,this.origin_=null,this.size_=void 0!==h.size?h.size:null}clone(){return new l({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})}getAnchor(){if(this.normalizedAnchor_)return this.normalizedAnchor_;let i=this.anchor_;const t=this.getSize();if(this.anchorXUnits_==n.default.FRACTION||this.anchorYUnits_==n.default.FRACTION){if(!t)return null;i=this.anchor_.slice(),this.anchorXUnits_==n.default.FRACTION&&(i[0]*=t[0]),this.anchorYUnits_==n.default.FRACTION&&(i[1]*=t[1])}if(this.anchorOrigin_!=a.default.TOP_LEFT){if(!t)return null;i===this.anchor_&&(i=this.anchor_.slice()),this.anchorOrigin_!=a.default.TOP_RIGHT&&this.anchorOrigin_!=a.default.BOTTOM_RIGHT||(i[0]=-i[0]+t[0]),this.anchorOrigin_!=a.default.BOTTOM_LEFT&&this.anchorOrigin_!=a.default.BOTTOM_RIGHT||(i[1]=-i[1]+t[1])}return this.normalizedAnchor_=i,this.normalizedAnchor_}setAnchor(i){this.anchor_=i,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(i){return this.iconImage_.getImage(i)}getImageSize(){return this.iconImage_.getSize()}getHitDetectionImageSize(){return this.getImageSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(i){return this.iconImage_.getHitDetectionImage(i)}getOrigin(){if(this.origin_)return this.origin_;let i=this.offset_;const t=this.getDisplacement();if(this.offsetOrigin_!=a.default.TOP_LEFT){const t=this.getSize(),e=this.iconImage_.getSize();if(!t||!e)return null;i=i.slice(),this.offsetOrigin_!=a.default.TOP_RIGHT&&this.offsetOrigin_!=a.default.BOTTOM_RIGHT||(i[0]=e[0]-t[0]-i[0]),this.offsetOrigin_!=a.default.BOTTOM_LEFT&&this.offsetOrigin_!=a.default.BOTTOM_RIGHT||(i[1]=e[1]-t[1]-i[1])}return i[0]+=t[0],i[1]+=t[1],this.origin_=i,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(i){this.iconImage_.addEventListener(r.default.CHANGE,i)}load(){this.iconImage_.load()}unlistenImageChange(i){this.iconImage_.removeEventListener(r.default.CHANGE,i)}}var g=l;exports.default=g;
},{"../util.js":"gvrh","../ImageState.js":"ujHu","../asserts.js":"kWiW","../color.js":"UVET","../events/EventType.js":"Ak1Z","./IconAnchorUnits.js":"OeU5","./IconImage.js":"AAxt","./IconOrigin.js":"An1B","./Image.js":"iiKG"}],"wNse":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Fill.js")),e=i(require("./TextPlacement.js"));function i(t){return t&&t.__esModule?t:{default:t}}const s="#333";class o{constructor(i){const o=i||{};this.font_=o.font,this.rotation_=o.rotation,this.rotateWithView_=o.rotateWithView,this.scale_=o.scale,this.text_=o.text,this.textAlign_=o.textAlign,this.textBaseline_=o.textBaseline,this.fill_=void 0!==o.fill?o.fill:new t.default({color:s}),this.maxAngle_=void 0!==o.maxAngle?o.maxAngle:Math.PI/4,this.placement_=void 0!==o.placement?o.placement:e.default.POINT,this.overflow_=!!o.overflow,this.stroke_=void 0!==o.stroke?o.stroke:null,this.offsetX_=void 0!==o.offsetX?o.offsetX:0,this.offsetY_=void 0!==o.offsetY?o.offsetY:0,this.backgroundFill_=o.backgroundFill?o.backgroundFill:null,this.backgroundStroke_=o.backgroundStroke?o.backgroundStroke:null,this.padding_=void 0===o.padding?null:o.padding}clone(){return new o({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}var l=o;exports.default=l;
},{"./Fill.js":"BtYk","./TextPlacement.js":"AxYm"}],"KETh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Fill",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Icon",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"IconImage",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"RegularShape",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Stroke",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Style",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return s.default}});var e=f(require("./style/Circle.js")),t=f(require("./style/Fill.js")),r=f(require("./style/Icon.js")),u=f(require("./style/IconImage.js")),n=f(require("./style/Image.js")),l=f(require("./style/RegularShape.js")),o=f(require("./style/Stroke.js")),i=f(require("./style/Style.js")),s=f(require("./style/Text.js"));function f(e){return e&&e.__esModule?e:{default:e}}
},{"./style/Circle.js":"fCIq","./style/Fill.js":"BtYk","./style/Icon.js":"sFIN","./style/IconImage.js":"AAxt","./style/Image.js":"iiKG","./style/RegularShape.js":"nYUC","./style/Stroke.js":"PPeM","./style/Style.js":"AL4u","./style/Text.js":"wNse"}],"V4Oz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHitDetectionImageData=c,exports.hitDetect=l;var t=s(require("./Immediate.js")),e=require("../../dom.js"),n=require("../../style.js"),o=s(require("../../style/IconAnchorUnits.js")),a=s(require("../../geom/GeometryType.js")),r=require("../../extent.js"),i=require("../../array.js");function s(t){return t&&t.__esModule?t:{default:t}}function c(s,c,l,u,g,h,d){const f=s[0]/2,m=s[1]/2,y=(0,e.createCanvasContext2D)(f,m);y.imageSmoothingEnabled=!1;const p=y.canvas,I=new t.default(y,.5,g,null,d),S=l.length,w=Math.floor(16777215/S),C={};for(let t=1;t<=S;++t){const i=l[t-1],s=i.getStyleFunction()||u;if(!u)continue;let c=s(i,h);if(!c)continue;Array.isArray(c)||(c=[c]);const d="#"+("000000"+(t*w).toString(16)).slice(-6);for(let t=0,l=c.length;t<l;++t){const s=c[t],l=s.clone(),u=l.getFill();u&&u.setColor(d);const h=l.getStroke();h&&h.setColor(d),l.setText(void 0);const f=s.getImage();if(f){const t=f.getImageSize();if(!t)continue;const a=document.createElement("canvas");a.width=t[0],a.height=t[1];const r=a.getContext("2d",{alpha:!1});r.fillStyle=d;const i=r.canvas;r.fillRect(0,0,i.width,i.height);const s=t?t[0]:i.width,c=t?t[1]:i.height;(0,e.createCanvasContext2D)(s,c).drawImage(i,0,0),l.setImage(new n.Icon({img:i,imgSize:t,anchor:f.getAnchor(),anchorXUnits:o.default.PIXELS,anchorYUnits:o.default.PIXELS,offset:f.getOrigin(),size:f.getSize(),opacity:f.getOpacity(),scale:f.getScale(),rotation:f.getRotation(),rotateWithView:f.getRotateWithView()}))}const m=Number(l.getZIndex());let y=C[m];y||(y={},C[m]=y,y[a.default.POLYGON]=[],y[a.default.CIRCLE]=[],y[a.default.LINE_STRING]=[],y[a.default.POINT]=[]);const p=l.getGeometryFunction()(i);p&&(0,r.intersects)(g,p.getExtent())&&y[p.getType().replace("Multi","")].push(p,l)}}const x=Object.keys(C).map(Number).sort(i.numberSafeCompareFunction);for(let t=0,e=x.length;t<e;++t){const e=C[x[t]];for(const t in e){const n=e[t];for(let t=0,e=n.length;t<e;t+=2){I.setStyle(n[t+1]);for(let e=0,o=c.length;e<o;++e)I.setTransform(c[e]),I.drawGeometry(n[t])}}}return document.body.appendChild(y.canvas),y.getImageData(0,0,p.width,p.height)}function l(t,e,n){const o=[];if(n){const a=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*n.width),r=n.data[a],i=n.data[a+1],s=n.data[a+2]+256*(i+256*r),c=Math.floor(16777215/e.length);s&&s%c==0&&o.push(e[s/c-1])}return o}
},{"./Immediate.js":"L8fg","../../dom.js":"MHGO","../../style.js":"KETh","../../style/IconAnchorUnits.js":"OeU5","../../geom/GeometryType.js":"I79K","../../extent.js":"E4kN","../../array.js":"uHwP"}],"lGFm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../util.js"),t=g(require("../../ViewHint.js")),r=require("../../extent.js"),n=require("../../coordinate.js"),i=require("../../proj.js"),s=g(require("../../render/canvas/BuilderGroup.js")),a=c(require("../../render/canvas/ExecutorGroup.js")),o=g(require("./Layer.js")),d=require("../vector.js"),u=require("../../transform.js"),h=require("../../render/canvas/hitdetect.js");function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function g(e){return e&&e.__esModule?e:{default:e}}class f extends o.default{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.dirty_=!1,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,r.createEmpty)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0}useContainer(e,t,r){r<1&&(e=null),super.useContainer(e,t,r)}renderFrame(e,n){const s=e.pixelRatio,o=e.layerStatesArray[e.layerIndex];(0,u.makeScale)(this.pixelTransform,1/s,1/s),(0,u.makeInverse)(this.inversePixelTransform,this.pixelTransform);const d=(0,u.toString)(this.pixelTransform);this.useContainer(n,d,o.opacity);const h=this.context,l=h.canvas,c=this.replayGroup_;if(!c||c.isEmpty())return!this.containerReused&&l.width>0&&(l.width=0),this.container;const g=Math.round(e.size[0]*s),f=Math.round(e.size[1]*s);l.width!=g||l.height!=f?(l.width=g,l.height=f,l.style.transform!==d&&(l.style.transform=d)):this.containerReused||h.clearRect(0,0,g,f),this.preRender(h,e);const p=e.extent,_=e.viewState,y=_.center,x=_.resolution,m=_.projection,v=_.rotation,R=m.getExtent(),I=this.getLayer().getSource();let j=!1;if(o.extent){const t=(0,i.fromUserExtent)(o.extent,m);(j=!(0,r.containsExtent)(t,e.extent)&&(0,r.intersects)(t,e.extent))&&this.clip(h,e,t)}const E=e.viewHints,w=!(E[t.default.ANIMATING]||E[t.default.INTERACTING]),T=this.getRenderTransform(y,x,v,s,g,f,0),F=this.getLayer().getDeclutter()?{}:null;if(c.execute(h,T,v,w,void 0,F),I.getWrapX()&&m.canWrapX()&&!(0,r.containsExtent)(R,p)){let e=p[0];const t=(0,r.getWidth)(R);let n,i=0;for(;e<R[0];){n=t*--i;const r=this.getRenderTransform(y,x,v,s,g,f,n);c.execute(h,r,v,w,void 0,F),e+=t}for(i=0,e=p[2];e>R[2];){n=t*++i;const r=this.getRenderTransform(y,x,v,s,g,f,n);c.execute(h,r,v,w,void 0,F),e-=t}}if(F){const r=e.viewHints,n=!(r[t.default.ANIMATING]||r[t.default.INTERACTING]);(0,a.replayDeclutter)(F,h,v,1,n,e.declutterItems)}j&&h.restore(),this.postRender(h,e);const C=o.opacity,D=this.container;return C!==parseFloat(D.style.opacity)&&(D.style.opacity=1===C?"":C),this.container}getFeatures(e){return new Promise(function(t,n){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const e=[this.context.canvas.width,this.context.canvas.height];(0,u.apply)(this.pixelTransform,e);const t=this.renderedCenter_,n=this.renderedResolution_,i=this.renderedRotation_,s=this.renderedProjection_,a=this.renderedExtent_,o=this.getLayer(),d=[],l=e[0]/2,c=e[1]/2;d.push(this.getRenderTransform(t,n,i,.5,l,c,0).slice());const g=o.getSource(),f=s.getExtent();if(g.getWrapX()&&s.canWrapX()&&!(0,r.containsExtent)(f,a)){let e=a[0];const s=(0,r.getWidth)(f);let o,u=0;for(;e<f[0];)o=s*--u,d.push(this.getRenderTransform(t,n,i,.5,l,c,o).slice()),e+=s;for(u=0,e=a[2];e>f[2];)o=s*++u,d.push(this.getRenderTransform(t,n,i,.5,l,c,o).slice()),e-=s}this.hitDetectionImageData_=(0,h.createHitDetectionImageData)(e,d,this.renderedFeatures_,o.getStyleFunction(),a,n,i)}t((0,h.hitDetect)(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(t,r,n,i,s){if(this.replayGroup_){const a=r.viewState.resolution,o=r.viewState.rotation,d=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,a,o,n,function(t){const r=(0,e.getUid)(t);if(!(r in u))return u[r]=!0,i(t,d)},d.getDeclutter()?s:null)}}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const o=this.getLayer(),u=o.getSource();if(!u)return!1;const h=e.viewHints[t.default.ANIMATING],l=e.viewHints[t.default.INTERACTING],c=o.getUpdateWhileAnimating(),g=o.getUpdateWhileInteracting();if(!this.dirty_&&!c&&h||!g&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const f=e.extent,p=e.viewState,_=p.projection,y=p.resolution,x=e.pixelRatio,m=o.getRevision(),v=o.getRenderBuffer();let R=o.getRenderOrder();void 0===R&&(R=d.defaultOrder);const I=p.center.slice(),j=(0,r.buffer)(f,v*y),E=[j.slice()],w=_.getExtent();if(u.getWrapX()&&_.canWrapX()&&!(0,r.containsExtent)(w,e.extent)){const e=(0,r.getWidth)(w),t=Math.max((0,r.getWidth)(j)/2,e);j[0]=w[0]-t,j[2]=w[2]+t,(0,n.wrapX)(I,_);const i=(0,r.wrapX)(E[0],_);i[0]<w[0]&&i[2]<w[2]?E.push([i[0]+e,i[1],i[2]+e,i[3]]):i[0]>w[0]&&i[2]>w[2]&&E.push([i[0]-e,i[1],i[2]-e,i[3]])}if(!this.dirty_&&this.renderedResolution_==y&&this.renderedRevision_==m&&this.renderedRenderOrder_==R&&(0,r.containsExtent)(this.renderedExtent_,j))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;const T=new s.default((0,d.getTolerance)(y,x),j,y,x,o.getDeclutter()),F=(0,i.getUserProjection)();let C;if(F){for(let e=0,t=E.length;e<t;++e)u.loadFeatures((0,i.toUserExtent)(E[e],_),y,F);C=(0,i.getTransformFromProjections)(F,_)}else for(let t=0,r=E.length;t<r;++t)u.loadFeatures(E[t],y,_);const D=(0,d.getSquaredTolerance)(y,x),O=function(e){let t;const r=e.getStyleFunction()||o.getStyleFunction();if(r&&(t=r(e,y)),t){const r=this.renderFeature(e,D,t,T,C);this.dirty_=this.dirty_||r}}.bind(this),S=(0,i.toUserExtent)(j,_),G=u.getFeaturesInExtent(S);R&&G.sort(R);for(let t=0,r=G.length;t<r;++t)O(G[t]);this.renderedFeatures_=G;const b=T.finish(),A=new a.default(j,y,x,u.getOverlaps(),b,o.getRenderBuffer());return this.renderedResolution_=y,this.renderedRevision_=m,this.renderedRenderOrder_=R,this.renderedExtent_=j,this.renderedRotation_=p.rotation,this.renderedCenter_=I,this.renderedProjection_=_,this.replayGroup_=A,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,n,i){if(!r)return!1;let s=!1;if(Array.isArray(r))for(let a=0,o=r.length;a<o;++a)s=(0,d.renderFeature)(n,e,r[a],t,this.boundHandleStyleImageChange_,i)||s;else s=(0,d.renderFeature)(n,e,r,t,this.boundHandleStyleImageChange_,i);return s}}var p=f;exports.default=p;
},{"../../util.js":"gvrh","../../ViewHint.js":"LSsd","../../extent.js":"E4kN","../../coordinate.js":"irUP","../../proj.js":"HKfS","../../render/canvas/BuilderGroup.js":"ln4p","../../render/canvas/ExecutorGroup.js":"bDMr","./Layer.js":"XFdq","../vector.js":"NODI","../../transform.js":"fXLG","../../render/canvas/hitdetect.js":"V4Oz"}],"SuA6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./BaseVector.js")),r=t(require("../renderer/canvas/VectorLayer.js"));function t(e){return e&&e.__esModule?e:{default:e}}class s extends e.default{constructor(e){super(e)}createRenderer(){return new r.default(this)}}var u=s;exports.default=u;
},{"./BaseVector.js":"QB7Y","../renderer/canvas/VectorLayer.js":"lGFm"}],"zerY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADD:"add",REMOVE:"remove"};exports.default=e;
},{}],"ZHRB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CollectionEvent=void 0;var t=i(require("./AssertionError.js")),e=i(require("./CollectionEventType.js")),s=i(require("./Object.js")),r=i(require("./events/Event.js"));function i(t){return t&&t.__esModule?t:{default:t}}const n={LENGTH:"length"};class h extends r.default{constructor(t,e,s){super(t),this.element=e,this.index=s}}exports.CollectionEvent=h;class a extends s.default{constructor(t,e){super();const s=e||{};if(this.unique_=!!s.unique,this.array_=t||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,s=t.length;e<s;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let s=0,r=e.length;s<r;++s)t(e[s],s,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(n.LENGTH)}insertAt(t,s){this.unique_&&this.assertUnique_(s),this.array_.splice(t,0,s),this.updateLength_(),this.dispatchEvent(new h(e.default.ADD,s,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let s=0,r=e.length;s<r;++s)if(e[s]===t)return this.removeAt(s)}removeAt(t){const s=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new h(e.default.REMOVE,s,t)),s}setAt(t,s){const r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(s,t);const r=this.array_[t];this.array_[t]=s,this.dispatchEvent(new h(e.default.REMOVE,r,t)),this.dispatchEvent(new h(e.default.ADD,s,t))}else{for(let e=r;e<t;++e)this.insertAt(e,void 0);this.insertAt(t,s)}}updateLength_(){this.set(n.LENGTH,this.array_.length)}assertUnique_(e,s){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==s)throw new t.default(58)}}var u=a;exports.default=u;
},{"./AssertionError.js":"ixPR","./CollectionEventType.js":"zerY","./Object.js":"X18S","./events/Event.js":"rYf1"}],"sCYO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};exports.default=e;
},{}],"wgkb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadFeaturesXhr=s,exports.xhr=o,exports.setWithCredentials=a;var e=require("./functions.js"),t=n(require("./format/FormatType.js"));function n(e){return e&&e.__esModule?e:{default:e}}let r=!1;function s(e,n,s,o){return function(a,u,i){const l=new XMLHttpRequest;l.open("GET","function"==typeof e?e(a,u,i):e,!0),n.getType()==t.default.ARRAY_BUFFER&&(l.responseType="arraybuffer"),l.withCredentials=r,l.onload=function(e){if(!l.status||l.status>=200&&l.status<300){const e=n.getType();let r;e==t.default.JSON||e==t.default.TEXT?r=l.responseText:e==t.default.XML?(r=l.responseXML)||(r=(new DOMParser).parseFromString(l.responseText,"application/xml")):e==t.default.ARRAY_BUFFER&&(r=l.response),r?s.call(this,n.readFeatures(r,{extent:a,featureProjection:i}),n.readProjection(r)):o.call(this)}else o.call(this)}.bind(this),l.onerror=function(){o.call(this)}.bind(this),l.send()}}function o(t,n){return s(t,n,function(e,t){const n=this;"function"==typeof n.addFeatures&&n.addFeatures(e)},e.VOID)}function a(e){r=e}
},{"./functions.js":"mKAY","./format/FormatType.js":"sCYO"}],"LNLt":[function(require,module,exports) {
"use strict";function e(e,t){return[[-1/0,-1/0,1/0,1/0]]}function t(e,t){return[e]}function n(e){return function(t,n){const o=e.getZForResolution(n),r=e.getTileRangeForExtentAndZ(t,o),u=[],i=[o,0,0];for(i[1]=r.minX;i[1]<=r.maxX;++i[1])for(i[2]=r.minY;i[2]<=r.maxY;++i[2])u.push(e.getTileCoordExtent(i));return u}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=e,exports.bbox=t,exports.tile=n;
},{}],"WE7m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=s(require("../Object.js")),r=require("../proj.js"),i=s(require("./State.js"));function s(t){return t&&t.__esModule?t:{default:t}}class o extends e.default{constructor(t){super(),this.projection_=(0,r.get)(t.projection),this.attributions_=n(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:i.default.READY,this.wrapX_=void 0!==t.wrapX&&t.wrapX}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection_}getResolutions(){return(0,t.abstract)()}getState(){return this.state_}getWrapX(){return this.wrapX_}refresh(){this.changed()}setAttributions(t){this.attributions_=n(t),this.changed()}setState(t){this.state_=t,this.changed()}}function n(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var u=o;exports.default=u;
},{"../util.js":"gvrh","../Object.js":"X18S","../proj.js":"HKfS","./State.js":"mqbu"}],"uZPc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};exports.default=e;
},{}],"yoYZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=i(require("rbush/rbush.js")),s=require("../extent.js"),r=require("../obj.js");function i(t){return t&&t.__esModule?t:{default:t}}class n{constructor(t){this.rbush_=new e.default(t),this.items_={}}insert(e,s){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:s};this.rbush_.insert(r),this.items_[(0,t.getUid)(s)]=r}load(e,s){const r=new Array(s.length);for(let i=0,n=s.length;i<n;i++){const n=e[i],u=s[i],h={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:u};r[i]=h,this.items_[(0,t.getUid)(u)]=h}this.rbush_.load(r)}remove(e){const s=(0,t.getUid)(e),r=this.items_[s];return delete this.items_[s],null!==this.rbush_.remove(r)}update(e,r){const i=this.items_[(0,t.getUid)(r)],n=[i.minX,i.minY,i.maxX,i.maxY];(0,s.equals)(n,e)||(this.remove(r),this.insert(e,r))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let s;for(let r=0,i=t.length;r<i;r++)if(s=e(t[r]))return s;return s}isEmpty(){return(0,r.isEmpty)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return(0,s.createOrUpdate)(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}var u=n;exports.default=u;
},{"../util.js":"gvrh","rbush/rbush.js":"tMOH","../extent.js":"E4kN","../obj.js":"c6bJ"}],"eQui":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.VectorSourceEvent=void 0;var e=require("../util.js"),t=x(require("../Collection.js")),r=x(require("../CollectionEventType.js")),s=x(require("../ObjectEventType.js")),i=require("../array.js"),n=require("../asserts.js"),a=require("../events.js"),o=x(require("../events/Event.js")),u=x(require("../events/EventType.js")),h=require("../extent.js"),l=require("../featureloader.js"),d=require("../functions.js"),f=require("../loadingstrategy.js"),_=require("../obj.js"),c=x(require("./Source.js")),E=x(require("./State.js")),g=x(require("./VectorEventType.js")),v=x(require("../structs/RBush.js"));function x(e){return e&&e.__esModule?e:{default:e}}class F extends o.default{constructor(e,t){super(e),this.feature=t}}exports.VectorSourceEvent=F;class I extends c.default{constructor(e){const r=e||{};super({attributions:r.attributions,projection:void 0,state:E.default.READY,wrapX:void 0===r.wrapX||r.wrapX}),this.loader_=d.VOID,this.format_=r.format,this.overlaps_=void 0===r.overlaps||r.overlaps,this.url_=r.url,void 0!==r.loader?this.loader_=r.loader:void 0!==this.url_&&((0,n.assert)(this.format_,7),this.loader_=(0,l.xhr)(this.url_,this.format_)),this.strategy_=void 0!==r.strategy?r.strategy:f.all;const s=void 0===r.useSpatialIndex||r.useSpatialIndex;let i,a;this.featuresRtree_=s?new v.default:null,this.loadedExtentsRtree_=new v.default,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(r.features)?a=r.features:r.features&&(a=(i=r.features).getArray()),s||void 0!==i||(i=new t.default(a)),void 0!==a&&this.addFeaturesInternal(a),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(t){const r=(0,e.getUid)(t);if(!this.addToIndex_(r,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(r,t);const s=t.getGeometry();if(s){const e=s.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[r]=t;this.dispatchEvent(new F(g.default.ADDFEATURE,t))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[(0,a.listen)(t,u.default.CHANGE,this.handleFeatureChange_,this),(0,a.listen)(t,s.default.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(e,t){let r=!0;const s=t.getId();return void 0!==s&&(s.toString()in this.idIndex_?r=!1:this.idIndex_[s.toString()]=t),r&&((0,n.assert)(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(t){const r=[],s=[],i=[];for(let n=0,a=t.length;n<a;n++){const r=t[n],i=(0,e.getUid)(r);this.addToIndex_(i,r)&&s.push(r)}for(let n=0,a=s.length;n<a;n++){const t=s[n],a=(0,e.getUid)(t);this.setupChangeEvents_(a,t);const o=t.getGeometry();if(o){const e=o.getExtent();r.push(e),i.push(t)}else this.nullGeometryFeatures_[a]=t}this.featuresRtree_&&this.featuresRtree_.load(r,i);for(let e=0,n=s.length;e<n;e++)this.dispatchEvent(new F(g.default.ADDFEATURE,s[e]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(g.default.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(g.default.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(r.default.ADD,function(e){t||(t=!0,this.addFeature(e.element),t=!1)}.bind(this)),e.addEventListener(r.default.REMOVE,function(e){t||(t=!0,this.removeFeature(e.element),t=!1)}.bind(this)),this.featuresCollection_=e}clear(e){if(e){for(const e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(a.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this));for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new F(g.default.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(e)?t(r):void 0})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){const e=t(r);if(e)return e}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray():this.featuresRtree_&&(e=this.featuresRtree_.getAll(),(0,_.isEmpty)(this.nullGeometryFeatures_)||(0,i.extend)(e,(0,_.getValues)(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t}getFeaturesInExtent(e){return this.featuresRtree_?this.featuresRtree_.getInExtent(e):this.featuresCollection_?this.featuresCollection_.getArray():[]}getClosestFeatureToCoordinate(e,t){const r=e[0],s=e[1];let i=null;const n=[NaN,NaN];let a=1/0;const o=[-1/0,-1/0,1/0,1/0],u=t||d.TRUE;return this.featuresRtree_.forEachInExtent(o,function(e){if(u(e)){const t=e.getGeometry(),u=a;if((a=t.closestPointXY(r,s,n,a))<u){i=e;const t=Math.sqrt(a);o[0]=r-t,o[1]=s-t,o[2]=r+t,o[3]=s+t}}}),i}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return void 0!==t?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return void 0!==t?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const r=t.target,s=(0,e.getUid)(r),i=r.getGeometry();if(i){const e=i.getExtent();s in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[s],this.featuresRtree_&&this.featuresRtree_.insert(e,r)):this.featuresRtree_&&this.featuresRtree_.update(e,r)}else s in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(r),this.nullGeometryFeatures_[s]=r);const n=r.getId();if(void 0!==n){const e=n.toString();this.idIndex_[e]!==r&&(this.removeFromIdIndex_(r),this.idIndex_[e]=r)}else this.removeFromIdIndex_(r),this.uidIndex_[s]=r;this.changed(),this.dispatchEvent(new F(g.default.CHANGEFEATURE,r))}hasFeature(t){const r=t.getId();return void 0!==r?r in this.idIndex_:(0,e.getUid)(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_.isEmpty()&&(0,_.isEmpty)(this.nullGeometryFeatures_)}loadFeatures(e,t,r){const s=this.loadedExtentsRtree_,i=this.strategy_(e,t);this.loading=!1;for(let n=0,a=i.length;n<a;++n){const e=i[n];s.forEachInExtent(e,function(t){return(0,h.containsExtent)(t.extent,e)})||(this.loader_.call(this,e,t,r),s.insert(e,{extent:e.slice()}),this.loading=this.loader_!==d.VOID)}}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let r;t.forEachInExtent(e,function(t){if((0,h.equals)(t.extent,e))return r=t,!0}),r&&t.remove(r)}removeFeature(t){const r=(0,e.getUid)(t);r in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[r]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()}removeFeatureInternal(t){const r=(0,e.getUid)(t);this.featureChangeKeys_[r].forEach(a.unlistenByKey),delete this.featureChangeKeys_[r];const s=t.getId();void 0!==s&&delete this.idIndex_[s.toString()],delete this.uidIndex_[r],this.dispatchEvent(new F(g.default.REMOVEFEATURE,t))}removeFromIdIndex_(e){let t=!1;for(const r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){(0,n.assert)(this.format_,7),this.setLoader((0,l.xhr)(e,this.format_))}}var y=I;exports.default=y;
},{"../util.js":"gvrh","../Collection.js":"ZHRB","../CollectionEventType.js":"zerY","../ObjectEventType.js":"ptNe","../array.js":"uHwP","../asserts.js":"kWiW","../events.js":"TEtv","../events/Event.js":"rYf1","../events/EventType.js":"Ak1Z","../extent.js":"E4kN","../featureloader.js":"wgkb","../functions.js":"mKAY","../loadingstrategy.js":"LNLt","../obj.js":"c6bJ","./Source.js":"WE7m","./State.js":"mqbu","./VectorEventType.js":"uZPc","../structs/RBush.js":"yoYZ"}],"wRr6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRegularPolygon=F,exports.createBox=R,exports.default=void 0;var t=N(require("../events/EventType.js")),e=N(require("../Feature.js")),i=N(require("../MapBrowserEventType.js")),s=N(require("../MapBrowserPointerEvent.js")),o=require("../Object.js"),n=require("../coordinate.js"),r=N(require("../events/Event.js")),h=require("../events/condition.js"),a=require("../extent.js"),d=require("../functions.js"),_=N(require("../geom/Circle.js")),u=N(require("../geom/GeometryType.js")),c=N(require("../geom/LineString.js")),l=N(require("../geom/MultiLineString.js")),f=N(require("../geom/MultiPoint.js")),g=N(require("../geom/MultiPolygon.js")),p=N(require("../geom/Point.js")),m=L(require("../geom/Polygon.js")),C=N(require("./Pointer.js")),y=N(require("./Property.js")),P=N(require("../layer/Vector.js")),k=N(require("../source/Vector.js")),T=require("../style/Style.js"),w=require("../proj.js");function O(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return O=function(){return t},t}function L(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=O();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var n=s?Object.getOwnPropertyDescriptor(t,o):null;n&&(n.get||n.set)?Object.defineProperty(i,o,n):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}function N(t){return t&&t.__esModule?t:{default:t}}const D={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},I={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class E extends r.default{constructor(t,e){super(t),this.feature=e}}class v extends C.default{constructor(t){const e=t;e.stopDown||(e.stopDown=d.FALSE),super(e),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=j(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_===D.POLYGON?3:2,this.maxPoints_=t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:d.TRUE;let i=t.geometryFunction;if(!i)if(this.type_===u.default.CIRCLE)i=function(t,e,i){const s=e||new _.default([NaN,NaN]),o=(0,w.fromUserCoordinate)(t[0],i),r=(0,n.squaredDistance)(o,(0,w.fromUserCoordinate)(t[1],i));s.setCenterAndRadius(o,Math.sqrt(r));const h=(0,w.getUserProjection)();return h&&s.transform(i,h),s};else{let t;const e=this.mode_;e===D.POINT?t=p.default:e===D.LINE_STRING?t=c.default:e===D.POLYGON&&(t=m.default),i=function(i,s,o){let n=s;return n?e===D.POLYGON?i[0].length?n.setCoordinates([i[0].concat([i[0][0]])]):n.setCoordinates([]):n.setCoordinates(i):n=new t(i),n}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new P.default({source:new k.default({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:G(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:h.noModifierKeys,this.freehandCondition_,t.freehand?this.freehandCondition_=h.always:this.freehandCondition_=t.freehandCondition?t.freehandCondition:h.shiftKeyOnly,this.addEventListener((0,o.getChangeEventType)(y.default.ACTIVE),this.updateState_)}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===t.default.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==D.POINT&&this.freehandCondition_(e);let s=e.type===i.default.POINTERMOVE,o=!0;if(!this.freehand_&&this.lastDragTime_&&e.type===i.default.POINTERDRAG){Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,s=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&e.type===i.default.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),o=!1):this.freehand_&&e.type===i.default.POINTERDOWN?o=!1:s?(o=e.type===i.default.POINTERMOVE)&&this.freehand_?o=this.handlePointerMove_(e):("mouse"==e.pointerEvent.pointerType||e.type===i.default.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===i.default.DBLCLICK&&(o=!1),super.handleEvent(e)&&o}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new s.default(i.default.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}handleUpEvent(t){let e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const i=this.mode_===D.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate):(this.startDrawing_(t),this.mode_===D.POINT&&this.finishDrawing()),e=!1):this.freehand_&&this.abortDrawing(),!e&&this.stopClick_&&t.stopPropagation(),e}handlePointerMove_(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,i=t.pixel,s=e[0]-i[0],o=e[1]-i[1],n=s*s+o*o;if(this.shouldHandle_=this.freehand_?n>this.squaredClickTolerance_:n<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0}atFinish_(t){let e=!1;if(this.sketchFeature_){let i=!1,s=[this.finishCoordinate_];if(this.mode_===D.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===D.POLYGON){const t=this.sketchCoords_;i=t[0].length>this.minPoints_,s=[t[0][0],t[0][t[0].length-2]]}if(i){const i=t.map;for(let o=0,n=s.length;o<n;o++){const n=s[o],r=i.getPixelFromCoordinate(n),h=t.pixel,a=h[0]-r[0],d=h[1]-r[1],_=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(a*a+d*d)<=_){this.finishCoordinate_=n;break}}}}return e}createOrUpdateSketchPoint_(t){const i=t.coordinate.slice();if(this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(i)}else this.sketchPoint_=new e.default(new p.default(i)),this.updateSketchFeatures_()}startDrawing_(t){const i=t.coordinate,s=t.map.getView().getProjection();this.finishCoordinate_=i,this.mode_===D.POINT?this.sketchCoords_=i.slice():this.mode_===D.POLYGON?(this.sketchCoords_=[[i.slice(),i.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[i.slice(),i.slice()],this.sketchLineCoords_&&(this.sketchLine_=new e.default(new c.default(this.sketchLineCoords_)));const o=this.geometryFunction_(this.sketchCoords_,void 0,s);this.sketchFeature_=new e.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(o),this.updateSketchFeatures_(),this.dispatchEvent(new E(I.DRAWSTART,this.sketchFeature_))}modifyDrawing_(t){let i=t.coordinate;const s=this.sketchFeature_.getGeometry(),o=t.map.getView().getProjection();let n,r,h;if(this.mode_===D.POINT?r=this.sketchCoords_:this.mode_===D.POLYGON?(r=(n=this.sketchCoords_[0])[n.length-1],this.atFinish_(t)&&(i=this.finishCoordinate_.slice())):r=(n=this.sketchCoords_)[n.length-1],r[0]=i[0],r[1]=i[1],this.geometryFunction_(this.sketchCoords_,s,o),this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(i)}if(s.getType()==u.default.POLYGON&&this.mode_!==D.POLYGON){this.sketchLine_||(this.sketchLine_=new e.default);const t=s.getLinearRing(0);(h=this.sketchLine_.getGeometry())?(h.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),h.changed()):(h=new c.default(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(h))}else this.sketchLineCoords_&&(h=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let s,o;this.mode_===D.LINE_STRING?(this.finishCoordinate_=t.slice(),(o=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?o.pop():s=!0),o.push(t.slice()),this.geometryFunction_(o,e,i)):this.mode_===D.POLYGON&&((o=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?o.pop():s=!0),o.push(t.slice()),s&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,e,i)),this.updateSketchFeatures_(),s&&this.finishDrawing()}removeLastPoint(){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),e=this.getMap().getView().getProjection();let i,s;this.mode_===D.LINE_STRING?((i=this.sketchCoords_).splice(-2,1),this.geometryFunction_(i,t,e),i.length>=2&&(this.finishCoordinate_=i[i.length-2].slice())):this.mode_===D.POLYGON&&((i=this.sketchCoords_[0]).splice(-2,1),(s=this.sketchLine_.getGeometry()).setCoordinates(i),this.geometryFunction_(this.sketchCoords_,t,e)),0===i.length&&this.abortDrawing(),this.updateSketchFeatures_()}finishDrawing(){const t=this.abortDrawing_();if(!t)return;let e=this.sketchCoords_;const i=t.getGeometry(),s=this.getMap().getView().getProjection();this.mode_===D.LINE_STRING?(e.pop(),this.geometryFunction_(e,i,s)):this.mode_===D.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i,s),e=i.getCoordinates()),this.type_===u.default.MULTI_POINT?t.setGeometry(new f.default([e])):this.type_===u.default.MULTI_LINE_STRING?t.setGeometry(new l.default([e])):this.type_===u.default.MULTI_POLYGON&&t.setGeometry(new g.default([e])),this.dispatchEvent(new E(I.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new E(I.DRAWABORT,t))}appendCoordinates(t){const e=this.mode_;let i=[];e===D.LINE_STRING?i=this.sketchCoords_:e===D.POLYGON&&(i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);const s=i.pop();for(let o=0;o<t.length;o++)this.addToDrawing_(t[o]);this.addToDrawing_(s)}extend(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new E(I.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)}}function G(){const t=(0,T.createEditingStyle)();return function(e,i){return t[e.getGeometry().getType()]}}function F(t,e){return function(i,s,o){const r=(0,w.fromUserCoordinate)(i[0],o),h=(0,w.fromUserCoordinate)(i[1],o),a=Math.sqrt((0,n.squaredDistance)(r,h)),d=s||(0,m.fromCircle)(new _.default(r),t);let u=e;if(!e){const t=h[0]-r[0],e=h[1]-r[1];u=Math.atan(e/t)-(t<0?Math.PI:0)}(0,m.makeRegular)(d,r,a,u);const c=(0,w.getUserProjection)();return c&&d.transform(o,c),d}}function R(){return function(t,e,i){const s=(0,a.boundingExtent)(t.map(function(t){return(0,w.fromUserCoordinate)(t,i)})),o=[[(0,a.getBottomLeft)(s),(0,a.getBottomRight)(s),(0,a.getTopRight)(s),(0,a.getTopLeft)(s),(0,a.getBottomLeft)(s)]];let n=e;n?n.setCoordinates(o):n=new m.default(o);const r=(0,w.getUserProjection)();return r&&n.transform(i,r),n}}function j(t){let e;return t===u.default.POINT||t===u.default.MULTI_POINT?e=D.POINT:t===u.default.LINE_STRING||t===u.default.MULTI_LINE_STRING?e=D.LINE_STRING:t===u.default.POLYGON||t===u.default.MULTI_POLYGON?e=D.POLYGON:t===u.default.CIRCLE&&(e=D.CIRCLE),e}var M=v;exports.default=M;
},{"../events/EventType.js":"Ak1Z","../Feature.js":"ZfC4","../MapBrowserEventType.js":"vFoD","../MapBrowserPointerEvent.js":"tNGF","../Object.js":"X18S","../coordinate.js":"irUP","../events/Event.js":"rYf1","../events/condition.js":"TePD","../extent.js":"E4kN","../functions.js":"mKAY","../geom/Circle.js":"baQX","../geom/GeometryType.js":"I79K","../geom/LineString.js":"nG5b","../geom/MultiLineString.js":"GJ0c","../geom/MultiPoint.js":"FLg1","../geom/MultiPolygon.js":"UyXA","../geom/Point.js":"xPgY","../geom/Polygon.js":"AvIG","./Pointer.js":"qhn4","./Property.js":"oxEL","../layer/Vector.js":"SuA6","../source/Vector.js":"eQui","../style/Style.js":"AL4u","../proj.js":"HKfS"}],"nMeT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"};exports.default=e;
},{}],"av2E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};exports.default=t;
},{}],"kpPG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("./MapEventType.js")),t=d(require("./Object.js")),i=h(require("./OverlayPositioning.js")),n=require("./css.js"),s=require("./dom.js"),o=require("./events.js"),r=require("./extent.js");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}function h(e){return e&&e.__esModule?e:{default:e}}const l={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class u extends t.default{constructor(e){super(),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+n.CLASS_SELECTABLE,this.element.style.position="absolute";let s=e.autoPan;s&&"object"!=typeof s&&(s={animation:e.autoPanAnimation,margin:e.autoPanMargin}),this.autoPan=s||!1,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addEventListener((0,t.getChangeEventType)(l.ELEMENT),this.handleElementChanged),this.addEventListener((0,t.getChangeEventType)(l.MAP),this.handleMapChanged),this.addEventListener((0,t.getChangeEventType)(l.OFFSET),this.handleOffsetChanged),this.addEventListener((0,t.getChangeEventType)(l.POSITION),this.handlePositionChanged),this.addEventListener((0,t.getChangeEventType)(l.POSITIONING),this.handlePositioningChanged),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:i.default.TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)}getElement(){return this.get(l.ELEMENT)}getId(){return this.id}getMap(){return this.get(l.MAP)}getOffset(){return this.get(l.OFFSET)}getPosition(){return this.get(l.POSITION)}getPositioning(){return this.get(l.POSITIONING)}handleElementChanged(){(0,s.removeChildren)(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,s.removeNode)(this.element),(0,o.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,o.listen)(t,e.default.POSTRENDER,this.render,this),this.updatePixelPosition();const i=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(l.ELEMENT,e)}setMap(e){this.set(l.MAP,e)}setOffset(e){this.set(l.OFFSET,e)}setPosition(e){this.set(l.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(l.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),o=this.getRect(n,[(0,s.outerWidth)(n),(0,s.outerHeight)(n)]),a=void 0===e.margin?20:e.margin;if(!(0,r.containsExtent)(i,o)){const n=o[0]-i[0],s=i[2]-o[2],r=o[1]-i[1],d=i[3]-o[3],h=[0,0];if(n<0?h[0]=n-a:s<0&&(h[0]=Math.abs(s)+a),r<0?h[1]=r-a:d<0&&(h[1]=Math.abs(d)+a),0!==h[0]||0!==h[1]){const i=t.getView().getCenterInternal(),n=t.getPixelFromCoordinateInternal(i),s=[n[0]+h[0],n[1]+h[1]],o=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(s),duration:o.duration,easing:o.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),n=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[n,s,n+t[0],s+t[1]]}setPositioning(e){this.set(l.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t)return void this.setVisible(!1);const i=e.getPixelFromCoordinate(t),n=e.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(e,t){const n=this.element.style,s=this.getOffset(),o=this.getPositioning();this.setVisible(!0);const r=Math.round(e[0]+s[0])+"px",a=Math.round(e[1]+s[1])+"px";let d="0%",h="0%";o==i.default.BOTTOM_RIGHT||o==i.default.CENTER_RIGHT||o==i.default.TOP_RIGHT?d="-100%":o!=i.default.BOTTOM_CENTER&&o!=i.default.CENTER_CENTER&&o!=i.default.TOP_CENTER||(d="-50%"),o==i.default.BOTTOM_LEFT||o==i.default.BOTTOM_CENTER||o==i.default.BOTTOM_RIGHT?h="-100%":o!=i.default.CENTER_LEFT&&o!=i.default.CENTER_CENTER&&o!=i.default.CENTER_RIGHT||(h="-50%");const l=`translate(${d}, ${h}) translate(${r}, ${a})`;this.rendered.transform_!=l&&(this.rendered.transform_=l,n.transform=l,n.msTransform=l)}getOptions(){return this.options}}var g=u;exports.default=g;
},{"./MapEventType.js":"nMeT","./Object.js":"X18S","./OverlayPositioning.js":"av2E","./css.js":"omMx","./dom.js":"MHGO","./events.js":"TEtv","./extent.js":"E4kN"}],"rfU2":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MapAction=void 0;var i=function(){function e(n){var i=this;t(this,e),Array.isArray(n)||(n=[n]),this.interactions=[],n.forEach(function(t){i.addInteraction(t)})}return n(e,[{key:"addInteraction",value:function(t){t.setActive(!1),this.interactions.push(t)}},{key:"activate",value:function(){this.interactions.forEach(function(t){t.setActive(!0)})}},{key:"deactivate",value:function(){this.interactions.forEach(function(t){t.setActive(!1)})}}]),e}();exports.MapAction=i;
},{}],"UJQJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=_(require("../CollectionEventType.js")),r=require("../coordinate.js"),i=require("../events.js"),s=_(require("../events/EventType.js")),n=require("../extent.js"),o=require("../functions.js"),a=_(require("../geom/GeometryType.js")),h=require("../geom/Polygon.js"),u=_(require("./Pointer.js")),l=require("../obj.js"),d=_(require("../source/VectorEventType.js")),c=_(require("../structs/RBush.js")),g=require("../proj.js");function _(e){return e&&e.__esModule?e:{default:e}}function f(e){return e.feature?e.feature:e.element?e.element:void 0}const m=[];class x extends u.default{constructor(e){const t=e||{},r=t;r.handleDownEvent||(r.handleDownEvent=o.TRUE),r.stopDown||(r.stopDown=o.FALSE),super(r),this.source_=t.source?t.source:null,this.vertex_=void 0===t.vertex||t.vertex,this.edge_=void 0===t.edge||t.edge,this.features_=t.features?t.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.rBush_=new c.default,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this)}}addFeature(t,r){const o=void 0===r||r,a=(0,e.getUid)(t),h=t.getGeometry();if(h){const e=this.SEGMENT_WRITERS_[h.getType()];e&&(this.indexedFeaturesExtents_[a]=h.getExtent((0,n.createEmpty)()),e(t,h))}o&&(this.featureChangeListenerKeys_[a]=(0,i.listen)(t,s.default.CHANGE,this.handleFeatureChange_,this))}forEachFeatureAdd_(e){this.addFeature(e)}forEachFeatureRemove_(e){this.removeFeature(e)}getFeatures_(){let e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e}handleEvent(e){const t=this.snapTo(e.pixel,e.coordinate,e.map);return t.snapped&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel),super.handleEvent(e)}handleFeatureAdd_(e){const t=f(e);this.addFeature(t)}handleFeatureRemove_(e){const t=f(e);this.removeFeature(t)}handleFeatureChange_(t){const r=t.target;if(this.handlingDownUpSequence){const t=(0,e.getUid)(r);t in this.pendingFeatures_||(this.pendingFeatures_[t]=r)}else this.updateFeature_(r)}handleUpEvent(e){const t=(0,l.getValues)(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}removeFeature(t,r){const s=void 0===r||r,n=(0,e.getUid)(t),o=this.indexedFeaturesExtents_[n];if(o){const e=this.rBush_,r=[];e.forEachInExtent(o,function(e){t===e.feature&&r.push(e)});for(let t=r.length-1;t>=0;--t)e.remove(r[t])}s&&((0,i.unlistenByKey)(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])}setMap(e){const r=this.getMap(),s=this.featuresListenerKeys_,n=this.getFeatures_();r&&(s.forEach(i.unlistenByKey),s.length=0,n.forEach(this.forEachFeatureRemove_.bind(this))),super.setMap(e),e&&(this.features_?s.push((0,i.listen)(this.features_,t.default.ADD,this.handleFeatureAdd_,this),(0,i.listen)(this.features_,t.default.REMOVE,this.handleFeatureRemove_,this)):this.source_&&s.push((0,i.listen)(this.source_,d.default.ADDFEATURE,this.handleFeatureAdd_,this),(0,i.listen)(this.source_,d.default.REMOVEFEATURE,this.handleFeatureRemove_,this)),n.forEach(this.forEachFeatureAdd_.bind(this)))}snapTo(e,t,i){const s=i.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),o=i.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),h=(0,n.boundingExtent)([s,o]);let u=this.rBush_.getInExtent(h);this.vertex_&&!this.edge_&&(u=u.filter(function(e){return e.feature.getGeometry().getType()!==a.default.CIRCLE}));let l=!1,d=null,c=null;if(0===u.length)return{snapped:l,vertex:d,vertexPixel:c};const _=i.getView().getProjection(),f=(0,g.fromUserCoordinate)(t,_);let x,p=1/0;for(let n=0;n<u.length;++n){const e=u[n];m[0]=(0,g.fromUserCoordinate)(e.segment[0],_),m[1]=(0,g.fromUserCoordinate)(e.segment[1],_);const t=(0,r.squaredDistanceToSegment)(f,m);t<p&&(x=e,p=t)}const E=x.segment;if(this.vertex_&&!this.edge_){const t=i.getPixelFromCoordinate(E[0]),s=i.getPixelFromCoordinate(E[1]),n=(0,r.squaredDistance)(e,t),o=(0,r.squaredDistance)(e,s);Math.sqrt(Math.min(n,o))<=this.pixelTolerance_&&(l=!0,d=n>o?E[1]:E[0],c=i.getPixelFromCoordinate(d))}else if(this.edge_){const t=x.feature.getGeometry().getType()===a.default.CIRCLE;if(t){let e=x.feature.getGeometry();const t=(0,g.getUserProjection)();t&&(e=e.clone().transform(t,_)),d=(0,g.toUserCoordinate)((0,r.closestOnCircle)(f,e),_)}else m[0]=(0,g.fromUserCoordinate)(E[0],_),m[1]=(0,g.fromUserCoordinate)(E[1],_),d=(0,g.toUserCoordinate)((0,r.closestOnSegment)(f,m),_);if(c=i.getPixelFromCoordinate(d),(0,r.distance)(e,c)<=this.pixelTolerance_&&(l=!0,this.vertex_&&!t)){const e=i.getPixelFromCoordinate(E[0]),t=i.getPixelFromCoordinate(E[1]),s=(0,r.squaredDistance)(c,e),n=(0,r.squaredDistance)(c,t);Math.sqrt(Math.min(s,n))<=this.pixelTolerance_&&(d=s>n?E[1]:E[0],c=i.getPixelFromCoordinate(d))}}return l&&(c=[Math.round(c[0]),Math.round(c[1])]),{snapped:l,vertex:d,vertexPixel:c}}updateFeature_(e){this.removeFeature(e,!1),this.addFeature(e,!1)}writeCircleGeometry_(e,t){const r=this.getMap().getView().getProjection();let i=t;const s=(0,g.getUserProjection)();s&&(i=i.clone().transform(s,r));const o=(0,h.fromCircle)(i);s&&o.transform(r,s);const a=o.getCoordinates()[0];for(let h=0,u=a.length-1;h<u;++h){const t=a.slice(h,h+2),r={feature:e,segment:t};this.rBush_.insert((0,n.boundingExtent)(t),r)}}writeGeometryCollectionGeometry_(e,t){const r=t.getGeometriesArray();for(let i=0;i<r.length;++i){const t=this.SEGMENT_WRITERS_[r[i].getType()];t&&t(e,r[i])}}writeLineStringGeometry_(e,t){const r=t.getCoordinates();for(let i=0,s=r.length-1;i<s;++i){const t=r.slice(i,i+2),s={feature:e,segment:t};this.rBush_.insert((0,n.boundingExtent)(t),s)}}writeMultiLineStringGeometry_(e,t){const r=t.getCoordinates();for(let i=0,s=r.length;i<s;++i){const t=r[i];for(let r=0,i=t.length-1;r<i;++r){const i=t.slice(r,r+2),s={feature:e,segment:i};this.rBush_.insert((0,n.boundingExtent)(i),s)}}}writeMultiPointGeometry_(e,t){const r=t.getCoordinates();for(let i=0,s=r.length;i<s;++i){const s=r[i],n={feature:e,segment:[s,s]};this.rBush_.insert(t.getExtent(),n)}}writeMultiPolygonGeometry_(e,t){const r=t.getCoordinates();for(let i=0,s=r.length;i<s;++i){const t=r[i];for(let r=0,i=t.length;r<i;++r){const i=t[r];for(let t=0,r=i.length-1;t<r;++t){const r=i.slice(t,t+2),s={feature:e,segment:r};this.rBush_.insert((0,n.boundingExtent)(r),s)}}}}writePointGeometry_(e,t){const r=t.getCoordinates(),i={feature:e,segment:[r,r]};this.rBush_.insert(t.getExtent(),i)}writePolygonGeometry_(e,t){const r=t.getCoordinates();for(let i=0,s=r.length;i<s;++i){const t=r[i];for(let r=0,i=t.length-1;r<i;++r){const i=t.slice(r,r+2),s={feature:e,segment:i};this.rBush_.insert((0,n.boundingExtent)(i),s)}}}}var p=x;exports.default=p;
},{"../util.js":"gvrh","../CollectionEventType.js":"zerY","../coordinate.js":"irUP","../events.js":"TEtv","../events/EventType.js":"Ak1Z","../extent.js":"E4kN","../functions.js":"mKAY","../geom/GeometryType.js":"I79K","../geom/Polygon.js":"AvIG","./Pointer.js":"qhn4","../obj.js":"c6bJ","../source/VectorEventType.js":"uZPc","../structs/RBush.js":"yoYZ","../proj.js":"HKfS"}],"jQkn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SnapInteraction=void 0;var t=e(require("ol/src/ol/interaction/Snap"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return function(){var e,n=l(t);if(a()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)}}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(e){o(c,t.default);var n=u(c);function c(t){var e;r(this,c);var o={source:t?t.getSource():null,pixelTolerance:7};return(e=n.call(this,o)).snapOptions=o,e}return c}();exports.SnapInteraction=s;
},{"ol/src/ol/interaction/Snap":"UJQJ"}],"ddC2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DrawAction=void 0;var e=a(require("ol/src/ol/interaction/Draw")),t=a(require("ol/src/ol/Overlay")),o=require("ol/src/ol/geom"),n=require("ol/src/ol/Observable"),r=require("./vl-mapactions-mapaction"),i=require("./vl-mapactions-snap-interaction");function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,o){return t&&s(e.prototype,t),o&&s(e,o),e}function f(e,t,o){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,o){var n=p(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(o):r.value}})(e,t,o||e)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return function(){var t,o=b(e);if(d()){var n=b(this).constructor;t=Reflect.construct(o,arguments,n)}else t=o.apply(this,arguments);return g(this,t)}}function g(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(a){y(p,r.MapAction);var s=v(p);function p(o,r,a,l){var f;c(this,p);var y=[],m=l||{};m.source=o.getSource(),m.type=r;var v=new e.default(m);return y.push(v),m.snapping&&y.push(new i.SnapInteraction(m.snapping.layer||o)),v.on("drawstart",function(e){if(m.measure){var o=e.feature;m.measure="object"===u(m.measure)?m.measure:{},m.measure.tooltip=m.measure.tooltip||{};var n=document.createElement("div");n.setAttribute("class","measure-tooltip"),f.tooltip=new t.default({offset:m.measure.tooltip.offset||[-15,10],positioning:"bottom-center"}),f.map.addOverlay(f.tooltip),f.measurePointermoveHandler=f.map.on("pointermove",function(){f._showMeasureTooltip(o,f.tooltip,n)})}}),v.on("drawend",function(e){var t=e.feature;a(t,function(){try{o.getSource().removeFeature(t)}catch(r){var e=o.getSource().on("addfeature",function(t){o.getSource().removeFeature(t.feature),(0,n.unByKey)(e)})}}),f._cleanUp()}),(f=s.call(this,y)).drawOptions=m,f.drawInteraction=v,f}return l(p,[{key:"deactivate",value:function(){this._cleanUp(),f(b(p.prototype),"deactivate",this).call(this)}},{key:"_cleanUp",value:function(){this.drawOptions.measure&&((0,n.unByKey)(this.measurePointermoveHandler),this._removeTooltip())}},{key:"_removeTooltip",value:function(){this.tooltip&&(this.map.removeOverlay(this.tooltip),this.tooltip=void 0)}},{key:"_showMeasureTooltip",value:function(e,t){if(this.tooltip){var o=this._getLengthOfLastSegment(e.getGeometry());0!==o&&(t.textContent=o+" m",this.tooltip.setElement(t),this.tooltip.setPosition(e.getGeometry().getLastCoordinate()))}}},{key:"_getLengthOfLastSegment",value:function(e){return e&&e instanceof o.LineString?new o.LineString(this._getCoordinatesOfLastSegment(e)).getLength().toFixed(2):e&&e instanceof o.Polygon?new o.LineString(this._getCoordinatesOfLastSegment(e.getLinearRing(0))).getLength().toFixed(2):0}},{key:"_getCoordinatesOfLastSegment",value:function(e){var t=e.getCoordinates().length;return e.getCoordinates().slice(t-2)}}]),p}();exports.DrawAction=O;
},{"ol/src/ol/interaction/Draw":"wRr6","ol/src/ol/Overlay":"kpPG","ol/src/ol/geom":"q8kg","ol/src/ol/Observable":"VYsY","./vl-mapactions-mapaction":"rfU2","./vl-mapactions-snap-interaction":"jQkn"}],"N6fZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DrawRectangleAction=void 0;var t=require("ol/src/ol/geom"),e=require("./vl-mapactions-draw-action");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){return function(){var e,n=s(t);if(a()){var r=s(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return u(this,e)}}function u(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(n){o(u,e.DrawAction);var c=i(u);function u(e,n,o){var i;r(this,u);var f=o||{};return f.maxPoints=2,f.geometryFunction=function(e,n){n||(n=new t.Polygon([]));var r=e[0],o=e[1];return n.setCoordinates([[r,[r[0],o[1]],o,[o[0],r[1]],r]]),n},(i=c.call(this,e,"LineString",n,f)).drawRectangleOptions=f,i}return u}();exports.DrawRectangleAction=l;
},{"ol/src/ol/geom":"q8kg","./vl-mapactions-draw-action":"ddC2"}]},{},["N6fZ"], null)
//# sourceMappingURL=/vl-mapactions-draw-rectangle-action.js.map