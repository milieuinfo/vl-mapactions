parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"gvrh":[function(require,module,exports) {
"use strict";function t(){return function(){throw new Error("Unimplemented abstract method.")}()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.abstract=t,exports.getUid=r,exports.VERSION=void 0;let e=0;function r(t){return t.ol_uid||(t.ol_uid=String(++e))}const o="latest";exports.VERSION=o;
},{}],"ixPR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./util.js");class s extends Error{constructor(s){const r="Assertion failed. See https://openlayers.org/en/"+("latest"===e.VERSION?e.VERSION:"v"+e.VERSION.split("-")[0])+"/doc/errors/#"+s+" for details.";super(r),this.code=s,this.name="AssertionError",this.message=r}}var r=s;exports.default=r;
},{"./util.js":"gvrh"}],"kWiW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=t;var e=r(require("./AssertionError.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if(!r)throw new e.default(t)}
},{"./AssertionError.js":"ixPR"}],"c6bJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=e,exports.isEmpty=o,exports.getValues=exports.assign=void 0;const t="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");const n=Object(t);for(let o=1,s=arguments.length;o<s;++o){const t=arguments[o];if(null!=t)for(const e in t)t.hasOwnProperty(e)&&(n[e]=t[e])}return n};function e(t){for(const e in t)delete t[e]}exports.assign=t;const n="function"==typeof Object.values?Object.values:function(t){const e=[];for(const n in t)e.push(t[n]);return e};function o(t){let e;for(e in t)return!1;return!e}exports.getValues=n;
},{}],"TEtv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.listen=t,exports.listenOnce=n,exports.unlistenByKey=r;var e=require("./obj.js");function t(e,t,n,r,o){if(r&&r!==e&&(n=n.bind(r)),o){const r=n;n=function(){e.removeEventListener(t,n),r.apply(this,arguments)}}const s={target:e,type:t,listener:n};return e.addEventListener(t,n),s}function n(e,n,r,o){return t(e,n,r,o,!0)}function r(t){console.log(t),t&&t.target&&(console.log(t.target),t.target.removeEventListener(t.type,t.listener),(0,e.clear)(t))}
},{"./obj.js":"c6bJ"}],"Ak1Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};exports.default=e;
},{}],"ptNe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PROPERTYCHANGE:"propertychange"};exports.default=e;
},{}],"g7g6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class s{constructor(){this.disposed_=!1}dispose(){this.disposed_||(this.disposed_=!0,this.disposeInternal())}disposeInternal(){}}var e=s;exports.default=e;
},{}],"uHwP":[function(require,module,exports) {
"use strict";function e(e,n,t){let o,u;const i=t||r;let f=0,s=e.length,l=!1;for(;f<s;)(u=+i(e[o=f+(s-f>>1)],n))<0?f=o+1:(s=o,l=!u);return l?f:~f}function r(e,r){return e>r?1:e<r?-1:0}function n(e,r){return e.indexOf(r)>=0}function t(e,r,n){const t=e.length;if(e[0]<=r)return 0;if(r<=e[t-1])return t-1;{let o;if(n>0){for(o=1;o<t;++o)if(e[o]<r)return o-1}else if(n<0){for(o=1;o<t;++o)if(e[o]<=r)return o}else for(o=1;o<t;++o){if(e[o]==r)return o;if(e[o]<r)return e[o-1]-r<r-e[o]?o-1:o}return t-1}}function o(e,r,n){for(;r<n;){const t=e[r];e[r]=e[n],e[n]=t,++r,--n}}function u(e,r){const n=Array.isArray(r)?r:[r],t=n.length;for(let o=0;o<t;o++)e[e.length]=n[o]}function i(e,r){const n=e.indexOf(r),t=n>-1;return t&&e.splice(n,1),t}function f(e,r){const n=e.length>>>0;let t;for(let o=0;o<n;o++)if(r(t=e[o],o,e))return t;return null}function s(e,r){const n=e.length;if(n!==r.length)return!1;for(let t=0;t<n;t++)if(e[t]!==r[t])return!1;return!0}function l(e,r){const n=e.length,t=Array(e.length);let o;for(o=0;o<n;o++)t[o]={index:o,value:e[o]};for(t.sort(function(e,n){return r(e.value,n.value)||e.index-n.index}),o=0;o<e.length;o++)e[o]=t[o].value}function c(e,r){let n;return!e.every(function(t,o){return n=o,!r(t,o,e)})?n:-1}function x(e,n,t){const o=n||r;return e.every(function(r,n){if(0===n)return!0;const u=o(e[n-1],r);return!(u>0||t&&0===u)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.binarySearch=e,exports.numberSafeCompareFunction=r,exports.includes=n,exports.linearFindNearest=t,exports.reverseSubArray=o,exports.extend=u,exports.remove=i,exports.find=f,exports.equals=s,exports.stableSort=l,exports.findIndex=c,exports.isSorted=x;
},{}],"mKAY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TRUE=t,exports.FALSE=r,exports.VOID=n,exports.memoizeOne=o;var e=require("./array.js");function t(){return!0}function r(){return!1}function n(){}function o(t){let r,n,o,s=!1;return function(){const u=Array.prototype.slice.call(arguments);return s&&this===o&&(0,e.equals)(u,n)||(s=!0,o=this,n=u,r=t.apply(this,arguments)),r}}
},{"./array.js":"uHwP"}],"rYf1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stopPropagation=o,exports.preventDefault=e,exports.default=void 0;class t{constructor(t){this.propagationStopped,this.type=t,this.target=null}preventDefault(){this.propagationStopped=!0}stopPropagation(){this.propagationStopped=!0}}function o(t){t.stopPropagation()}function e(t){t.preventDefault()}var p=t;exports.default=p;
},{}],"VT2J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("../Disposable.js")),t=require("../functions.js"),s=n(require("./Event.js")),i=require("../obj.js");function n(e){return e&&e.__esModule?e:{default:e}}class r extends e.default{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}addEventListener(e,t){if(!e||!t)return;let s=this.listeners_[e];s||(s=[],this.listeners_[e]=s),-1===s.indexOf(t)&&s.push(t)}dispatchEvent(e){const i="string"==typeof e?new s.default(e):e,n=i.type;i.target||(i.target=this.eventTarget_||this);const r=this.listeners_[n];let h;if(r){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(let e=0,t=r.length;e<t;++e)if(!1===(h="handleEvent"in r[e]?r[e].handleEvent(i):r[e].call(this,i))||i.propagationStopped){h=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){let e=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];e--;)this.removeEventListener(n,t.VOID);delete this.dispatching_[n]}return h}}disposeInternal(){(0,i.clear)(this.listeners_)}getListeners(e){return this.listeners_[e]}hasListener(e){return e?e in this.listeners_:Object.keys(this.listeners_).length>0}removeEventListener(e,s){const i=this.listeners_[e];if(i){const n=i.indexOf(s);-1!==n&&(e in this.pendingRemovals_?(i[n]=t.VOID,++this.pendingRemovals_[e]):(i.splice(n,1),0===i.length&&delete this.listeners_[e]))}}}var h=r;exports.default=h;
},{"../Disposable.js":"g7g6","../functions.js":"mKAY","./Event.js":"rYf1","../obj.js":"c6bJ"}],"VYsY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unByKey=i,exports.default=void 0;var e=require("./events.js"),r=s(require("./events/Target.js")),t=s(require("./events/EventType.js"));function s(e){return e&&e.__esModule?e:{default:e}}class n extends r.default{constructor(){super(),this.revision_=0}changed(){++this.revision_,this.dispatchEvent(t.default.CHANGE)}getRevision(){return this.revision_}on(r,t){if(Array.isArray(r)){const s=r.length,n=new Array(s);for(let i=0;i<s;++i)n[i]=(0,e.listen)(this,r[i],t);return n}return(0,e.listen)(this,r,t)}once(r,t){if(Array.isArray(r)){const s=r.length,n=new Array(s);for(let i=0;i<s;++i)n[i]=(0,e.listenOnce)(this,r[i],t);return n}return(0,e.listenOnce)(this,r,t)}un(e,r){if(Array.isArray(e))for(let t=0,s=e.length;t<s;++t)this.removeEventListener(e[t],r);else this.removeEventListener(e,r)}}function i(r){if(Array.isArray(r))for(let t=0,s=r.length;t<s;++t)(0,e.unlistenByKey)(r[t]);else(0,e.unlistenByKey)(r)}var o=n;exports.default=o;
},{"./events.js":"TEtv","./events/Target.js":"VT2J","./events/EventType.js":"Ak1Z"}],"X18S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getChangeEventType=l,exports.default=exports.ObjectEvent=void 0;var e=require("./util.js"),t=u(require("./ObjectEventType.js")),s=u(require("./Observable.js")),r=u(require("./events/Event.js")),i=require("./obj.js");function u(e){return e&&e.__esModule?e:{default:e}}class n extends r.default{constructor(e,t,s){super(e),this.key=t,this.oldValue=s}}exports.ObjectEvent=n;class o extends s.default{constructor(t){super(),(0,e.getUid)(this),this.values_={},void 0!==t&&this.setProperties(t)}get(e){let t;return this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return Object.keys(this.values_)}getProperties(){return(0,i.assign)({},this.values_)}notify(e,s){let r;r=l(e),this.dispatchEvent(new n(r,e,s)),r=t.default.PROPERTYCHANGE,this.dispatchEvent(new n(r,e,s))}set(e,t,s){if(s)this.values_[e]=t;else{const s=this.values_[e];this.values_[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const s in e)this.set(s,e[s],t)}unset(e,t){if(e in this.values_){const s=this.values_[e];delete this.values_[e],t||this.notify(e,s)}}}const a={};function l(e){return a.hasOwnProperty(e)?a[e]:a[e]="change:"+e}var h=o;exports.default=h;
},{"./util.js":"gvrh","./ObjectEventType.js":"ptNe","./Observable.js":"VYsY","./events/Event.js":"rYf1","./obj.js":"c6bJ"}],"ZfC4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStyleFunction=y,exports.default=void 0;var e=require("./asserts.js"),t=require("./events.js"),r=o(require("./events/EventType.js")),n=i(require("./Object.js"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function o(e){return e&&e.__esModule?e:{default:e}}class h extends n.default{constructor(e){if(super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addEventListener((0,n.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new h(this.getProperties());e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,t.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=(0,t.listen)(e,r.default.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?y(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeEventListener((0,n.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=e,this.addEventListener((0,n.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()}}function y(t){if("function"==typeof t)return t;{let r;if(Array.isArray(t))r=t;else{(0,e.assert)("function"==typeof t.getZIndex,41),r=[t]}return function(){return r}}}var a=h;exports.default=a;
},{"./asserts.js":"kWiW","./events.js":"TEtv","./events/EventType.js":"Ak1Z","./Object.js":"X18S"}],"crjC":[function(require,module,exports) {
"use strict";function t(t,e,n){return Math.min(Math.max(t,e),n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.clamp=t,exports.squaredSegmentDistance=n,exports.squaredDistance=o,exports.solveLinearSystem=r,exports.toDegrees=s,exports.toRadians=c,exports.modulo=u,exports.lerp=a,exports.cosh=void 0;const e=function(){let t;return t="cosh"in Math?Math.cosh:function(t){const e=Math.exp(t);return(e+1/e)/2}}();function n(t,e,n,r,s,c){const u=s-n,a=c-r;if(0!==u||0!==a){const o=((t-n)*u+(e-r)*a)/(u*u+a*a);o>1?(n=s,r=c):o>0&&(n+=u*o,r+=a*o)}return o(t,e,n,r)}function o(t,e,n,o){const r=n-t,s=o-e;return r*r+s*s}function r(t){const e=t.length;for(let o=0;o<e;o++){let n=o,r=Math.abs(t[o][o]);for(let c=o+1;c<e;c++){const e=Math.abs(t[c][o]);e>r&&(r=e,n=c)}if(0===r)return null;const s=t[n];t[n]=t[o],t[o]=s;for(let c=o+1;c<e;c++){const n=-t[c][o]/t[o][o];for(let r=o;r<e+1;r++)o==r?t[c][r]=0:t[c][r]+=n*t[o][r]}}const n=new Array(e);for(let o=e-1;o>=0;o--){n[o]=t[o][e]/t[o][o];for(let r=o-1;r>=0;r--)t[r][e]-=t[r][o]*n[o]}return n}function s(t){return 180*t/Math.PI}function c(t){return t*Math.PI/180}function u(t,e){const n=t%e;return n*e<0?n+e:n}function a(t,e,n){return t+n*(e-t)}exports.cosh=e;
},{}],"I79K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};exports.default=e;
},{}],"U9gN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDistance=o,exports.getLength=r,exports.getArea=i,exports.offset=u,exports.DEFAULT_RADIUS=void 0;var t=require("./math.js"),e=a(require("./geom/GeometryType.js"));function a(t){return t&&t.__esModule?t:{default:t}}const s=6371008.8;function o(e,a,o){const n=o||s,r=(0,t.toRadians)(e[1]),c=(0,t.toRadians)(a[1]),i=(c-r)/2,u=(0,t.toRadians)(a[0]-e[0])/2,h=Math.sin(i)*Math.sin(i)+Math.sin(u)*Math.sin(u)*Math.cos(r)*Math.cos(c);return 2*n*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function n(t,e){let a=0;for(let s=0,n=t.length;s<n-1;++s)a+=o(t[s],t[s+1],e);return a}function r(t,a){const o=a||{},c=o.radius||s,i=o.projection||"EPSG:3857",u=t.getType();u!==e.default.GEOMETRY_COLLECTION&&(t=t.clone().transform(i,"EPSG:4326"));let h,f,l,d,M,g,I=0;switch(u){case e.default.POINT:case e.default.MULTI_POINT:break;case e.default.LINE_STRING:case e.default.LINEAR_RING:I=n(h=t.getCoordinates(),c);break;case e.default.MULTI_LINE_STRING:case e.default.POLYGON:for(l=0,d=(h=t.getCoordinates()).length;l<d;++l)I+=n(h[l],c);break;case e.default.MULTI_POLYGON:for(l=0,d=(h=t.getCoordinates()).length;l<d;++l)for(M=0,g=(f=h[l]).length;M<g;++M)I+=n(f[M],c);break;case e.default.GEOMETRY_COLLECTION:{const e=t.getGeometries();for(l=0,d=e.length;l<d;++l)I+=r(e[l],a);break}default:throw new Error("Unsupported geometry type: "+u)}return I}function c(e,a){let s=0;const o=e.length;let n=e[o-1][0],r=e[o-1][1];for(let c=0;c<o;c++){const a=e[c][0],o=e[c][1];s+=(0,t.toRadians)(a-n)*(2+Math.sin((0,t.toRadians)(r))+Math.sin((0,t.toRadians)(o))),n=a,r=o}return s*a*a/2}function i(t,a){const o=a||{},n=o.radius||s,r=o.projection||"EPSG:3857",u=t.getType();u!==e.default.GEOMETRY_COLLECTION&&(t=t.clone().transform(r,"EPSG:4326"));let h,f,l,d,M,g,I=0;switch(u){case e.default.POINT:case e.default.MULTI_POINT:case e.default.LINE_STRING:case e.default.MULTI_LINE_STRING:case e.default.LINEAR_RING:break;case e.default.POLYGON:for(h=t.getCoordinates(),I=Math.abs(c(h[0],n)),l=1,d=h.length;l<d;++l)I-=Math.abs(c(h[l],n));break;case e.default.MULTI_POLYGON:for(l=0,d=(h=t.getCoordinates()).length;l<d;++l)for(f=h[l],I+=Math.abs(c(f[0],n)),M=1,g=f.length;M<g;++M)I-=Math.abs(c(f[M],n));break;case e.default.GEOMETRY_COLLECTION:{const e=t.getGeometries();for(l=0,d=e.length;l<d;++l)I+=i(e[l],a);break}default:throw new Error("Unsupported geometry type: "+u)}return I}function u(e,a,o,n){const r=n||s,c=(0,t.toRadians)(e[1]),i=(0,t.toRadians)(e[0]),u=a/r,h=Math.asin(Math.sin(c)*Math.cos(u)+Math.cos(c)*Math.sin(u)*Math.cos(o)),f=i+Math.atan2(Math.sin(o)*Math.sin(u)*Math.cos(c),Math.cos(u)-Math.sin(c)*Math.sin(h));return[(0,t.toDegrees)(f),(0,t.toDegrees)(h)]}exports.DEFAULT_RADIUS=s;
},{"./math.js":"crjC","./geom/GeometryType.js":"I79K"}],"An1B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};exports.default=t;
},{}],"sf50":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};exports.default=e;
},{}],"E4kN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.boundingExtent=o,exports.buffer=a,exports.clone=s,exports.closestSquaredDistanceXY=i,exports.containsCoordinate=f,exports.containsExtent=c,exports.containsXY=p,exports.coordinateRelationship=l,exports.createEmpty=x,exports.createOrUpdate=d,exports.createOrUpdateEmpty=h,exports.createOrUpdateFromCoordinate=g,exports.createOrUpdateFromCoordinates=m,exports.createOrUpdateFromFlatCoordinates=M,exports.createOrUpdateFromRings=E,exports.equals=T,exports.approximatelyEquals=O,exports.extend=C,exports.extendCoordinate=R,exports.extendCoordinates=F,exports.extendFlatCoordinates=I,exports.extendRings=N,exports.extendXY=y,exports.forEachCorner=B,exports.getArea=L,exports.getBottomLeft=U,exports.getBottomRight=G,exports.getCenter=_,exports.getCorner=b,exports.getEnlargedArea=A,exports.getForViewAndSize=S,exports.getHeight=W,exports.getIntersectionArea=q,exports.getIntersection=H,exports.getMargin=X,exports.getSize=j,exports.getTopLeft=V,exports.getTopRight=P,exports.getWidth=Y,exports.intersects=v,exports.isEmpty=w,exports.returnOrUpdate=z,exports.scaleFromCenter=K,exports.intersectsSegment=D,exports.applyTransform=k,exports.wrapX=J;var t=require("./asserts.js"),e=r(require("./extent/Corner.js")),n=r(require("./extent/Relationship.js"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){const e=x();for(let n=0,r=t.length;n<r;++n)R(e,t[n]);return e}function u(t,e,n){return d(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}function a(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function s(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function i(t,e,n){let r,o;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(o=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*o}function f(t,e){return p(t,e[0],e[1])}function c(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function p(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function l(t,e){const r=t[0],o=t[1],u=t[2],a=t[3],s=e[0],i=e[1];let f=n.default.UNKNOWN;return s<r?f|=n.default.LEFT:s>u&&(f|=n.default.RIGHT),i<o?f|=n.default.BELOW:i>a&&(f|=n.default.ABOVE),f===n.default.UNKNOWN&&(f=n.default.INTERSECTING),f}function x(){return[1/0,1/0,-1/0,-1/0]}function d(t,e,n,r,o){return o?(o[0]=t,o[1]=e,o[2]=n,o[3]=r,o):[t,e,n,r]}function h(t){return d(1/0,1/0,-1/0,-1/0,t)}function g(t,e){const n=t[0],r=t[1];return d(n,r,n,r,e)}function m(t,e){return F(h(e),t)}function M(t,e,n,r,o){return I(h(o),t,e,n,r)}function E(t,e){return N(h(e),t)}function T(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function O(t,e,n){return Math.abs(t[0]-e[0])<n&&Math.abs(t[2]-e[2])<n&&Math.abs(t[1]-e[1])<n&&Math.abs(t[3]-e[3])<n}function C(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function R(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function F(t,e){for(let n=0,r=e.length;n<r;++n)R(t,e[n]);return t}function I(t,e,n,r,o){for(;n<r;n+=o)y(t,e[n],e[n+1]);return t}function N(t,e){for(let n=0,r=e.length;n<r;++n)F(t,e[n]);return t}function y(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function B(t,e){let n;return(n=e(U(t)))?n:(n=e(G(t)))?n:(n=e(P(t)))?n:(n=e(V(t)))||!1}function L(t){let e=0;return w(t)||(e=Y(t)*W(t)),e}function U(t){return[t[0],t[1]]}function G(t){return[t[2],t[1]]}function _(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function b(n,r){let o;return r===e.default.BOTTOM_LEFT?o=U(n):r===e.default.BOTTOM_RIGHT?o=G(n):r===e.default.TOP_LEFT?o=V(n):r===e.default.TOP_RIGHT?o=P(n):(0,t.assert)(!1,13),o}function A(t,e){const n=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-n)*(Math.max(t[3],e[3])-r)}function S(t,e,n,r,o){const u=e*r[0]/2,a=e*r[1]/2,s=Math.cos(n),i=Math.sin(n),f=u*s,c=u*i,p=a*s,l=a*i,x=t[0],h=t[1],g=x-f+l,m=x-f-l,M=x+f-l,E=x+f+l,T=h-c-p,O=h-c+p,C=h+c+p,R=h+c-p;return d(Math.min(g,m,M,E),Math.min(T,O,C,R),Math.max(g,m,M,E),Math.max(T,O,C,R),o)}function W(t){return t[3]-t[1]}function q(t,e){return L(H(t,e))}function H(t,e,n){const r=n||x();return v(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):h(r),r}function X(t){return Y(t)+W(t)}function j(t){return[t[2]-t[0],t[3]-t[1]]}function V(t){return[t[0],t[3]]}function P(t){return[t[2],t[3]]}function Y(t){return t[2]-t[0]}function v(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function w(t){return t[2]<t[0]||t[3]<t[1]}function z(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function K(t,e){const n=(t[2]-t[0])/2*(e-1),r=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=r,t[3]+=r}function D(t,e,r){let o=!1;const u=l(t,e),a=l(t,r);if(u===n.default.INTERSECTING||a===n.default.INTERSECTING)o=!0;else{const s=t[0],i=t[1],f=t[2],c=t[3],p=e[0],l=e[1],x=r[0],d=r[1],h=(d-l)/(x-p);let g,m;a&n.default.ABOVE&&!(u&n.default.ABOVE)&&(o=(g=x-(d-c)/h)>=s&&g<=f),o||!(a&n.default.RIGHT)||u&n.default.RIGHT||(o=(m=d-(x-f)*h)>=i&&m<=c),o||!(a&n.default.BELOW)||u&n.default.BELOW||(o=(g=x-(d-i)/h)>=s&&g<=f),o||!(a&n.default.LEFT)||u&n.default.LEFT||(o=(m=d-(x-s)*h)>=i&&m<=c)}return o}function k(t,e,n,r){let o=[];if(r>1){const e=t[2]-t[0],n=t[3]-t[1];for(let u=0;u<r;++u)o.push(t[0]+e*u/r,t[1],t[2],t[1]+n*u/r,t[2]-e*u/r,t[3],t[0],t[3]-n*u/r)}else o=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(o,o,2);const a=[],s=[];for(let u=0,i=o.length;u<i;u+=2)a.push(o[u]),s.push(o[u+1]);return u(a,s,n)}function J(t,e){const n=e.getExtent(),r=_(t);if(e.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){const e=Y(n),o=Math.floor((r[0]-n[0])/e)*e;t[0]-=o,t[2]-=o}return t}
},{"./asserts.js":"kWiW","./extent/Corner.js":"An1B","./extent/Relationship.js":"sf50"}],"Y6nE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.METERS_PER_UNIT=void 0;const E={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},e={};exports.METERS_PER_UNIT=e,e[E.DEGREES]=2*Math.PI*6370997/360,e[E.FEET]=.3048,e[E.METERS]=1,e[E.USFEET]=1200/3937;var t=E;exports.default=t;
},{}],"bQ8N":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./Units.js");class i{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||e.METERS_PER_UNIT[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}var n=i;exports.default=n;
},{"./Units.js":"Y6nE"}],"mW4I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromEPSG4326=a,exports.toEPSG4326=i,exports.PROJECTIONS=exports.WORLD_EXTENT=exports.EXTENT=exports.HALF_SIZE=exports.RADIUS=void 0;var e=require("../math.js"),t=r(require("./Projection.js")),o=r(require("./Units.js"));function r(e){return e&&e.__esModule?e:{default:e}}const n=6378137;exports.RADIUS=n;const s=Math.PI*n;exports.HALF_SIZE=s;const c=[-s,-s,s,s];exports.EXTENT=c;const u=[-180,-85,180,85];exports.WORLD_EXTENT=u;class l extends t.default{constructor(t){super({code:t,units:o.default.METERS,extent:c,global:!0,worldExtent:u,getPointResolution:function(t,o){return t/(0,e.cosh)(o[1]/n)}})}}const E=[new l("EPSG:3857"),new l("EPSG:102100"),new l("EPSG:102113"),new l("EPSG:900913"),new l("urn:ogc:def:crs:EPSG:6.18:3:3857"),new l("urn:ogc:def:crs:EPSG::3857"),new l("http://www.opengis.net/gml/srs/epsg.xml#3857")];function a(e,t,o){const r=e.length,c=o>1?o:2;let u=t;void 0===u&&(u=c>2?e.slice():new Array(r));const l=s;for(let s=0;s<r;s+=c){u[s]=l*e[s]/180;let t=n*Math.log(Math.tan(Math.PI*(+e[s+1]+90)/360));t>l?t=l:t<-l&&(t=-l),u[s+1]=t}return u}function i(e,t,o){const r=e.length,c=o>1?o:2;let u=t;void 0===u&&(u=c>2?e.slice():new Array(r));for(let l=0;l<r;l+=c)u[l]=180*e[l]/s,u[l+1]=360*Math.atan(Math.exp(e[l+1]/n))/Math.PI-90;return u}exports.PROJECTIONS=E;
},{"../math.js":"crjC","./Projection.js":"bQ8N","./Units.js":"Y6nE"}],"b4ZQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PROJECTIONS=exports.METERS_PER_UNIT=exports.EXTENT=exports.RADIUS=void 0;var e=n(require("./Projection.js")),t=n(require("./Units.js"));function n(e){return e&&e.__esModule?e:{default:e}}const r=6378137;exports.RADIUS=r;const s=[-180,-90,180,90];exports.EXTENT=s;const o=Math.PI*r/180;exports.METERS_PER_UNIT=o;class u extends e.default{constructor(e,n){super({code:e,units:t.default.DEGREES,extent:s,axisOrientation:n,global:!0,metersPerUnit:o,worldExtent:s})}}const c=[new u("CRS:84"),new u("EPSG:4326","neu"),new u("urn:ogc:def:crs:EPSG::4326","neu"),new u("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new u("urn:ogc:def:crs:OGC:1.3:CRS84"),new u("urn:ogc:def:crs:OGC:2:84"),new u("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new u("urn:x-ogc:def:crs:EPSG:4326","neu")];exports.PROJECTIONS=c;
},{"./Projection.js":"bQ8N","./Units.js":"Y6nE"}],"UeYV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=o,exports.add=r,exports.remove=n,exports.get=s;var e=require("../obj.js");let t={};function o(){t={}}function r(e,o,r){const n=e.getCode(),s=o.getCode();n in t||(t[n]={}),t[n][s]=r}function n(o,r){const n=o.getCode(),s=r.getCode(),i=t[n][s];return delete t[n][s],(0,e.isEmpty)(t[n])&&delete t[n],i}function s(e,o){let r;return e in t&&o in t[e]&&(r=t[e][o]),r}
},{"../obj.js":"c6bJ"}],"MaPe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=t,exports.get=r,exports.add=n;let e={};function t(){e={}}function r(t){return e[t]||null}function n(t,r){e[t]=r}
},{}],"HKfS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneTransform=l,exports.identityTransform=d,exports.addProjection=E,exports.addProjections=P,exports.get=j,exports.getPointResolution=g,exports.addEquivalentProjections=x,exports.addEquivalentTransforms=m,exports.clearAllProjections=T,exports.createProjection=v,exports.createTransformFromCoordinateTransform=O,exports.addCoordinateTransforms=S,exports.fromLonLat=U,exports.toLonLat=y,exports.equivalent=R,exports.getTransformFromProjections=h,exports.getTransform=C,exports.transform=_,exports.transformExtent=q,exports.transformWithProjections=b,exports.setUserProjection=M,exports.clearUserProjection=I,exports.getUserProjection=N,exports.useGeographic=D,exports.toUserCoordinate=w,exports.fromUserCoordinate=J,exports.toUserExtent=L,exports.fromUserExtent=F,exports.addCommon=W,Object.defineProperty(exports,"Projection",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"METERS_PER_UNIT",{enumerable:!0,get:function(){return s.METERS_PER_UNIT}});var e=require("./sphere.js"),t=require("./extent.js"),r=require("./math.js"),n=require("./proj/epsg3857.js"),o=require("./proj/epsg4326.js"),i=p(require("./proj/Projection.js")),s=a(require("./proj/Units.js")),u=require("./proj/transforms.js"),c=require("./proj/projections.js");function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function p(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r){let n;if(void 0!==t){for(let r=0,n=e.length;r<n;++r)t[r]=e[r];n=t}else n=e.slice();return n}function d(e,t,r){if(void 0!==t&&e!==t){for(let r=0,n=e.length;r<n;++r)t[r]=e[r];e=t}return e}function E(e){(0,c.add)(e.getCode(),e),(0,u.add)(e,e,l)}function P(e){e.forEach(E)}function j(e){return"string"==typeof e?(0,c.get)(e):e||null}function g(t,r,n,o){let i;const u=(t=j(t)).getPointResolutionFunc();if(u){if(i=u(r,n),o&&o!==t.getUnits()){const e=t.getMetersPerUnit();e&&(i=i*e/s.METERS_PER_UNIT[o])}}else{if(t.getUnits()==s.default.DEGREES&&!o||o==s.default.DEGREES)i=r;else{const u=h(t,j("EPSG:4326"));let c=[n[0]-r/2,n[1],n[0]+r/2,n[1],n[0],n[1]-r/2,n[0],n[1]+r/2];c=u(c,c,2),i=((0,e.getDistance)(c.slice(0,2),c.slice(2,4))+(0,e.getDistance)(c.slice(4,6),c.slice(6,8)))/2;const f=o?s.METERS_PER_UNIT[o]:t.getMetersPerUnit();void 0!==f&&(i/=f)}}return i}function x(e){P(e),e.forEach(function(t){e.forEach(function(e){t!==e&&(0,u.add)(t,e,l)})})}function m(e,t,r,n){e.forEach(function(e){t.forEach(function(t){(0,u.add)(e,t,r),(0,u.add)(t,e,n)})})}function T(){(0,c.clear)(),(0,u.clear)()}function v(e,t){return e?"string"==typeof e?j(e):e:j(t)}function O(e){return function(t,r,n){const o=t.length,i=void 0!==n?n:2,s=void 0!==r?r:new Array(o);for(let u=0;u<o;u+=i){const r=e([t[u],t[u+1]]);s[u]=r[0],s[u+1]=r[1];for(let e=i-1;e>=2;--e)s[u+e]=t[u+e]}return s}}function S(e,t,r,n){const o=j(e),i=j(t);(0,u.add)(o,i,O(r)),(0,u.add)(i,o,O(n))}function U(e,t){return _(e,"EPSG:4326",void 0!==t?t:"EPSG:3857")}function y(e,t){const n=_(e,void 0!==t?t:"EPSG:3857","EPSG:4326"),o=n[0];return(o<-180||o>180)&&(n[0]=(0,r.modulo)(o+180,360)-180),n}function R(e,t){if(e===t)return!0;const r=e.getUnits()===t.getUnits();if(e.getCode()===t.getCode())return r;return h(e,t)===l&&r}function h(e,t){const r=e.getCode(),n=t.getCode();let o=(0,u.get)(r,n);return o||(o=d),o}function C(e,t){return h(j(e),j(t))}function _(e,t,r){return C(t,r)(e,void 0,e.length)}function q(e,r,n,o){const i=C(r,n);return(0,t.applyTransform)(e,i,void 0,o)}function b(e,t,r){return h(t,r)(e)}let G=null;function M(e){G=j(e)}function I(){G=null}function N(){return G}function D(){M("EPSG:4326")}function w(e,t){return G?_(e,t,G):e}function J(e,t){return G?_(e,G,t):e}function L(e,t){return G?q(e,t,G):e}function F(e,t){return G?q(e,G,t):e}function W(){x(n.PROJECTIONS),x(o.PROJECTIONS),m(o.PROJECTIONS,n.PROJECTIONS,n.fromEPSG4326,n.toEPSG4326)}W();
},{"./sphere.js":"U9gN","./extent.js":"E4kN","./math.js":"crjC","./proj/epsg3857.js":"mW4I","./proj/epsg4326.js":"b4ZQ","./proj/Projection.js":"bQ8N","./proj/Units.js":"Y6nE","./proj/transforms.js":"UeYV","./proj/projections.js":"MaPe"}],"fBF9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transformGeometryWithOptions=u,exports.transformExtentWithOptions=s,exports.default=void 0;var t=require("../obj.js"),e=require("../util.js"),r=require("../proj.js"),a=o(require("../proj/Units.js"));function o(t){return t&&t.__esModule?t:{default:t}}class n{constructor(){this.dataProjection=null,this.defaultFeatureProjection=null}getReadOptions(t,e){let o;if(e){let n=e.dataProjection?(0,r.get)(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()===a.default.TILE_PIXELS&&(n=(0,r.get)(n)).setWorldExtent(e.extent),o={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(o)}adaptOptions(e){return(0,t.assign)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return(0,e.abstract)()}readFeature(t,r){return(0,e.abstract)()}readFeatures(t,r){return(0,e.abstract)()}readGeometry(t,r){return(0,e.abstract)()}readProjection(t){return(0,e.abstract)()}writeFeature(t,r){return(0,e.abstract)()}writeFeatures(t,r){return(0,e.abstract)()}writeGeometry(t,r){return(0,e.abstract)()}}var i=n;function u(t,e,a){const o=a?(0,r.get)(a.featureProjection):null,n=a?(0,r.get)(a.dataProjection):null;let i;if(i=o&&n&&!(0,r.equivalent)(o,n)?(e?t.clone():t).transform(e?o:n,e?n:o):t,e&&a&&void 0!==a.decimals){const e=Math.pow(10,a.decimals),r=function(t){for(let r=0,a=t.length;r<a;++r)t[r]=Math.round(t[r]*e)/e;return t};i===t&&(i=t.clone()),i.applyTransform(r)}return i}function s(t,e){const a=e?(0,r.get)(e.featureProjection):null,o=e?(0,r.get)(e.dataProjection):null;return a&&o&&!(0,r.equivalent)(a,o)?(0,r.transformExtent)(t,o,a):t}exports.default=i;
},{"../obj.js":"c6bJ","../util.js":"gvrh","../proj.js":"HKfS","../proj/Units.js":"Y6nE"}],"sCYO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};exports.default=e;
},{}],"eWHi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=a(require("./Feature.js")),r=a(require("./FormatType.js"));function a(e){return e&&e.__esModule?e:{default:e}}class u extends t.default{constructor(){super()}getType(){return r.default.JSON}readFeature(e,t){return this.readFeatureFromObject(s(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(s(e),this.getReadOptions(e,t))}readFeatureFromObject(t,r){return(0,e.abstract)()}readFeaturesFromObject(t,r){return(0,e.abstract)()}readGeometry(e,t){return this.readGeometryFromObject(s(e),this.getReadOptions(e,t))}readGeometryFromObject(t,r){return(0,e.abstract)()}readProjection(e){return this.readProjectionFromObject(s(e))}readProjectionFromObject(t){return(0,e.abstract)()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(t,r){return(0,e.abstract)()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(t,r){return(0,e.abstract)()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(t,r){return(0,e.abstract)()}}function s(e){if("string"==typeof e){const t=JSON.parse(e);return t||null}return null!==e?e:null}var i=u;exports.default=i;
},{"../util.js":"gvrh","./Feature.js":"fBF9","./FormatType.js":"sCYO"}],"XBOy":[function(require,module,exports) {
"use strict";function t(t,e,n,o,r,l){const s=l||[];let c=0;for(let f=e;f<n;f+=o){const e=t[f],n=t[f+1];s[c++]=r[0]*e+r[2]*n+r[4],s[c++]=r[1]*e+r[3]*n+r[5]}return l&&s.length!=c&&(s.length=c),s}function e(t,e,n,o,r,l,s){const c=s||[],f=Math.cos(r),u=Math.sin(r),h=l[0],a=l[1];let g=0;for(let i=e;i<n;i+=o){const e=t[i]-h,n=t[i+1]-a;c[g++]=h+e*f-n*u,c[g++]=a+e*u+n*f;for(let r=i+2;r<i+o;++r)c[g++]=t[r]}return s&&c.length!=g&&(c.length=g),c}function n(t,e,n,o,r,l,s,c){const f=c||[],u=s[0],h=s[1];let a=0;for(let g=e;g<n;g+=o){const e=t[g]-u,n=t[g+1]-h;f[a++]=u+r*e,f[a++]=h+l*n;for(let r=g+2;r<g+o;++r)f[a++]=t[r]}return c&&f.length!=a&&(f.length=a),f}function o(t,e,n,o,r,l,s){const c=s||[];let f=0;for(let u=e;u<n;u+=o){c[f++]=t[u]+r,c[f++]=t[u+1]+l;for(let e=u+2;e<u+o;++e)c[f++]=t[e]}return s&&c.length!=f&&(c.length=f),c}Object.defineProperty(exports,"__esModule",{value:!0}),exports.transform2D=t,exports.rotate=e,exports.scale=n,exports.translate=o;
},{}],"fXLG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.reset=e,exports.multiply=o,exports.set=s,exports.setFromArray=u,exports.apply=c,exports.rotate=i,exports.scale=p,exports.makeScale=a,exports.translate=f,exports.compose=x,exports.composeCssTransform=m,exports.invert=l,exports.makeInverse=y,exports.determinant=M,exports.toString=h;var t=require("./asserts.js");const r=new Array(6);function n(){return[1,0,0,1,0,0]}function e(t){return s(t,1,0,0,1,0,0)}function o(t,r){const n=t[0],e=t[1],o=t[2],s=t[3],u=t[4],c=t[5],i=r[0],p=r[1],a=r[2],f=r[3],x=r[4],m=r[5];return t[0]=n*i+o*p,t[1]=e*i+s*p,t[2]=n*a+o*f,t[3]=e*a+s*f,t[4]=n*x+o*m+u,t[5]=e*x+s*m+c,t}function s(t,r,n,e,o,s,u){return t[0]=r,t[1]=n,t[2]=e,t[3]=o,t[4]=s,t[5]=u,t}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t}function c(t,r){const n=r[0],e=r[1];return r[0]=t[0]*n+t[2]*e+t[4],r[1]=t[1]*n+t[3]*e+t[5],r}function i(t,n){const e=Math.cos(n),u=Math.sin(n);return o(t,s(r,e,u,-u,e,0,0))}function p(t,n,e){return o(t,s(r,n,0,0,e,0,0))}function a(t,r,n){return s(t,r,0,0,n,0,0)}function f(t,n,e){return o(t,s(r,1,0,0,1,n,e))}function x(t,r,n,e,o,s,u,c){const i=Math.sin(s),p=Math.cos(s);return t[0]=e*p,t[1]=o*i,t[2]=-e*i,t[3]=o*p,t[4]=u*e*p-c*e*i+r,t[5]=u*o*i+c*o*p+n,t}function m(t,r,e,o,s,u,c){return h(x(n(),t,r,e,o,s,u,c))}function l(t){return y(t,t)}function y(r,n){const e=M(n);(0,t.assert)(0!==e,32);const o=n[0],s=n[1],u=n[2],c=n[3],i=n[4],p=n[5];return r[0]=c/e,r[1]=-s/e,r[2]=-u/e,r[3]=o/e,r[4]=(u*p-c*i)/e,r[5]=-(o*p-s*i)/e,r}function M(t){return t[0]*t[3]-t[1]*t[2]}function h(t){return"matrix("+t.join(", ")+")"}
},{"./asserts.js":"kWiW"}],"feOh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=u(require("../Object.js")),r=require("../extent.js"),s=require("./flat/transform.js"),i=require("../proj.js"),n=u(require("../proj/Units.js")),o=require("../transform.js"),a=require("../functions.js");function u(t){return t&&t.__esModule?t:{default:t}}const c=(0,o.create)();class l extends e.default{constructor(){super(),this.extent_=(0,r.createEmpty)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,a.memoizeOne)(function(t,e,r){if(!r)return this.getSimplifiedGeometry(e);const s=this.clone();return s.applyTransform(r),s.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return(0,t.abstract)()}closestPointXY(e,r,s,i){return(0,t.abstract)()}containsXY(t,e){const r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e}getClosestPoint(t,e){const r=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(e){return(0,t.abstract)()}getExtent(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),(0,r.returnOrUpdate)(this.extent_,t)}rotate(e,r){(0,t.abstract)()}scale(e,r,s){(0,t.abstract)()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(e){return(0,t.abstract)()}getType(){return(0,t.abstract)()}applyTransform(e){(0,t.abstract)()}intersectsExtent(e){return(0,t.abstract)()}translate(e,r){(0,t.abstract)()}transform(t,e){const a=(0,i.get)(t),u=a.getUnits()==n.default.TILE_PIXELS?function(t,n,u){const l=a.getExtent(),f=a.getWorldExtent(),m=(0,r.getHeight)(f)/(0,r.getHeight)(l);return(0,o.compose)(c,f[0],f[3],m,-m,0,0,0),(0,s.transform2D)(t,0,t.length,u,c,n),(0,i.getTransform)(a,e)(t,n,u)}:(0,i.getTransform)(a,e);return this.applyTransform(u),this}}var f=l;exports.default=f;
},{"../util.js":"gvrh","../Object.js":"X18S","../extent.js":"E4kN","./flat/transform.js":"XBOy","../proj.js":"HKfS","../proj/Units.js":"Y6nE","../transform.js":"fXLG","../functions.js":"mKAY"}],"knKK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../events.js"),t=n(require("../events/EventType.js")),s=require("../extent.js"),i=n(require("./Geometry.js")),r=n(require("./GeometryType.js"));function n(e){return e&&e.__esModule?e:{default:e}}class o extends i.default{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(e.unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let s=0,i=this.geometries_.length;s<i;++s)this.changeEventsKeys_.push((0,e.listen)(this.geometries_[s],t.default.CHANGE,this.changed,this))}clone(){const e=new o(null);return e.setGeometries(this.geometries_),e}closestPointXY(e,t,i,r){if(r<(0,s.closestSquaredDistanceXY)(this.getExtent(),e,t))return r;const n=this.geometries_;for(let s=0,o=n.length;s<o;++s)r=n[s].closestPointXY(e,t,i,r);return r}containsXY(e,t){const s=this.geometries_;for(let i=0,r=s.length;i<r;++i)if(s[i].containsXY(e,t))return!0;return!1}computeExtent(e){(0,s.createOrUpdateEmpty)(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)(0,s.extend)(e,t[i].getExtent());return e}getGeometries(){return h(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let s=0,i=t.length;s<i;++s)t[s].getType()===this.getType()?e=e.concat(t[s].getGeometriesArrayRecursive()):e.push(t[s]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],s=this.geometries_;let i=!1;for(let r=0,n=s.length;r<n;++r){const n=s[r],o=n.getSimplifiedGeometry(e);t.push(o),o!==n&&(i=!0)}if(i){const e=new o(null);return e.setGeometriesArray(t),e}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return r.default.GEOMETRY_COLLECTION}intersectsExtent(e){const t=this.geometries_;for(let s=0,i=t.length;s<i;++s)if(t[s].intersectsExtent(e))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(e,t){const s=this.geometries_;for(let i=0,r=s.length;i<r;++i)s[i].rotate(e,t);this.changed()}scale(e,t,i){let r=i;r||(r=(0,s.getCenter)(this.getExtent()));const n=this.geometries_;for(let s=0,o=n.length;s<o;++s)n[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(h(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let s=0,i=t.length;s<i;++s)t[s].applyTransform(e);this.changed()}translate(e,t){const s=this.geometries_;for(let i=0,r=s.length;i<r;++i)s[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function h(e){const t=[];for(let s=0,i=e.length;s<i;++s)t.push(e[s].clone());return t}var l=o;exports.default=l;
},{"../events.js":"TEtv","../events/EventType.js":"Ak1Z","../extent.js":"E4kN","./Geometry.js":"feOh","./GeometryType.js":"I79K"}],"TBKt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};exports.default=e;
},{}],"leyx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStrideForLayout=l,exports.transformGeom2D=d,exports.default=void 0;var t=require("../util.js"),e=require("../extent.js"),i=o(require("./Geometry.js")),r=o(require("./GeometryLayout.js")),s=require("./flat/transform.js");function o(t){return t&&t.__esModule?t:{default:t}}class a extends i.default{constructor(){super(),this.layout=r.default.XY,this.stride=2,this.flatCoordinates=null}computeExtent(t){return(0,e.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return(0,t.abstract)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=l(t),this.layout=t,this.flatCoordinates=e}setCoordinates(e,i){(0,t.abstract)()}setLayout(t,e,i){let s;if(t)s=l(t);else{for(let t=0;t<i;++t){if(0===e.length)return this.layout=r.default.XY,void(this.stride=2);e=e[0]}t=n(s=e.length)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const r=this.getStride();(0,s.rotate)(i,0,i.length,r,t,e,i),this.changed()}}scale(t,i,r){let o=i;void 0===o&&(o=t);let a=r;a||(a=(0,e.getCenter)(this.getExtent()));const n=this.getFlatCoordinates();if(n){const e=this.getStride();(0,s.scale)(n,0,n.length,e,t,o,a,n),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const r=this.getStride();(0,s.translate)(i,0,i.length,r,t,e,i),this.changed()}}}function n(t){let e;return 2==t?e=r.default.XY:3==t?e=r.default.XYZ:4==t&&(e=r.default.XYZM),e}function l(t){let e;return t==r.default.XY?e=2:t==r.default.XYZ||t==r.default.XYM?e=3:t==r.default.XYZM&&(e=4),e}function d(t,e,i){const r=t.getFlatCoordinates();if(r){const o=t.getStride();return(0,s.transform2D)(r,0,r.length,o,e,i)}return null}var h=a;exports.default=h;
},{"../util.js":"gvrh","../extent.js":"E4kN","./Geometry.js":"feOh","./GeometryLayout.js":"TBKt","./flat/transform.js":"XBOy"}],"iDhe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxSquaredDelta=r,exports.arrayMaxSquaredDelta=n,exports.multiArrayMaxSquaredDelta=s,exports.assignClosestPoint=o,exports.assignClosestArrayPoint=a,exports.assignClosestMultiArrayPoint=l;var t=require("../../math.js");function e(e,r,n,s,o,a,l){const i=e[r],u=e[r+1],f=e[n]-i,c=e[n+1]-u;let h;if(0===f&&0===c)h=r;else{const g=((o-i)*f+(a-u)*c)/(f*f+c*c);if(g>1)h=n;else{if(g>0){for(let o=0;o<s;++o)l[o]=(0,t.lerp)(e[r+o],e[n+o],g);return void(l.length=s)}h=r}}for(let t=0;t<s;++t)l[t]=e[h+t];l.length=s}function r(e,r,n,s,o){let a=e[r],l=e[r+1];for(r+=s;r<n;r+=s){const n=e[r],s=e[r+1],i=(0,t.squaredDistance)(a,l,n,s);i>o&&(o=i),a=n,l=s}return o}function n(t,e,n,s,o){for(let a=0,l=n.length;a<l;++a){const l=n[a];o=r(t,e,l,s,o),e=l}return o}function s(t,e,r,s,o){for(let a=0,l=r.length;a<l;++a){const l=r[a];o=n(t,e,l,s,o),e=l[l.length-1]}return o}function o(r,n,s,o,a,l,i,u,f,c,h){if(n==s)return c;let g,N;if(0===a){if((N=(0,t.squaredDistance)(i,u,r[n],r[n+1]))<c){for(g=0;g<o;++g)f[g]=r[n+g];return f.length=o,N}return c}const x=h||[NaN,NaN];let d=n+o;for(;d<s;)if(e(r,d-o,d,o,i,u,x),(N=(0,t.squaredDistance)(i,u,x[0],x[1]))<c){for(c=N,g=0;g<o;++g)f[g]=x[g];f.length=o,d+=o}else d+=o*Math.max((Math.sqrt(N)-Math.sqrt(c))/a|0,1);if(l&&(e(r,s-o,n,o,i,u,x),(N=(0,t.squaredDistance)(i,u,x[0],x[1]))<c)){for(c=N,g=0;g<o;++g)f[g]=x[g];f.length=o}return c}function a(t,e,r,n,s,a,l,i,u,f,c){const h=c||[NaN,NaN];for(let g=0,N=r.length;g<N;++g){const c=r[g];f=o(t,e,c,n,s,a,l,i,u,f,h),e=c}return f}function l(t,e,r,n,s,o,l,i,u,f,c){const h=c||[NaN,NaN];for(let g=0,N=r.length;g<N;++g){const c=r[g];f=a(t,e,c,n,s,o,l,i,u,f,h),e=c[c.length-1]}return f}
},{"../../math.js":"crjC"}],"tAC2":[function(require,module,exports) {
"use strict";function t(t,e,n,o){for(let r=0,l=n.length;r<l;++r)t[e++]=n[r];return e}function e(t,e,n,o){for(let r=0,l=n.length;r<l;++r){const l=n[r];for(let n=0;n<o;++n)t[e++]=l[n]}return e}function n(t,n,o,r,l){const s=l||[];let f=0;for(let u=0,a=o.length;u<a;++u){const l=e(t,n,o[u],r);s[f++]=l,n=l}return s.length=f,s}function o(t,e,o,r,l){const s=l||[];let f=0;for(let u=0,a=o.length;u<a;++u){const l=n(t,e,o[u],r,s[f]);s[f++]=l,e=l[l.length-1]}return s.length=f,s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deflateCoordinate=t,exports.deflateCoordinates=e,exports.deflateCoordinatesArray=n,exports.deflateMultiCoordinatesArray=o;
},{}],"RTsg":[function(require,module,exports) {
"use strict";function t(t,e,n,o,r){const l=void 0!==r?r:[];let i=0;for(let s=e;s<n;s+=o)l[i++]=t.slice(s,s+o);return l.length=i,l}function e(e,n,o,r,l){const i=void 0!==l?l:[];let s=0;for(let c=0,f=o.length;c<f;++c){const l=o[c];i[s++]=t(e,n,l,r,i[s]),n=l}return i.length=s,i}function n(t,n,o,r,l){const i=void 0!==l?l:[];let s=0;for(let c=0,f=o.length;c<f;++c){const l=o[c];i[s++]=e(t,n,l,r,i[s]),n=l[l.length-1]}return i.length=s,i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.inflateCoordinates=t,exports.inflateCoordinatesArray=e,exports.inflateMultiCoordinatesArray=n;
},{}],"OevD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolatePoint=r,exports.lineStringCoordinateAtM=n,exports.lineStringsCoordinateAtM=l;var e=require("../../array.js"),t=require("../../math.js");function r(r,n,l,i,s,u){let o=NaN,f=NaN;const c=(l-n)/i;if(1===c)o=r[n],f=r[n+1];else if(2==c)o=(1-s)*r[n]+s*r[n+i],f=(1-s)*r[n+1]+s*r[n+i+1];else if(0!==c){let u=r[n],c=r[n+1],a=0;const p=[0];for(let e=n+i;e<l;e+=i){const t=r[e],n=r[e+1];a+=Math.sqrt((t-u)*(t-u)+(n-c)*(n-c)),p.push(a),u=t,c=n}const h=s*a,g=(0,e.binarySearch)(p,h);if(g<0){const e=(h-p[-g-2])/(p[-g-1]-p[-g-2]),l=n+(-g-2)*i;o=(0,t.lerp)(r[l],r[l+i],e),f=(0,t.lerp)(r[l+1],r[l+i+1],e)}else o=r[n+g*i],f=r[n+g*i+1]}return u?(u[0]=o,u[1]=f,u):[o,f]}function n(e,r,n,l,i,s){if(n==r)return null;let u;if(i<e[r+l-1])return s?((u=e.slice(r,r+l))[l-1]=i,u):null;if(e[n-1]<i)return s?((u=e.slice(n-l,n))[l-1]=i,u):null;if(i==e[r+l-1])return e.slice(r,r+l);let o=r/l,f=n/l;for(;o<f;){const t=o+f>>1;i<e[(t+1)*l-1]?f=t:o=t+1}const c=e[o*l-1];if(i==c)return e.slice((o-1)*l,(o-1)*l+l);const a=(i-c)/(e[(o+1)*l-1]-c);u=[];for(let p=0;p<l-1;++p)u.push((0,t.lerp)(e[(o-1)*l+p],e[o*l+p],a));return u.push(i),u}function l(e,t,r,l,i,s,u){if(u)return n(e,t,r[r.length-1],l,i,s);let o;if(i<e[l-1])return s?((o=e.slice(0,l))[l-1]=i,o):null;if(e[e.length-1]<i)return s?((o=e.slice(e.length-l))[l-1]=i,o):null;for(let f=0,c=r.length;f<c;++f){const s=r[f];if(t!=s){if(i<e[t+l-1])return null;if(i<=e[s-1])return n(e,t,s,l,i,!1);t=s}}return null}
},{"../../array.js":"uHwP","../../math.js":"crjC"}],"sGa2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingContainsExtent=t,exports.linearRingContainsXY=e,exports.linearRingsContainsXY=r,exports.linearRingssContainsXY=i;var n=require("../../extent.js");function t(t,r,i,o,u){return!(0,n.forEachCorner)(u,function(n){return!e(t,r,i,o,n[0],n[1])})}function e(n,t,e,r,i,o){let u=0,s=n[e-r],f=n[e-r+1];for(;t<e;t+=r){const e=n[t],r=n[t+1];f<=o?r>o&&(e-s)*(o-f)-(i-s)*(r-f)>0&&u++:r<=o&&(e-s)*(o-f)-(i-s)*(r-f)<0&&u--,s=e,f=r}return 0!==u}function r(n,t,r,i,o,u){if(0===r.length)return!1;if(!e(n,t,r[0],i,o,u))return!1;for(let s=1,f=r.length;s<f;++s)if(e(n,r[s-1],r[s],i,o,u))return!1;return!0}function i(n,t,e,i,o,u){if(0===e.length)return!1;for(let s=0,f=e.length;s<f;++s){const f=e[s];if(r(n,t,f,i,o,u))return!0;t=f[f.length-1]}return!1}
},{"../../extent.js":"E4kN"}],"Kyj8":[function(require,module,exports) {
"use strict";function e(e,r,t,o,n){const s=[e[r],e[r+1]],u=[];let c;for(;r+o<t;r+=o){if(u[0]=e[r+o],u[1]=e[r+o+1],c=n(s,u))return c;s[0]=u[0],s[1]=u[1]}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=e;
},{}],"EDhT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.intersectsLineString=r,exports.intersectsLineStringArray=i,exports.intersectsLinearRing=s,exports.intersectsLinearRingArray=o,exports.intersectsLinearRingMultiArray=a;var n=require("../../extent.js"),e=require("./contains.js"),t=require("./segments.js");function r(e,r,i,s,o){const a=(0,n.extendFlatCoordinates)((0,n.createEmpty)(),e,r,i,s);return!!(0,n.intersects)(o,a)&&(!!(0,n.containsExtent)(o,a)||(a[0]>=o[0]&&a[2]<=o[2]||(a[1]>=o[1]&&a[3]<=o[3]||(0,t.forEach)(e,r,i,s,function(e,t){return(0,n.intersectsSegment)(o,e,t)}))))}function i(n,e,t,i,s){for(let o=0,a=t.length;o<a;++o){if(r(n,e,t[o],i,s))return!0;e=t[o]}return!1}function s(n,t,i,s,o){return!!r(n,t,i,s,o)||(!!(0,e.linearRingContainsXY)(n,t,i,s,o[0],o[1])||(!!(0,e.linearRingContainsXY)(n,t,i,s,o[0],o[3])||(!!(0,e.linearRingContainsXY)(n,t,i,s,o[2],o[1])||!!(0,e.linearRingContainsXY)(n,t,i,s,o[2],o[3]))))}function o(n,t,i,o,a){if(!s(n,t,i[0],o,a))return!1;if(1===i.length)return!0;for(let s=1,u=i.length;s<u;++s)if((0,e.linearRingContainsExtent)(n,i[s-1],i[s],o,a)&&!r(n,i[s-1],i[s],o,a))return!1;return!0}function a(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const a=t[s];if(o(n,e,a,r,i))return!0;e=a[a.length-1]}return!1}
},{"../../extent.js":"E4kN","./contains.js":"sGa2","./segments.js":"Kyj8"}],"i6SQ":[function(require,module,exports) {
"use strict";function t(t,e,n,r){let o=t[e],s=t[e+1],i=0;for(let l=e+r;l<n;l+=r){const e=t[l],n=t[l+1];i+=Math.sqrt((e-o)*(e-o)+(n-s)*(n-s)),o=e,s=n}return i}function e(e,n,r,o){let s=t(e,n,r,o);const i=e[r-o]-e[n],l=e[r-o+1]-e[n+1];return s+=Math.sqrt(i*i+l*l)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineStringLength=t,exports.linearRingLength=e;
},{}],"o8JQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.simplifyLineString=e,exports.douglasPeucker=r,exports.douglasPeuckerArray=n,exports.douglasPeuckerMultiArray=o,exports.radialDistance=u,exports.snap=s,exports.quantize=i,exports.quantizeArray=c,exports.quantizeMultiArray=l;var t=require("../../math.js");function e(t,e,n,o,s,i,c){const l=void 0!==c?c:[];return i||(n=u(t,e,n,o,s,l,0),t=l,e=0,o=2),l.length=r(t,e,n,o,s,l,0),l}function r(e,r,n,o,u,s,i){const c=(n-r)/o;if(c<3){for(;r<n;r+=o)s[i++]=e[r],s[i++]=e[r+1];return i}const l=new Array(c);l[0]=1,l[c-1]=1;const f=[r,n-o];let a=0;for(;f.length>0;){const n=f.pop(),s=f.pop();let i=0;const c=e[s],p=e[s+1],h=e[n],g=e[n+1];for(let r=s+o;r<n;r+=o){const n=e[r],o=e[r+1],u=(0,t.squaredSegmentDistance)(n,o,c,p,h,g);u>i&&(a=r,i=u)}i>u&&(l[(a-r)/o]=1,s+o<a&&f.push(s,a),a+o<n&&f.push(a,n))}for(let t=0;t<c;++t)l[t]&&(s[i++]=e[r+t*o],s[i++]=e[r+t*o+1]);return i}function n(t,e,n,o,u,s,i,c){for(let l=0,f=n.length;l<f;++l){const f=n[l];i=r(t,e,f,o,u,s,i),c.push(i),e=f}return i}function o(t,e,r,o,u,s,i,c){for(let l=0,f=r.length;l<f;++l){const f=r[l],a=[];i=n(t,e,f,o,u,s,i,a),c.push(a),e=f[f.length-1]}return i}function u(e,r,n,o,u,s,i){if(n<=r+o){for(;r<n;r+=o)s[i++]=e[r],s[i++]=e[r+1];return i}let c=e[r],l=e[r+1];s[i++]=c,s[i++]=l;let f=c,a=l;for(r+=o;r<n;r+=o)f=e[r],a=e[r+1],(0,t.squaredDistance)(c,l,f,a)>u&&(s[i++]=f,s[i++]=a,c=f,l=a);return f==c&&a==l||(s[i++]=f,s[i++]=a),i}function s(t,e){return e*Math.round(t/e)}function i(t,e,r,n,o,u,i){if(e==r)return i;let c,l,f=s(t[e],o),a=s(t[e+1],o);e+=n,u[i++]=f,u[i++]=a;do{if(c=s(t[e],o),l=s(t[e+1],o),(e+=n)==r)return u[i++]=c,u[i++]=l,i}while(c==f&&l==a);for(;e<r;){const r=s(t[e],o),p=s(t[e+1],o);if(e+=n,r==c&&p==l)continue;const h=c-f,g=l-a,d=r-f,x=p-a;h*x==g*d&&(h<0&&d<h||h==d||h>0&&d>h)&&(g<0&&x<g||g==x||g>0&&x>g)?(c=r,l=p):(u[i++]=c,u[i++]=l,f=c,a=l,c=r,l=p)}return u[i++]=c,u[i++]=l,i}function c(t,e,r,n,o,u,s,c){for(let l=0,f=r.length;l<f;++l){const f=r[l];s=i(t,e,f,n,o,u,s),c.push(s),e=f}return s}function l(t,e,r,n,o,u,s,i){for(let l=0,f=r.length;l<f;++l){const f=r[l],a=[];s=c(t,e,f,n,o,u,s,a),i.push(a),e=f[f.length-1]}return s}
},{"../../math.js":"crjC"}],"nG5b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),i=C(require("./GeometryLayout.js")),s=C(require("./GeometryType.js")),r=C(require("./SimpleGeometry.js")),a=require("./flat/closest.js"),o=require("./flat/deflate.js"),n=require("./flat/inflate.js"),l=require("./flat/interpolate.js"),h=require("./flat/intersectsextent.js"),d=require("./flat/length.js"),f=require("./flat/segments.js"),u=require("./flat/simplify.js");function C(t){return t&&t.__esModule?t:{default:t}}class g extends r.default{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){return new g(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,i,s,r){return r<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,a.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,a.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,s,r))}forEachSegment(t){return(0,f.forEach)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){if(this.layout!=i.default.XYM&&this.layout!=i.default.XYZM)return null;const s=void 0!==e&&e;return(0,l.lineStringCoordinateAtM)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,s)}getCoordinates(){return(0,n.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return(0,l.interpolatePoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)}getLength(){return(0,d.lineStringLength)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=(0,u.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new g(e,i.default.XY)}getType(){return s.default.LINE_STRING}intersectsExtent(t){return(0,h.intersectsLineString)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}var c=g;exports.default=c;
},{"../array.js":"uHwP","../extent.js":"E4kN","./GeometryLayout.js":"TBKt","./GeometryType.js":"I79K","./SimpleGeometry.js":"leyx","./flat/closest.js":"iDhe","./flat/deflate.js":"tAC2","./flat/inflate.js":"RTsg","./flat/interpolate.js":"OevD","./flat/intersectsextent.js":"EDhT","./flat/length.js":"i6SQ","./flat/segments.js":"Kyj8","./flat/simplify.js":"o8JQ"}],"GJ0c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),s=f(require("./GeometryLayout.js")),i=f(require("./GeometryType.js")),r=f(require("./LineString.js")),n=f(require("./SimpleGeometry.js")),a=require("./flat/closest.js"),o=require("./flat/deflate.js"),l=require("./flat/inflate.js"),d=require("./flat/interpolate.js"),h=require("./flat/intersectsextent.js"),u=require("./flat/simplify.js");function f(t){return t&&t.__esModule?t:{default:t}}class g extends n.default{constructor(e,s,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,s);else if(void 0!==s&&i)this.setFlatCoordinates(s,e),this.ends_=i;else{let s=this.getLayout();const i=e,r=[],n=[];for(let e=0,a=i.length;e<a;++e){const a=i[e];0===e&&(s=a.getLayout()),(0,t.extend)(r,a.getFlatCoordinates()),n.push(r.length)}this.setFlatCoordinates(s,r),this.ends_=n}}appendLineString(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){return new g(this.flatCoordinates.slice(),this.layout,this.ends_.slice())}closestPointXY(t,s,i,r){return r<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,s)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,a.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,a.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,s,i,r))}getCoordinateAtM(t,e,i){if(this.layout!=s.default.XYM&&this.layout!=s.default.XYZM||0===this.flatCoordinates.length)return null;const r=void 0!==e&&e,n=void 0!==i&&i;return(0,d.lineStringsCoordinateAtM)(this.flatCoordinates,0,this.ends_,this.stride,t,r,n)}getCoordinates(){return(0,l.inflateCoordinatesArray)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new r.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,s=this.layout,i=[];let n=0;for(let a=0,o=e.length;a<o;++a){const o=e[a],l=new r.default(t.slice(n,o),s);i.push(l),n=o}return i}getFlatMidpoints(){const e=[],s=this.flatCoordinates;let i=0;const r=this.ends_,n=this.stride;for(let a=0,o=r.length;a<o;++a){const o=r[a],l=(0,d.interpolatePoint)(s,i,o,n,.5);(0,t.extend)(e,l),i=o}return e}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=(0,u.douglasPeuckerArray)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new g(e,s.default.XY,i)}getType(){return i.default.MULTI_LINE_STRING}intersectsExtent(t){return(0,h.intersectsLineStringArray)(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const s=(0,o.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===s.length?0:s[s.length-1],this.changed()}}var c=g;exports.default=c;
},{"../array.js":"uHwP","../extent.js":"E4kN","./GeometryLayout.js":"TBKt","./GeometryType.js":"I79K","./LineString.js":"nG5b","./SimpleGeometry.js":"leyx","./flat/closest.js":"iDhe","./flat/deflate.js":"tAC2","./flat/inflate.js":"RTsg","./flat/interpolate.js":"OevD","./flat/intersectsextent.js":"EDhT","./flat/simplify.js":"o8JQ"}],"xPgY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),e=i(require("./GeometryType.js")),s=i(require("./SimpleGeometry.js")),r=require("./flat/deflate.js"),o=require("../math.js");function i(t){return t&&t.__esModule?t:{default:t}}class a extends s.default{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){return new a(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,s,r){const i=this.flatCoordinates,a=(0,o.squaredDistance)(t,e,i[0],i[1]);if(a<r){const t=this.stride;for(let e=0;e<t;++e)s[e]=i[e];return s.length=t,a}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return(0,t.createOrUpdateFromCoordinate)(this.flatCoordinates,e)}getType(){return e.default.POINT}intersectsExtent(e){return(0,t.containsXY)(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,r.deflateCoordinate)(this.flatCoordinates,0,t,this.stride),this.changed()}}var n=a;exports.default=n;
},{"../extent.js":"E4kN","./GeometryType.js":"I79K","./SimpleGeometry.js":"leyx","./flat/deflate.js":"tAC2","../math.js":"crjC"}],"FLg1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),s=l(require("./GeometryType.js")),i=l(require("./Point.js")),r=l(require("./SimpleGeometry.js")),o=require("./flat/deflate.js"),a=require("./flat/inflate.js"),n=require("../math.js");function l(t){return t&&t.__esModule?t:{default:t}}class d extends r.default{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){return new d(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,s,i,r){if(r<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,s))return r;const o=this.flatCoordinates,a=this.stride;for(let e=0,l=o.length;e<l;e+=a){const l=(0,n.squaredDistance)(t,s,o[e],o[e+1]);if(l<r){r=l;for(let t=0;t<a;++t)i[t]=o[e+t];i.length=a}}return r}getCoordinates(){return(0,a.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new i.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,s=this.stride,r=[];for(let o=0,a=t.length;o<a;o+=s){const a=new i.default(t.slice(o,o+s),e);r.push(a)}return r}getType(){return s.default.MULTI_POINT}intersectsExtent(t){const s=this.flatCoordinates,i=this.stride;for(let r=0,o=s.length;r<o;r+=i){const i=s[r],o=s[r+1];if((0,e.containsXY)(t,i,o))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}var h=d;exports.default=h;
},{"../array.js":"uHwP","../extent.js":"E4kN","./GeometryType.js":"I79K","./Point.js":"xPgY","./SimpleGeometry.js":"leyx","./flat/deflate.js":"tAC2","./flat/inflate.js":"RTsg","../math.js":"crjC"}],"q2Lq":[function(require,module,exports) {
"use strict";function e(e,t,n,r){let o=0,l=e[n-r],s=e[n-r+1];for(;t<n;t+=r){const n=e[t],r=e[t+1];o+=s*n-l*r,l=n,s=r}return o/2}function t(t,n,r,o){let l=0;for(let s=0,i=r.length;s<i;++s){const i=r[s];l+=e(t,n,i,o),n=i}return l}function n(e,n,r,o){let l=0;for(let s=0,i=r.length;s<i;++s){const i=r[s];l+=t(e,n,i,o),n=i[i.length-1]}return l}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRing=e,exports.linearRings=t,exports.linearRingss=n;
},{}],"p64G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),e=d(require("./GeometryLayout.js")),s=d(require("./GeometryType.js")),i=d(require("./SimpleGeometry.js")),r=require("./flat/area.js"),a=require("./flat/closest.js"),o=require("./flat/deflate.js"),n=require("./flat/inflate.js"),l=require("./flat/simplify.js");function d(t){return t&&t.__esModule?t:{default:t}}class h extends i.default{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new h(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,s,i,r){return r<(0,t.closestSquaredDistanceXY)(this.getExtent(),e,s)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,a.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,a.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,s,i,r))}getArea(){return(0,r.linearRing)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,n.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const s=[];return s.length=(0,l.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,s,0),new h(s,e.default.XY)}getType(){return s.default.LINEAR_RING}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}var u=h;exports.default=u;
},{"../extent.js":"E4kN","./GeometryLayout.js":"TBKt","./GeometryType.js":"I79K","./SimpleGeometry.js":"leyx","./flat/area.js":"q2Lq","./flat/closest.js":"iDhe","./flat/deflate.js":"tAC2","./flat/inflate.js":"RTsg","./flat/simplify.js":"o8JQ"}],"SFVH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInteriorPointOfArray=r,exports.getInteriorPointsOfMultiArray=n;var t=require("../../array.js"),e=require("./contains.js");function r(r,n,o,s,i,a,u){let l,c,f,g,h,p,y;const N=i[a+1],b=[];for(let t=0,e=o.length;t<e;++t){const e=o[t];for(g=r[e-s],p=r[e-s+1],l=n;l<e;l+=s)h=r[l],y=r[l+1],(N<=p&&y<=N||p<=N&&N<=y)&&(f=(N-p)/(y-p)*(h-g)+g,b.push(f)),g=h,p=y}let j=NaN,x=-1/0;for(b.sort(t.numberSafeCompareFunction),g=b[0],l=1,c=b.length;l<c;++l){h=b[l];const t=Math.abs(h-g);t>x&&(f=(g+h)/2,(0,e.linearRingsContainsXY)(r,n,o,s,f,N)&&(j=f,x=t)),g=h}return isNaN(j)&&(j=i[a]),u?(u.push(j,N,x),u):[j,N,x]}function n(t,e,n,o,s){let i=[];for(let a=0,u=n.length;a<u;++a){const u=n[a];i=r(t,e,u,o,s,2*a,i),e=u[u.length-1]}return i}
},{"../../array.js":"uHwP","./contains.js":"sGa2"}],"xHA5":[function(require,module,exports) {
"use strict";function e(e,o,t,r){for(;o<t-r;){for(let s=0;s<r;++s){const c=e[o+s];e[o+s]=e[t-r+s],e[t-r+s]=c}o+=r,t-=r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.coordinates=e;
},{}],"F7Ci":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingIsClockwise=r,exports.linearRingsAreOriented=n,exports.linearRingssAreOriented=t,exports.orientLinearRings=o,exports.orientLinearRingsArray=i;var e=require("./reverse.js");function r(e,r,n,t){let o=0,i=e[n-t],s=e[n-t+1];for(;r<n;r+=t){const n=e[r],t=e[r+1];o+=(n-i)*(t+s),i=n,s=t}return o>0}function n(e,n,t,o,i){const s=void 0!==i&&i;for(let l=0,u=t.length;l<u;++l){const i=t[l],u=r(e,n,i,o);if(0===l){if(s&&u||!s&&!u)return!1}else if(s&&!u||!s&&u)return!1;n=i}return!0}function t(e,r,t,o,i){for(let s=0,l=t.length;s<l;++s){const l=t[s];if(!n(e,r,l,o,i))return!1;l.length&&(r=l[l.length-1])}return!0}function o(n,t,o,i,s){const l=void 0!==s&&s;for(let u=0,c=o.length;u<c;++u){const s=o[u],c=r(n,t,s,i);(0===u?l&&c||!l&&!c:l&&!c||!l&&c)&&(0,e.coordinates)(n,t,s,i),t=s}return t}function i(e,r,n,t,i){for(let s=0,l=n.length;s<l;++s)r=o(e,r,n[s],t,i);return r}
},{"./reverse.js":"xHA5"}],"AvIG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.circular=p,exports.fromExtent=v,exports.fromCircle=j,exports.makeRegular=m,exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),i=q(require("./GeometryLayout.js")),s=q(require("./GeometryType.js")),n=q(require("./LinearRing.js")),r=q(require("./Point.js")),o=q(require("./SimpleGeometry.js")),a=require("../sphere.js"),l=require("./flat/area.js"),d=require("./flat/closest.js"),h=require("./flat/contains.js"),u=require("./flat/deflate.js"),f=require("./flat/inflate.js"),g=require("./flat/interiorpoint.js"),_=require("./flat/intersectsextent.js"),c=require("./flat/orient.js"),C=require("./flat/simplify.js"),R=require("../math.js");function q(t){return t&&t.__esModule?t:{default:t}}class x extends o.default{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){return new x(this.flatCoordinates.slice(),this.layout,this.ends_.slice())}closestPointXY(t,i,s,n){return n<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,d.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,d.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,s,n))}containsXY(t,e){return(0,h.linearRingsContainsXY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return(0,l.linearRings)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,c.orientLinearRings)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,f.inflateCoordinatesArray)(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=(0,e.getCenter)(this.getExtent());this.flatInteriorPoint_=(0,g.getInteriorPointOfArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new r.default(this.getFlatInteriorPoint(),i.default.XYM)}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new n.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const a=i[o],l=new n.default(e.slice(r,a),t);s.push(l),r=a}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,c.linearRingsAreOriented)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,c.orientLinearRings)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],s=[];return e.length=(0,C.quantizeArray)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,s),new x(e,i.default.XY,s)}getType(){return s.default.POLYGON}intersectsExtent(t){return(0,_.intersectsLinearRingArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=(0,u.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}var y=x;function p(e,s,n,r){const o=n||32,l=[];for(let i=0;i<o;++i)(0,t.extend)(l,(0,a.offset)(e,s,2*Math.PI*i/o,r));return l.push(l[0],l[1]),new x(l,i.default.XY,[l.length])}function v(t){const e=t[0],s=t[1],n=t[2],r=t[3],o=[e,s,e,r,n,r,n,s,e,s];return new x(o,i.default.XY,[o.length])}function j(t,e,i){const s=e||32,n=t.getStride(),r=t.getLayout(),o=t.getCenter(),a=n*(s+1),l=new Array(a);for(let u=0;u<a;u+=n){l[u]=0,l[u+1]=0;for(let t=2;t<n;t++)l[u+t]=o[t]}const d=[l.length],h=new x(l,r,d);return m(h,o,t.getRadius(),i),h}function m(t,e,i,s){const n=t.getFlatCoordinates(),r=t.getStride(),o=n.length/r-1,a=s||0;for(let l=0;l<=o;++l){const t=l*r,s=a+2*(0,R.modulo)(l,o)*Math.PI/o;n[t]=e[0]+i*Math.cos(s),n[t+1]=e[1]+i*Math.sin(s)}t.changed()}exports.default=y;
},{"../array.js":"uHwP","../extent.js":"E4kN","./GeometryLayout.js":"TBKt","./GeometryType.js":"I79K","./LinearRing.js":"p64G","./Point.js":"xPgY","./SimpleGeometry.js":"leyx","../sphere.js":"U9gN","./flat/area.js":"q2Lq","./flat/closest.js":"iDhe","./flat/contains.js":"sGa2","./flat/deflate.js":"tAC2","./flat/inflate.js":"RTsg","./flat/interiorpoint.js":"SFVH","./flat/intersectsextent.js":"EDhT","./flat/orient.js":"F7Ci","./flat/simplify.js":"o8JQ","../math.js":"crjC"}],"tyDd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingss=t;var e=require("../../extent.js");function t(t,r,n,s){const o=[];let a=(0,e.createEmpty)();for(let l=0,c=n.length;l<c;++l){const c=n[l];a=(0,e.createOrUpdateFromFlatCoordinates)(t,r,c[0],s),o.push((a[0]+a[2])/2,(a[1]+a[3])/2),r=c[c.length-1]}return o}
},{"../../extent.js":"E4kN"}],"UyXA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),s=y(require("./GeometryLayout.js")),i=y(require("./GeometryType.js")),n=y(require("./MultiPoint.js")),r=y(require("./Polygon.js")),o=y(require("./SimpleGeometry.js")),a=require("./flat/area.js"),l=require("./flat/center.js"),h=require("./flat/closest.js"),d=require("./flat/contains.js"),u=require("./flat/deflate.js"),f=require("./flat/inflate.js"),g=require("./flat/interiorpoint.js"),_=require("./flat/intersectsextent.js"),c=require("./flat/orient.js"),C=require("./flat/simplify.js");function y(t){return t&&t.__esModule?t:{default:t}}class q extends o.default{constructor(e,s,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){let n=this.getLayout();const r=e,o=[],a=[];for(let e=0,s=r.length;e<s;++e){const s=r[e];0===e&&(n=s.getLayout());const i=o.length,l=s.getEnds();for(let t=0,e=l.length;t<e;++t)l[t]+=i;(0,t.extend)(o,s.getFlatCoordinates()),a.push(l)}s=n,e=o,i=a}void 0!==s&&i?(this.setFlatCoordinates(s,e),this.endss_=i):this.setCoordinates(e,s)}appendPolygon(e){let s;if(this.flatCoordinates){const i=this.flatCoordinates.length;(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates());for(let t=0,n=(s=e.getEnds().slice()).length;t<n;++t)s[t]+=i}else this.flatCoordinates=e.getFlatCoordinates().slice(),s=e.getEnds().slice(),this.endss_.push();this.endss_.push(s),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=this.endss_[s].slice();return new q(this.flatCoordinates.slice(),this.layout,e)}closestPointXY(t,s,i,n){return n<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,s)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,h.multiArrayMaxSquaredDelta)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,h.assignClosestMultiArrayPoint)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,s,i,n))}containsXY(t,e){return(0,d.linearRingssContainsXY)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return(0,a.linearRingss)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,c.orientLinearRingsArray)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,f.inflateMultiCoordinatesArray)(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=(0,l.linearRingss)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,g.getInteriorPointsOfMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new n.default(this.getFlatInteriorPoints().slice(),s.default.XYM)}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,c.linearRingssAreOriented)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,c.orientLinearRingsArray)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=(0,C.quantizeMultiArray)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new q(e,s.default.XY,i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const s=this.endss_[t-1];e=s[s.length-1]}const s=this.endss_[t].slice(),i=s[s.length-1];if(0!==e)for(let n=0,r=s.length;n<r;++n)s[n]-=e;return new r.default(this.flatCoordinates.slice(e,i),this.layout,s)}getPolygons(){const t=this.layout,e=this.flatCoordinates,s=this.endss_,i=[];let n=0;for(let o=0,a=s.length;o<a;++o){const a=s[o].slice(),l=a[a.length-1];if(0!==n)for(let t=0,e=a.length;t<e;++t)a[t]-=n;const h=new r.default(e.slice(n,l),t,a);i.push(h),n=l}return i}getType(){return i.default.MULTI_POLYGON}intersectsExtent(t){return(0,_.intersectsLinearRingMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const s=(0,u.deflateMultiCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===s.length)this.flatCoordinates.length=0;else{const t=s[s.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}var R=q;exports.default=R;
},{"../array.js":"uHwP","../extent.js":"E4kN","./GeometryLayout.js":"TBKt","./GeometryType.js":"I79K","./MultiPoint.js":"FLg1","./Polygon.js":"AvIG","./SimpleGeometry.js":"leyx","./flat/area.js":"q2Lq","./flat/center.js":"tyDd","./flat/closest.js":"iDhe","./flat/contains.js":"sGa2","./flat/deflate.js":"tAC2","./flat/inflate.js":"RTsg","./flat/interiorpoint.js":"SFVH","./flat/intersectsextent.js":"EDhT","./flat/orient.js":"F7Ci","./flat/simplify.js":"o8JQ"}],"uzCl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../asserts.js"),t=p(require("../Feature.js")),r=require("./Feature.js"),o=p(require("./JSONFeature.js")),n=p(require("../geom/GeometryCollection.js")),a=p(require("../geom/LineString.js")),i=p(require("../geom/MultiLineString.js")),u=p(require("../geom/MultiPoint.js")),s=p(require("../geom/MultiPolygon.js")),c=p(require("../geom/Point.js")),d=p(require("../geom/Polygon.js")),l=require("../obj.js"),m=require("../proj.js"),f=p(require("../geom/GeometryType.js"));function p(e){return e&&e.__esModule?e:{default:e}}class y extends o.default{constructor(e){const t=e||{};super(),this.dataProjection=(0,m.get)(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=(0,m.get)(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName}readFeatureFromObject(e,r){let o=null;const n=g((o="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null}).geometry,r),a=new t.default;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in o!==void 0&&a.setGeometryName(o.geometry_name),a.setGeometry(n),"id"in o&&a.setId(o.id),o.properties&&a.setProperties(o.properties,!0),a}readFeaturesFromObject(e,t){let r=null;if("FeatureCollection"===e.type){r=[];const o=e.features;for(let e=0,n=o.length;e<n;++e)r.push(this.readFeatureFromObject(o[e],t))}else r=[this.readFeatureFromObject(e,t)];return r}readGeometryFromObject(e,t){return g(e,t)}readProjectionFromObject(t){const r=t.crs;let o;return r?"name"==r.type?o=(0,m.get)(r.properties.name):"EPSG"===r.type?o=(0,m.get)("EPSG:"+r.properties.code):(0,e.assert)(!1,36):o=this.dataProjection,o}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},o=e.getId();void 0!==o&&(r.id=o);const n=e.getGeometry();n&&(r.geometry=I(n,t));const a=e.getProperties();return delete a[e.getGeometryName()],(0,l.isEmpty)(a)||(r.properties=a),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let o=0,n=e.length;o<n;++o)r.push(this.writeFeatureObject(e[o],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return I(e,this.adaptOptions(t))}}function g(e,t){if(!e)return null;let o;switch(e.type){case f.default.POINT:o=O(e);break;case f.default.LINE_STRING:o=G(e);break;case f.default.POLYGON:o=h(e);break;case f.default.MULTI_POINT:o=N(e);break;case f.default.MULTI_LINE_STRING:o=P(e);break;case f.default.MULTI_POLYGON:o=b(e);break;case f.default.GEOMETRY_COLLECTION:o=j(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return(0,r.transformGeometryWithOptions)(o,!1,t)}function j(e,t){const r=e.geometries.map(function(e){return g(e,t)});return new n.default(r)}function O(e){return new c.default(e.coordinates)}function G(e){return new a.default(e.coordinates)}function P(e){return new i.default(e.coordinates)}function N(e){return new u.default(e.coordinates)}function b(e){return new s.default(e.coordinates)}function h(e){return new d.default(e.coordinates)}function I(e,t){const o=(e=(0,r.transformGeometryWithOptions)(e,!0,t)).getType();let n;switch(o){case f.default.POINT:n=C(e,t);break;case f.default.LINE_STRING:n=_(e,t);break;case f.default.POLYGON:n=E(e,t);break;case f.default.MULTI_POINT:n=T(e,t);break;case f.default.MULTI_LINE_STRING:n=F(e,t);break;case f.default.MULTI_POLYGON:n=w(e,t);break;case f.default.GEOMETRY_COLLECTION:n=L(e,t);break;case f.default.CIRCLE:n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+o)}return n}function L(e,t){return{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(e){const r=(0,l.assign)({},t);return delete r.featureProjection,I(e,r)})}}function _(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function F(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function T(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function w(e,t){let r;return t&&(r=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(r)}}function C(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function E(e,t){let r;return t&&(r=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(r)}}var M=y;exports.default=M;
},{"../asserts.js":"kWiW","../Feature.js":"ZfC4","./Feature.js":"fBF9","./JSONFeature.js":"eWHi","../geom/GeometryCollection.js":"knKK","../geom/LineString.js":"nG5b","../geom/MultiLineString.js":"GJ0c","../geom/MultiPoint.js":"FLg1","../geom/MultiPolygon.js":"UyXA","../geom/Point.js":"xPgY","../geom/Polygon.js":"AvIG","../obj.js":"c6bJ","../proj.js":"HKfS","../geom/GeometryType.js":"I79K"}],"ab11":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_TILE_SIZE=exports.DEFAULT_MAX_ZOOM=void 0;const e=42;exports.DEFAULT_MAX_ZOOM=42;const t=256;exports.DEFAULT_TILE_SIZE=256;
},{}],"v675":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExtent=e,exports.none=a;var t=require("./math.js");function e(e,a,r){return function(n,o,c,l){if(n){const u=a?0:c[0]*o,h=a?0:c[1]*o;let s=e[0]+u/2,M=e[2]-u/2,x=e[1]+h/2,i=e[3]-h/2;s>M&&(M=s=(M+s)/2),x>i&&(i=x=(i+x)/2);let m=(0,t.clamp)(n[0],s,M),p=(0,t.clamp)(n[1],x,i);const f=30*o;return l&&r&&(m+=-f*Math.log(1+Math.max(0,s-n[0])/f)+f*Math.log(1+Math.max(0,n[0]-M)/f),p+=-f*Math.log(1+Math.max(0,x-n[1])/f)+f*Math.log(1+Math.max(0,n[1]-i)/f)),[m,p]}}}function a(t){return t}
},{"./math.js":"crjC"}],"d9FV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSnapToResolutions=r,exports.createSnapToPower=i,exports.createMinMaxResolution=h;var t=require("./array.js"),e=require("./extent.js"),n=require("./math.js");function o(t,n,o,a){const r=(0,e.getWidth)(n)/o[0],i=(0,e.getHeight)(n)/o[1];return a?Math.min(t,Math.max(r,i)):Math.min(t,Math.min(r,i))}function a(t,e,o){let a=Math.min(t,e);return a*=Math.log(1+50*Math.max(0,t/e-1))/50+1,o&&(a=Math.max(a,o),a/=Math.log(1+50*Math.max(0,o/t-1))/50+1),(0,n.clamp)(a,o/2,2*e)}function r(e,r,i,h){return function(u,c,M,l){if(void 0!==u){const s=e[0],m=e[e.length-1],f=i?o(s,i,M,h):s;if(l){return void 0===r||r?a(u,f,m):(0,n.clamp)(u,m,f)}const p=Math.min(f,u),d=Math.floor((0,t.linearFindNearest)(e,p,c));return e[d]>f&&d<e.length-1?e[d+1]:e[d]}}}function i(t,e,r,i,h,u){return function(c,M,l,s){if(void 0!==c){const m=h?o(e,h,l,u):e,f=void 0!==r?r:0;if(s){return void 0===i||i?a(c,m,f):(0,n.clamp)(c,f,m)}const p=1e-9,d=Math.ceil(Math.log(e/m)/Math.log(t)-p),g=-M*(.5-p)+.5,x=Math.min(m,c),v=Math.floor(Math.log(e/x)/Math.log(t)+g),j=Math.max(d,v),q=e/Math.pow(t,j);return(0,n.clamp)(q,f,m)}}}function h(t,e,r,i,h){return function(u,c,M,l){if(void 0!==u){const c=i?o(t,i,M,h):t;return(void 0===r||r)&&l?a(u,c,e):(0,n.clamp)(u,e,c)}}}
},{"./array.js":"uHwP","./extent.js":"E4kN","./math.js":"crjC"}],"oeTb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.disable=t,exports.none=e,exports.createSnapToN=r,exports.createSnapToZero=n;var o=require("./math.js");function t(o){return void 0!==o?0:void 0}function e(o){return void 0!==o?o:void 0}function r(o){const t=2*Math.PI/o;return function(o,e){return e?o:void 0!==o?o=Math.floor(o/t+.5)*t:void 0}}function n(t){const e=t||(0,o.toRadians)(5);return function(o,t){return t?o:void 0!==o?Math.abs(o)<=e?0:o:void 0}}
},{"./math.js":"crjC"}],"LSsd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ANIMATING:0,INTERACTING:1};exports.default=e;
},{}],"tF7O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};exports.default=e;
},{}],"lTU8":[function(require,module,exports) {
"use strict";function e(e,t,r){const n=void 0!==r?e.toFixed(r):""+e;let o=n.indexOf(".");return(o=-1===o?n.length:o)>t?n:new Array(1+t-o).join("0")+n}function t(e,t){const r=(""+e).split("."),n=(""+t).split(".");for(let o=0;o<Math.max(r.length,n.length);o++){const e=parseInt(r[o]||"0",10),t=parseInt(n[o]||"0",10);if(e>t)return 1;if(t>e)return-1}return 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.padNumber=e,exports.compareVersions=t;
},{}],"irUP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=n,exports.closestOnCircle=o,exports.closestOnSegment=s,exports.createStringXY=u,exports.degreesToStringHDMS=c,exports.format=i,exports.equals=a,exports.rotate=f,exports.scale=p,exports.squaredDistance=x,exports.distance=l,exports.squaredDistanceToSegment=d,exports.toStringHDMS=h,exports.toStringXY=g,exports.wrapX=M;var t=require("./math.js"),e=require("./string.js"),r=require("./extent.js");function n(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function o(t,e){const r=e.getRadius(),n=e.getCenter(),o=n[0],s=n[1];let u=t[0]-o;const c=t[1]-s;0===u&&0===c&&(u=1);const i=Math.sqrt(u*u+c*c);return[o+r*u/i,s+r*c/i]}function s(t,e){const r=t[0],n=t[1],o=e[0],s=e[1],u=o[0],c=o[1],i=s[0],a=s[1],f=i-u,p=a-c,x=0===f&&0===p?0:(f*(r-u)+p*(n-c))/(f*f+p*p||0);let l,d;return x<=0?(l=u,d=c):x>=1?(l=i,d=a):(l=u+x*f,d=c+x*p),[l,d]}function u(t){return function(e){return g(e,t)}}function c(r,n,o){const s=(0,t.modulo)(n+180,360)-180,u=Math.abs(3600*s),c=o||0,i=Math.pow(10,c);let a=Math.floor(u/3600),f=Math.floor((u-3600*a)/60),p=u-3600*a-60*f;return(p=Math.ceil(p*i)/i)>=60&&(p=0,f+=1),f>=60&&(f=0,a+=1),a+" "+(0,e.padNumber)(f,2)+" "+(0,e.padNumber)(p,2,c)+""+(0==s?"":" "+r.charAt(s<0?1:0))}function i(t,e,r){return t?e.replace("{x}",t[0].toFixed(r)).replace("{y}",t[1].toFixed(r)):""}function a(t,e){let r=!0;for(let n=t.length-1;n>=0;--n)if(t[n]!=e[n]){r=!1;break}return r}function f(t,e){const r=Math.cos(e),n=Math.sin(e),o=t[0]*r-t[1]*n,s=t[1]*r+t[0]*n;return t[0]=o,t[1]=s,t}function p(t,e){return t[0]*=e,t[1]*=e,t}function x(t,e){const r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function l(t,e){return Math.sqrt(x(t,e))}function d(t,e){return x(t,s(t,e))}function h(t,e){return t?c("NS",t[1],e)+" "+c("EW",t[0],e):""}function g(t,e){return i(t,"{x}, {y}",e)}function M(t,e){const n=e.getExtent();if(e.canWrapX()&&(t[0]<n[0]||t[0]>=n[2])){const e=(0,r.getWidth)(n),o=Math.floor((t[0]-n[0])/e);t[0]-=o*e}return t}
},{"./math.js":"crjC","./string.js":"lTU8","./extent.js":"E4kN"}],"xZ2c":[function(require,module,exports) {
"use strict";function e(e){return Math.pow(e,3)}function t(t){return 1-e(1-t)}function n(e){return 3*e*e-2*e*e*e}function r(e){return e}function u(e){return e<.5?n(2*e):1-n(2*(e-.5))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.easeIn=e,exports.easeOut=t,exports.inAndOut=n,exports.linear=r,exports.upAndDown=u;
},{}],"TOcO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCenterConstraint=v,exports.createResolutionConstraint=j,exports.createRotationConstraint=A,exports.isNoopAnimation=E,exports.default=void 0;var t=require("./tilegrid/common.js"),e=require("./functions.js"),o=require("./centerconstraint.js"),n=f(require("./Object.js")),i=require("./resolutionconstraint.js"),s=require("./rotationconstraint.js"),r=f(require("./ViewHint.js")),a=f(require("./ViewProperty.js")),h=require("./array.js"),l=require("./asserts.js"),u=require("./coordinate.js"),c=require("./easing.js"),g=require("./extent.js"),m=f(require("./geom/GeometryType.js")),d=require("./geom/Polygon.js"),R=require("./math.js"),_=require("./obj.js"),p=require("./proj.js"),C=f(require("./proj/Units.js"));function f(t){return t&&t.__esModule?t:{default:t}}const I=0;class x extends n.default{constructor(t){super();const e=(0,_.assign)({},t);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=(0,p.createProjection)(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.cancelAnchor_=void 0,e.center&&(e.center=(0,p.fromUserCoordinate)(e.center,this.projection_)),e.extent&&(e.extent=(0,p.fromUserExtent)(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(t){const e=j(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;const o=v(t),n=e.constraint,i=A(t);this.constraints_={center:o,resolution:n,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t}getUpdatedOptions_(t){const e=(0,_.assign)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),(0,_.assign)({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let o=0;o<e.length;++o){let t=arguments[o];t.center&&((t=(0,_.assign)({},t)).center=(0,p.fromUserCoordinate)(t.center,this.getProjection())),t.anchor&&((t=(0,_.assign)({},t)).anchor=(0,p.fromUserCoordinate)(t.anchor,this.getProjection())),e[o]=t}this.animateInternal.apply(this,e)}animateInternal(t){let e,o=arguments.length;if(o>1&&"function"==typeof arguments[o-1]&&(e=arguments[o-1],--o),!this.isDef()){const t=arguments[o-1];return t.center&&this.setCenterInternal(t.center),void 0!==t.zoom&&this.setZoom(t.zoom),void 0!==t.rotation&&this.setRotation(t.rotation),void(e&&M(e,!0))}let n=Date.now(),i=this.targetCenter_.slice(),s=this.targetResolution_,a=this.targetRotation_;const h=[];for(let r=0;r<o;++r){const t=arguments[r],o={start:n,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||c.inAndOut,callback:e};if(t.center&&(o.sourceCenter=i,o.targetCenter=t.center.slice(),i=o.targetCenter),void 0!==t.zoom?(o.sourceResolution=s,o.targetResolution=this.getResolutionForZoom(t.zoom),s=o.targetResolution):t.resolution&&(o.sourceResolution=s,o.targetResolution=t.resolution,s=o.targetResolution),void 0!==t.rotation){o.sourceRotation=a;const e=(0,R.modulo)(t.rotation-a+Math.PI,2*Math.PI)-Math.PI;o.targetRotation=a+e,a=o.targetRotation}E(o)?o.complete=!0:n+=o.duration,h.push(o)}this.animations_.push(h),this.setHint(r.default.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[r.default.ANIMATING]>0}getInteracting(){return this.hints_[r.default.INTERACTING]>0}cancelAnimations(){let t;this.setHint(r.default.ANIMATING,-this.hints_[r.default.ANIMATING]);for(let e=0,o=this.animations_.length;e<o;++e){const o=this.animations_[e];if(o[0].callback&&M(o[0].callback,!1),!t)for(let e=0,n=o.length;e<n;++e){const n=o[e];if(!n.complete){t=n.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let o=this.animations_.length-1;o>=0;--o){const n=this.animations_[o];let i=!0;for(let o=0,s=n.length;o<s;++o){const s=n[o];if(s.complete)continue;const r=t-s.start;let a=s.duration>0?r/s.duration:1;a>=1?(s.complete=!0,a=1):i=!1;const h=s.easing(a);if(s.sourceCenter){const t=s.sourceCenter[0],e=s.sourceCenter[1],o=t+h*(s.targetCenter[0]-t),n=e+h*(s.targetCenter[1]-e);this.targetCenter_=[o,n]}if(s.sourceResolution&&s.targetResolution){const t=1===h?s.targetResolution:s.sourceResolution+h*(s.targetResolution-s.sourceResolution);if(s.anchor){const e=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(o,s.anchor)}this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){const t=1===h?(0,R.modulo)(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+h*(s.targetRotation-s.sourceRotation);if(s.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,s.anchor)}this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!s.complete)break}if(i){this.animations_[o]=null,this.setHint(r.default.ANIMATING,-1);const t=n[0].callback;t&&M(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let o;const n=this.getCenterInternal();return void 0!==n&&(o=[n[0]-e[0],n[1]-e[1]],(0,u.rotate)(o,t-this.getRotation()),(0,u.add)(o,e)),o}calculateCenterZoom(t,e){let o;const n=this.getCenterInternal(),i=this.getResolution();if(void 0!==n&&void 0!==i){o=[e[0]-t*(e[0]-n[0])/i,e[1]-t*(e[1]-n[1])/i]}return o}getViewportSize_(t){const e=this.viewportSize_;if(t){const o=e[0],n=e[1];return[Math.abs(o*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(o*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?(0,p.toUserCoordinate)(t,this.getProjection()):t}getCenterInternal(){return this.get(a.default.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.options_.constrainResolution}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return(0,p.toUserExtent)(e,this.getProjection())}calculateExtentInternal(t){const e=t||this.getViewportSize_(),o=this.getCenterInternal();(0,l.assert)(o,1);const n=this.getResolution();(0,l.assert)(void 0!==n,2);const i=this.getRotation();return(0,l.assert)(void 0!==i,3),(0,g.getForViewAndSize)(o,n,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(a.default.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal((0,p.fromUserExtent)(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){const o=e||this.getViewportSize_(),n=(0,g.getWidth)(t)/o[0],i=(0,g.getHeight)(t)/o[1];return Math.max(n,i)}getResolutionForValueFunction(t){const e=t||2,o=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(o/n)/Math.log(e);return function(t){return o/Math.pow(e,t*i)}}getRotation(){return this.get(a.default.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),o=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(o/n)/e;return function(t){return Math.log(o/t)/e/i}}getState(){const t=this.getCenterInternal(),e=this.getProjection(),o=this.getResolution(),n=this.getRotation();return{center:t.slice(0),projection:void 0!==e?e:null,resolution:o,rotation:n,zoom:this.getZoom()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,o,n=this.minZoom_||0;if(this.resolutions_){const i=(0,h.linearFindNearest)(this.resolutions_,t,1);n=i,e=this.resolutions_[i],o=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,o=this.zoomFactor_;return n+Math.log(e/t)/Math.log(o)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=(0,R.clamp)(Math.floor(t),0,this.resolutions_.length-2),o=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(o,(0,R.clamp)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){const o=(0,_.assign)({size:this.getViewportSize_()},e||{});let n;if((0,l.assert)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){(0,l.assert)(!(0,g.isEmpty)(t),25);const e=(0,p.fromUserExtent)(t,this.getProjection());n=(0,d.fromExtent)(e)}else if(t.getType()===m.default.CIRCLE){const e=(0,p.fromUserExtent)(t.getExtent(),this.getProjection());(n=(0,d.fromExtent)(e)).rotate(this.getRotation(),(0,g.getCenter)(e))}else{const e=(0,p.getUserProjection)();n=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(n,o)}fitInternal(t,o){const n=o||{};let i=n.size;i||(i=this.getViewportSize_());const s=void 0!==n.padding?n.padding:[0,0,0,0],r=void 0!==n.nearest&&n.nearest;let a;a=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;const h=t.getFlatCoordinates(),l=this.getRotation(),u=Math.cos(-l);let c=Math.sin(-l),g=1/0,m=1/0,d=-1/0,R=-1/0;const _=t.getStride();for(let e=0,M=h.length;e<M;e+=_){const t=h[e]*u-h[e+1]*c,o=h[e]*c+h[e+1]*u;g=Math.min(g,t),m=Math.min(m,o),d=Math.max(d,t),R=Math.max(R,o)}let p=this.getResolutionForExtentInternal([g,m,d,R],[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);p=isNaN(p)?a:Math.max(p,a),p=this.getConstrainedResolution(p,r?0:1),c=-c;let C=(g+d)/2,f=(m+R)/2;const I=[(C+=(s[1]-s[3])/2*p)*u-(f+=(s[0]-s[2])/2*p)*c,f*u+C*c],x=n.callback?n.callback:e.VOID;void 0!==n.duration?this.animateInternal({resolution:p,center:this.getConstrainedCenter(I,p),duration:n.duration,easing:n.easing},x):(this.targetResolution_=p,this.targetCenter_=I,this.applyTargetState_(!1,!0),M(x,!0))}centerOn(t,e,o){this.centerOnInternal((0,p.fromUserCoordinate)(t,this.getProjection()),e,o)}centerOnInternal(t,e,o){const n=this.getRotation(),i=Math.cos(-n);let s=Math.sin(-n),r=t[0]*i-t[1]*s,a=t[1]*i+t[0]*s;const h=this.getResolution(),l=(r+=(e[0]/2-o[0])*h)*i-(a+=(o[1]-e[1]/2)*h)*(s=-s),u=a*i+r*s;this.setCenterInternal([l,u])}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=(0,p.toUserCoordinate)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){const o=e&&(0,p.fromUserCoordinate)(e,this.getProjection());this.adjustResolutionInternal(t,o)}adjustResolutionInternal(t,e){const o=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,n,o);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=(0,p.fromUserCoordinate)(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const o=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,o);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal((0,p.fromUserCoordinate)(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const o=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,o),i=this.getViewportSize_(n),s=this.constraints_.resolution(this.targetResolution_,0,i,o),r=this.constraints_.center(this.targetCenter_,s,i,o);this.get(a.default.ROTATION)!==n&&this.set(a.default.ROTATION,n),this.get(a.default.RESOLUTION)!==s&&this.set(a.default.RESOLUTION,s),this.get(a.default.CENTER)&&(0,u.equals)(this.get(a.default.CENTER),r)||this.set(a.default.CENTER,r),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,o){const n=void 0!==t?t:200,i=e||0,s=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,i,r),h=this.constraints_.center(this.targetCenter_,a,r);if(0===n&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=h,void this.applyTargetState_();const l=o||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===s&&this.getCenterInternal()&&(0,u.equals)(this.getCenterInternal(),h)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:h,resolution:a,duration:n,easing:c.easeOut,anchor:l}))}beginInteraction(){this.resolveConstraints(0),this.setHint(r.default.INTERACTING,1)}endInteraction(t,e,o){const n=o&&(0,p.fromUserCoordinate)(o,this.getProjection());this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,o){this.setHint(r.default.INTERACTING,-1),this.resolveConstraints(t,e,o)}getConstrainedCenter(t,e){const o=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),o)}getConstrainedZoom(t,e){const o=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(o,e))}getConstrainedResolution(t,e){const o=e||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,o,n)}}function M(t,e){setTimeout(function(){t(e)},0)}function v(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return(0,o.createExtent)(t.extent,t.constrainOnlyCenter,e)}const e=(0,p.createProjection)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,(0,o.createExtent)(t,!1,!1)}return o.none}function j(e){let o,n,s;let r=void 0!==e.minZoom?e.minZoom:I,a=void 0!==e.maxZoom?e.maxZoom:28;const h=void 0!==e.zoomFactor?e.zoomFactor:2,l=void 0!==e.multiWorld&&e.multiWorld,u=void 0===e.smoothResolutionConstraint||e.smoothResolutionConstraint,c=void 0!==e.showFullExtent&&e.showFullExtent,m=(0,p.createProjection)(e.projection,"EPSG:3857"),d=m.getExtent();let R=e.constrainOnlyCenter,_=e.extent;if(l||_||!m.isGlobal()||(R=!1,_=d),void 0!==e.resolutions){const t=e.resolutions;n=t[r],s=void 0!==t[a]?t[a]:t[t.length-1],o=e.constrainResolution?(0,i.createSnapToResolutions)(t,u,!R&&_,c):(0,i.createMinMaxResolution)(n,s,u,!R&&_,c)}else{const l=(d?Math.max((0,g.getWidth)(d),(0,g.getHeight)(d)):360*p.METERS_PER_UNIT[C.default.DEGREES]/m.getMetersPerUnit())/t.DEFAULT_TILE_SIZE/Math.pow(2,I),f=l/Math.pow(2,28-I);void 0!==(n=e.maxResolution)?r=0:n=l/Math.pow(h,r),void 0===(s=e.minResolution)&&(s=void 0!==e.maxZoom?void 0!==e.maxResolution?n/Math.pow(h,a):l/Math.pow(h,a):f),a=r+Math.floor(Math.log(n/s)/Math.log(h)),s=n/Math.pow(h,a-r),o=e.constrainResolution?(0,i.createSnapToPower)(h,n,s,u,!R&&_,c):(0,i.createMinMaxResolution)(n,s,u,!R&&_,c)}return{constraint:o,maxResolution:n,minResolution:s,minZoom:r,zoomFactor:h}}function A(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation;return void 0===e||!0===e?(0,s.createSnapToZero)():!1===e?s.none:"number"==typeof e?(0,s.createSnapToN)(e):s.none}return s.disable}function E(t){return!(t.sourceCenter&&t.targetCenter&&!(0,u.equals)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var T=x;exports.default=T;
},{"./tilegrid/common.js":"ab11","./functions.js":"mKAY","./centerconstraint.js":"v675","./Object.js":"X18S","./resolutionconstraint.js":"d9FV","./rotationconstraint.js":"oeTb","./ViewHint.js":"LSsd","./ViewProperty.js":"tF7O","./array.js":"uHwP","./asserts.js":"kWiW","./coordinate.js":"irUP","./easing.js":"xZ2c","./extent.js":"E4kN","./geom/GeometryType.js":"I79K","./geom/Polygon.js":"AvIG","./math.js":"crjC","./obj.js":"c6bJ","./proj.js":"HKfS","./proj/Units.js":"Y6nE"}],"nMeT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"};exports.default=e;
},{}],"av2E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};exports.default=t;
},{}],"omMx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFontParameters=exports.CLASS_COLLAPSED=exports.CLASS_CONTROL=exports.CLASS_UNSUPPORTED=exports.CLASS_UNSELECTABLE=exports.CLASS_SELECTABLE=exports.CLASS_HIDDEN=void 0;const e="ol-hidden";exports.CLASS_HIDDEN="ol-hidden";const o="ol-selectable";exports.CLASS_SELECTABLE="ol-selectable";const t="ol-unselectable";exports.CLASS_UNSELECTABLE="ol-unselectable";const s="ol-unsupported";exports.CLASS_UNSUPPORTED="ol-unsupported";const l="ol-control";exports.CLASS_CONTROL="ol-control";const r="ol-collapsed";exports.CLASS_COLLAPSED="ol-collapsed";const n=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),a=["style","variant","weight","size","lineHeight","family"],i=function(e){const o=e.match(n);if(!o)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let s=0,l=a.length;s<l;++s){const e=o[s+1];void 0!==e&&(t[a[s]]=e)}return t.families=t.family.split(/,\s?/),t};exports.getFontParameters=i;
},{}],"E1VY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PASSIVE_EVENT_LISTENERS=exports.IMAGE_DECODE=exports.WORKER_OFFSCREEN_CANVAS=exports.DEVICE_PIXEL_RATIO=exports.MAC=exports.WEBKIT=exports.SAFARI=exports.FIREFOX=void 0;const e="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",o=-1!==e.indexOf("firefox");exports.FIREFOX=o;const t=-1!==e.indexOf("safari")&&-1==e.indexOf("chrom");exports.SAFARI=t;const n=-1!==e.indexOf("webkit")&&-1==e.indexOf("edge");exports.WEBKIT=n;const r=-1!==e.indexOf("macintosh");exports.MAC=r;const s="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;exports.DEVICE_PIXEL_RATIO=s;const i="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope;exports.WORKER_OFFSCREEN_CANVAS=i;const E="undefined"!=typeof Image&&Image.prototype.decode;exports.IMAGE_DECODE=E;const d=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(o){}return e}();exports.PASSIVE_EVENT_LISTENERS=d;
},{}],"MHGO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCanvasContext2D=t,exports.outerWidth=r,exports.outerHeight=n,exports.replaceNode=o,exports.removeNode=i,exports.removeChildren=s,exports.replaceChildren=a;var e=require("./has.js");function t(t,r,n){const o=n&&n.length?n.shift():e.WORKER_OFFSCREEN_CANVAS?new OffscreenCanvas(t||300,r||300):document.createElement("canvas");return t&&(o.width=t),r&&(o.height=r),o.getContext("2d")}function r(e){let t=e.offsetWidth;const r=getComputedStyle(e);return t+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function n(e){let t=e.offsetHeight;const r=getComputedStyle(e);return t+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function o(e,t){const r=t.parentNode;r&&r.replaceChild(e,t)}function i(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function s(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function a(e,t){const r=e.childNodes;for(let n=0;;++n){const o=r[n],i=t[n];if(!o&&!i)break;o!==i&&(o?i?e.insertBefore(i,o):(e.removeChild(o),--n):e.appendChild(i))}}
},{"./has.js":"E1VY"}],"kpPG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("./MapEventType.js")),t=d(require("./Object.js")),i=h(require("./OverlayPositioning.js")),n=require("./css.js"),s=require("./dom.js"),o=require("./events.js"),r=require("./extent.js");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}function h(e){return e&&e.__esModule?e:{default:e}}const l={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class u extends t.default{constructor(e){super(),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+n.CLASS_SELECTABLE,this.element.style.position="absolute";let s=e.autoPan;s&&"object"!=typeof s&&(s={animation:e.autoPanAnimation,margin:e.autoPanMargin}),this.autoPan=s||!1,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addEventListener((0,t.getChangeEventType)(l.ELEMENT),this.handleElementChanged),this.addEventListener((0,t.getChangeEventType)(l.MAP),this.handleMapChanged),this.addEventListener((0,t.getChangeEventType)(l.OFFSET),this.handleOffsetChanged),this.addEventListener((0,t.getChangeEventType)(l.POSITION),this.handlePositionChanged),this.addEventListener((0,t.getChangeEventType)(l.POSITIONING),this.handlePositioningChanged),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:i.default.TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)}getElement(){return this.get(l.ELEMENT)}getId(){return this.id}getMap(){return this.get(l.MAP)}getOffset(){return this.get(l.OFFSET)}getPosition(){return this.get(l.POSITION)}getPositioning(){return this.get(l.POSITIONING)}handleElementChanged(){(0,s.removeChildren)(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,s.removeNode)(this.element),(0,o.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,o.listen)(t,e.default.POSTRENDER,this.render,this),this.updatePixelPosition();const i=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(l.ELEMENT,e)}setMap(e){this.set(l.MAP,e)}setOffset(e){this.set(l.OFFSET,e)}setPosition(e){this.set(l.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(l.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),o=this.getRect(n,[(0,s.outerWidth)(n),(0,s.outerHeight)(n)]),a=void 0===e.margin?20:e.margin;if(!(0,r.containsExtent)(i,o)){const n=o[0]-i[0],s=i[2]-o[2],r=o[1]-i[1],d=i[3]-o[3],h=[0,0];if(n<0?h[0]=n-a:s<0&&(h[0]=Math.abs(s)+a),r<0?h[1]=r-a:d<0&&(h[1]=Math.abs(d)+a),0!==h[0]||0!==h[1]){const i=t.getView().getCenterInternal(),n=t.getPixelFromCoordinateInternal(i),s=[n[0]+h[0],n[1]+h[1]],o=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(s),duration:o.duration,easing:o.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),n=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[n,s,n+t[0],s+t[1]]}setPositioning(e){this.set(l.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t)return void this.setVisible(!1);const i=e.getPixelFromCoordinate(t),n=e.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(e,t){const n=this.element.style,s=this.getOffset(),o=this.getPositioning();this.setVisible(!0);const r=Math.round(e[0]+s[0])+"px",a=Math.round(e[1]+s[1])+"px";let d="0%",h="0%";o==i.default.BOTTOM_RIGHT||o==i.default.CENTER_RIGHT||o==i.default.TOP_RIGHT?d="-100%":o!=i.default.BOTTOM_CENTER&&o!=i.default.CENTER_CENTER&&o!=i.default.TOP_CENTER||(d="-50%"),o==i.default.BOTTOM_LEFT||o==i.default.BOTTOM_CENTER||o==i.default.BOTTOM_RIGHT?h="-100%":o!=i.default.CENTER_LEFT&&o!=i.default.CENTER_CENTER&&o!=i.default.CENTER_RIGHT||(h="-50%");const l=`translate(${d}, ${h}) translate(${r}, ${a})`;this.rendered.transform_!=l&&(this.rendered.transform_=l,n.transform=l,n.msTransform=l)}getOptions(){return this.options}}var g=u;exports.default=g;
},{"./MapEventType.js":"nMeT","./Object.js":"X18S","./OverlayPositioning.js":"av2E","./css.js":"omMx","./dom.js":"MHGO","./events.js":"TEtv","./extent.js":"E4kN"}],"zerY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADD:"add",REMOVE:"remove"};exports.default=e;
},{}],"ZHRB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CollectionEvent=void 0;var t=i(require("./AssertionError.js")),e=i(require("./CollectionEventType.js")),s=i(require("./Object.js")),r=i(require("./events/Event.js"));function i(t){return t&&t.__esModule?t:{default:t}}const n={LENGTH:"length"};class h extends r.default{constructor(t,e,s){super(t),this.element=e,this.index=s}}exports.CollectionEvent=h;class a extends s.default{constructor(t,e){super();const s=e||{};if(this.unique_=!!s.unique,this.array_=t||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,s=t.length;e<s;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let s=0,r=e.length;s<r;++s)t(e[s],s,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(n.LENGTH)}insertAt(t,s){this.unique_&&this.assertUnique_(s),this.array_.splice(t,0,s),this.updateLength_(),this.dispatchEvent(new h(e.default.ADD,s,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let s=0,r=e.length;s<r;++s)if(e[s]===t)return this.removeAt(s)}removeAt(t){const s=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new h(e.default.REMOVE,s,t)),s}setAt(t,s){const r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(s,t);const r=this.array_[t];this.array_[t]=s,this.dispatchEvent(new h(e.default.REMOVE,r,t)),this.dispatchEvent(new h(e.default.ADD,s,t))}else{for(let e=r;e<t;++e)this.insertAt(e,void 0);this.insertAt(t,s)}}updateLength_(){this.set(n.LENGTH,this.array_.length)}assertUnique_(e,s){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==s)throw new t.default(58)}}var u=a;exports.default=u;
},{"./AssertionError.js":"ixPR","./CollectionEventType.js":"zerY","./Object.js":"X18S","./events/Event.js":"rYf1"}],"Virv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../functions.js"),t=i(require("../MapEventType.js")),s=i(require("../Object.js")),r=require("../dom.js"),n=require("../events.js");function i(e){return e&&e.__esModule?e:{default:e}}class l extends s.default{constructor(t){super(),this.element=t.element?t.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render_=t.render?t.render:e.VOID,t.target&&this.setTarget(t.target)}disposeInternal(){(0,r.removeNode)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(s){this.map_&&(0,r.removeNode)(this.element);for(let e=0,t=this.listenerKeys.length;e<t;++e)(0,n.unlistenByKey)(this.listenerKeys[e]);if(this.listenerKeys.length=0,this.map_=s,this.map_){(this.target_?this.target_:s.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==e.VOID&&this.listenerKeys.push((0,n.listen)(s,t.default.POSTRENDER,this.render,this)),s.render()}}render(e){this.render_.call(this,e)}setTarget(e){this.target_="string"==typeof e?document.getElementById(e):e}}var a=l;exports.default=a;
},{"../functions.js":"mKAY","../MapEventType.js":"nMeT","../Object.js":"X18S","../dom.js":"MHGO","../events.js":"TEtv"}],"dirP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"};exports.default=e;
},{}],"RwT5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=r(require("../Object.js")),s=r(require("./Property.js")),a=require("../math.js"),i=require("../obj.js"),o=require("../asserts.js");function r(t){return t&&t.__esModule?t:{default:t}}class u extends e.default{constructor(t){super();const e=(0,i.assign)({},t);e[s.default.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,o.assert)("number"==typeof e[s.default.OPACITY],64),e[s.default.VISIBLE]=void 0===t.visible||t.visible,e[s.default.Z_INDEX]=t.zIndex,e[s.default.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[s.default.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[s.default.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[s.default.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?t.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},s=this.getZIndex();return e.opacity=(0,a.clamp)(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==s?s:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(e){return(0,t.abstract)()}getLayerStatesArray(e){return(0,t.abstract)()}getExtent(){return this.get(s.default.EXTENT)}getMaxResolution(){return this.get(s.default.MAX_RESOLUTION)}getMinResolution(){return this.get(s.default.MIN_RESOLUTION)}getMinZoom(){return this.get(s.default.MIN_ZOOM)}getMaxZoom(){return this.get(s.default.MAX_ZOOM)}getOpacity(){return this.get(s.default.OPACITY)}getSourceState(){return(0,t.abstract)()}getVisible(){return this.get(s.default.VISIBLE)}getZIndex(){return this.get(s.default.Z_INDEX)}setExtent(t){this.set(s.default.EXTENT,t)}setMaxResolution(t){this.set(s.default.MAX_RESOLUTION,t)}setMinResolution(t){this.set(s.default.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(s.default.MAX_ZOOM,t)}setMinZoom(t){this.set(s.default.MIN_ZOOM,t)}setOpacity(t){(0,o.assert)("number"==typeof t,64),this.set(s.default.OPACITY,t)}setVisible(t){this.set(s.default.VISIBLE,t)}setZIndex(t){this.set(s.default.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}var l=u;exports.default=l;
},{"../util.js":"gvrh","../Object.js":"X18S","./Property.js":"dirP","../math.js":"crjC","../obj.js":"c6bJ","../asserts.js":"kWiW"}],"w2aV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};exports.default=e;
},{}],"mqbu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};exports.default=e;
},{}],"t6QM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inView=d,exports.default=void 0;var e=require("../events.js"),r=h(require("../events/EventType.js")),t=require("../Object.js"),s=h(require("./Base.js")),n=h(require("./Property.js")),u=require("../obj.js"),a=h(require("../render/EventType.js")),i=h(require("../source/State.js")),o=require("../asserts.js");function h(e){return e&&e.__esModule?e:{default:e}}class l extends s.default{constructor(e){const r=(0,u.assign)({},e);delete r.source,super(r),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addEventListener((0,t.getChangeEventType)(n.default.SOURCE),this.handleSourcePropertyChange_);const s=e.source?e.source:null;this.setSource(s)}getLayersArray(e){const r=e||[];return r.push(this),r}getLayerStatesArray(e){const r=e||[];return r.push(this.getLayerState()),r}getSource(){return this.get(n.default.SOURCE)||null}getSourceState(){const e=this.getSource();return e?e.getState():i.default.UNDEFINED}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,e.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null);const t=this.getSource();t&&(this.sourceChangeKey_=(0,e.listen)(t,r.default.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(e){return this.renderer_.getFeatures(e)}render(e,r){const t=this.getRenderer();if(t.prepareFrame(e))return t.renderFrame(e,r)}setMap(t){this.mapPrecomposeKey_&&((0,e.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,e.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,e.listen)(t,a.default.PRECOMPOSE,function(e){const r=e.frameState.layerStatesArray,t=this.getLayerState(!1);(0,o.assert)(!r.some(function(e){return e.layer===t.layer}),67),r.push(t)},this),this.mapRenderKey_=(0,e.listen)(this,r.default.CHANGE,t.render,t),this.changed())}setSource(e){this.set(n.default.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.setSource(null),super.disposeInternal()}}function d(e,r){if(!e.visible)return!1;const t=r.resolution;if(t<e.minResolution||t>=e.maxResolution)return!1;const s=r.zoom;return s>e.minZoom&&s<=e.maxZoom}var c=l;exports.default=c;
},{"../events.js":"TEtv","../events/EventType.js":"Ak1Z","../Object.js":"X18S","./Base.js":"RwT5","./Property.js":"dirP","../obj.js":"c6bJ","../render/EventType.js":"w2aV","../source/State.js":"mqbu","../asserts.js":"kWiW"}],"IRmY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=r,exports.default=void 0;var e=require("../array.js"),l=a(require("./Control.js")),t=require("../css.js"),s=require("../dom.js"),i=a(require("../events/EventType.js")),o=require("../layer/Layer.js");function a(e){return e&&e.__esModule?e:{default:e}}class n extends l.default{constructor(e){const l=e||{};super({element:document.createElement("div"),render:l.render||r,target:l.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===l.collapsed||l.collapsed,this.overrideCollapsible_=void 0!==l.collapsible,this.collapsible_=void 0===l.collapsible||l.collapsible,this.collapsible_||(this.collapsed_=!1);const s=void 0!==l.className?l.className:"ol-attribution",o=void 0!==l.tipLabel?l.tipLabel:"Attributions",a=void 0!==l.collapseLabel?l.collapseLabel:"";"string"==typeof a?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=a):this.collapseLabel_=a;const n=void 0!==l.label?l.label:"i";"string"==typeof n?(this.label_=document.createElement("span"),this.label_.textContent=n):this.label_=n;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,d=document.createElement("button");d.setAttribute("type","button"),d.title=o,d.appendChild(c),d.addEventListener(i.default.CLICK,this.handleClick_.bind(this),!1);const h=s+" "+t.CLASS_UNSELECTABLE+" "+t.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+t.CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),p=this.element;p.className=h,p.appendChild(this.ulElement_),p.appendChild(d),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const l={},t=[],s=e.layerStatesArray;for(let i=0,a=s.length;i<a;++i){const a=s[i];if(!(0,o.inView)(a,e.viewState))continue;const n=a.layer.getSource();if(!n)continue;const r=n.getAttributions();if(!r)continue;const c=r(e);if(c)if(this.overrideCollapsible_||!1!==n.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(c))for(let e=0,s=c.length;e<s;++e)c[e]in l||(t.push(c[e]),l[c[e]]=!0);else c in l||(t.push(c),l[c]=!0)}return t}updateElement_(l){if(!l)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const t=this.collectSourceAttributions_(l),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!(0,e.equals)(t,this.renderedAttributions_)){(0,s.removeChildren)(this.ulElement_);for(let e=0,l=t.length;e<l;++e){const l=document.createElement("li");l.innerHTML=t[e],this.ulElement_.appendChild(l)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(t.CLASS_COLLAPSED),this.collapsed_?(0,s.replaceNode)(this.collapseLabel_,this.label_):(0,s.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}}function r(e){this.updateElement_(e.frameState)}var c=n;exports.default=c;
},{"../array.js":"uHwP","./Control.js":"Virv","../css.js":"omMx","../dom.js":"MHGO","../events/EventType.js":"Ak1Z","../layer/Layer.js":"t6QM"}],"Y2hE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=n,exports.default=void 0;var t=a(require("./Control.js")),e=require("../css.js"),s=require("../easing.js"),i=a(require("../events/EventType.js"));function a(t){return t&&t.__esModule?t:{default:t}}class o extends t.default{constructor(t){const s=t||{};super({element:document.createElement("div"),render:s.render||n,target:s.target});const a=void 0!==s.className?s.className:"ol-rotate",o=void 0!==s.label?s.label:"";this.label_=null,"string"==typeof o?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=o):(this.label_=o,this.label_.classList.add("ol-compass"));const r=s.tipLabel?s.tipLabel:"Reset rotation",l=document.createElement("button");l.className=a+"-reset",l.setAttribute("type","button"),l.title=r,l.appendChild(this.label_),l.addEventListener(i.default.CLICK,this.handleClick_.bind(this),!1);const d=a+" "+e.CLASS_UNSELECTABLE+" "+e.CLASS_CONTROL,c=this.element;c.className=d,c.appendChild(l),this.callResetNorth_=s.resetNorth?s.resetNorth:void 0,this.duration_=void 0!==s.duration?s.duration:250,this.autoHide_=void 0===s.autoHide||s.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(e.CLASS_HIDDEN)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:s.easeOut}):t.setRotation(0))}}function n(t){const s=t.frameState;if(!s)return;const i=s.viewState.rotation;if(i!=this.rotation_){const t="rotate("+i+"rad)";if(this.autoHide_){const t=this.element.classList.contains(e.CLASS_HIDDEN);t||0!==i?t&&0!==i&&this.element.classList.remove(e.CLASS_HIDDEN):this.element.classList.add(e.CLASS_HIDDEN)}this.label_.style.transform=t}this.rotation_=i}var r=o;exports.default=r;
},{"./Control.js":"Virv","../css.js":"omMx","../easing.js":"xZ2c","../events/EventType.js":"Ak1Z"}],"MAm6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../events/EventType.js")),t=i(require("./Control.js")),o=require("../css.js"),n=require("../easing.js");function i(e){return e&&e.__esModule?e:{default:e}}class a extends t.default{constructor(t){const n=t||{};super({element:document.createElement("div"),target:n.target});const i=void 0!==n.className?n.className:"ol-zoom",a=void 0!==n.delta?n.delta:1,s=void 0!==n.zoomInLabel?n.zoomInLabel:"+",d=void 0!==n.zoomOutLabel?n.zoomOutLabel:"",l=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",r=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=i+"-in",u.setAttribute("type","button"),u.title=l,u.appendChild("string"==typeof s?document.createTextNode(s):s),u.addEventListener(e.default.CLICK,this.handleClick_.bind(this,a),!1);const m=document.createElement("button");m.className=i+"-out",m.setAttribute("type","button"),m.title=r,m.appendChild("string"==typeof d?document.createTextNode(d):d),m.addEventListener(e.default.CLICK,this.handleClick_.bind(this,-a),!1);const c=i+" "+o.CLASS_UNSELECTABLE+" "+o.CLASS_CONTROL,p=this.element;p.className=c,p.appendChild(u),p.appendChild(m),this.duration_=void 0!==n.duration?n.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const t=this.getMap().getView();if(!t)return;const o=t.getZoom();if(void 0!==o){const i=t.getConstrainedZoom(o+e);this.duration_>0?(t.getAnimating()&&t.cancelAnimations(),t.animate({zoom:i,duration:this.duration_,easing:n.easeOut})):t.setZoom(i)}}}var s=a;exports.default=s;
},{"../events/EventType.js":"Ak1Z","./Control.js":"Virv","../css.js":"omMx","../easing.js":"xZ2c"}],"vghk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./Control.js")),t=require("../css.js"),s=require("../dom.js"),l=require("../events.js"),n=u(require("../events/EventType.js"));function u(e){return e&&e.__esModule?e:{default:e}}const c=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],i={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class r extends e.default{constructor(e){const s=e||{};super({element:document.createElement("div"),target:s.target}),this.cssClassName_=void 0!==s.className?s.className:"ol-full-screen";const l=void 0!==s.label?s.label:"";this.labelNode_="string"==typeof l?document.createTextNode(l):l;const u=void 0!==s.labelActive?s.labelActive:"";this.labelActiveNode_="string"==typeof u?document.createTextNode(u):u,this.button_=document.createElement("button");const c=s.tipLabel?s.tipLabel:"Toggle full-screen";this.setClassName_(this.button_,a()),this.button_.setAttribute("type","button"),this.button_.title=c,this.button_.appendChild(this.labelNode_),this.button_.addEventListener(n.default.CLICK,this.handleClick_.bind(this),!1);const i=this.cssClassName_+" "+t.CLASS_UNSELECTABLE+" "+t.CLASS_CONTROL+" "+(o()?"":t.CLASS_UNSUPPORTED),r=this.element;r.className=i,r.appendChild(this.button_),this.keys_=void 0!==s.keys&&s.keys,this.source_=s.source}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){if(!o())return;const e=this.getMap();if(e)if(a())m();else{let t;t=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?h(t):d(t)}}handleFullScreenChange_(){const e=this.getMap();a()?(this.setClassName_(this.button_,!0),(0,s.replaceNode)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(i.ENTERFULLSCREEN)):(this.setClassName_(this.button_,!1),(0,s.replaceNode)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(i.LEAVEFULLSCREEN)),e&&e.updateSize()}setClassName_(e,t){const s=this.cssClassName_+"-true",l=this.cssClassName_+"-false",n=t?s:l;e.classList.remove(s),e.classList.remove(l),e.classList.add(n)}setMap(e){if(super.setMap(e),e)for(let t=0,s=c.length;t<s;++t)this.listenerKeys.push((0,l.listen)(document,c[t],this.handleFullScreenChange_,this))}}function o(){const e=document.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&document.msFullscreenEnabled||e.requestFullscreen&&document.fullscreenEnabled)}function a(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function d(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function h(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():d(e)}function m(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}var _=r;exports.default=_;
},{"./Control.js":"Virv","../css.js":"omMx","../dom.js":"MHGO","../events.js":"TEtv","../events/EventType.js":"Ak1Z"}],"Ntr3":[function(require,module,exports) {
var e=null,t=null;function n(){Element.prototype.setPointerCapture=Element.prototype.setCapture,Element.prototype.releasePointerCapture=Element.prototype.releaseCapture}function o(e,n,o){e.addEventListener(n,function(e){var r=new MouseEvent(o,e);r.pointerId=1,r.isPrimary=!0,r.pointerType="mouse",r.width=1,r.height=1,r.tiltX=0,r.tiltY=0,"buttons"in e&&0!==e.buttons?r.pressure=.5:r.pressure=0;var i=e.target;null!==t&&(i=t,"mouseup"===n&&(t=null)),i.dispatchEvent(r),r.defaultPrevented&&e.preventDefault()})}function r(t,n,o){t.addEventListener(n,function(t){for(var r=t.changedTouches,i=r.length,u=0;u<i;u++){var l=new CustomEvent(o,{bubbles:!0,cancelable:!0});l.ctrlKey=t.ctrlKey,l.shiftKey=t.shiftKey,l.altKey=t.altKey,l.metaKey=t.metaKey;var a=r.item(u);l.clientX=a.clientX,l.clientY=a.clientY,l.screenX=a.screenX,l.screenY=a.screenY,l.pageX=a.pageX,l.pageY=a.pageY;var p=a.target.getBoundingClientRect();l.offsetX=a.clientX-p.left,l.offsetY=a.clientY-p.top,l.pointerId=1+a.identifier,l.button=0,l.buttons=1,l.movementX=0,l.movementY=0,l.region=null,l.relatedTarget=null,l.x=l.clientX,l.y=l.clientY,l.pointerType="touch",l.width=1,l.height=1,l.tiltX=0,l.tiltY=0,l.pressure=1,"touchstart"===n&&null===e&&(e=a.identifier),l.isPrimary=a.identifier===e,"touchend"===n&&l.isPrimary&&(e=null),t.target.dispatchEvent(l),l.defaultPrevented&&t.preventDefault()}})}"PointerEvent"in window||(n(),"TouchEvent"in window||(o(document,"mousedown","pointerdown"),o(document,"mousemove","pointermove"),o(document,"mouseup","pointerup")),r(document,"touchstart","pointerdown"),r(document,"touchmove","pointermove"),r(document,"touchend","pointerup"));
},{}],"KXUc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=e;
},{}],"MZMU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=h,exports.default=void 0,require("elm-pep");var e=require("../events.js"),t=s(require("../pointer/EventType.js")),r=require("../Object.js"),o=s(require("./Control.js")),n=require("../proj.js");function s(e){return e&&e.__esModule?e:{default:e}}const i="projection",a="coordinateFormat";class d extends o.default{constructor(e){const t=e||{},o=document.createElement("div");o.className=void 0!==t.className?t.className:"ol-mouse-position",super({element:o,render:t.render||h,target:t.target}),this.addEventListener((0,r.getChangeEventType)(i),this.handleProjectionChanged_),t.coordinateFormat&&this.setCoordinateFormat(t.coordinateFormat),t.projection&&this.setProjection(t.projection),this.undefinedHTML_=void 0!==t.undefinedHTML?t.undefinedHTML:"&#160;",this.renderOnMouseOut_=!!this.undefinedHTML_,this.renderedHTML_=o.innerHTML,this.mapProjection_=null,this.transform_=null}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(a)}getProjection(){return this.get(i)}handleMouseMove(e){const t=this.getMap();this.updateHTML_(t.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(r){if(super.setMap(r),r){const o=r.getViewport();this.listenerKeys.push((0,e.listen)(o,t.default.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,e.listen)(o,t.default.POINTEROUT,this.handleMouseOut,this))}}setCoordinateFormat(e){this.set(a,e)}setProjection(e){this.set(i,(0,n.get)(e))}updateHTML_(e){let t=this.undefinedHTML_;if(e&&this.mapProjection_){if(!this.transform_){const e=this.getProjection();this.transform_=e?(0,n.getTransformFromProjections)(this.mapProjection_,e):n.identityTransform}const r=this.getMap().getCoordinateFromPixelInternal(e);if(r){const e=(0,n.getUserProjection)();e&&(this.transform_=(0,n.getTransformFromProjections)(this.mapProjection_,e)),this.transform_(r,r);const o=this.getCoordinateFormat();t=o?o(r):r.toString()}}this.renderedHTML_&&t===this.renderedHTML_||(this.element.innerHTML=t,this.renderedHTML_=t)}}function h(e){const t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null}var u=d;exports.default=u;
},{"elm-pep":"Ntr3","../events.js":"TEtv","../pointer/EventType.js":"KXUc","../Object.js":"X18S","./Control.js":"Virv","../proj.js":"HKfS"}],"FgSC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./events/Event.js"));function t(e){return e&&e.__esModule?e:{default:e}}class r extends e.default{constructor(e,t,r){super(e),this.map=t,this.frameState=void 0!==r?r:null}}var s=r;exports.default=s;
},{"./events/Event.js":"rYf1"}],"JgEB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./MapEvent.js"));function e(t){return t&&t.__esModule?t:{default:t}}class i extends t.default{constructor(t,e,i,o,r){super(t,e,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==o&&o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),this.originalEvent.stopPropagation()}}var o=i;exports.default=o;
},{"./MapEvent.js":"FgSC"}],"vFoD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./events/EventType.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r={SINGLECLICK:"singleclick",CLICK:e.default.CLICK,DBLCLICK:e.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=r;
},{"./events/EventType.js":"Ak1Z"}],"tNGF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./MapBrowserEvent.js"));function t(e){return e&&e.__esModule?e:{default:e}}class r extends e.default{constructor(e,t,r,s,u){super(e,t,r,s,u),this.pointerEvent=r}}var s=r;exports.default=s;
},{"./MapBrowserEvent.js":"JgEB"}],"ASdF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("elm-pep");var e=require("./has.js"),t=r(require("./MapBrowserEventType.js")),i=r(require("./MapBrowserPointerEvent.js")),s=require("./events.js"),n=r(require("./events/Target.js")),h=r(require("./pointer/EventType.js")),o=r(require("./events/EventType.js"));function r(e){return e&&e.__esModule?e:{default:e}}class a extends n.default{constructor(t,i){super(t),this.map_=t,this.clickTimeoutId_,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i?i*e.DEVICE_PIXEL_RATIO:e.DEVICE_PIXEL_RATIO,this.down_=null;const n=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=(0,s.listen)(n,h.default.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=(0,s.listen)(n,h.default.POINTERMOVE,this.relayEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(o.default.TOUCHMOVE,this.boundHandleTouchMove_,!!e.PASSIVE_EVENT_LISTENERS&&{passive:!1})}emulateClick_(e){let s=new i.default(t.default.CLICK,this.map_,e);this.dispatchEvent(s),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,s=new i.default(t.default.DBLCLICK,this.map_,e),this.dispatchEvent(s)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const s=new i.default(t.default.SINGLECLICK,this.map_,e);this.dispatchEvent(s)}.bind(this),250)}updateActivePointers_(e){const i=e;i.type==t.default.POINTERUP||i.type==t.default.POINTERCANCEL?delete this.trackedTouches_[i.pointerId]:i.type==t.default.POINTERDOWN&&(this.trackedTouches_[i.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length}handlePointerUp_(e){this.updateActivePointers_(e);const n=new i.default(t.default.POINTERUP,this.map_,e);this.dispatchEvent(n),n.propagationStopped||this.dragging_||!this.isMouseActionButton_(e)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(s.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return 0===e.button}handlePointerDown_(e){this.updateActivePointers_(e);const n=new i.default(t.default.POINTERDOWN,this.map_,e);this.dispatchEvent(n),this.down_=e,0===this.dragListenerKeys_.length&&this.dragListenerKeys_.push((0,s.listen)(document,t.default.POINTERMOVE,this.handlePointerMove_,this),(0,s.listen)(document,t.default.POINTERUP,this.handlePointerUp_,this),(0,s.listen)(this.element_,t.default.POINTERCANCEL,this.handlePointerUp_,this))}handlePointerMove_(e){if(this.isMoving_(e)){this.dragging_=!0;const s=new i.default(t.default.POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(s)}}relayEvent_(e){this.originalPointerMoveEvent_=e;const t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new i.default(e.type,this.map_,e,t))}handleTouchMove_(e){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,s.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(o.default.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,s.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(s.unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var d=a;exports.default=d;
},{"elm-pep":"Ntr3","./has.js":"E1VY","./MapBrowserEventType.js":"vFoD","./MapBrowserPointerEvent.js":"tNGF","./events.js":"TEtv","./events/Target.js":"VT2J","./pointer/EventType.js":"KXUc","./events/EventType.js":"Ak1Z"}],"uUh7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};exports.default=e;
},{}],"qc7U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};exports.default=e;
},{}],"Kobc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DROP=void 0;var e=require("../asserts.js"),t=require("../obj.js");const i=1/0;exports.DROP=i;class s{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,t.clear)(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(t){(0,e.assert)(!(this.keyFunction_(t)in this.queuedElements_),31);const s=this.priorityFunction_(t);return s!=i&&(this.elements_.push(t),this.priorities_.push(s),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return 0===this.elements_.length}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,s=t.length,n=t[e],r=i[e],h=e;for(;e<s>>1;){const n=this.getLeftChildIndex_(e),r=this.getRightChildIndex_(e),h=r<s&&i[r]<i[n]?r:n;t[e]=t[h],i[e]=i[h],e=h}t[e]=n,i[e]=r,this.siftDown_(h,e)}siftDown_(e,t){const i=this.elements_,s=this.priorities_,n=i[t],r=s[t];for(;t>e;){const e=this.getParentIndex_(t);if(!(s[e]>r))break;i[t]=i[e],s[t]=s[e],t=e}i[t]=n,s[t]=r}reprioritize(){const e=this.priorityFunction_,t=this.elements_,s=this.priorities_;let n=0;const r=t.length;let h,u,o;for(u=0;u<r;++u)(o=e(h=t[u]))==i?delete this.queuedElements_[this.keyFunction_(h)]:(s[n]=o,t[n++]=h);t.length=n,s.length=n,this.heapify_()}}var n=s;exports.default=n;
},{"../asserts.js":"kWiW","../obj.js":"c6bJ"}],"a6AB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTilePriority=u,exports.default=void 0;var e=s(require("./TileState.js")),t=s(require("./events/EventType.js")),i=r(require("./structs/PriorityQueue.js"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}function s(e){return e&&e.__esModule?e:{default:e}}class a extends i.default{constructor(e,t){super(function(t){return e.apply(null,t)},function(e){return e[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const i=super.enqueue(e);if(i){e[0].addEventListener(t.default.CHANGE,this.boundHandleTileChange_)}return i}getTilesLoading(){return this.tilesLoading_}handleTileChange(i){const n=i.target,r=n.getState();if(n.hifi&&r===e.default.LOADED||r===e.default.ERROR||r===e.default.EMPTY){n.removeEventListener(t.default.CHANGE,this.boundHandleTileChange_);const e=n.getKey();e in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[e],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,i){let n,r,s,a=0;for(;this.tilesLoading_<t&&a<i&&this.getCount()>0;)s=(r=this.dequeue()[0]).getKey(),(n=r.getState())!==e.default.IDLE||s in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++a,r.load())}}var l=a;function u(e,t,n,r,s){if(!(e&&n in e.wantedTiles))return i.DROP;if(!e.wantedTiles[n][t.getKey()])return i.DROP;const a=e.viewState.center,l=r[0]-a[0],u=r[1]-a[1];return 65536*Math.log(s)+Math.sqrt(l*l+u*u)/s}exports.default=l;
},{"./TileState.js":"qc7U","./events/EventType.js":"Ak1Z","./structs/PriorityQueue.js":"Kobc"}],"SPp2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=d(require("../Collection.js")),s=d(require("../CollectionEventType.js")),n=require("../Object.js"),i=d(require("../ObjectEventType.js")),r=require("../asserts.js"),a=require("../events.js"),l=d(require("../events/EventType.js")),o=require("../extent.js"),h=d(require("./Base.js")),y=require("../obj.js"),u=d(require("../source/State.js"));function d(e){return e&&e.__esModule?e:{default:e}}const c={LAYERS:"layers"};class g extends h.default{constructor(e){const s=e||{},i=(0,y.assign)({},s);delete i.layers;let a=s.layers;super(i),this.layersListenerKeys_=[],this.listenerKeys_={},this.addEventListener((0,n.getChangeEventType)(c.LAYERS),this.handleLayersChanged_),a?Array.isArray(a)?a=new t.default(a.slice(),{unique:!0}):(0,r.assert)("function"==typeof a.getArray,43):a=new t.default(void 0,{unique:!0}),this.setLayers(a)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(a.unlistenByKey),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push((0,a.listen)(t,s.default.ADD,this.handleLayersAdd_,this),(0,a.listen)(t,s.default.REMOVE,this.handleLayersRemove_,this));for(const e in this.listenerKeys_)this.listenerKeys_[e].forEach(a.unlistenByKey);(0,y.clear)(this.listenerKeys_);const n=t.getArray();for(let s=0,r=n.length;s<r;s++){const t=n[s];this.listenerKeys_[(0,e.getUid)(t)]=[(0,a.listen)(t,i.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,a.listen)(t,l.default.CHANGE,this.handleLayerChange_,this)]}this.changed()}handleLayersAdd_(t){const s=t.element;this.listenerKeys_[(0,e.getUid)(s)]=[(0,a.listen)(s,i.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,a.listen)(s,l.default.CHANGE,this.handleLayerChange_,this)],this.changed()}handleLayersRemove_(t){const s=t.element,n=(0,e.getUid)(s);this.listenerKeys_[n].forEach(a.unlistenByKey),delete this.listenerKeys_[n],this.changed()}getLayers(){return this.get(c.LAYERS)}setLayers(e){this.set(c.LAYERS,e)}getLayersArray(e){const t=void 0!==e?e:[];return this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(e){const t=void 0!==e?e:[],s=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});const n=this.getLayerState();for(let i=s,r=t.length;i<r;i++){const e=t[i];e.opacity*=n.opacity,e.visible=e.visible&&n.visible,e.maxResolution=Math.min(e.maxResolution,n.maxResolution),e.minResolution=Math.max(e.minResolution,n.minResolution),e.minZoom=Math.max(e.minZoom,n.minZoom),e.maxZoom=Math.min(e.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==e.extent?e.extent=(0,o.getIntersection)(e.extent,n.extent):e.extent=n.extent)}return t}getSourceState(){return u.default.READY}}var L=g;exports.default=L;
},{"../util.js":"gvrh","../Collection.js":"ZHRB","../CollectionEventType.js":"zerY","../Object.js":"X18S","../ObjectEventType.js":"ptNe","../asserts.js":"kWiW","../events.js":"TEtv","../events/EventType.js":"Ak1Z","../extent.js":"E4kN","./Base.js":"RwT5","../obj.js":"c6bJ","../source/State.js":"mqbu"}],"LL4l":[function(require,module,exports) {
"use strict";function r(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]+2*e,t[1]=r[1]+2*e,t}function e(r){return r[0]>0&&r[1]>0}function t(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function o(r,e){return Array.isArray(r)?r:(void 0===e?e=[r,r]:(e[0]=r,e[1]=r),e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.buffer=r,exports.hasArea=e,exports.scale=t,exports.toSize=o;
},{}],"gqD6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=x(require("./Collection.js")),t=x(require("./CollectionEventType.js")),i=x(require("./MapBrowserEvent.js")),r=x(require("./MapBrowserEventHandler.js")),n=x(require("./MapBrowserEventType.js")),s=x(require("./MapEvent.js")),a=x(require("./MapEventType.js")),o=x(require("./MapProperty.js")),l=x(require("./render/EventType.js")),h=S(require("./Object.js")),d=x(require("./ObjectEventType.js")),u=S(require("./TileQueue.js")),y=x(require("./View.js")),v=x(require("./ViewHint.js")),p=require("./asserts.js"),c=require("./dom.js"),_=require("./events.js"),g=x(require("./events/EventType.js")),f=require("./extent.js"),E=require("./functions.js"),m=require("./has.js"),w=x(require("./layer/Group.js")),T=require("./size.js"),C=require("./transform.js"),R=require("./proj.js");function L(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return L=function(){return e},e}function S(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=L();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=r?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(i,n,s):i[n]=e[n]}return i.default=e,t&&t.set(e,i),i}function x(e){return e&&e.__esModule?e:{default:e}}class I extends h.default{constructor(i){super();const s=P(i);this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==i.maxTilesLoading?i.maxTilesLoading:16,this.pixelRatio_=void 0!==i.pixelRatio?i.pixelRatio:m.DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(this),this.coordinateToPixelTransform_=(0,C.create)(),this.pixelToCoordinateTransform_=(0,C.create)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new r.default(this,i.moveTolerance);const a=this.handleMapBrowserEvent.bind(this);for(const e in n.default)this.mapBrowserEventHandler_.addEventListener(n.default[e],a);this.keyboardEventTarget_=s.keyboardEventTarget,this.keyHandlerKeys_=null;const l=this.handleBrowserEvent.bind(this);this.viewport_.addEventListener(g.default.CONTEXTMENU,l,!1),this.viewport_.addEventListener(g.default.WHEEL,l,!!m.PASSIVE_EVENT_LISTENERS&&{passive:!1}),this.controls=s.controls||new e.default,this.interactions=s.interactions||new e.default,this.overlays_=s.overlays,this.overlayIdIndex_={},this.renderer_=null,this.handleResize_,this.postRenderFunctions_=[],this.tileQueue_=new u.default(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addEventListener((0,h.getChangeEventType)(o.default.LAYERGROUP),this.handleLayerGroupChanged_),this.addEventListener((0,h.getChangeEventType)(o.default.VIEW),this.handleViewChanged_),this.addEventListener((0,h.getChangeEventType)(o.default.SIZE),this.handleSizeChanged_),this.addEventListener((0,h.getChangeEventType)(o.default.TARGET),this.handleTargetChanged_),this.setProperties(s.values),this.controls.forEach(function(e){e.setMap(this)}.bind(this)),this.controls.addEventListener(t.default.ADD,function(e){e.element.setMap(this)}.bind(this)),this.controls.addEventListener(t.default.REMOVE,function(e){e.element.setMap(null)}.bind(this)),this.interactions.forEach(function(e){e.setMap(this)}.bind(this)),this.interactions.addEventListener(t.default.ADD,function(e){e.element.setMap(this)}.bind(this)),this.interactions.addEventListener(t.default.REMOVE,function(e){e.element.setMap(null)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),this.overlays_.addEventListener(t.default.ADD,function(e){this.addOverlayInternal_(e.element)}.bind(this)),this.overlays_.addEventListener(t.default.REMOVE,function(e){const t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)}.bind(this))}createRenderer(){throw new Error("Use a map type that has a createRenderer method")}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.mapBrowserEventHandler_.dispose(),this.viewport_.removeEventListener(g.default.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(g.default.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(g.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_)return;const r=this.getCoordinateFromPixelInternal(e),n=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,s=void 0!==i.layerFilter?i.layerFilter:E.TRUE,a=!1!==i.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,n,a,t,null,s,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(e){i.push(e)},t),i}forEachLayerAtPixel(e,t,i){if(!this.frameState_)return;const r=i||{},n=void 0!==r.hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,s=r.layerFilter||E.TRUE;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,n,t,s)}hasFeatureAtPixel(e,t){if(!this.frameState_)return!1;const i=this.getCoordinateFromPixelInternal(e),r=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:E.TRUE,n=void 0!==t.hitTolerance?t.hitTolerance*this.frameState_.pixelRatio:0,s=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,n,s,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const t=this.viewport_.getBoundingClientRect(),i="changedTouches"in e?e.changedTouches[0]:e;return[i.clientX-t.left,i.clientY-t.top]}getTarget(){return this.get(o.default.TARGET)}getTargetElement(){const e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null}getCoordinateFromPixel(e){return(0,R.toUserCoordinate)(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?(0,C.apply)(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(o.default.LAYERGROUP)}getLayers(){return this.getLayerGroup().getLayers()}getLoading(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const i=e[t].layer.getSource();if(i&&i.loading)return!0}return!1}getPixelFromCoordinate(e){const t=(0,R.fromUserCoordinate)(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?(0,C.apply)(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(o.default.SIZE)}getView(){return this.get(o.default.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getTilePriority(e,t,i,r){return(0,u.getTilePriority)(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){const r=t||e.type,n=new i.default(r,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent.target;if(!e.dragging&&(this.overlayContainerStopEvent_.contains(t)||!(document.body.contains(t)||this.viewport_.getRootNode&&this.viewport_.getRootNode().contains(t))))return;e.frameState=this.frameState_;const i=this.getInteractions().getArray();if(!1!==this.dispatchEvent(e))for(let r=i.length-1;r>=0;r--){const t=i[r];if(t.getActive()&&!t.handleEvent(e))break}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,r=i;if(e){const t=e.viewHints;if(t[v.default.ANIMATING]||t[v.default.INTERACTING]){const t=!m.IMAGE_DECODE&&Date.now()-e.time>8;i=t?0:8,r=t?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,r))}!e||!this.hasListener(l.default.RENDERCOMPLETE)||e.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(l.default.RENDERCOMPLETE,e);const i=this.postRenderFunctions_;for(let r=0,n=i.length;r<n;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){let e;if(this.getTarget()&&(e=this.getTargetElement()),this.keyHandlerKeys_){for(let e=0,t=this.keyHandlerKeys_.length;e<t;++e)(0,_.unlistenByKey)(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());const t=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.keyHandlerKeys_=[(0,_.listen)(t,g.default.KEYDOWN,this.handleBrowserEvent,this),(0,_.listen)(t,g.default.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(g.default.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),(0,c.removeNode)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(g.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,_.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,_.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,_.listen)(e,d.default.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,_.listen)(e,g.default.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(_.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.layerGroupPropertyListenerKeys_=[(0,_.listen)(e,d.default.PROPERTYCHANGE,this.render,this),(0,_.listen)(e,g.default.CHANGE,this.render,this)]),this.render()}isRendered(){return!!this.frameState_}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let n=null;if(void 0!==t&&(0,T.hasArea)(t)&&i&&i.isDef()){const s=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();n={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:r?r.declutterItems:[],extent:(0,f.getForViewAndSize)(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{}}}if(this.frameState_=n,this.renderer_.renderFrame(n),n){if(n.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,n.postRenderFunctions),r){(!this.previousExtent_||!(0,f.isEmpty)(this.previousExtent_)&&!(0,f.equals)(n.extent,this.previousExtent_))&&(this.dispatchEvent(new s.default(a.default.MOVESTART,this,r)),this.previousExtent_=(0,f.createOrUpdateEmpty)(this.previousExtent_))}this.previousExtent_&&!n.viewHints[v.default.ANIMATING]&&!n.viewHints[v.default.INTERACTING]&&!(0,f.equals)(n.extent,this.previousExtent_)&&(this.dispatchEvent(new s.default(a.default.MOVEEND,this,n)),(0,f.clone)(n.extent,this.previousExtent_))}this.dispatchEvent(new s.default(a.default.POSTRENDER,this,n)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)}setLayerGroup(e){this.set(o.default.LAYERGROUP,e)}setSize(e){this.set(o.default.SIZE,e)}setTarget(e){this.set(o.default.TARGET,e)}setView(e){this.set(o.default.VIEW,e)}updateSize(){const e=this.getTargetElement();if(e){const t=getComputedStyle(e);this.setSize([e.offsetWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderRightWidth),e.offsetHeight-parseFloat(t.borderTopWidth)-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)-parseFloat(t.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()}updateViewportSize_(){const e=this.getView();if(e){let t=void 0;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(t=[parseInt(i.width,10),parseInt(i.height,10)]),e.setViewportSize(t)}}}function P(t){let i=null;void 0!==t.keyboardEventTarget&&(i="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const r={},n=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new w.default({layers:t.layers});let s,a,l;return r[o.default.LAYERGROUP]=n,r[o.default.TARGET]=t.target,r[o.default.VIEW]=void 0!==t.view?t.view:new y.default,void 0!==t.controls&&(Array.isArray(t.controls)?s=new e.default(t.controls.slice()):((0,p.assert)("function"==typeof t.controls.getArray,47),s=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?a=new e.default(t.interactions.slice()):((0,p.assert)("function"==typeof t.interactions.getArray,48),a=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?l=new e.default(t.overlays.slice()):((0,p.assert)("function"==typeof t.overlays.getArray,49),l=t.overlays):l=new e.default,{controls:s,interactions:a,keyboardEventTarget:i,overlays:l,values:r}}var A=I;exports.default=A;
},{"./Collection.js":"ZHRB","./CollectionEventType.js":"zerY","./MapBrowserEvent.js":"JgEB","./MapBrowserEventHandler.js":"ASdF","./MapBrowserEventType.js":"vFoD","./MapEvent.js":"FgSC","./MapEventType.js":"nMeT","./MapProperty.js":"uUh7","./render/EventType.js":"w2aV","./Object.js":"X18S","./ObjectEventType.js":"ptNe","./TileQueue.js":"a6AB","./View.js":"TOcO","./ViewHint.js":"LSsd","./asserts.js":"kWiW","./dom.js":"MHGO","./events.js":"TEtv","./events/EventType.js":"Ak1Z","./extent.js":"E4kN","./functions.js":"mKAY","./has.js":"E1VY","./layer/Group.js":"SPp2","./size.js":"LL4l","./transform.js":"fXLG","./proj.js":"HKfS"}],"X9aH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../events/Event.js"));function t(e){return e&&e.__esModule?e:{default:e}}class r extends e.default{constructor(e,t,r,s){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=s}}var s=r;exports.default=s;
},{"../events/Event.js":"rYf1"}],"UVET":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asString=s,exports.asArray=u,exports.normalize=l,exports.toString=a,exports.isStringColor=p,exports.fromString=void 0;var t=require("./asserts.js"),e=require("./math.js");const r=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,n=/^([a-z]*)$|^hsla?\(.*\)$/i;function s(t){return"string"==typeof t?t:a(t)}function o(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const i=function(){const t={};let e=0;return function(r){let n;if(t.hasOwnProperty(r))n=t[r];else{if(e>=1024){let r=0;for(const n in t)0==(3&r++)&&(delete t[n],--e)}n=c(r),t[r]=n,++e}return n}}();function u(t){return Array.isArray(t)?t:i(t)}function c(e){let s,i,u,c,a;if(n.exec(e)&&(e=o(e)),r.exec(e)){const t=e.length-1;let r;r=t<=4?1:2;const n=4===t||8===t;s=parseInt(e.substr(1+0*r,r),16),i=parseInt(e.substr(1+1*r,r),16),u=parseInt(e.substr(1+2*r,r),16),c=n?parseInt(e.substr(1+3*r,r),16):255,1==r&&(s=(s<<4)+s,i=(i<<4)+i,u=(u<<4)+u,n&&(c=(c<<4)+c)),a=[s,i,u,c/255]}else 0==e.indexOf("rgba(")?l(a=e.slice(5,-1).split(",").map(Number)):0==e.indexOf("rgb(")?((a=e.slice(4,-1).split(",").map(Number)).push(1),l(a)):(0,t.assert)(!1,14);return a}function l(t){return t[0]=(0,e.clamp)(t[0]+.5|0,0,255),t[1]=(0,e.clamp)(t[1]+.5|0,0,255),t[2]=(0,e.clamp)(t[2]+.5|0,0,255),t[3]=(0,e.clamp)(t[3],0,1),t}function a(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let r=t[1];r!=(0|r)&&(r=r+.5|0);let n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+r+","+n+","+(void 0===t[3]?1:t[3])+")"}function p(t){return n.test(t)&&(t=o(t)),r.test(t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(")}exports.fromString=i;
},{"./asserts.js":"kWiW","./math.js":"crjC"}],"nKYw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shared=exports.default=void 0;var e=require("../color.js");class t{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const c=this.cache_[t];0!=(3&e++)||c.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,s){const i=c(e,t,s);return i in this.cache_?this.cache_[i]:null}set(e,t,s,i){const h=c(e,t,s);this.cache_[h]=i,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function c(t,c,s){return c+":"+t+":"+(s?(0,e.asString)(s):"null")}var s=t;exports.default=s;const i=new t;exports.shared=i;
},{"../color.js":"UVET"}],"PxyX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asColorLike=e;var r=require("./color.js");function e(e){return Array.isArray(e)?(0,r.toString)(e):e}
},{"./color.js":"UVET"}],"TEZU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class e{drawCustom(e,t,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}var t=e;exports.default=t;
},{}],"lTc7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.measureTextWidth=O,exports.measureAndCacheTextWidth=w,exports.measureTextWidths=H,exports.rotateAtOffset=M,exports.drawImageOrLabel=N,exports.createTransformString=q,exports.measureTextHeight=exports.registerFont=exports.textHeights=exports.labelCache=exports.checkedFonts=exports.defaultLineWidth=exports.defaultPadding=exports.defaultTextBaseline=exports.defaultTextAlign=exports.defaultStrokeStyle=exports.defaultMiterLimit=exports.defaultLineJoin=exports.defaultLineDashOffset=exports.defaultLineDash=exports.defaultLineCap=exports.defaultFillStyle=exports.defaultFont=void 0;var t=require("../css.js"),e=require("../dom.js"),n=require("../obj.js"),s=l(require("../Object.js")),r=l(require("../events/Target.js")),o=require("../has.js"),a=require("../transform.js");function l(t){return t&&t.__esModule?t:{default:t}}const i="10px sans-serif";exports.defaultFont=i;const u="#000";exports.defaultFillStyle="#000";const c="round";exports.defaultLineCap="round";const d=[];exports.defaultLineDash=d;const f=0;exports.defaultLineDashOffset=0;const p="round";exports.defaultLineJoin="round";const x=10;exports.defaultMiterLimit=10;const g="#000";exports.defaultStrokeStyle="#000";const h="center";exports.defaultTextAlign="center";const m="middle";exports.defaultTextBaseline="middle";const y=[0,0,0,0];exports.defaultPadding=y;const v=1;exports.defaultLineWidth=1;const C=new s.default;exports.checkedFonts=C;const L=new r.default;exports.labelCache=L,L.setSize=function(){console.warn("labelCache is deprecated.")};let T,F=null;const S={};exports.textHeights=S;const b=function(){const e=100,s="32px ",r=["monospace","serif"],o=r.length,a="wmytzilWMYTZIL@#/&?$%10";let l,i;function u(t,e,n){let l=!0;for(let u=0;u<o;++u){const o=r[u];if(i=O(t+" "+e+" "+s+o,a),n!=o){const r=O(t+" "+e+" "+s+n+","+o,a);l=l&&r!=i}}return!!l}function c(){let t=!0;const s=C.getKeys();for(let r=0,o=s.length;r<o;++r){const o=s[r];C.get(o)<e&&(u.apply(this,o.split("\n"))?((0,n.clear)(S),F=null,T=void 0,C.set(o,e)):(C.set(o,C.get(o)+1,!0),t=!1))}t&&(clearInterval(l),l=void 0)}return function(n){const s=(0,t.getFontParameters)(n);if(!s)return;const r=s.families;for(let t=0,o=r.length;t<o;++t){const n=r[t],o=s.style+"\n"+s.weight+"\n"+n;void 0===C.get(o)&&(C.set(o,e,!0),u(s.style,s.weight,n)||(C.set(o,0,!0),void 0===l&&(l=setInterval(c,32))))}}}();exports.registerFont=b;const A=function(){let e;const n=S;return function(s){let r=n[s];if(null==r)if(o.WORKER_OFFSCREEN_CANVAS){const e=(0,t.getFontParameters)(s),n=j(s,"g"),r=isNaN(Number(e.lineHeight))?1.2:Number(e.lineHeight);S[s]=r*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else e||((e=document.createElement("div")).innerHTML="M",e.style.margin="0 !important",e.style.padding="0 !important",e.style.position="absolute !important",e.style.left="-99999px !important"),e.style.font=s,document.body.appendChild(e),r=e.offsetHeight,n[s]=r,document.body.removeChild(e);return r}}();function j(t,n){return F||(F=(0,e.createCanvasContext2D)(1,1)),t!=T&&(F.font=t,T=F.font),F.measureText(n)}function O(t,e){return j(t,e).width}function w(t,e,n){if(e in n)return n[e];const s=O(t,e);return n[e]=s,s}function H(t,e,n){const s=e.length;let r=0;for(let o=0;o<s;++o){const s=O(t,e[o]);r=Math.max(r,s),n.push(s)}return r}function M(t,e,n,s){0!==e&&(t.translate(n,s),t.rotate(e),t.translate(-n,-s))}function N(t,e,n,s,r,o,a,l,i,u,c){t.save(),1!==n&&(t.globalAlpha*=n),e&&t.setTransform.apply(t,e),s.contextInstructions?(t.translate(i,u),t.scale(c,c),W(s,t)):t.drawImage(s,r,o,a,l,i,u,a*c,l*c),t.restore()}function W(t,e){const n=t.contextInstructions;for(let s=0,r=n.length;s<r;s+=2)Array.isArray(n[s+1])?e[n[s]].apply(e,n[s+1]):e[n[s]]=n[s+1]}exports.measureTextHeight=A;let _=null;function q(t){return o.WORKER_OFFSCREEN_CANVAS?(0,a.toString)(t):(_||(_=(0,e.createCanvasContext2D)(1,1).canvas),_.style.transform=(0,a.toString)(t),_.style.transform)}
},{"../css.js":"omMx","../dom.js":"MHGO","../obj.js":"c6bJ","../Object.js":"X18S","../events/Target.js":"VT2J","../has.js":"E1VY","../transform.js":"fXLG"}],"L8fg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../array.js"),e=require("../../colorlike.js"),i=require("../../extent.js"),s=h(require("../../geom/GeometryType.js")),a=require("../../geom/SimpleGeometry.js"),l=require("../../geom/flat/transform.js"),n=h(require("../VectorContext.js")),o=require("../canvas.js"),r=require("../../transform.js");function h(t){return t&&t.__esModule?t:{default:t}}class _ extends n.default{constructor(t,e,i,s,a,l,n){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=s,this.viewRotation_=a,this.squaredTolerance_=l,this.userTransform_=n,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,r.create)()}drawImages_(t,e,i,s){if(!this.image_)return;const a=(0,l.transform2D)(t,e,i,2,this.transform_,this.pixelCoordinates_),n=this.context_,o=this.tmpLocalTransform_,h=n.globalAlpha;1!=this.imageOpacity_&&(n.globalAlpha=h*this.imageOpacity_);let _=this.imageRotation_;this.imageRotateWithView_&&(_+=this.viewRotation_);for(let l=0,f=a.length;l<f;l+=2){const t=a[l]-this.imageAnchorX_,e=a[l+1]-this.imageAnchorY_;if(0!==_||1!=this.imageScale_){const i=t+this.imageAnchorX_,s=e+this.imageAnchorY_;(0,r.compose)(o,i,s,this.imageScale_,this.imageScale_,_,-i,-s),n.setTransform.apply(n,o)}n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,e,this.imageWidth_,this.imageHeight_)}0===_&&1==this.imageScale_||n.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(n.globalAlpha=h)}drawText_(t,e,i,s){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const a=(0,l.transform2D)(t,e,i,s,this.transform_,this.pixelCoordinates_),n=this.context_;let o=this.textRotation_;for(this.textRotateWithView_&&(o+=this.viewRotation_);e<i;e+=s){const t=a[e]+this.textOffsetX_,i=a[e+1]+this.textOffsetY_;if(0!==o||1!=this.textScale_){const e=(0,r.compose)(this.tmpLocalTransform_,t,i,this.textScale_,this.textScale_,o,-t,-i);n.setTransform.apply(n,e)}this.textStrokeState_&&n.strokeText(this.text_,t,i),this.textFillState_&&n.fillText(this.text_,t,i)}0===o&&1==this.textScale_||n.setTransform(1,0,0,1,0,0)}moveToLineTo_(t,e,i,s,a){const n=this.context_,o=(0,l.transform2D)(t,e,i,s,this.transform_,this.pixelCoordinates_);n.moveTo(o[0],o[1]);let r=o.length;a&&(r-=2);for(let l=2;l<r;l+=2)n.lineTo(o[l],o[l+1]);return a&&n.closePath(),i}drawRings_(t,e,i,s){for(let a=0,l=i.length;a<l;++a)e=this.moveToLineTo_(t,e,i[a],s,!0);return e}drawCircle(t){if((0,i.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=(0,a.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],l=Math.sqrt(i*i+s*s),n=this.context_;n.beginPath(),n.arc(e[0],e[1],l,0,2*Math.PI),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case s.default.POINT:this.drawPoint(t);break;case s.default.LINE_STRING:this.drawLineString(t);break;case s.default.POLYGON:this.drawPolygon(t);break;case s.default.MULTI_POINT:this.drawMultiPoint(t);break;case s.default.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case s.default.MULTI_POLYGON:this.drawMultiPolygon(t);break;case s.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case s.default.CIRCLE:this.drawCircle(t)}}drawFeature(t,e){const s=e.getGeometryFunction()(t);s&&(0,i.intersects)(this.extent_,s.getExtent())&&(this.setStyle(e),this.drawGeometry(s))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if((0,i.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();let s=0;const a=t.getEnds(),l=t.getStride();e.beginPath();for(let t=0,n=a.length;t<n;++t)s=this.moveToLineTo_(i,s,a[t],l,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let s=0;const a=t.getEndss(),l=t.getStride();e.beginPath();for(let t=0,n=a.length;t<n;++t){const e=a[t];s=this.drawRings_(i,s,e,l)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(e){const i=this.context_,s=this.contextStrokeState_;s?(s.lineCap!=e.lineCap&&(s.lineCap=e.lineCap,i.lineCap=e.lineCap),i.setLineDash&&((0,t.equals)(s.lineDash,e.lineDash)||i.setLineDash(s.lineDash=e.lineDash),s.lineDashOffset!=e.lineDashOffset&&(s.lineDashOffset=e.lineDashOffset,i.lineDashOffset=e.lineDashOffset)),s.lineJoin!=e.lineJoin&&(s.lineJoin=e.lineJoin,i.lineJoin=e.lineJoin),s.lineWidth!=e.lineWidth&&(s.lineWidth=e.lineWidth,i.lineWidth=e.lineWidth),s.miterLimit!=e.miterLimit&&(s.miterLimit=e.miterLimit,i.miterLimit=e.miterLimit),s.strokeStyle!=e.strokeStyle&&(s.strokeStyle=e.strokeStyle,i.strokeStyle=e.strokeStyle)):(i.lineCap=e.lineCap,i.setLineDash&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineJoin=e.lineJoin,i.lineWidth=e.lineWidth,i.miterLimit=e.miterLimit,i.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:o.defaultTextAlign;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,i){if(t){const i=t.getColor();this.fillState_={fillStyle:(0,e.asColorLike)(i||o.defaultFillStyle)}}else this.fillState_=null;if(i){const t=i.getColor(),s=i.getLineCap(),a=i.getLineDash(),l=i.getLineDashOffset(),n=i.getLineJoin(),r=i.getWidth(),h=i.getMiterLimit();this.strokeState_={lineCap:void 0!==s?s:o.defaultLineCap,lineDash:a||o.defaultLineDash,lineDashOffset:l||o.defaultLineDashOffset,lineJoin:void 0!==n?n:o.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==r?r:o.defaultLineWidth),miterLimit:void 0!==h?h:o.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(t||o.defaultStrokeStyle)}}else this.strokeState_=null}setImageStyle(t){if(t){const e=t.getAnchor(),i=t.getImage(1),s=t.getOrigin(),a=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=a[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=a[0]}else this.image_=null}setTextStyle(t){if(t){const i=t.getFill();if(i){const t=i.getColor();this.textFillState_={fillStyle:(0,e.asColorLike)(t||o.defaultFillStyle)}}else this.textFillState_=null;const s=t.getStroke();if(s){const t=s.getColor(),i=s.getLineCap(),a=s.getLineDash(),l=s.getLineDashOffset(),n=s.getLineJoin(),r=s.getWidth(),h=s.getMiterLimit();this.textStrokeState_={lineCap:void 0!==i?i:o.defaultLineCap,lineDash:a||o.defaultLineDash,lineDashOffset:l||o.defaultLineDashOffset,lineJoin:void 0!==n?n:o.defaultLineJoin,lineWidth:void 0!==r?r:o.defaultLineWidth,miterLimit:void 0!==h?h:o.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(t||o.defaultStrokeStyle)}}else this.textStrokeState_=null;const a=t.getFont(),l=t.getOffsetX(),n=t.getOffsetY(),r=t.getRotateWithView(),h=t.getRotation(),_=t.getScale(),f=t.getText(),g=t.getTextAlign(),S=t.getTextBaseline();this.textState_={font:void 0!==a?a:o.defaultFont,textAlign:void 0!==g?g:o.defaultTextAlign,textBaseline:void 0!==S?S:o.defaultTextBaseline},this.text_=void 0!==f?f:"",this.textOffsetX_=void 0!==l?this.pixelRatio_*l:0,this.textOffsetY_=void 0!==n?this.pixelRatio_*n:0,this.textRotateWithView_=void 0!==r&&r,this.textRotation_=void 0!==h?h:0,this.textScale_=this.pixelRatio_*(void 0!==_?_:1)}else this.text_=""}}var f=_;exports.default=f;
},{"../../array.js":"uHwP","../../colorlike.js":"PxyX","../../extent.js":"E4kN","../../geom/GeometryType.js":"I79K","../../geom/SimpleGeometry.js":"leyx","../../geom/flat/transform.js":"XBOy","../VectorContext.js":"TEZU","../canvas.js":"lTc7","../../transform.js":"fXLG"}],"NNDA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};exports.default=e;
},{}],"NODI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOrder=o,exports.getSquaredTolerance=u,exports.getTolerance=g,exports.renderFeature=s;var e=require("../util.js"),t=l(require("../ImageState.js")),n=l(require("../geom/GeometryType.js")),r=l(require("../render/canvas/BuilderType.js"));function l(e){return e&&e.__esModule?e:{default:e}}const d=.5,i={Point:y,LineString:x,Polygon:E,MultiPoint:m,MultiLineString:I,MultiPolygon:S,GeometryCollection:T,Circle:a};function o(t,n){return parseInt((0,e.getUid)(t),10)-parseInt((0,e.getUid)(n),10)}function u(e,t){const n=g(e,t);return n*n}function g(e,t){return d*e/t}function a(e,t,n,l){const d=n.getFill(),i=n.getStroke();if(d||i){const o=e.getBuilder(n.getZIndex(),r.default.CIRCLE);o.setFillStrokeStyle(d,i),o.drawCircle(t,l)}const o=n.getText();if(o){const d=e.getBuilder(n.getZIndex(),r.default.TEXT);d.setTextStyle(o,e.addDeclutter(!1)),d.drawText(t,l)}}function s(e,n,r,l,d,i){let o=!1;const u=r.getImage();if(u){let e=u.getImageState();e==t.default.LOADED||e==t.default.ERROR?u.unlistenImageChange(d):(e==t.default.IDLE&&u.load(),e=u.getImageState(),u.listenImageChange(d),o=!0)}return c(e,n,r,l,i),o}function c(e,t,n,r,l){const d=n.getGeometryFunction()(t);if(!d)return;const o=d.simplifyTransformed(r,l);if(n.getRenderer())f(e,o,n,t);else{(0,i[o.getType()])(e,o,n,t)}}function f(e,t,l,d){if(t.getType()==n.default.GEOMETRY_COLLECTION){const n=t.getGeometries();for(let t=0,r=n.length;t<r;++t)f(e,n[t],l,d);return}e.getBuilder(l.getZIndex(),r.default.DEFAULT).drawCustom(t,d,l.getRenderer())}function T(e,t,n,r){const l=t.getGeometriesArray();let d,o;for(d=0,o=l.length;d<o;++d){(0,i[l[d].getType()])(e,l[d],n,r)}}function x(e,t,n,l){const d=n.getStroke();if(d){const i=e.getBuilder(n.getZIndex(),r.default.LINE_STRING);i.setFillStrokeStyle(null,d),i.drawLineString(t,l)}const i=n.getText();if(i){const d=e.getBuilder(n.getZIndex(),r.default.TEXT);d.setTextStyle(i,e.addDeclutter(!1)),d.drawText(t,l)}}function I(e,t,n,l){const d=n.getStroke();if(d){const i=e.getBuilder(n.getZIndex(),r.default.LINE_STRING);i.setFillStrokeStyle(null,d),i.drawMultiLineString(t,l)}const i=n.getText();if(i){const d=e.getBuilder(n.getZIndex(),r.default.TEXT);d.setTextStyle(i,e.addDeclutter(!1)),d.drawText(t,l)}}function S(e,t,n,l){const d=n.getFill(),i=n.getStroke();if(i||d){const o=e.getBuilder(n.getZIndex(),r.default.POLYGON);o.setFillStrokeStyle(d,i),o.drawMultiPolygon(t,l)}const o=n.getText();if(o){const d=e.getBuilder(n.getZIndex(),r.default.TEXT);d.setTextStyle(o,e.addDeclutter(!1)),d.drawText(t,l)}}function y(e,n,l,d){const i=l.getImage();if(i){if(i.getImageState()!=t.default.LOADED)return;const o=e.getBuilder(l.getZIndex(),r.default.IMAGE);o.setImageStyle(i,e.addDeclutter(!1)),o.drawPoint(n,d)}const o=l.getText();if(o){const t=e.getBuilder(l.getZIndex(),r.default.TEXT);t.setTextStyle(o,e.addDeclutter(!!i)),t.drawText(n,d)}}function m(e,n,l,d){const i=l.getImage();if(i){if(i.getImageState()!=t.default.LOADED)return;const o=e.getBuilder(l.getZIndex(),r.default.IMAGE);o.setImageStyle(i,e.addDeclutter(!1)),o.drawMultiPoint(n,d)}const o=l.getText();if(o){const t=e.getBuilder(l.getZIndex(),r.default.TEXT);t.setTextStyle(o,e.addDeclutter(!!i)),t.drawText(n,d)}}function E(e,t,n,l){const d=n.getFill(),i=n.getStroke();if(d||i){const o=e.getBuilder(n.getZIndex(),r.default.POLYGON);o.setFillStrokeStyle(d,i),o.drawPolygon(t,l)}const o=n.getText();if(o){const d=e.getBuilder(n.getZIndex(),r.default.TEXT);d.setTextStyle(o,e.addDeclutter(!1)),d.drawText(t,l)}}
},{"../util.js":"gvrh","../ImageState.js":"qc7U","../geom/GeometryType.js":"I79K","../render/canvas/BuilderType.js":"NNDA"}],"IL0H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toContext=s,exports.getVectorContext=c,exports.getRenderPixel=l,exports.renderDeclutterItems=a;var e=require("./has.js"),t=require("./transform.js"),r=i(require("./render/canvas/Immediate.js")),n=require("./renderer/vector.js"),o=require("./proj.js");function i(e){return e&&e.__esModule?e:{default:e}}function s(n,o){const i=n.canvas,s=o||{},c=s.pixelRatio||e.DEVICE_PIXEL_RATIO,l=s.size;l&&(i.width=l[0]*c,i.height=l[1]*c,i.style.width=l[0]+"px",i.style.height=l[1]+"px");const a=[0,0,i.width,i.height],u=(0,t.scale)((0,t.create)(),c,c);return new r.default(n,c,a,u,0)}function c(e){const i=e.frameState,s=(0,t.multiply)(e.inversePixelTransform.slice(),i.coordinateToPixelTransform),c=(0,n.getSquaredTolerance)(i.viewState.resolution,i.pixelRatio);let l;const a=(0,o.getUserProjection)();return a&&(l=(0,o.getTransformFromProjections)(a,i.viewState.projection)),new r.default(e.context,i.pixelRatio,i.extent,s,i.viewState.rotation,c,l)}function l(e,r){const n=r.slice(0);return(0,t.apply)(e.inversePixelTransform.slice(),n),n}function a(e,t){t&&t.clear();const r=e.declutterItems;for(let n=r.length-1;n>=0;--n){const e=r[n],o=e.items;for(let r=0,n=o.length;r<n;r+=3)t=o[r].renderDeclutter(o[r+1],o[r+2],e.opacity,t)}return r.length=0,t}
},{"./has.js":"E1VY","./transform.js":"fXLG","./render/canvas/Immediate.js":"L8fg","./renderer/vector.js":"NODI","./proj.js":"HKfS"}],"XTFb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),r=u(require("../Disposable.js")),t=require("../extent.js"),a=require("../functions.js"),n=require("../layer/Layer.js"),s=require("../style/IconImageCache.js"),o=require("../transform.js"),i=require("../render.js"),c=require("../coordinate.js");function u(e){return e&&e.__esModule?e:{default:e}}class l extends r.default{constructor(e){super(),this.map_=e,this.declutterTree_=null}dispatchRenderEvent(r,t){(0,e.abstract)()}calculateMatrices2D(e){const r=e.viewState,t=e.coordinateToPixelTransform,a=e.pixelToCoordinateTransform;(0,o.compose)(t,e.size[0]/2,e.size[1]/2,1/r.resolution,-1/r.resolution,-r.rotation,-r.center[0],-r.center[1]),(0,o.makeInverse)(a,t)}forEachFeatureAtCoordinate(e,r,a,s,o,i,u,l){let d;const h=r.viewState;function f(e,r,t){return o.call(i,r,e?t:null)}const p=h.projection,m=(0,c.wrapX)(e.slice(),p),x=[[0,0]];if(p.canWrapX()&&s){const e=p.getExtent(),r=(0,t.getWidth)(e);x.push([-r,0],[r,0])}const j=r.layerStatesArray,_=j.length;let g;this.declutterTree_&&(g=this.declutterTree_.all().map(function(e){return e.value}));const v=[];for(let t=0;t<x.length;t++)for(let s=_-1;s>=0;--s){const o=j[s],i=o.layer;if(i.hasRenderer()&&(0,n.inView)(o,h)&&u.call(l,i)){const n=i.getRenderer(),s=i.getSource();if(n&&s){const i=s.getWrapX()?m:e,c=f.bind(null,o.managed);v[0]=i[0]+x[t][0],v[1]=i[1]+x[t][1],d=n.forEachFeatureAtCoordinate(v,r,a,c,g)}if(d)return d}}}forEachLayerAtPixel(r,t,a,n,s){return(0,e.abstract)()}hasFeatureAtCoordinate(e,r,t,n,s,o){return void 0!==this.forEachFeatureAtCoordinate(e,r,t,n,a.TRUE,this,s,o)}getMap(){return this.map_}renderFrame(e){this.declutterTree_=(0,i.renderDeclutterItems)(e,this.declutterTree_)}scheduleExpireIconCache(e){s.shared.canExpireCache()&&e.postRenderFunctions.push(d)}}function d(e,r){s.shared.expire()}var h=l;exports.default=h;
},{"../util.js":"gvrh","../Disposable.js":"g7g6","../extent.js":"E4kN","../functions.js":"mKAY","../layer/Layer.js":"t6QM","../style/IconImageCache.js":"nKYw","../transform.js":"fXLG","../render.js":"IL0H","../coordinate.js":"irUP"}],"WZwh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../css.js"),t=require("../layer/Layer.js"),r=o(require("../render/Event.js")),s=o(require("../render/EventType.js")),n=o(require("./Map.js")),i=o(require("../source/State.js")),l=require("../dom.js"),d=require("../events.js"),a=require("../render/canvas.js"),h=o(require("../ObjectEventType.js"));function o(e){return e&&e.__esModule?e:{default:e}}class c extends n.default{constructor(t){super(t),this.fontChangeListenerKey_=(0,d.listen)(a.checkedFonts,h.default.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const r=this.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",this.element_.className=e.CLASS_UNSELECTABLE+" ol-layers";const s=t.getViewport();s.insertBefore(this.element_,s.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const s=this.getMap();if(s.hasListener(e)){const n=new r.default(e,void 0,t);s.dispatchEvent(n)}}disposeInternal(){(0,d.unlistenByKey)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent(s.default.PRECOMPOSE,e);const r=e.layerStatesArray.sort(function(e,t){return e.zIndex-t.zIndex}),n=e.viewState;this.children_.length=0;let d=null;for(let s=0,l=r.length;s<l;++s){const l=r[s];if(e.layerIndex=s,!(0,t.inView)(l,n)||l.sourceState!=i.default.READY&&l.sourceState!=i.default.UNDEFINED)continue;const a=l.layer.render(e,d);a&&(a!==d&&(this.children_.push(a),d=a))}super.renderFrame(e),(0,l.replaceChildren)(this.element_,this.children_),this.dispatchRenderEvent(s.default.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}forEachLayerAtPixel(e,r,s,n,i){const l=r.viewState,d=r.layerStatesArray;for(let a=d.length-1;a>=0;--a){const h=d[a],o=h.layer;if(o.hasRenderer()&&(0,t.inView)(h,l)&&i(o)){const t=o.getRenderer().getDataAtPixel(e,r,s);if(t){const e=n(o,t);if(e)return e}}}}}var u=c;exports.default=u;
},{"../css.js":"omMx","../layer/Layer.js":"t6QM","../render/Event.js":"X9aH","../render/EventType.js":"w2aV","./Map.js":"XTFb","../source/State.js":"mqbu","../dom.js":"MHGO","../events.js":"TEtv","../render/canvas.js":"lTc7","../ObjectEventType.js":"ptNe"}],"nehA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=f,exports.default=void 0;var e=m(require("../PluggableMap.js")),t=m(require("../renderer/Composite.js")),i=m(require("../MapEventType.js")),s=m(require("../MapProperty.js")),n=require("../Object.js"),a=m(require("../ObjectEventType.js")),o=m(require("../Overlay.js")),l=m(require("../OverlayPositioning.js")),r=m(require("../ViewProperty.js")),h=m(require("./Control.js")),d=require("../geom/Polygon.js"),p=require("../css.js"),c=require("../dom.js"),_=require("../events.js"),u=m(require("../events/EventType.js")),v=require("../extent.js"),g=m(require("../View.js"));function m(e){return e&&e.__esModule?e:{default:e}}const w=.75,b=.1;class E extends e.default{createRenderer(){return new t.default(this)}}class C extends h.default{constructor(e){const t=e||{};super({element:document.createElement("div"),render:t.render||f,target:t.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===t.collapsed||t.collapsed,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==t.rotateWithView&&t.rotateWithView,this.viewExtent_=void 0;const i=void 0!==t.className?t.className:"ol-overviewmap",s=void 0!==t.tipLabel?t.tipLabel:"Overview map",n=void 0!==t.collapseLabel?t.collapseLabel:"";"string"==typeof n?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n):this.collapseLabel_=n;const a=void 0!==t.label?t.label:"";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a):this.label_=a;const r=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=s,h.appendChild(r),h.addEventListener(u.default.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=t.view,this.ovmap_=new E({view:t.view});const d=this.ovmap_;t.layers&&t.layers.forEach(function(e){d.addLayer(e)});const c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",this.boxOverlay_=new o.default({position:[0,0],positioning:l.default.CENTER_CENTER,element:c}),this.ovmap_.addOverlay(this.boxOverlay_);const _=i+" "+p.CLASS_UNSELECTABLE+" "+p.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+p.CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),v=this.element;v.className=_,v.appendChild(this.ovmapDiv_),v.appendChild(h);const g=this,m=this.boxOverlay_,w=this.boxOverlay_.getElement(),b=function(e){const t={clientX:(i=e).clientX,clientY:i.clientY};var i;const s=d.getEventCoordinateInternal(t);m.setPosition(s)},C=function(e){const t=d.getEventCoordinateInternal(e);g.getMap().getView().setCenterInternal(t),window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",C)};w.addEventListener("mousedown",function(){window.addEventListener("mousemove",b),window.addEventListener("mouseup",C)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const e=t.getView();e&&this.unbindView_(e),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,_.listen)(e,a.default.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const t=e.getView();t&&(this.bindView_(t),t.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}}handleMapPropertyChange_(e){if(e.key===s.default.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const i=this.getMap().getView();this.bindView_(i)}}bindView_(e){if(!this.view_){const t=new g.default({projection:e.getProjection()});this.ovmap_.setView(t)}e.addEventListener((0,n.getChangeEventType)(r.default.ROTATION),this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeEventListener((0,n.getChangeEventType)(r.default.ROTATION),this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const i=e.getSize(),s=e.getView().calculateExtentInternal(i);if(this.viewExtent_&&(0,v.equals)(s,this.viewExtent_))return;this.viewExtent_=s;const n=t.getSize(),a=t.getView().calculateExtentInternal(n),o=t.getPixelFromCoordinateInternal((0,v.getTopLeft)(s)),l=t.getPixelFromCoordinateInternal((0,v.getBottomRight)(s)),r=Math.abs(o[0]-l[0]),h=Math.abs(o[1]-l[1]),d=n[0],p=n[1];r<d*b||h<p*b||r>d*w||h>p*w?this.resetExtent_():(0,v.containsExtent)(a,s)||this.recenter_()}resetExtent_(){if(0===w||0===b)return;const e=this.getMap(),t=this.ovmap_,i=e.getSize(),s=e.getView().calculateExtentInternal(i),n=t.getView(),a=Math.log(w/b)/Math.LN2,o=1/(Math.pow(2,a/2)*b);(0,v.scaleFromCenter)(s,o),n.fitInternal((0,d.fromExtent)(s))}recenter_(){const e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenterInternal(i.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const i=e.getSize(),s=e.getView(),n=t.getView(),a=this.rotateWithView_?0:-s.getRotation(),o=this.boxOverlay_,l=this.boxOverlay_.getElement(),r=s.getCenterInternal(),h=s.getResolution(),d=n.getResolution(),p=i[0]*h/d,c=i[1]*h/d;if(o.setPosition(r),l){l.style.width=p+"px",l.style.height=c+"px";const e="rotate("+a+"rad)";l.style.transform=e}}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(p.CLASS_COLLAPSED),this.collapsed_?(0,c.replaceNode)(this.collapseLabel_,this.label_):(0,c.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered())return this.viewExtent_=void 0,void e.render();e.updateSize(),this.resetExtent_(),(0,_.listenOnce)(e,i.default.POSTRENDER,function(e){this.updateBox_()},this)}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}}function f(e){this.validateExtent_(),this.updateBox_()}var x=C;exports.default=x;
},{"../PluggableMap.js":"gqD6","../renderer/Composite.js":"WZwh","../MapEventType.js":"nMeT","../MapProperty.js":"uUh7","../Object.js":"X18S","../ObjectEventType.js":"ptNe","../Overlay.js":"kpPG","../OverlayPositioning.js":"av2E","../ViewProperty.js":"tF7O","./Control.js":"Virv","../geom/Polygon.js":"AvIG","../css.js":"omMx","../dom.js":"MHGO","../events.js":"TEtv","../events/EventType.js":"Ak1Z","../extent.js":"E4kN","../View.js":"TOcO"}],"A8zA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=c,exports.default=exports.Units=void 0;var e=require("../Object.js"),t=require("../asserts.js"),s=a(require("./Control.js")),i=require("../css.js"),r=require("../proj.js"),n=a(require("../proj/Units.js"));function a(e){return e&&e.__esModule?e:{default:e}}const l="units",d={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};exports.Units=d;const h=[1,2,5];class o extends s.default{constructor(t){const s=t||{},r=void 0!==s.className?s.className:s.bar?"ol-scale-bar":"ol-scale-line";super({element:document.createElement("div"),render:s.render||c,target:s.target}),this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+i.CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==s.minWidth?s.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addEventListener((0,e.getChangeEventType)(l),this.handleUnitsChanged_),this.setUnits(s.units||d.METRIC),this.scaleBar_=s.bar||!1,this.scaleBarSteps_=s.steps||4,this.scaleBarText_=s.text||!1}getUnits(){return this.get(l)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(l,e)}updateElement_(){const e=this.viewState_;if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const s=e.center,i=e.projection,a=this.getUnits(),l=a==d.DEGREES?n.default.DEGREES:n.default.METERS;let o=(0,r.getPointResolution)(i,e.resolution,s,l),c=this.minWidth_*o,u="";if(a==d.DEGREES){const e=r.METERS_PER_UNIT[n.default.DEGREES];(c*=e)<e/60?(u="",o*=3600):c<e?(u="",o*=60):u=""}else a==d.IMPERIAL?c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344):a==d.NAUTICAL?(o/=1852,u="nm"):a==d.METRIC?c<.001?(u="m",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3):a==d.US?c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472):(0,t.assert)(!1,33);let p,_,f,m,E=3*Math.floor(Math.log(this.minWidth_*o)/Math.log(10));for(;;){f=Math.floor(E/3);const e=Math.pow(10,f);if(p=h[(E%3+3)%3]*e,_=Math.round(p/o),isNaN(_))return this.element.style.display="none",void(this.renderedVisible_=!1);if(_>=this.minWidth_)break;++E}m=this.scaleBar_?this.createScaleBar(_,p,u):p.toFixed(f<0?-f:0)+" "+u,this.renderedHTML_!=m&&(this.innerElement_.innerHTML=m,this.renderedHTML_=m),this.renderedWidth_!=_&&(this.innerElement_.style.width=_+"px",this.renderedWidth_=_),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,s){const i="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),r=[],n=e/this.scaleBarSteps_;let a,l="#ffffff";for(let d=0;d<this.scaleBarSteps_;d++)0===d&&r.push(this.createMarker("absolute",d)),r.push('<div><div class="ol-scale-singlebar" style="width: '+n+"px;background-color: "+l+';"></div>'+this.createMarker("relative",d)+(d%2==0||2===this.scaleBarSteps_?this.createStepText(d,e,!1,t,s):"")+"</div>"),d===this.scaleBarSteps_-1&&r.push(this.createStepText(d+1,e,!0,t,s)),l="#ffffff"===l?"#000000":"#ffffff";return'<div style="display: flex;">'+(a=this.scaleBarText_?'<div class="ol-scale-text" style="width: '+e+'px;">'+i+"</div>":"")+r.join("")+"</div>"}createMarker(e,t){return'<div class="ol-scale-step-marker" style="position: '+e+";top: "+("absolute"===e?3:-10)+'px;"></div>'}createStepText(e,t,s,i,r){const n=(0===e?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(0===e?"":" "+r);return'<div class="ol-scale-step-text" style="margin-left: '+(0===e?-3:t/this.scaleBarSteps_*-1)+"px;text-align: "+(0===e?"left":"center")+"; min-width: "+(0===e?0:t/this.scaleBarSteps_*2)+"px;left: "+(s?t+"px":"unset")+';">'+n+"</div>"}getScaleForResolution(){const e=this.getMap().getView().getResolution(),t=this.viewState_.projection.getMetersPerUnit();return parseFloat(e.toString())*t*39.37*(25.4/.28)}}function c(e){const t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElement_()}var u=o;exports.default=u;
},{"../Object.js":"X18S","../asserts.js":"kWiW","./Control.js":"Virv","../css.js":"omMx","../proj.js":"HKfS","../proj/Units.js":"Y6nE"}],"AmyZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=g,exports.default=void 0,require("elm-pep");var t=h(require("./Control.js")),e=require("../css.js"),i=require("../easing.js"),s=require("../events.js"),n=require("../events/Event.js"),r=h(require("../events/EventType.js")),o=require("../math.js"),a=h(require("../pointer/EventType.js"));function h(t){return t&&t.__esModule?t:{default:t}}const l={VERTICAL:0,HORIZONTAL:1};class d extends t.default{constructor(t){const i=t||{};super({element:document.createElement("div"),render:i.render||g}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=l.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==i.duration?i.duration:200;const s=void 0!==i.className?i.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=s+"-thumb "+e.CLASS_UNSELECTABLE;const h=this.element;h.className=s+" "+e.CLASS_UNSELECTABLE+" "+e.CLASS_CONTROL,h.appendChild(o),h.addEventListener(a.default.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),h.addEventListener(a.default.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),h.addEventListener(a.default.POINTERUP,this.handleDraggerEnd_.bind(this),!1),h.addEventListener(r.default.CLICK,this.handleContainerClick_.bind(this),!1),o.addEventListener(r.default.CLICK,n.stopPropagation,!1)}setMap(t){super.setMap(t),t&&t.render()}initSlider_(){const t=this.element,e=t.offsetWidth,i=t.offsetHeight,s=t.firstElementChild,n=getComputedStyle(s),r=s.offsetWidth+parseFloat(n.marginRight)+parseFloat(n.marginLeft),o=s.offsetHeight+parseFloat(n.marginTop)+parseFloat(n.marginBottom);this.thumbSize_=[r,o],e>i?(this.direction_=l.HORIZONTAL,this.widthLimit_=e-r):(this.direction_=l.VERTICAL,this.heightLimit_=i-o),this.sliderInitialized_=!0}handleContainerClick_(t){const e=this.getMap().getView(),s=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(s),r=e.getConstrainedZoom(e.getZoomForResolution(n));e.animateInternal({zoom:r,duration:this.duration_,easing:i.easeOut})}handleDraggerStart_(t){if(!this.dragging_&&t.target===this.element.firstElementChild){const e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){const t=this.handleDraggerDrag_,e=this.handleDraggerEnd_;this.dragListenerKeys_.push((0,s.listen)(document,a.default.POINTERMOVE,t,this),(0,s.listen)(document,a.default.POINTERUP,e,this))}}}handleDraggerDrag_(t){if(this.dragging_){const e=t.clientX-this.startX_,i=t.clientY-this.startY_,s=this.getRelativePosition_(e,i);this.currentResolution_=this.getResolutionForPosition_(s),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(t){if(this.dragging_){this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(s.unlistenByKey),this.dragListenerKeys_.length=0}}setThumbPosition_(t){const e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==l.HORIZONTAL?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"}getRelativePosition_(t,e){let i;return i=this.direction_===l.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,(0,o.clamp)(i,0,1)}getResolutionForPosition_(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)}getPositionForResolution_(t){const e=this.getMap().getView().getValueForResolutionFunction();return(0,o.clamp)(1-e(t),0,1)}}function g(t){if(!t.frameState)return;this.sliderInitialized_||this.initSlider_();const e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}var u=d;exports.default=u;
},{"elm-pep":"Ntr3","./Control.js":"Virv","../css.js":"omMx","../easing.js":"xZ2c","../events.js":"TEtv","../events/Event.js":"rYf1","../events/EventType.js":"Ak1Z","../math.js":"crjC","../pointer/EventType.js":"KXUc"}],"plS3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../events/EventType.js")),t=require("../geom/Polygon.js"),n=s(require("./Control.js")),o=require("../css.js");function s(e){return e&&e.__esModule?e:{default:e}}class l extends n.default{constructor(t){const n=t||{};super({element:document.createElement("div"),target:n.target}),this.extent=n.extent?n.extent:null;const s=void 0!==n.className?n.className:"ol-zoom-extent",l=void 0!==n.label?n.label:"E",i=void 0!==n.tipLabel?n.tipLabel:"Fit to extent",a=document.createElement("button");a.setAttribute("type","button"),a.title=i,a.appendChild("string"==typeof l?document.createTextNode(l):l),a.addEventListener(e.default.CLICK,this.handleClick_.bind(this),!1);const r=s+" "+o.CLASS_UNSELECTABLE+" "+o.CLASS_CONTROL,d=this.element;d.className=r,d.appendChild(a)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const e=this.getMap().getView(),n=this.extent?this.extent:e.getProjection().getExtent();e.fitInternal((0,t.fromExtent)(n))}}var i=l;exports.default=i;
},{"../events/EventType.js":"Ak1Z","../geom/Polygon.js":"AvIG","./Control.js":"Virv","../css.js":"omMx"}],"KNR5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=d,Object.defineProperty(exports,"Attribution",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Rotate",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Zoom",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Control",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"FullScreen",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"MousePosition",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"OverviewMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"ScaleLine",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"ZoomSlider",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"ZoomToExtent",{enumerable:!0,get:function(){return f.default}});var e=s(require("./Collection.js")),t=s(require("./control/Attribution.js")),r=s(require("./control/Rotate.js")),o=s(require("./control/Zoom.js")),n=s(require("./control/Control.js")),u=s(require("./control/FullScreen.js")),i=s(require("./control/MousePosition.js")),l=s(require("./control/OverviewMap.js")),a=s(require("./control/ScaleLine.js")),c=s(require("./control/ZoomSlider.js")),f=s(require("./control/ZoomToExtent.js"));function s(e){return e&&e.__esModule?e:{default:e}}function d(n){const u=n||{},i=new e.default;return(void 0===u.zoom||u.zoom)&&i.push(new o.default(u.zoomOptions)),(void 0===u.rotate||u.rotate)&&i.push(new r.default(u.rotateOptions)),(void 0===u.attribution||u.attribution)&&i.push(new t.default(u.attributionOptions)),i}
},{"./Collection.js":"ZHRB","./control/Attribution.js":"IRmY","./control/Rotate.js":"Y2hE","./control/Zoom.js":"MAm6","./control/Control.js":"Virv","./control/FullScreen.js":"vghk","./control/MousePosition.js":"MZMU","./control/OverviewMap.js":"nehA","./control/ScaleLine.js":"A8zA","./control/ZoomSlider.js":"AmyZ","./control/ZoomToExtent.js":"plS3"}],"TAWh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class t{constructor(t,i,s){this.decay_=t,this.minVelocity_=i,this.delay_=s,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,i){this.points_.push(t,i,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;let s=i-3;for(;s>0&&this.points_[s+2]>t;)s-=3;const e=this.points_[i+2]-this.points_[s+2];if(e<1e3/60)return!1;const n=this.points_[i]-this.points_[s],h=this.points_[i+1]-this.points_[s+1];return this.angle_=Math.atan2(h,n),this.initialVelocity_=Math.sqrt(n*n+h*h)/e,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}var i=t;exports.default=i;
},{}],"oxEL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ACTIVE:"active"};exports.default=e;
},{}],"kIie":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pan=s,exports.zoomByDelta=a,exports.default=void 0;var e=r(require("../Object.js")),t=require("../easing.js"),n=r(require("./Property.js"));function r(e){return e&&e.__esModule?e:{default:e}}class o extends e.default{constructor(e){super(),e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(n.default.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(n.default.ACTIVE,e)}setMap(e){this.map_=e}}function s(e,n,r){const o=e.getCenterInternal();if(o){const s=[o[0]+n[0],o[1]+n[1]];e.animateInternal({duration:void 0!==r?r:250,easing:t.linear,center:e.getConstrainedCenter(s)})}}function a(e,n,r,o){const s=e.getZoom();if(void 0===s)return;const a=e.getConstrainedZoom(s+n),i=e.getResolutionForZoom(a);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:i,anchor:r,duration:void 0!==o?o:250,easing:t.easeOut})}var i=o;exports.default=i;
},{"../Object.js":"X18S","../easing.js":"xZ2c","./Property.js":"oxEL"}],"ksKa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../MapBrowserEventType.js")),t=n(require("./Interaction.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function o(e){return e&&e.__esModule?e:{default:e}}class a extends t.default{constructor(e){super({handleEvent:u});const t=e||{};this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}}function u(r){let n=!1;if(r.type==e.default.DBLCLICK){const e=r.originalEvent,o=r.map,a=r.coordinate,u=e.shiftKey?-this.delta_:this.delta_,i=o.getView();(0,t.zoomByDelta)(i,u,a,this.duration_),r.preventDefault(),n=!0}return!n}var i=a;exports.default=i;
},{"../MapBrowserEventType.js":"vFoD","./Interaction.js":"kIie"}],"TePD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.primaryAction=exports.penOnly=exports.touchOnly=exports.mouseOnly=exports.targetNotEditable=exports.shiftKeyOnly=exports.platformModifierKeyOnly=exports.noModifierKeys=exports.doubleClick=exports.singleClick=exports.pointerMove=exports.never=exports.mouseActionButton=exports.click=exports.always=exports.focus=exports.altShiftKeysOnly=exports.altKeyOnly=void 0;var t=r(require("../MapBrowserEventType.js")),e=require("../asserts.js"),n=require("../functions.js"),o=require("../has.js");function r(t){return t&&t.__esModule?t:{default:t}}const s=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};exports.altKeyOnly=s;const i=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey};exports.altShiftKeysOnly=i;const c=function(t){return t.target.getTargetElement()===document.activeElement};exports.focus=c;const p=n.TRUE;exports.always=p;const u=function(e){return e.type==t.default.CLICK};exports.click=u;const l=function(t){const e=t.originalEvent;return 0==e.button&&!(o.WEBKIT&&o.MAC&&e.ctrlKey)};exports.mouseActionButton=l;const y=n.FALSE;exports.never=y;const a=function(t){return"pointermove"==t.type};exports.pointerMove=a;const f=function(e){return e.type==t.default.SINGLECLICK};exports.singleClick=f;const x=function(e){return e.type==t.default.DBLCLICK};exports.doubleClick=x;const K=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};exports.noModifierKeys=K;const v=function(t){const e=t.originalEvent;return!e.altKey&&(o.MAC?e.metaKey:e.ctrlKey)&&!e.shiftKey};exports.platformModifierKeyOnly=v;const E=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey};exports.shiftKeyOnly=E;const d=function(t){const e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e};exports.targetNotEditable=d;const m=function(t){const n=t.pointerEvent;return(0,e.assert)(void 0!==n,56),"mouse"==n.pointerType};exports.mouseOnly=m;const g=function(t){const n=t.pointerEvent;return(0,e.assert)(void 0!==n,56),"touch"===n.pointerType};exports.touchOnly=g;const O=function(t){const n=t.pointerEvent;return(0,e.assert)(void 0!==n,56),"pen"===n.pointerType};exports.penOnly=O;const h=function(t){const n=t.pointerEvent;return(0,e.assert)(void 0!==n,56),n.isPrimary&&0===n.button};exports.primaryAction=h;
},{"../MapBrowserEventType.js":"vFoD","../asserts.js":"kWiW","../functions.js":"mKAY","../has.js":"E1VY"}],"qhn4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.centroid=i,exports.default=void 0;var e=r(require("../MapBrowserEventType.js")),t=r(require("./Interaction.js")),n=require("../obj.js");function r(e){return e&&e.__esModule?e:{default:e}}class s extends t.default{constructor(e){const t=e||{};super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(t){if(!t.pointerEvent)return!0;let n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==e.default.POINTERDRAG)this.handleDragEvent(t);else if(t.type==e.default.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==e.default.POINTERDOWN){const e=this.handleDownEvent(t);this.handlingDownUpSequence=e,n=this.stopDown(e)}else t.type==e.default.POINTERMOVE&&this.handleMoveEvent(t);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(t){if(o(t)){const r=t.pointerEvent,s=r.pointerId.toString();t.type==e.default.POINTERUP?delete this.trackedPointers_[s]:t.type==e.default.POINTERDOWN?this.trackedPointers_[s]=r:s in this.trackedPointers_&&(this.trackedPointers_[s]=r),this.targetPointers=(0,n.getValues)(this.trackedPointers_)}}}function i(e){const t=e.length;let n=0,r=0;for(let s=0;s<t;s++)n+=e[s].clientX,r+=e[s].clientY;return[n/t,r/t]}function o(t){const n=t.type;return n===e.default.POINTERDOWN||n===e.default.POINTERDRAG||n===e.default.POINTERUP}var a=s;exports.default=a;
},{"../MapBrowserEventType.js":"vFoD","./Interaction.js":"kIie","../obj.js":"c6bJ"}],"ceYo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../coordinate.js"),e=require("../easing.js"),n=require("../events/condition.js"),i=require("../functions.js"),r=o(require("./Pointer.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=i?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=t[r]}return n.default=t,e&&e.set(t,n),n}class a extends r.default{constructor(t){super({stopDown:i.FALSE});const e=t||{};this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=e.condition?e.condition:c,this.noKinetic_=!1}conditionInternal_(t){let e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=(0,n.focus)(t)),e&&this.condition_(t)}handleDragEvent(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const n=this.targetPointers,i=(0,r.centroid)(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const n=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],r=e.map.getView();(0,t.scale)(n,r.getResolution()),(0,t.rotate)(n,r.getRotation()),r.adjustCenterInternal(n)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(t){const n=t.map,i=n.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),s=i.getCenterInternal(),o=n.getPixelFromCoordinateInternal(s),a=n.getCoordinateFromPixelInternal([o[0]-t*Math.cos(r),o[1]-t*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(a),duration:500,easing:e.easeOut})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.conditionInternal_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}function c(t){return(0,n.noModifierKeys)(t)&&(0,n.primaryAction)(t)}var l=a;exports.default=l;
},{"../coordinate.js":"irUP","../easing.js":"xZ2c","../events/condition.js":"TePD","../functions.js":"mKAY","./Pointer.js":"qhn4"}],"LB7K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../rotationconstraint.js"),e=require("../events/condition.js"),n=require("../functions.js"),i=o(require("./Pointer.js"));function o(t){return t&&t.__esModule?t:{default:t}}class r extends i.default{constructor(t){const i=t||{};super({stopDown:n.FALSE}),this.condition_=i.condition?i.condition:e.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=void 0!==i.duration?i.duration:250}handleDragEvent(n){if(!(0,e.mouseOnly)(n))return;const i=n.map,o=i.getView();if(o.getConstraints().rotation===t.disable)return;const r=i.getSize(),s=n.pixel,a=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(void 0!==this.lastAngle_){const t=a-this.lastAngle_;o.adjustRotationInternal(-t)}this.lastAngle_=a}handleUpEvent(t){if(!(0,e.mouseOnly)(t))return!0;return t.map.getView().endInteraction(this.duration_),!1}handleDownEvent(t){if(!(0,e.mouseOnly)(t))return!1;if((0,e.mouseActionButton)(t)&&this.condition_(t)){return t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}}var s=r;exports.default=s;
},{"../rotationconstraint.js":"oeTb","../events/condition.js":"TePD","../functions.js":"mKAY","./Pointer.js":"qhn4"}],"xKdk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../Disposable.js")),t=i(require("../geom/Polygon.js"));function i(e){return e&&e.__esModule?e:{default:e}}class s extends e.default{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i=this.element_.style;i.left=Math.min(e[0],t[0])+"px",i.top=Math.min(e[1],t[1])+"px",i.width=Math.abs(t[0]-e[0])+"px",i.height=Math.abs(t[1]-e[1])+"px"}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,i=this.endPixel_,s=[e,[e[0],i[1]],i,[i[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new t.default([s])}getGeometry(){return this.geometry_}}var l=s;exports.default=l;
},{"../Disposable.js":"g7g6","../geom/Polygon.js":"AvIG"}],"gycp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("../events/Event.js")),e=require("../events/condition.js"),n=require("../functions.js"),i=s(require("./Pointer.js")),o=s(require("../render/Box.js"));function s(t){return t&&t.__esModule?t:{default:t}}const r={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"};class d extends t.default{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}class a extends i.default{constructor(t){super();const i=t||{};this.box_=new o.default(i.className||"ol-dragbox"),this.minArea_=void 0!==i.minArea?i.minArea:64,this.onBoxEnd_=i.onBoxEnd?i.onBoxEnd:n.VOID,this.startPixel_=null,this.condition_=i.condition?i.condition:e.mouseActionButton,this.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const i=n[0]-e[0],o=n[1]-e[1];return i*i+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new d(r.BOXDRAG,t.coordinate,t))}handleUpEvent(t){return this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new d(r.BOXEND,t.coordinate,t))),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new d(r.BOXSTART,t.coordinate,t)),!0)}}var x=a;exports.default=x;
},{"../events/Event.js":"rYf1","../events/condition.js":"TePD","../functions.js":"mKAY","./Pointer.js":"qhn4","../render/Box.js":"xKdk"}],"nRHY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../easing.js"),t=require("../events/condition.js"),n=require("../extent.js"),o=r(require("./DragBox.js"));function r(e){return e&&e.__esModule?e:{default:e}}class i extends o.default{constructor(e){const n=e||{};super({condition:n.condition?n.condition:t.shiftKeyOnly,className:n.className||"ol-dragzoom",minArea:n.minArea,onBoxEnd:a}),this.duration_=void 0!==n.duration?n.duration:200,this.out_=void 0!==n.out&&n.out}}function a(){const t=this.getMap(),o=t.getView(),r=t.getSize();let i=this.getGeometry().getExtent();if(this.out_){const e=o.calculateExtentInternal(r),a=(0,n.createOrUpdateFromCoordinates)([t.getPixelFromCoordinateInternal((0,n.getBottomLeft)(i)),t.getPixelFromCoordinateInternal((0,n.getTopRight)(i))]),s=o.getResolutionForExtentInternal(a,r);(0,n.scaleFromCenter)(e,1/s),i=e}const a=o.getConstrainedResolution(o.getResolutionForExtentInternal(i,r)),s=o.getConstrainedCenter((0,n.getCenter)(i),a);o.animateInternal({resolution:a,center:s,duration:this.duration_,easing:e.easeOut})}var s=i;exports.default=s;
},{"../easing.js":"xZ2c","../events/condition.js":"TePD","../extent.js":"E4kN","./DragBox.js":"gycp"}],"jBY7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LEFT:37,UP:38,RIGHT:39,DOWN:40};exports.default=e;
},{}],"leux":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../coordinate.js"),t=a(require("../events/EventType.js")),n=a(require("../events/KeyCode.js")),r=require("../events/condition.js"),i=u(require("./Interaction.js"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=r?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function a(e){return e&&e.__esModule?e:{default:e}}class d extends i.default{constructor(e){super({handleEvent:l});const t=e||{};this.defaultCondition_=function(e){return(0,r.noModifierKeys)(e)&&(0,r.targetNotEditable)(e)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}}function l(r){let o=!1;if(r.type==t.default.KEYDOWN){const t=r.originalEvent.keyCode;if(this.condition_(r)&&(t==n.default.DOWN||t==n.default.LEFT||t==n.default.RIGHT||t==n.default.UP)){const u=r.map.getView(),a=u.getResolution()*this.pixelDelta_;let d=0,l=0;t==n.default.DOWN?l=-a:t==n.default.LEFT?d=-a:t==n.default.RIGHT?d=a:l=a;const s=[d,l];(0,e.rotate)(s,u.getRotation()),(0,i.pan)(u,s,this.duration_),r.preventDefault(),o=!0}}return!o}var s=d;exports.default=s;
},{"../coordinate.js":"irUP","../events/EventType.js":"Ak1Z","../events/KeyCode.js":"jBY7","../events/condition.js":"TePD","./Interaction.js":"kIie"}],"JNNI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../events/EventType.js")),e=require("../events/condition.js"),r=o(require("./Interaction.js"));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function i(t){return t&&t.__esModule?t:{default:t}}class a extends r.default{constructor(t){super({handleEvent:u});const r=t||{};this.condition_=r.condition?r.condition:e.targetNotEditable,this.delta_=r.delta?r.delta:1,this.duration_=void 0!==r.duration?r.duration:100}}function u(e){let n=!1;if(e.type==t.default.KEYDOWN||e.type==t.default.KEYPRESS){const t=e.originalEvent.charCode;if(this.condition_(e)&&(t=="+".charCodeAt(0)||t=="-".charCodeAt(0))){const o=e.map,i=t=="+".charCodeAt(0)?this.delta_:-this.delta_,a=o.getView();(0,r.zoomByDelta)(a,i,void 0,this.duration_),e.preventDefault(),n=!0}}return!n}var d=a;exports.default=d;
},{"../events/EventType.js":"Ak1Z","../events/condition.js":"TePD","./Interaction.js":"kIie"}],"LWVd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Mode=void 0;var t=require("../events/condition.js"),e=r(require("../events/EventType.js")),i=require("../has.js"),o=n(require("./Interaction.js")),s=require("../math.js");function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var n=o?Object.getOwnPropertyDescriptor(t,s):null;n&&(n.get||n.set)?Object.defineProperty(i,s,n):i[s]=t[s]}return i.default=t,e&&e.set(t,i),i}function r(t){return t&&t.__esModule?t:{default:t}}const h={TRACKPAD:"trackpad",WHEEL:"wheel"};exports.Mode=h;class l extends o.default{constructor(e){const i=e||{};super(i),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==i.maxDelta?i.maxDelta:1,this.duration_=void 0!==i.duration?i.duration:250,this.timeout_=void 0!==i.timeout?i.timeout:80,this.useAnchor_=void 0===i.useAnchor||i.useAnchor,this.condition_=i.condition?i.condition:t.always,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}conditionInternal_(e){let i=!0;return e.map.getTargetElement().hasAttribute("tabindex")&&(i=(0,t.focus)(e)),i&&this.condition_(e)}endInteraction_(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.conditionInternal_(t))return!0;if(t.type!==e.default.WHEEL)return!0;t.preventDefault();const o=t.map,s=t.originalEvent;let a;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==e.default.WHEEL&&(a=s.deltaY,i.FIREFOX&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=i.DEVICE_PIXEL_RATIO),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),0===a)return!1;this.lastDelta_=a;const n=Date.now();void 0===this.startTime_&&(this.startTime_=n),(!this.mode_||n-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?h.TRACKPAD:h.WHEEL);const r=o.getView();if(this.mode_===h.TRACKPAD&&!r.getConstrainResolution())return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&&r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=n,!1;this.totalDelta_+=a;const l=Math.max(this.timeout_-(n-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,o),l),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-(0,s.clamp)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;e.getConstrainResolution()&&(i=i?i>0?1:-1:0),(0,o.zoomByDelta)(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}var d=l;exports.default=d;
},{"../events/condition.js":"TePD","../events/EventType.js":"Ak1Z","../has.js":"E1VY","./Interaction.js":"kIie","../math.js":"crjC"}],"K4Bc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../functions.js"),e=i(require("./Pointer.js")),n=require("../rotationconstraint.js");function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}class o extends e.default{constructor(e){const n=e||{},r=n;r.stopDown||(r.stopDown=t.FALSE),super(r),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==n.threshold?n.threshold:.3,this.duration_=void 0!==n.duration?n.duration:250}handleDragEvent(t){let r=0;const i=this.targetPointers[0],o=this.targetPointers[1],s=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(void 0!==this.lastAngle_){const t=s-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),r=t}this.lastAngle_=s;const a=t.map,l=a.getView();if(l.getConstraints().rotation===n.disable)return;const h=a.getViewport().getBoundingClientRect(),u=(0,e.centroid)(this.targetPointers);u[0]-=h.left,u[1]-=h.top,this.anchor_=a.getCoordinateFromPixelInternal(u),this.rotating_&&(a.render(),l.adjustRotationInternal(r,this.anchor_))}handleUpEvent(t){if(this.targetPointers.length<2){return t.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}var s=o;exports.default=s;
},{"../functions.js":"mKAY","./Pointer.js":"qhn4","../rotationconstraint.js":"oeTb"}],"j0Sj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../functions.js"),e=r(require("./Pointer.js"));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=i?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=t[s]}return r.default=t,e&&e.set(t,r),r}class i extends e.default{constructor(e){const n=e||{},r=n;r.stopDown||(r.stopDown=t.FALSE),super(r),this.anchor_=null,this.duration_=void 0!==n.duration?n.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let n=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,a=r.clientY-i.clientY,o=Math.sqrt(s*s+a*a);void 0!==this.lastDistance_&&(n=this.lastDistance_/o),this.lastDistance_=o;const l=t.map,c=l.getView();1!=n&&(this.lastScaleDelta_=n);const u=l.getViewport().getBoundingClientRect(),h=(0,e.centroid)(this.targetPointers);h[0]-=u.left,h[1]-=u.top,this.anchor_=l.getCoordinateFromPixelInternal(h),l.render(),c.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}var s=i;exports.default=s;
},{"../functions.js":"mKAY","./Pointer.js":"qhn4"}],"hngx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../functions.js"),e=require("../events.js"),s=o(require("../events/Event.js")),r=o(require("../events/EventType.js")),i=o(require("./Interaction.js")),n=require("../proj.js");function o(t){return t&&t.__esModule?t:{default:t}}const u={ADD_FEATURES:"addfeatures"};class a extends s.default{constructor(t,e,s,r){super(t),this.features=s,this.file=e,this.projection=r}}class c extends i.default{constructor(e){const s=e||{};super({handleEvent:t.TRUE}),this.formatConstructors_=s.formatConstructors?s.formatConstructors:[],this.projection_=s.projection?(0,n.get)(s.projection):null,this.dropListenKeys_=null,this.source_=s.source||null,this.target=s.target?s.target:null}handleResult_(t,e){const s=e.target.result,r=this.getMap();let i=this.projection_;if(!i){i=r.getView().getProjection()}const n=this.formatConstructors_;let o=[];for(let u=0,a=n.length;u<a;++u){const t=new n[u];if((o=this.tryReadFeatures_(t,s,{featureProjection:i}))&&o.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(o)),this.dispatchEvent(new a(u.ADD_FEATURES,t,o,i))}registerListeners_(){const t=this.getMap();if(t){const s=this.target?this.target:t.getViewport();this.dropListenKeys_=[(0,e.listen)(s,r.default.DROP,l,this),(0,e.listen)(s,r.default.DRAGENTER,h,this),(0,e.listen)(s,r.default.DRAGOVER,h,this),(0,e.listen)(s,r.default.DROP,h,this)]}}setActive(t){!this.getActive()&&t&&this.registerListeners_(),this.getActive()&&!t&&this.unregisterListeners_(),super.setActive(t)}setMap(t){this.unregisterListeners_(),super.setMap(t),this.getActive()&&this.registerListeners_()}tryReadFeatures_(t,e,s){try{return t.readFeatures(e,s)}catch(r){return null}}unregisterListeners_(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(e.unlistenByKey),this.dropListenKeys_=null)}}function l(t){const e=t.dataTransfer.files;for(let s=0,i=e.length;s<i;++s){const t=e.item(s),i=new FileReader;i.addEventListener(r.default.LOAD,this.handleResult_.bind(this,t)),i.readAsText(t)}}function h(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}var d=c;exports.default=d;
},{"../functions.js":"mKAY","../events.js":"TEtv","../events/Event.js":"rYf1","../events/EventType.js":"Ak1Z","./Interaction.js":"kIie","../proj.js":"HKfS"}],"NBbe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../events/condition.js"),e=i(require("./Pointer.js"));function i(t){return t&&t.__esModule?t:{default:t}}class n extends e.default{constructor(e){const i=e||{};super(i),this.condition_=i.condition?i.condition:t.shiftKeyOnly,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==i.duration?i.duration:400}handleDragEvent(e){if(!(0,t.mouseOnly)(e))return;const i=e.map,n=i.getSize(),s=e.pixel,a=s[0]-n[0]/2,l=n[1]/2-s[1],o=Math.atan2(l,a),d=Math.sqrt(a*a+l*l),r=i.getView();if(void 0!==this.lastAngle_){const t=this.lastAngle_-o;r.adjustRotationInternal(t)}this.lastAngle_=o,void 0!==this.lastMagnitude_&&r.adjustResolutionInternal(this.lastMagnitude_/d),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/d),this.lastMagnitude_=d}handleUpEvent(e){if(!(0,t.mouseOnly)(e))return!0;const i=e.map.getView(),n=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,n),this.lastScaleDelta_=0,!1}handleDownEvent(e){return!!(0,t.mouseOnly)(e)&&(!!this.condition_(e)&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))}}var s=n;exports.default=s;
},{"../events/condition.js":"TePD","./Pointer.js":"qhn4"}],"baQX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),e=n(require("./GeometryType.js")),s=n(require("./SimpleGeometry.js")),i=require("./flat/deflate.js"),r=require("./flat/transform.js");function n(t){return t&&t.__esModule?t:{default:t}}class o extends s.default{constructor(t,e,s){if(super(),void 0!==s&&void 0===e)this.setFlatCoordinates(s,t);else{const i=e||0;this.setCenterAndRadius(t,i,s)}}clone(){return new o(this.flatCoordinates.slice(),void 0,this.layout)}closestPointXY(t,e,s,i){const r=this.flatCoordinates,n=t-r[0],o=e-r[1],a=n*n+o*o;if(a<i){if(0===a)for(let t=0;t<this.stride;++t)s[t]=r[t];else{const t=this.getRadius()/Math.sqrt(a);s[0]=r[0]+t*n,s[1]=r[1]+t*o;for(let e=2;e<this.stride;++e)s[e]=r[e]}return s.length=this.stride,a}return i}containsXY(t,e){const s=this.flatCoordinates,i=t-s[0],r=e-s[1];return i*i+r*r<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const s=this.flatCoordinates,i=s[this.stride]-s[0];return(0,t.createOrUpdate)(s[0]-i,s[1]-i,s[0]+i,s[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return e.default.CIRCLE}intersectsExtent(e){const s=this.getExtent();if((0,t.intersects)(e,s)){const s=this.getCenter();return e[0]<=s[0]&&e[2]>=s[0]||(e[1]<=s[1]&&e[3]>=s[1]||(0,t.forEachCorner)(e,this.intersectsCoordinate.bind(this)))}return!1}setCenter(t){const e=this.stride,s=this.flatCoordinates[e]-this.flatCoordinates[0],i=t.slice();i[e]=i[0]+s;for(let r=1;r<e;++r)i[e+r]=t[r];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(t,e,s){this.setLayout(s,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let n=(0,i.deflateCoordinate)(r,0,t,this.stride);r[n++]=r[0]+e;for(let i=1,o=this.stride;i<o;++i)r[n++]=r[i];r.length=n,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const s=this.getCenter(),i=this.getStride();this.setCenter((0,r.rotate)(s,0,s.length,i,t,e,s)),this.changed()}translate(t,e){const s=this.getCenter(),i=this.getStride();this.setCenter((0,r.translate)(s,0,s.length,i,t,e,s)),this.changed()}}o.prototype.transform;var a=o;exports.default=a;
},{"../extent.js":"E4kN","./GeometryType.js":"I79K","./SimpleGeometry.js":"leyx","./flat/deflate.js":"tAC2","./flat/transform.js":"XBOy"}],"iiKG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js");class e{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.displacement_=t.displacement}clone(){return new e({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getDisplacement(){return this.displacement_}getAnchor(){return(0,t.abstract)()}getImage(e){return(0,t.abstract)()}getHitDetectionImage(e){return(0,t.abstract)()}getImageState(){return(0,t.abstract)()}getImageSize(){return(0,t.abstract)()}getHitDetectionImageSize(){return(0,t.abstract)()}getOrigin(){return(0,t.abstract)()}getSize(){return(0,t.abstract)()}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t}listenImageChange(e){(0,t.abstract)()}load(){(0,t.abstract)()}unlistenImageChange(e){(0,t.abstract)()}}var a=e;exports.default=a;
},{"../util.js":"gvrh"}],"nYUC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../color.js"),e=require("../colorlike.js"),i=require("../dom.js"),s=r(require("../ImageState.js")),a=require("../render/canvas.js"),n=r(require("./Image.js"));function r(t){return t&&t.__esModule?t:{default:t}}class l extends n.default{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0]}),this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.render()}clone(){const t=new l({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t}getAnchor(){return this.anchor_}getAngle(){return this.angle_}getFill(){return this.fill_}getHitDetectionImage(t){return this.hitDetectionCanvas_}getImage(t){return this.canvas_}getImageSize(){return this.imageSize_}getHitDetectionImageSize(){return this.hitDetectionImageSize_}getImageState(){return s.default.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}listenImageChange(t){}load(){}unlistenImageChange(t){}render(){let t,s=a.defaultLineCap,n=a.defaultLineJoin,r=0,l=null,o=0,h=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=a.defaultStrokeStyle),t=(0,e.asColorLike)(t),void 0===(h=this.stroke_.getWidth())&&(h=a.defaultLineWidth),l=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(n=this.stroke_.getLineJoin())&&(n=a.defaultLineJoin),void 0===(s=this.stroke_.getLineCap())&&(s=a.defaultLineCap),void 0===(r=this.stroke_.getMiterLimit())&&(r=a.defaultMiterLimit));let u=2*(this.radius_+h)+1;const d={strokeStyle:t,strokeWidth:h,size:u,lineCap:s,lineDash:l,lineDashOffset:o,lineJoin:n,miterLimit:r},_=(0,i.createCanvasContext2D)(u,u);this.canvas_=_.canvas;const g=u=this.canvas_.width,c=this.getDisplacement();this.draw_(d,_,0,0),this.createHitDetectionCanvas_(d),this.anchor_=[u/2-c[0],u/2+c[1]],this.size_=[u,u],this.imageSize_=[g,g]}draw_(t,i,s,n){let r,l,o;i.setTransform(1,0,0,1,0,0),i.translate(s,n),i.beginPath();let h=this.points_;if(h===1/0)i.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{const e=void 0!==this.radius2_?this.radius2_:this.radius_;for(e!==this.radius_&&(h*=2),r=0;r<=h;r++)l=2*r*Math.PI/h-Math.PI/2+this.angle_,o=r%2==0?this.radius_:e,i.lineTo(t.size/2+o*Math.cos(l),t.size/2+o*Math.sin(l))}if(this.fill_){let t=this.fill_.getColor();null===t&&(t=a.defaultFillStyle),i.fillStyle=(0,e.asColorLike)(t),i.fill()}this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,i.setLineDash&&t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineCap=t.lineCap,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke()),i.closePath()}createHitDetectionCanvas_(e){if(this.hitDetectionImageSize_=[e.size,e.size],this.hitDetectionCanvas_=this.canvas_,this.fill_){let s=this.fill_.getColor(),a=0;if("string"==typeof s&&(s=(0,t.asArray)(s)),null===s?a=1:Array.isArray(s)&&(a=4===s.length?s[3]:1),0===a){const t=(0,i.createCanvasContext2D)(e.size,e.size);this.hitDetectionCanvas_=t.canvas,this.drawHitDetectionCanvas_(e,t,0,0)}}}drawHitDetectionCanvas_(t,e,i,s){e.setTransform(1,0,0,1,0,0),e.translate(i,s),e.beginPath();let n=this.points_;if(n===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{const i=void 0!==this.radius2_?this.radius2_:this.radius_;let s,a,r;for(i!==this.radius_&&(n*=2),s=0;s<=n;s++)r=2*s*Math.PI/n-Math.PI/2+this.angle_,a=s%2==0?this.radius_:i,e.lineTo(t.size/2+a*Math.cos(r),t.size/2+a*Math.sin(r))}e.fillStyle=a.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()}}var o=l;exports.default=o;
},{"../color.js":"UVET","../colorlike.js":"PxyX","../dom.js":"MHGO","../ImageState.js":"qc7U","../render/canvas.js":"lTc7","./Image.js":"iiKG"}],"fCIq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./RegularShape.js"));function t(e){return e&&e.__esModule?e:{default:e}}class s extends e.default{constructor(e){const t=e||{};super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,displacement:void 0!==t.displacement?t.displacement:[0,0]})}clone(){const e=new s({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return e.setOpacity(this.getOpacity()),e.setScale(this.getScale()),e}setRadius(e){this.radius_=e,this.render()}}var i=s;exports.default=i;
},{"./RegularShape.js":"nYUC"}],"BtYk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class o{constructor(o){const r=o||{};this.color_=void 0!==r.color?r.color:null}clone(){const r=this.getColor();return new o({color:Array.isArray(r)?r.slice():r||void 0})}getColor(){return this.color_}setColor(o){this.color_=o}}var r=o;exports.default=r;
},{}],"PPeM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class i{constructor(i){const t=i||{};this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new i({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(i){this.color_=i}setLineCap(i){this.lineCap_=i}setLineDash(i){this.lineDash_=i}setLineDashOffset(i){this.lineDashOffset_=i}setLineJoin(i){this.lineJoin_=i}setMiterLimit(i){this.miterLimit_=i}setWidth(i){this.width_=i}}var t=i;exports.default=t;
},{}],"AL4u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toFunction=s,exports.createDefaultStyle=d,exports.createEditingStyle=f,exports.default=void 0;var e=require("../asserts.js"),t=n(require("../geom/GeometryType.js")),r=n(require("./Circle.js")),i=n(require("./Fill.js")),o=n(require("./Stroke.js"));function n(e){return e&&e.__esModule?e:{default:e}}class l{constructor(e){const t=e||{};this.geometry_=null,this.geometryFunction_=a,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new l({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=a,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function s(t){let r;if("function"==typeof t)r=t;else{let i;if(Array.isArray(t))i=t;else{(0,e.assert)("function"==typeof t.getZIndex,41),i=[t]}r=function(){return i}}return r}let u=null;function d(e,t){if(!u){const e=new i.default({color:"rgba(255,255,255,0.4)"}),t=new o.default({color:"#3399CC",width:1.25});u=[new l({image:new r.default({fill:e,stroke:t,radius:5}),fill:e,stroke:t})]}return u}function f(){const e={},n=[255,255,255,1],s=[0,153,255,1];return e[t.default.POLYGON]=[new l({fill:new i.default({color:[255,255,255,.5]})})],e[t.default.MULTI_POLYGON]=e[t.default.POLYGON],e[t.default.LINE_STRING]=[new l({stroke:new o.default({color:n,width:5})}),new l({stroke:new o.default({color:s,width:3})})],e[t.default.MULTI_LINE_STRING]=e[t.default.LINE_STRING],e[t.default.CIRCLE]=e[t.default.POLYGON].concat(e[t.default.LINE_STRING]),e[t.default.POINT]=[new l({image:new r.default({radius:6,fill:new i.default({color:s}),stroke:new o.default({color:n,width:1.5})}),zIndex:1/0})],e[t.default.MULTI_POINT]=e[t.default.POINT],e[t.default.GEOMETRY_COLLECTION]=e[t.default.POLYGON].concat(e[t.default.LINE_STRING],e[t.default.POINT]),e}function a(e){return e.getGeometry()}var g=l;exports.default=g;
},{"../asserts.js":"kWiW","../geom/GeometryType.js":"I79K","./Circle.js":"fCIq","./Fill.js":"BtYk","./Stroke.js":"PPeM"}],"QB7Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./Layer.js")),t=require("../obj.js"),r=require("../style/Style.js");function i(e){return e&&e.__esModule?e:{default:e}}const n={RENDER_ORDER:"renderOrder"};class s extends e.default{constructor(e){const r=e||{},i=(0,t.assign)({},r);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,super(i),this.declutter_=void 0!==r.declutter&&r.declutter,this.renderBuffer_=void 0!==r.renderBuffer?r.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(r.style),this.updateWhileAnimating_=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,this.updateWhileInteracting_=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(n.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}setRenderOrder(e){this.set(n.RENDER_ORDER,e)}setStyle(e){this.style_=void 0!==e?e:r.createDefaultStyle,this.styleFunction_=null===e?void 0:(0,r.toFunction)(this.style_),this.changed()}}var u=s;exports.default=u;
},{"./Layer.js":"t6QM","../obj.js":"c6bJ","../style/Style.js":"AL4u"}],"wcyw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.closePathInstruction=exports.beginPathInstruction=exports.strokeInstruction=exports.fillInstruction=void 0;const t={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},o=[t.FILL];exports.fillInstruction=o;const s=[t.STROKE];exports.strokeInstruction=s;const e=[t.BEGIN_PATH];exports.beginPathInstruction=e;const r=[t.CLOSE_PATH];exports.closePathInstruction=r;var n=t;exports.default=n;
},{}],"VnmA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../array.js"),e=require("../../colorlike.js"),i=require("../../extent.js"),n=u(require("../../extent/Relationship.js")),s=u(require("../../geom/GeometryType.js")),r=require("../../geom/flat/inflate.js"),o=u(require("../VectorContext.js")),l=require("../canvas.js"),a=u(require("./Instruction.js"));function u(t){return t&&t.__esModule?t:{default:t}}class h extends o.default{constructor(t,e,i,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})}appendFlatCoordinates(t,e,s,r,o,l){let a=this.coordinates.length;const u=this.getBufferedMaxExtent();l&&(e+=r);let h=t[e],d=t[e+1];const c=this.tmpCoordinate_;let f,p,L,g=!0;for(f=e+r;f<s;f+=r)c[0]=t[f],c[1]=t[f+1],(L=(0,i.coordinateRelationship)(u,c))!==p?(g&&(this.coordinates[a++]=h,this.coordinates[a++]=d),this.coordinates[a++]=c[0],this.coordinates[a++]=c[1],g=!1):L===n.default.INTERSECTING?(this.coordinates[a++]=c[0],this.coordinates[a++]=c[1],g=!1):g=!0,h=c[0],d=c[1],p=L;return(o&&g||f===e+r)&&(this.coordinates[a++]=h,this.coordinates[a++]=d),a}drawCustomCoordinates_(t,e,i,n,s){for(let r=0,o=i.length;r<o;++r){const o=i[r],l=this.appendFlatCoordinates(t,e,o,n,!1,!1);s.push(l),e=o}return e}drawCustom(t,e,i){this.beginGeometry(t,e);const n=t.getType(),o=t.getStride(),l=this.coordinates.length;let u,h,d,c,f;if(n==s.default.MULTI_POLYGON){u=(t=t).getOrientedFlatCoordinates(),c=[];const e=t.getEndss();f=0;for(let t=0,i=e.length;t<i;++t){const i=[];f=this.drawCustomCoordinates_(u,f,e[t],o,i),c.push(i)}this.instructions.push([a.default.CUSTOM,l,c,t,i,r.inflateMultiCoordinatesArray])}else n==s.default.POLYGON||n==s.default.MULTI_LINE_STRING?(d=[],u=n==s.default.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),f=this.drawCustomCoordinates_(u,0,t.getEnds(),o,d),this.instructions.push([a.default.CUSTOM,l,d,t,i,r.inflateCoordinatesArray])):n==s.default.LINE_STRING||n==s.default.MULTI_POINT?(u=t.getFlatCoordinates(),h=this.appendFlatCoordinates(u,0,u.length,o,!1,!1),this.instructions.push([a.default.CUSTOM,l,h,t,i,r.inflateCoordinates])):n==s.default.POINT&&(u=t.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),h=this.coordinates.length,this.instructions.push([a.default.CUSTOM,l,h,t,i]));this.endGeometry(e)}beginGeometry(t,e){const i=t.getExtent();this.beginGeometryInstruction1_=[a.default.BEGIN_GEOMETRY,e,0,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[a.default.BEGIN_GEOMETRY,e,0,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let i;e.reverse();const n=e.length;let s,r,o=-1;for(i=0;i<n;++i)(r=(s=e[i])[0])==a.default.END_GEOMETRY?o=i:r==a.default.BEGIN_GEOMETRY&&(s[2]=i,(0,t.reverseSubArray)(this.hitDetectionInstructions,o,i),o=-1)}setFillStrokeStyle(t,i){const n=this.state;if(t){const i=t.getColor();n.fillStyle=(0,e.asColorLike)(i||l.defaultFillStyle)}else n.fillStyle=void 0;if(i){const t=i.getColor();n.strokeStyle=(0,e.asColorLike)(t||l.defaultStrokeStyle);const s=i.getLineCap();n.lineCap=void 0!==s?s:l.defaultLineCap;const r=i.getLineDash();n.lineDash=r?r.slice():l.defaultLineDash;const o=i.getLineDashOffset();n.lineDashOffset=o||l.defaultLineDashOffset;const a=i.getLineJoin();n.lineJoin=void 0!==a?a:l.defaultLineJoin;const u=i.getWidth();n.lineWidth=void 0!==u?u:l.defaultLineWidth;const h=i.getMiterLimit();n.miterLimit=void 0!==h?h:l.defaultMiterLimit,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[a.default.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[a.default.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(e,i){const n=e.strokeStyle,s=e.lineCap,r=e.lineDash,o=e.lineDashOffset,l=e.lineJoin,a=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=s||r!=e.currentLineDash&&!(0,t.equals)(e.currentLineDash,r)||e.currentLineDashOffset!=o||e.currentLineJoin!=l||e.currentLineWidth!=a||e.currentMiterLimit!=u)&&(void 0!==n&&i.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=s,e.currentLineDash=r,e.currentLineDashOffset=o,e.currentLineJoin=l,e.currentLineWidth=a,e.currentMiterLimit=u)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[a.default.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,i.clone)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;(0,i.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}var d=h;exports.default=d;
},{"../../array.js":"uHwP","../../colorlike.js":"PxyX","../../extent.js":"E4kN","../../extent/Relationship.js":"sf50","../../geom/GeometryType.js":"I79K","../../geom/flat/inflate.js":"RTsg","../VectorContext.js":"TEZU","../canvas.js":"lTc7","./Instruction.js":"wcyw"}],"C74D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("./Instruction.js")),i=h(require("./Builder.js"));function h(t){return t&&t.__esModule?t:{default:t}}class s extends i.default{constructor(t,i,h,s){super(t,i,h,s),this.declutterGroups_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}drawCoordinates_(t,i,h,s){return this.appendFlatCoordinates(t,i,h,s,!1,!1)}drawPoint(i,h){if(!this.image_)return;this.beginGeometry(i,h);const s=i.getFlatCoordinates(),e=i.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(s,0,s.length,e);this.instructions.push([t.default.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([t.default.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(h)}drawMultiPoint(i,h){if(!this.image_)return;this.beginGeometry(i,h);const s=i.getFlatCoordinates(),e=i.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(s,0,s.length,e);this.instructions.push([t.default.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([t.default.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(h)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,i){const h=t.getAnchor(),s=t.getSize(),e=t.getHitDetectionImage(1),o=t.getImage(1),r=t.getOrigin();this.anchorX_=h[0],this.anchorY_=h[1],this.declutterGroups_=i,this.hitDetectionImage_=e,this.image_=o,this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=s[0]}}var e=s;exports.default=e;
},{"./Instruction.js":"wcyw","./Builder.js":"VnmA"}],"Ifpf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./Instruction.js")),e=i(require("./Builder.js"));function i(t){return t&&t.__esModule?t:{default:t}}function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=s?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(i,r,o):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}class r extends e.default{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinates_(e,i,n,s){const r=this.coordinates.length,o=this.appendFlatCoordinates(e,i,n,s,!1,!1),u=[t.default.MOVE_TO_LINE_TO,r,o];return this.instructions.push(u),this.hitDetectionInstructions.push(u),n}drawLineString(e,i){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(void 0===s||void 0===r)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,i),this.hitDetectionInstructions.push([t.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],t.beginPathInstruction);const o=e.getFlatCoordinates(),u=e.getStride();this.drawFlatCoordinates_(o,0,o.length,u),this.hitDetectionInstructions.push(t.strokeInstruction),this.endGeometry(i)}drawMultiLineString(e,i){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(void 0===s||void 0===r)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,i),this.hitDetectionInstructions.push([t.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],t.beginPathInstruction);const o=e.getEnds(),u=e.getFlatCoordinates(),a=e.getStride();let l=0;for(let t=0,h=o.length;t<h;++t)l=this.drawFlatCoordinates_(u,l,o[t],a);this.hitDetectionInstructions.push(t.strokeInstruction),this.endGeometry(i)}finish(){const e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(t.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(t.strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(t.beginPathInstruction)}}var o=r;exports.default=o;
},{"./Instruction.js":"wcyw","./Builder.js":"VnmA"}],"qTuD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../geom/flat/simplify.js"),e=require("../canvas.js"),i=r(require("./Instruction.js")),s=n(require("./Builder.js"));function n(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=s?Object.getOwnPropertyDescriptor(t,n):null;r&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]}return i.default=t,e&&e.set(t,i),i}class l extends s.default{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinatess_(t,e,s,n){const o=this.state,r=void 0!==o.fillStyle,l=void 0!==o.strokeStyle,u=s.length;this.instructions.push(i.beginPathInstruction),this.hitDetectionInstructions.push(i.beginPathInstruction);for(let h=0;h<u;++h){const o=s[h],r=this.coordinates.length,u=this.appendFlatCoordinates(t,e,o,n,!0,!l),c=[i.default.MOVE_TO_LINE_TO,r,u];this.instructions.push(c),this.hitDetectionInstructions.push(c),l&&(this.instructions.push(i.closePathInstruction),this.hitDetectionInstructions.push(i.closePathInstruction)),e=o}return r&&(this.instructions.push(i.fillInstruction),this.hitDetectionInstructions.push(i.fillInstruction)),l&&(this.instructions.push(i.strokeInstruction),this.hitDetectionInstructions.push(i.strokeInstruction)),e}drawCircle(t,s){const n=this.state,o=n.fillStyle,r=n.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,s),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([i.default.SET_FILL_STYLE,e.defaultFillStyle]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([i.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const l=t.getFlatCoordinates(),u=t.getStride(),h=this.coordinates.length;this.appendFlatCoordinates(l,0,l.length,u,!1,!1);const c=[i.default.CIRCLE,h];this.instructions.push(i.beginPathInstruction,c),this.hitDetectionInstructions.push(i.beginPathInstruction,c),void 0!==n.fillStyle&&(this.instructions.push(i.fillInstruction),this.hitDetectionInstructions.push(i.fillInstruction)),void 0!==n.strokeStyle&&(this.instructions.push(i.strokeInstruction),this.hitDetectionInstructions.push(i.strokeInstruction)),this.endGeometry(s)}drawPolygon(t,s){const n=this.state,o=n.fillStyle,r=n.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,s),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([i.default.SET_FILL_STYLE,e.defaultFillStyle]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([i.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const l=t.getEnds(),u=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(u,0,l,h),this.endGeometry(s)}drawMultiPolygon(t,s){const n=this.state,o=n.fillStyle,r=n.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,s),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([i.default.SET_FILL_STYLE,e.defaultFillStyle]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([i.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const l=t.getEndss(),u=t.getOrientedFlatCoordinates(),h=t.getStride();let c=0;for(let e=0,i=l.length;e<i;++e)c=this.drawFlatCoordinatess_(u,c,l[e],h);this.endGeometry(s)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(0!==e){const i=this.coordinates;for(let s=0,n=i.length;s<n;++s)i[s]=(0,t.snap)(i[s],e)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}var u=l;exports.default=u;
},{"../../geom/flat/simplify.js":"o8JQ","../canvas.js":"lTc7","./Instruction.js":"wcyw","./Builder.js":"VnmA"}],"xmED":[function(require,module,exports) {
"use strict";function t(t,e,o,r,s){let n,c,i,u,a,d,h,f,l,p,v=o,M=o,x=0,_=0,b=o;for(c=o;c<r;c+=s){const o=e[c],r=e[c+1];void 0!==a&&(l=o-a,p=r-d,u=Math.sqrt(l*l+p*p),void 0!==h&&(_+=i,(n=Math.acos((h*l+f*p)/(i*u)))>t&&(_>x&&(x=_,v=b,M=c),_=0,b=c-s)),i=u,h=l,f=p),a=o,d=r}return(_+=u)>x?[b,c]:[v,M]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchingChunk=t;
},{}],"AxYm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINT:"point",LINE:"line"};exports.default=e;
},{}],"WEnl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TEXT_ALIGN=void 0;var t=require("../../util.js"),e=require("../../colorlike.js"),i=require("../../extent.js"),s=require("../../geom/flat/straightchunk.js"),l=h(require("../../geom/GeometryType.js")),a=require("../canvas.js"),n=h(require("./Instruction.js")),o=h(require("./Builder.js")),r=h(require("../../style/TextPlacement.js"));function h(t){return t&&t.__esModule?t:{default:t}}const u={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};exports.TEXT_ALIGN=u;class f extends o.default{constructor(t,e,i,s){super(t,e,i,s),this.declutterGroups_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_=""}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const o=this.textFillState_,h=this.textStrokeState_,u=this.textState_;if(""===this.text_||!u||!o&&!h)return;let f=this.coordinates.length;const d=t.getType();let g,c,x=null,_=2,S=2;if(u.placement===r.default.LINE){if(!(0,i.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;let a;if(x=t.getFlatCoordinates(),S=t.getStride(),d==l.default.LINE_STRING)a=[x.length];else if(d==l.default.MULTI_LINE_STRING)a=t.getEnds();else if(d==l.default.POLYGON)a=t.getEnds().slice(0,1);else if(d==l.default.MULTI_POLYGON){const e=t.getEndss();for(a=[],g=0,c=e.length;g<c;++g)a.push(e[g][0])}this.beginGeometry(t,e);const n=u.textAlign;let o,r=0;for(let t=0,e=a.length;t<e;++t){if(null==n){const e=(0,s.matchingChunk)(u.maxAngle,x,r,a[t],S);r=e[0],o=e[1]}else o=a[t];for(g=r;g<o;g+=S)this.coordinates.push(x[g],x[g+1]);_=this.coordinates.length,r=a[t];const e=this.declutterGroups_?0===t?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(f,_,e),f=_}this.endGeometry(e)}else{let i=null;switch(u.overflow||(i=[]),d){case l.default.POINT:case l.default.MULTI_POINT:_=(x=t.getFlatCoordinates()).length;break;case l.default.LINE_STRING:x=t.getFlatMidpoint();break;case l.default.CIRCLE:x=t.getCenter();break;case l.default.MULTI_LINE_STRING:_=(x=t.getFlatMidpoints()).length;break;case l.default.POLYGON:x=t.getFlatInteriorPoint(),u.overflow||i.push(x[2]/this.resolution),S=3;break;case l.default.MULTI_POLYGON:const e=t.getFlatInteriorPoints();for(x=[],g=0,c=e.length;g<c;g+=3)u.overflow||i.push(e[g+2]/this.resolution),x.push(e[g],e[g+1]);if(0==(_=x.length))return}_=this.appendFlatCoordinates(x,0,_,S,!1,!1),this.saveTextStates_(),(u.backgroundFill||u.backgroundStroke)&&(this.setFillStrokeStyle(u.backgroundFill,u.backgroundStroke),u.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),u.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);const s=this.pixelRatio;this.instructions.push([n.default.DRAW_IMAGE,f,_,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,u.padding==a.defaultPadding?a.defaultPadding:u.padding.map(function(t){return t*s}),!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),this.hitDetectionInstructions.push([n.default.DRAW_IMAGE,f,_,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,u.padding,!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:e.font,textAlign:e.textAlign||a.defaultTextAlign,textBaseline:e.textBaseline||a.defaultTextBaseline,scale:e.scale});const n=this.fillKey_;i&&(n in this.fillStates||(this.fillStates[n]={fillStyle:i.fillStyle}))}drawChars_(t,e,i){const s=this.textStrokeState_,l=this.textState_,a=this.strokeKey_,o=this.textKey_,r=this.fillKey_;this.saveTextStates_();const h=this.pixelRatio,f=u[l.textBaseline],d=this.textOffsetY_*h,g=this.text_,c=l.scale,x=s?s.lineWidth*c/2:0;this.instructions.push([n.default.DRAW_CHARS,t,e,f,i,l.overflow,r,l.maxAngle,h,d,a,x*h,g,o,1]),this.hitDetectionInstructions.push([n.default.DRAW_CHARS,t,e,f,i,l.overflow,r,l.maxAngle,1,d,a,x,g,o,1/h])}setTextStyle(i,s){let l,n,o;if(i){this.declutterGroups_=s;const r=i.getFill();r?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=(0,e.asColorLike)(r.getColor()||a.defaultFillStyle)):(n=null,this.textFillState_=n);const h=i.getStroke();if(h){(o=this.textStrokeState_)||(o={},this.textStrokeState_=o);const t=h.getLineDash(),i=h.getLineDashOffset(),s=h.getWidth(),l=h.getMiterLimit();o.lineCap=h.getLineCap()||a.defaultLineCap,o.lineDash=t?t.slice():a.defaultLineDash,o.lineDashOffset=void 0===i?a.defaultLineDashOffset:i,o.lineJoin=h.getLineJoin()||a.defaultLineJoin,o.lineWidth=void 0===s?a.defaultLineWidth:s,o.miterLimit=void 0===l?a.defaultMiterLimit:l,o.strokeStyle=(0,e.asColorLike)(h.getColor()||a.defaultStrokeStyle)}else o=null,this.textStrokeState_=o;l=this.textState_;const u=i.getFont()||a.defaultFont;(0,a.registerFont)(u);const f=i.getScale();l.overflow=i.getOverflow(),l.font=u,l.maxAngle=i.getMaxAngle(),l.placement=i.getPlacement(),l.textAlign=i.getTextAlign(),l.textBaseline=i.getTextBaseline()||a.defaultTextBaseline,l.backgroundFill=i.getBackgroundFill(),l.backgroundStroke=i.getBackgroundStroke(),l.padding=i.getPadding()||a.defaultPadding,l.scale=void 0===f?1:f;const d=i.getOffsetX(),g=i.getOffsetY(),c=i.getRotateWithView(),x=i.getRotation();this.text_=i.getText()||"",this.textOffsetX_=void 0===d?0:d,this.textOffsetY_=void 0===g?0:g,this.textRotateWithView_=void 0!==c&&c,this.textRotation_=void 0===x?0:x,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:(0,t.getUid)(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=l.font+l.scale+(l.textAlign||"?")+(l.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+(0,t.getUid)(n.fillStyle):""}else this.text_=""}}var d=f;exports.default=d;
},{"../../util.js":"gvrh","../../colorlike.js":"PxyX","../../extent.js":"E4kN","../../geom/flat/straightchunk.js":"xmED","../../geom/GeometryType.js":"I79K","../canvas.js":"lTc7","./Instruction.js":"wcyw","./Builder.js":"VnmA","../../style/TextPlacement.js":"AxYm"}],"ln4p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../extent.js"),t=l(require("./Builder.js")),i=l(require("./ImageBuilder.js")),r=l(require("./LineStringBuilder.js")),s=l(require("./PolygonBuilder.js")),u=l(require("./TextBuilder.js"));function l(e){return e&&e.__esModule?e:{default:e}}const n={Circle:s.default,Default:t.default,Image:i.default,LineString:r.default,Polygon:s.default,Text:u.default};class d{constructor(e,t,i,r,s){this.declutter_=s,this.declutterGroups_=null,this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}addDeclutter(t){let i=null;return this.declutter_&&(t?(i=this.declutterGroups_)[0][4]++:(i=[(0,e.createEmpty)()],this.declutterGroups_=i,i[0].push(1))),i}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=void 0!==e?e.toString():"0";let r=this.buildersByZIndex_[i];void 0===r&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];if(void 0===s){s=new(0,n[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}}var o=d;exports.default=o;
},{"../../extent.js":"E4kN","./Builder.js":"VnmA","./ImageBuilder.js":"C74D","./LineStringBuilder.js":"Ifpf","./PolygonBuilder.js":"qTuD","./TextBuilder.js":"WEnl"}],"mSaU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawTextOnPath=a;var t=require("../../math.js");function a(a,e,r,h,o,M,n,s,l,p,u){const P=[],c=a[e]>a[r-h],i=o.length;let f,I,w=a[e],d=a[e+1],q=a[e+=h],v=a[e+1],x=0,b=Math.sqrt(Math.pow(q-w,2)+Math.pow(v-d,2)),j=!1;for(let O=0;O<i;++O){const _=o[f=c?i-O-1:O],g=s*l(p,_,u),m=M+g/2;for(;e<r-h&&x+b<m;)w=q,d=v,q=a[e+=h],v=a[e+1],x+=b,b=Math.sqrt(Math.pow(q-w,2)+Math.pow(v-d,2));const y=m-x;let T=Math.atan2(v-d,q-w);if(c&&(T+=T>0?-Math.PI:Math.PI),void 0!==I){let t=T-I;if(j=j||0!==t,t+=t>Math.PI?-2*Math.PI:t<-Math.PI?2*Math.PI:0,Math.abs(t)>n)return null}I=T;const k=y/b,z=(0,t.lerp)(w,q,k),A=(0,t.lerp)(d,v,k);P[f]=[z,A,g/2,T,_],M+=g}return j?P:[[P[0][0],P[0][1],P[0][2],P[0][3],o]]}
},{"../../math.js":"crjC"}],"tMOH":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,i=arguments[3];!function(i,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t&&t.amd?t(n):(i=i||self).RBush=n()}(this,function(){"use strict";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1),m=Math.max(e,Math.floor(r-s*f/o+u)),c=Math.min(a,Math.floor(r+(o-s)*f/o+u));t(n,r,m,c,h)}var p=n[r],d=e,x=a;for(i(n,e,r),h(n[a],p)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;h(n[d],p)<0;)d++;for(;h(n[x],p)>0;)x--}0===h(n[e],p)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,o=void 0,s=void 0,l=void 0,u=void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});
},{}],"nM8P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../array.js"),e=require("../../extent.js"),i=require("../../geom/flat/length.js"),s=require("../../geom/flat/textpath.js"),l=require("../../geom/flat/transform.js"),a=require("../canvas.js"),n=u(require("./Instruction.js")),r=require("./TextBuilder.js"),h=require("../../transform.js"),o=u(require("rbush/rbush.js")),c=require("../../has.js");function u(t){return t&&t.__esModule?t:{default:t}}const d=(0,e.createEmpty)(),f=(0,h.create)(),p=[],_=[],g=[],x=[];class m{constructor(t,e,i,s){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,h.create)(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,s){const l=t+e+i+s;if(this.labels_[l])return this.labels_[l];const n=s?this.strokeStates[s]:null,h=i?this.fillStates[i]:null,o=this.textStates[e],u=this.pixelRatio,d=o.scale*u,f=r.TEXT_ALIGN[o.textAlign||a.defaultTextAlign],p=s&&n.lineWidth?n.lineWidth:0,_=t.split("\n"),g=_.length,x=[],m=(0,a.measureTextWidths)(o.font,_,x),T=(0,a.measureTextHeight)(o.font),b=T*g,S=m+p,y=[],k={width:Math.ceil((S+2)*d),height:Math.ceil((b+p)*d),contextInstructions:y};if(1!=d&&y.push("scale",[d,d]),y.push("font",o.font),s){y.push("strokeStyle",n.strokeStyle),y.push("lineWidth",p),y.push("lineCap",n.lineCap),y.push("lineJoin",n.lineJoin),y.push("miterLimit",n.miterLimit),(c.WORKER_OFFSCREEN_CANVAS?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(y.push("setLineDash",[n.lineDash]),y.push("lineDashOffset",n.lineDashOffset))}i&&y.push("fillStyle",h.fillStyle),y.push("textBaseline","middle"),y.push("textAlign","center");const L=.5-f,E=f*S+L*p;let I;if(s)for(I=0;I<g;++I)y.push("strokeText",[_[I],E+L*x[I],.5*(p+T)+I*T]);if(i)for(I=0;I<g;++I)y.push("fillText",[_[I],E+L*x[I],.5*(p+T)+I*T]);return this.labels_[l]=k,k}replayTextBackground_(t,e,i,s,l,a,n){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,l),t.lineTo.apply(t,e),a&&(this.alignFill_=a[2],this.fill_(t)),n&&(this.setStrokeStyle_(t,n),t.stroke())}replayImageOrLabel_(t,i,s,l,n,r,o,c,u,m,T,b,S,y,k,L,E,I){const R=E||I;i-=n*=S,s-=r*=S;const v=k+m>l.width?l.width-m:k,O=c+T>l.height?l.height-T:c,w=L[3]+v*S+L[1],A=L[0]+O*S+L[2],C=i-L[3],M=s-L[0];(R||0!==b)&&(p[0]=C,x[0]=C,p[1]=M,_[1]=M,_[0]=C+w,g[0]=_[0],g[1]=M+A,x[1]=g[1]);let D=null;if(0!==b){const t=i+n,l=s+r;D=(0,h.compose)(f,t,l,1,1,b,-t,-l),(0,h.apply)(f,p),(0,h.apply)(f,_),(0,h.apply)(f,g),(0,h.apply)(f,x),(0,e.createOrUpdate)(Math.min(p[0],_[0],g[0],x[0]),Math.min(p[1],_[1],g[1],x[1]),Math.max(p[0],_[0],g[0],x[0]),Math.max(p[1],_[1],g[1],x[1]),d)}else(0,e.createOrUpdate)(C,M,C+w,M+A,d);const P=t.canvas,N=I?I[2]*S/2:0,W=d[0]-N<=P.width&&d[2]+N>=0&&d[1]-N<=P.height&&d[3]+N>=0;if(y&&(i=Math.round(i),s=Math.round(s)),o){if(!W&&1==o[4])return;(0,e.extend)(o,d);const a=W?[t,D?D.slice(0):null,u,l,m,T,v,O,i,s,S]:null;a&&(R&&a.push(E,I,p.slice(0),_.slice(0),g.slice(0),x.slice(0)),o.push(a))}else W&&(R&&this.replayTextBackground_(t,p,_,g,x,E,I),(0,a.drawImageOrLabel)(t,D,u,l,m,T,v,O,i,s,S))}fill_(t){if(this.alignFill_){const e=(0,h.apply)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))}renderDeclutter(t,i,s,l){if(t&&t.length>5){const n=t[4];if(1==n||n==t.length-5){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:i};if(l||(l=new o.default(9)),!l.collides(n)){l.insert(n);for(let e=5,i=t.length;e<i;++e){const i=t[e],l=i[0],n=l.globalAlpha;n!==s&&(l.globalAlpha=s),i.length>11&&this.replayTextBackground_(i[0],i[13],i[14],i[15],i[16],i[11],i[12]),a.drawImageOrLabel.apply(void 0,i),n!==s&&(l.globalAlpha=n)}}t.length=5,(0,e.createOrUpdateEmpty)(t)}}return l}drawLabelWithPointPlacement_(t,e,i,s){const l=this.textStates[e],n=this.createLabel(t,e,s,i),h=this.strokeStates[i],o=this.pixelRatio,c=r.TEXT_ALIGN[l.textAlign||a.defaultTextAlign],u=r.TEXT_ALIGN[l.textBaseline||a.defaultTextBaseline],d=h&&h.lineWidth?h.lineWidth:0;return{label:n,anchorX:c*(n.width/o-2*l.scale)+2*(.5-c)*d,anchorY:u*n.height/o+2*(.5-u)*d}}execute_(o,c,u,d,f,p){let _;this.declutterItems.length=0,this.pixelCoordinates_&&(0,t.equals)(c,this.renderedTransform_)?_=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),_=(0,l.transform2D)(this.coordinates,0,this.coordinates.length,2,c,this.pixelCoordinates_),(0,h.setFromArray)(this.renderedTransform_,c));let g=0;const x=u.length;let m,T,b,S,y,k,L,E,I,R,v,O,w,A,C=0,M=0,D=0,P=null,N=null;const W=this.coordinateCache_,q=this.viewRotation_,j=Math.round(1e12*Math.atan2(-c[1],c[0]))/1e12,F={context:o,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:q},G=this.instructions!=u||this.overlaps?0:200;let B,X,Y;for(;g<x;){const t=u[g];switch(t[0]){case n.default.BEGIN_GEOMETRY:(B=t[1]).getGeometry()?void 0===p||(0,e.intersects)(p,t[3])?++g:g=t[2]+1:g=t[2];break;case n.default.BEGIN_PATH:M>G&&(this.fill_(o),M=0),D>G&&(o.stroke(),D=0),M||D||(o.beginPath(),S=NaN,y=NaN),++g;break;case n.default.CIRCLE:const l=_[C=t[1]],h=_[C+1],c=_[C+2]-l,u=_[C+3]-h,x=Math.sqrt(c*c+u*u);o.moveTo(l+x,h),o.arc(l,h,x,0,2*Math.PI,!0),++g;break;case n.default.CLOSE_PATH:o.closePath(),++g;break;case n.default.CUSTOM:C=t[1],m=t[2];const H=t[3],U=t[4],J=6==t.length?t[5]:void 0;F.geometry=H,F.feature=B,g in W||(W[g]=[]);const K=W[g];J?J(_,C,m,2,K):(K[0]=_[C],K[1]=_[C+1],K.length=2),U(K,F),++g;break;case n.default.DRAW_IMAGE:C=t[1],m=t[2],R=t[3],T=t[4],b=t[5],I=f?null:t[6];let V=t[7];const z=t[8],Q=t[9],Z=t[10],$=t[11];let tt=t[12];const et=t[13];let it,st,lt,at,nt=t[14];if(!R&&t.length>=19){v=t[18],O=t[19],w=t[20],A=t[21];const e=this.drawLabelWithPointPlacement_(v,O,w,A);R=e.label,t[3]=R;const i=t[22];T=(e.anchorX-i)*this.pixelRatio,t[4]=T;const s=t[23];b=(e.anchorY-s)*this.pixelRatio,t[5]=b,V=R.height,t[7]=V,nt=R.width,t[14]=nt}t.length>24&&(it=t[24]),t.length>16?(st=t[15],lt=t[16],at=t[17]):(st=a.defaultPadding,lt=!1,at=!1),$&&j?tt+=q:$||j||(tt-=q);let rt=0,ht=0;for(;C<m;C+=2)if(!(it&&it[rt++]<nt/this.pixelRatio)){if(I){const t=Math.floor(ht);I.length<t+1&&((E=(0,e.createEmpty)()).push(I[0][4]),I.push(E)),E=I[t]}this.replayImageOrLabel_(o,_[C],_[C+1],R,T,b,E,V,z,Q,Z,tt,et,d,nt,st,lt?P:null,at?N:null),E&&(ht===Math.floor(ht)&&this.declutterItems.push(this,E,B),ht+=1/E[4])}++g;break;case n.default.DRAW_CHARS:const ot=t[1],ct=t[2],ut=t[3];E=f?null:t[4];const dt=t[5];A=t[6];const ft=t[7],pt=t[8],_t=t[9];w=t[10];const gt=t[11];v=t[12],O=t[13];const xt=t[14],mt=this.textStates[O],Tt=mt.font,bt=mt.scale*pt;let St;Tt in this.widths_?St=this.widths_[Tt]:(St={},this.widths_[Tt]=St);const yt=(0,i.lineStringLength)(_,ot,ct,2),kt=bt*(0,a.measureAndCacheTextWidth)(Tt,v,St);if(dt||kt<=yt){const t=this.textStates[O].textAlign,e=(yt-kt)*r.TEXT_ALIGN[t],i=(0,s.drawTextOnPath)(_,ot,ct,2,v,e,ft,bt,a.measureAndCacheTextWidth,Tt,St);if(i){let t,e,s,l,n;if(w)for(t=0,e=i.length;t<e;++t)s=(n=i[t])[4],l=this.createLabel(s,O,"",w),T=n[2]+gt,b=ut*l.height+2*(.5-ut)*gt-_t,this.replayImageOrLabel_(o,n[0],n[1],l,T,b,E,l.height,1,0,0,n[3],xt,!1,l.width,a.defaultPadding,null,null);if(A)for(t=0,e=i.length;t<e;++t)s=(n=i[t])[4],l=this.createLabel(s,O,A,""),T=n[2],b=ut*l.height-_t,this.replayImageOrLabel_(o,n[0],n[1],l,T,b,E,l.height,1,0,0,n[3],xt,!1,l.width,a.defaultPadding,null,null)}}this.declutterItems.push(this,E,B),++g;break;case n.default.END_GEOMETRY:if(void 0!==f){const e=f(B=t[1]);if(e)return e}++g;break;case n.default.FILL:G?M++:this.fill_(o),++g;break;case n.default.MOVE_TO_LINE_TO:for(C=t[1],m=t[2],X=_[C],L=(Y=_[C+1])+.5|0,(k=X+.5|0)===S&&L===y||(o.moveTo(X,Y),S=k,y=L),C+=2;C<m;C+=2)k=(X=_[C])+.5|0,L=(Y=_[C+1])+.5|0,C!=m-2&&k===S&&L===y||(o.lineTo(X,Y),S=k,y=L);++g;break;case n.default.SET_FILL_STYLE:P=t,this.alignFill_=t[2],M&&(this.fill_(o),M=0,D&&(o.stroke(),D=0)),o.fillStyle=t[1],++g;break;case n.default.SET_STROKE_STYLE:N=t,D&&(o.stroke(),D=0),this.setStrokeStyle_(o,t),++g;break;case n.default.STROKE:G?D++:o.stroke(),++g;break;default:++g}}M&&this.fill_(o),D&&o.stroke()}execute(t,e,i,s){this.viewRotation_=i,this.execute_(t,e,this.instructions,s,void 0,void 0)}executeHitDetection(t,e,i,s,l){return this.viewRotation_=i,this.execute_(t,e,this.hitDetectionInstructions,!0,s,l)}}var T=m;exports.default=T;
},{"../../array.js":"uHwP","../../extent.js":"E4kN","../../geom/flat/length.js":"i6SQ","../../geom/flat/textpath.js":"mSaU","../../geom/flat/transform.js":"XBOy","../canvas.js":"lTc7","./Instruction.js":"wcyw","./TextBuilder.js":"WEnl","../../transform.js":"fXLG","rbush/rbush.js":"tMOH","../../has.js":"E1VY"}],"bDMr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCircleArray=x,exports.replayDeclutter=d,exports.default=void 0;var t=require("../../array.js"),e=require("../../dom.js"),r=require("../../extent.js"),o=require("../../geom/flat/transform.js"),n=require("../../obj.js"),s=u(require("./BuilderType.js")),i=require("../../transform.js"),c=u(require("./Executor.js"));function u(t){return t&&t.__esModule?t:{default:t}}const a=[s.default.POLYGON,s.default.CIRCLE,s.default.LINE_STRING,s.default.IMAGE,s.default.TEXT,s.default.DEFAULT];class l{constructor(t,e,r,o,n,s){this.maxExtent_=t,this.overlaps_=o,this.pixelRatio_=r,this.resolution_=e,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,i.create)(),this.createExecutors_(n)}clip(t,e){const r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()}createExecutors_(t){for(const e in t){let r=this.executorsByZIndex_[e];void 0===r&&(r={},this.executorsByZIndex_[e]=r);const o=t[e];for(const t in o){const e=o[t];r[t]=new c.default(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const r=this.executorsByZIndex_[e];for(let e=0,o=t.length;e<o;++e)if(t[e]in r)return!0}return!1}forEachFeatureAtCoordinate(o,n,c,u,l,f){const h=2*(u=Math.round(u))+1,d=(0,i.compose)(this.hitDetectionTransform_,u+.5,u+.5,1/n,-1/n,-c,-o[0],-o[1]);this.hitDetectionContext_||(this.hitDetectionContext_=(0,e.createCanvasContext2D)(h,h));const _=this.hitDetectionContext_;let m;_.canvas.width!==h||_.canvas.height!==h?(_.canvas.width=h,_.canvas.height=h):_.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(m=(0,r.createEmpty)(),(0,r.extendCoordinate)(m,o),(0,r.buffer)(m,n*(this.renderBuffer_+u),m));const p=x(u);let y;function E(t){const e=_.getImageData(0,0,h,h).data;for(let r=0;r<h;r++)for(let o=0;o<h;o++)if(p[r][o]&&e[4*(o*h+r)+3]>0){let e;return(!f||y!=s.default.IMAGE&&y!=s.default.TEXT||-1!==f.indexOf(t))&&(e=l(t)),e||void _.clearRect(0,0,h,h)}}const g=Object.keys(this.executorsByZIndex_).map(Number);let v,C,I,T,B;for(g.sort(t.numberSafeCompareFunction),v=g.length-1;v>=0;--v){const t=g[v].toString();for(I=this.executorsByZIndex_[t],C=a.length-1;C>=0;--C)if(void 0!==(T=I[y=a[C]])&&(B=T.executeHitDetection(_,d,c,E,m)))return B}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const r=e[0],n=e[1],s=e[2],i=e[3],c=[r,n,r,i,s,i,s,n];return(0,o.transform2D)(c,0,8,2,t,c),c}isEmpty(){return(0,n.isEmpty)(this.executorsByZIndex_)}execute(e,r,o,n,i,c){const u=Object.keys(this.executorsByZIndex_).map(Number);u.sort(t.numberSafeCompareFunction),this.maxExtent_&&(e.save(),this.clip(e,r));const l=i||a;let f,h,x,d,_,m;for(f=0,h=u.length;f<h;++f){const t=u[f].toString();for(_=this.executorsByZIndex_[t],x=0,d=l.length;x<d;++x){const i=l[x];if(void 0!==(m=_[i]))if(!c||i!=s.default.IMAGE&&i!=s.default.TEXT)m.execute(e,r,o,n);else{const e=c[t];e?e.push(m,r.slice(0)):c[t]=[m,r.slice(0)]}}}this.maxExtent_&&e.restore()}}const f={0:[[!0]]};function h(t,e,r){let o;const n=Math.floor(t.length/2);if(e>=n)for(o=n;o<e;o++)t[o][r]=!0;else if(e<n)for(o=e+1;o<n;o++)t[o][r]=!0}function x(t){if(void 0!==f[t])return f[t];const e=2*t+1,r=new Array(e);for(let i=0;i<e;i++)r[i]=new Array(e);let o=t,n=0,s=0;for(;o>=n;)h(r,t+o,t+n),h(r,t+n,t+o),h(r,t-n,t+o),h(r,t-o,t+n),h(r,t-o,t-n),h(r,t-n,t-o),h(r,t+n,t-o),h(r,t+o,t-n),2*((s+=1+2*++n)-o)+1>0&&(s+=1-2*(o-=1));return f[t]=r,r}function d(e,r,o,n,s,i){const c=Object.keys(e).map(Number).sort(t.numberSafeCompareFunction);for(let t=0,u=c.length;t<u;++t){const u=e[c[t].toString()];let a;for(let t=0,e=u.length;t<e;){const e=u[t++];e!==a&&(a=e,i.push({items:e.declutterItems,opacity:n}));const c=u[t++];e.execute(r,c,o,s)}}}var _=l;exports.default=_;
},{"../../array.js":"uHwP","../../dom.js":"MHGO","../../extent.js":"E4kN","../../geom/flat/transform.js":"XBOy","../../obj.js":"c6bJ","./BuilderType.js":"NNDA","../../transform.js":"fXLG","./Executor.js":"nM8P"}],"lRtM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=n(require("../ImageState.js")),a=n(require("../Observable.js")),r=n(require("../events/EventType.js")),d=n(require("../source/State.js"));function n(e){return e&&e.__esModule?e:{default:e}}class s extends a.default{constructor(e){super(),this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e}getFeatures(t){return(0,e.abstract)()}prepareFrame(t){return(0,e.abstract)()}renderFrame(t,a){return(0,e.abstract)()}loadedTileCallback(e,t,a){e[t]||(e[t]={}),e[t][a.tileCoord.toString()]=a}createLoadedTileFinder(e,t,a){return function(r,d){const n=this.loadedTileCallback.bind(this,a,r);return e.forEachLoadedTile(t,r,d,n)}.bind(this)}forEachFeatureAtCoordinate(e,t,a,r,d){}getDataAtPixel(t,a,r){return(0,e.abstract)()}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){e.target.getState()===t.default.LOADED&&this.renderIfReadyAndVisible()}loadImage(e){let a=e.getState();return a!=t.default.LOADED&&a!=t.default.ERROR&&e.addEventListener(r.default.CHANGE,this.boundHandleImageChange_),a==t.default.IDLE&&(e.load(),a=e.getState()),a==t.default.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e.getVisible()&&e.getSourceState()==d.default.READY&&e.changed()}}var l=s;exports.default=l;
},{"../util.js":"gvrh","../ImageState.js":"qc7U","../Observable.js":"VYsY","../events/EventType.js":"Ak1Z","../source/State.js":"mqbu"}],"XFdq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../extent.js"),t=require("../../dom.js"),n=s(require("../../render/Event.js")),r=s(require("../../render/EventType.js")),o=require("../../render/canvas.js"),a=s(require("../Layer.js")),i=require("../../transform.js");function s(e){return e&&e.__esModule?e:{default:e}}class l extends a.default{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform_=(0,i.create)(),this.pixelTransform=(0,i.create)(),this.inversePixelTransform=(0,i.create)(),this.context=null,this.containerReused=!1}useContainer(e,n,r){const o=this.getLayer().getClassName();let a,i;if(e&&""===e.style.opacity&&e.className===o){const t=e.firstElementChild;t instanceof HTMLCanvasElement&&(i=t.getContext("2d"))}if(i&&i.canvas.style.transform===n?(this.container=e,this.context=i,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(a=document.createElement("div")).className=o;let e=a.style;e.position="absolute",e.width="100%",e.height="100%";const n=(i=(0,t.createCanvasContext2D)()).canvas;a.appendChild(n),(e=n.style).position="absolute",e.left="0",e.transformOrigin="top left",this.container=a,this.context=i}}clip(t,n,r){const a=n.pixelRatio,s=n.size[0]*a/2,l=n.size[1]*a/2,c=n.viewState.rotation,d=(0,e.getTopLeft)(r),p=(0,e.getTopRight)(r),h=(0,e.getBottomRight)(r),u=(0,e.getBottomLeft)(r);(0,i.apply)(n.coordinateToPixelTransform,d),(0,i.apply)(n.coordinateToPixelTransform,p),(0,i.apply)(n.coordinateToPixelTransform,h),(0,i.apply)(n.coordinateToPixelTransform,u),t.save(),(0,o.rotateAtOffset)(t,-c,s,l),t.beginPath(),t.moveTo(d[0]*a,d[1]*a),t.lineTo(p[0]*a,p[1]*a),t.lineTo(h[0]*a,h[1]*a),t.lineTo(u[0]*a,u[1]*a),t.clip(),(0,o.rotateAtOffset)(t,c,s,l)}clipUnrotated(t,n,r){const o=(0,e.getTopLeft)(r),a=(0,e.getTopRight)(r),s=(0,e.getBottomRight)(r),l=(0,e.getBottomLeft)(r);(0,i.apply)(n.coordinateToPixelTransform,o),(0,i.apply)(n.coordinateToPixelTransform,a),(0,i.apply)(n.coordinateToPixelTransform,s),(0,i.apply)(n.coordinateToPixelTransform,l);const c=this.inversePixelTransform;(0,i.apply)(c,o),(0,i.apply)(c,a),(0,i.apply)(c,s),(0,i.apply)(c,l),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.clip()}dispatchRenderEvent_(e,t,r){const o=this.getLayer();if(o.hasListener(e)){const a=new n.default(e,this.inversePixelTransform,r,t);o.dispatchEvent(a)}}preRender(e,t){this.dispatchRenderEvent_(r.default.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(r.default.POSTRENDER,e,t)}getRenderTransform(e,t,n,r,o,a,s){const l=o/2,c=a/2,d=r/t,p=-d,h=-e[0]+s,u=-e[1];return(0,i.compose)(this.tempTransform_,l,c,d,p,-n,h,u)}getDataAtPixel(e,t,n){const r=(0,i.apply)(this.inversePixelTransform,e.slice()),o=this.context;let a;try{a=o.getImageData(Math.round(r[0]),Math.round(r[1]),1,1).data}catch(s){return"SecurityError"===s.name?new Uint8Array:a}return 0===a[3]?null:a}}var c=l;exports.default=c;
},{"../../extent.js":"E4kN","../../dom.js":"MHGO","../../render/Event.js":"X9aH","../../render/EventType.js":"w2aV","../../render/canvas.js":"lTc7","../Layer.js":"lRtM","../../transform.js":"fXLG"}],"OeU5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={FRACTION:"fraction",PIXELS:"pixels"};exports.default=e;
},{}],"rzjL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./util.js"),e=s(require("./events/Target.js")),r=s(require("./events/EventType.js"));function s(t){return t&&t.__esModule?t:{default:t}}class i extends e.default{constructor(t,e,r,s){super(),this.extent=t,this.pixelRatio_=r,this.resolution=e,this.state=s}changed(){this.dispatchEvent(r.default.CHANGE)}getExtent(){return this.extent}getImage(){return(0,t.abstract)()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){(0,t.abstract)()}}var u=i;exports.default=u;
},{"./util.js":"gvrh","./events/Target.js":"VT2J","./events/EventType.js":"Ak1Z"}],"Wj4C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.listenImage=h,exports.default=void 0;var e=u(require("./ImageBase.js")),t=u(require("./ImageState.js")),s=require("./events.js"),i=u(require("./events/EventType.js")),n=require("./extent.js"),a=require("./has.js");function u(e){return e&&e.__esModule?e:{default:e}}class r extends e.default{constructor(e,s,i,n,a,u){super(e,s,i,t.default.IDLE),this.src_=n,this.image_=new Image,null!==a&&(this.image_.crossOrigin=a),this.unlisten_=null,this.state=t.default.IDLE,this.imageLoadFunction_=u}getImage(){return this.image_}handleImageError_(){this.state=t.default.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){void 0===this.resolution&&(this.resolution=(0,n.getHeight)(this.extent)/this.image_.height),this.state=t.default.LOADED,this.unlistenImage_(),this.changed()}load(){this.state!=t.default.IDLE&&this.state!=t.default.ERROR||(this.state=t.default.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=h(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(e){this.image_=e}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function h(e,t,n){const u=e;if(u.src&&a.IMAGE_DECODE){const e=u.decode();let s=!0;const i=function(){s=!1};return e.then(function(){s&&t()}).catch(function(e){s&&("EncodingError"===e.name&&"Invalid image type."===e.message?t():n())}),i}const r=[(0,s.listenOnce)(u,i.default.LOAD,t),(0,s.listenOnce)(u,i.default.ERROR,n)];return function(){r.forEach(s.unlistenByKey)}}var l=r;exports.default=l;
},{"./ImageBase.js":"rzjL","./ImageState.js":"qc7U","./events.js":"TEtv","./events/EventType.js":"Ak1Z","./extent.js":"E4kN","./has.js":"E1VY"}],"AAxt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=_,exports.default=void 0;var t=require("../dom.js"),e=n(require("../events/Target.js")),i=n(require("../events/EventType.js")),s=n(require("../ImageState.js")),a=require("./IconImageCache.js"),h=require("../Image.js");function n(t){return t&&t.__esModule?t:{default:t}}class r extends e.default{constructor(t,e,i,s,a,h){super(),this.hitDetectionImage_=null,this.image_=t||new Image,null!==s&&(this.image_.crossOrigin=s),this.canvas_=h?document.createElement("canvas"):null,this.color_=h,this.unlisten_=null,this.imageState_=a,this.size_=i,this.src_=e,this.tainted_}isTainted_(e){if(void 0===this.tainted_&&this.imageState_===s.default.LOADED){e||(e=(0,t.createCanvasContext2D)(1,1)).drawImage(this.image_,0,0);try{e.getImageData(0,0,1,1),this.tainted_=!1}catch(i){this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(i.default.CHANGE)}handleImageError_(){this.imageState_=s.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=s.default.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()}getImage(t){return this.canvas_?this.canvas_:this.image_}getImageState(){return this.imageState_}getHitDetectionImage(e){if(!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],i=this.size_[1],s=(0,t.createCanvasContext2D)(e,i);s.fillRect(0,0,e,i),this.hitDetectionImage_=s.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_==s.default.IDLE){this.imageState_=s.default.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,h.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(){if(!this.color_)return;this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;const t=this.canvas_.getContext("2d");if(t.drawImage(this.image_,0,0),this.isTainted_(t)){const e=this.color_;return t.globalCompositeOperation="multiply",t.fillStyle="rgb("+e[0]+","+e[1]+","+e[2]+")",t.fillRect(0,0,this.image_.width,this.image_.height),t.globalCompositeOperation="destination-in",void t.drawImage(this.image_,0,0)}const e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,s=this.color_[0]/255,a=this.color_[1]/255,h=this.color_[2]/255;for(let n=0,r=i.length;n<r;n+=4)i[n]*=s,i[n+1]*=a,i[n+2]*=h;t.putImageData(e,0,0)}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function _(t,e,i,s,h,n){let _=a.shared.get(e,s,n);return _||(_=new r(t,e,i,s,h,n),a.shared.set(e,s,n,_)),_}var g=r;exports.default=g;
},{"../dom.js":"MHGO","../events/Target.js":"VT2J","../events/EventType.js":"Ak1Z","../ImageState.js":"qc7U","./IconImageCache.js":"nKYw","../Image.js":"Wj4C"}],"sFIN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=require("../util.js"),t=c(require("../ImageState.js")),e=require("../asserts.js"),s=require("../color.js"),r=c(require("../events/EventType.js")),n=c(require("./IconAnchorUnits.js")),o=require("./IconImage.js"),a=c(require("./IconOrigin.js")),h=c(require("./Image.js"));function c(i){return i&&i.__esModule?i:{default:i}}class l extends h.default{constructor(r){const h=r||{},c=void 0!==h.opacity?h.opacity:1,l=void 0!==h.rotation?h.rotation:0,g=void 0!==h.scale?h.scale:1,_=void 0!==h.rotateWithView&&h.rotateWithView;super({opacity:c,rotation:l,scale:g,displacement:void 0!==h.displacement?h.displacement:[0,0],rotateWithView:_}),this.anchor_=void 0!==h.anchor?h.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==h.anchorOrigin?h.anchorOrigin:a.default.TOP_LEFT,this.anchorXUnits_=void 0!==h.anchorXUnits?h.anchorXUnits:n.default.FRACTION,this.anchorYUnits_=void 0!==h.anchorYUnits?h.anchorYUnits:n.default.FRACTION,this.crossOrigin_=void 0!==h.crossOrigin?h.crossOrigin:null;const u=void 0!==h.img?h.img:null,f=void 0!==h.imgSize?h.imgSize:null;let d=h.src;(0,e.assert)(!(void 0!==d&&u),4),(0,e.assert)(!u||u&&f,5),void 0!==d&&0!==d.length||!u||(d=u.src||(0,i.getUid)(u)),(0,e.assert)(void 0!==d&&d.length>0,6);const O=void 0!==h.src?t.default.IDLE:t.default.LOADED;this.color_=void 0!==h.color?(0,s.asArray)(h.color):null,this.iconImage_=(0,o.get)(u,d,f,this.crossOrigin_,O,this.color_),this.offset_=void 0!==h.offset?h.offset:[0,0],this.offsetOrigin_=void 0!==h.offsetOrigin?h.offsetOrigin:a.default.TOP_LEFT,this.origin_=null,this.size_=void 0!==h.size?h.size:null}clone(){return new l({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})}getAnchor(){if(this.normalizedAnchor_)return this.normalizedAnchor_;let i=this.anchor_;const t=this.getSize();if(this.anchorXUnits_==n.default.FRACTION||this.anchorYUnits_==n.default.FRACTION){if(!t)return null;i=this.anchor_.slice(),this.anchorXUnits_==n.default.FRACTION&&(i[0]*=t[0]),this.anchorYUnits_==n.default.FRACTION&&(i[1]*=t[1])}if(this.anchorOrigin_!=a.default.TOP_LEFT){if(!t)return null;i===this.anchor_&&(i=this.anchor_.slice()),this.anchorOrigin_!=a.default.TOP_RIGHT&&this.anchorOrigin_!=a.default.BOTTOM_RIGHT||(i[0]=-i[0]+t[0]),this.anchorOrigin_!=a.default.BOTTOM_LEFT&&this.anchorOrigin_!=a.default.BOTTOM_RIGHT||(i[1]=-i[1]+t[1])}return this.normalizedAnchor_=i,this.normalizedAnchor_}setAnchor(i){this.anchor_=i,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(i){return this.iconImage_.getImage(i)}getImageSize(){return this.iconImage_.getSize()}getHitDetectionImageSize(){return this.getImageSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(i){return this.iconImage_.getHitDetectionImage(i)}getOrigin(){if(this.origin_)return this.origin_;let i=this.offset_;const t=this.getDisplacement();if(this.offsetOrigin_!=a.default.TOP_LEFT){const t=this.getSize(),e=this.iconImage_.getSize();if(!t||!e)return null;i=i.slice(),this.offsetOrigin_!=a.default.TOP_RIGHT&&this.offsetOrigin_!=a.default.BOTTOM_RIGHT||(i[0]=e[0]-t[0]-i[0]),this.offsetOrigin_!=a.default.BOTTOM_LEFT&&this.offsetOrigin_!=a.default.BOTTOM_RIGHT||(i[1]=e[1]-t[1]-i[1])}return i[0]+=t[0],i[1]+=t[1],this.origin_=i,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(i){this.iconImage_.addEventListener(r.default.CHANGE,i)}load(){this.iconImage_.load()}unlistenImageChange(i){this.iconImage_.removeEventListener(r.default.CHANGE,i)}}var g=l;exports.default=g;
},{"../util.js":"gvrh","../ImageState.js":"qc7U","../asserts.js":"kWiW","../color.js":"UVET","../events/EventType.js":"Ak1Z","./IconAnchorUnits.js":"OeU5","./IconImage.js":"AAxt","./IconOrigin.js":"An1B","./Image.js":"iiKG"}],"wNse":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Fill.js")),e=i(require("./TextPlacement.js"));function i(t){return t&&t.__esModule?t:{default:t}}const s="#333";class o{constructor(i){const o=i||{};this.font_=o.font,this.rotation_=o.rotation,this.rotateWithView_=o.rotateWithView,this.scale_=o.scale,this.text_=o.text,this.textAlign_=o.textAlign,this.textBaseline_=o.textBaseline,this.fill_=void 0!==o.fill?o.fill:new t.default({color:s}),this.maxAngle_=void 0!==o.maxAngle?o.maxAngle:Math.PI/4,this.placement_=void 0!==o.placement?o.placement:e.default.POINT,this.overflow_=!!o.overflow,this.stroke_=void 0!==o.stroke?o.stroke:null,this.offsetX_=void 0!==o.offsetX?o.offsetX:0,this.offsetY_=void 0!==o.offsetY?o.offsetY:0,this.backgroundFill_=o.backgroundFill?o.backgroundFill:null,this.backgroundStroke_=o.backgroundStroke?o.backgroundStroke:null,this.padding_=void 0===o.padding?null:o.padding}clone(){return new o({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}var l=o;exports.default=l;
},{"./Fill.js":"BtYk","./TextPlacement.js":"AxYm"}],"KETh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Fill",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Icon",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"IconImage",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"RegularShape",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Stroke",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Style",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return s.default}});var e=f(require("./style/Circle.js")),t=f(require("./style/Fill.js")),r=f(require("./style/Icon.js")),u=f(require("./style/IconImage.js")),n=f(require("./style/Image.js")),l=f(require("./style/RegularShape.js")),o=f(require("./style/Stroke.js")),i=f(require("./style/Style.js")),s=f(require("./style/Text.js"));function f(e){return e&&e.__esModule?e:{default:e}}
},{"./style/Circle.js":"fCIq","./style/Fill.js":"BtYk","./style/Icon.js":"sFIN","./style/IconImage.js":"AAxt","./style/Image.js":"iiKG","./style/RegularShape.js":"nYUC","./style/Stroke.js":"PPeM","./style/Style.js":"AL4u","./style/Text.js":"wNse"}],"V4Oz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHitDetectionImageData=c,exports.hitDetect=l;var t=s(require("./Immediate.js")),e=require("../../dom.js"),n=require("../../style.js"),o=s(require("../../style/IconAnchorUnits.js")),a=s(require("../../geom/GeometryType.js")),r=require("../../extent.js"),i=require("../../array.js");function s(t){return t&&t.__esModule?t:{default:t}}function c(s,c,l,u,g,h,d){const f=s[0]/2,m=s[1]/2,y=(0,e.createCanvasContext2D)(f,m);y.imageSmoothingEnabled=!1;const p=y.canvas,I=new t.default(y,.5,g,null,d),S=l.length,w=Math.floor(16777215/S),C={};for(let t=1;t<=S;++t){const i=l[t-1],s=i.getStyleFunction()||u;if(!u)continue;let c=s(i,h);if(!c)continue;Array.isArray(c)||(c=[c]);const d="#"+("000000"+(t*w).toString(16)).slice(-6);for(let t=0,l=c.length;t<l;++t){const s=c[t],l=s.clone(),u=l.getFill();u&&u.setColor(d);const h=l.getStroke();h&&h.setColor(d),l.setText(void 0);const f=s.getImage();if(f){const t=f.getImageSize();if(!t)continue;const a=document.createElement("canvas");a.width=t[0],a.height=t[1];const r=a.getContext("2d",{alpha:!1});r.fillStyle=d;const i=r.canvas;r.fillRect(0,0,i.width,i.height);const s=t?t[0]:i.width,c=t?t[1]:i.height;(0,e.createCanvasContext2D)(s,c).drawImage(i,0,0),l.setImage(new n.Icon({img:i,imgSize:t,anchor:f.getAnchor(),anchorXUnits:o.default.PIXELS,anchorYUnits:o.default.PIXELS,offset:f.getOrigin(),size:f.getSize(),opacity:f.getOpacity(),scale:f.getScale(),rotation:f.getRotation(),rotateWithView:f.getRotateWithView()}))}const m=Number(l.getZIndex());let y=C[m];y||(y={},C[m]=y,y[a.default.POLYGON]=[],y[a.default.CIRCLE]=[],y[a.default.LINE_STRING]=[],y[a.default.POINT]=[]);const p=l.getGeometryFunction()(i);p&&(0,r.intersects)(g,p.getExtent())&&y[p.getType().replace("Multi","")].push(p,l)}}const x=Object.keys(C).map(Number).sort(i.numberSafeCompareFunction);for(let t=0,e=x.length;t<e;++t){const e=C[x[t]];for(const t in e){const n=e[t];for(let t=0,e=n.length;t<e;t+=2){I.setStyle(n[t+1]);for(let e=0,o=c.length;e<o;++e)I.setTransform(c[e]),I.drawGeometry(n[t])}}}return document.body.appendChild(y.canvas),y.getImageData(0,0,p.width,p.height)}function l(t,e,n){const o=[];if(n){const a=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*n.width),r=n.data[a],i=n.data[a+1],s=n.data[a+2]+256*(i+256*r),c=Math.floor(16777215/e.length);s&&s%c==0&&o.push(e[s/c-1])}return o}
},{"./Immediate.js":"L8fg","../../dom.js":"MHGO","../../style.js":"KETh","../../style/IconAnchorUnits.js":"OeU5","../../geom/GeometryType.js":"I79K","../../extent.js":"E4kN","../../array.js":"uHwP"}],"lGFm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../util.js"),t=g(require("../../ViewHint.js")),r=require("../../extent.js"),n=require("../../coordinate.js"),i=require("../../proj.js"),s=g(require("../../render/canvas/BuilderGroup.js")),a=c(require("../../render/canvas/ExecutorGroup.js")),o=g(require("./Layer.js")),d=require("../vector.js"),u=require("../../transform.js"),h=require("../../render/canvas/hitdetect.js");function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function g(e){return e&&e.__esModule?e:{default:e}}class f extends o.default{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.dirty_=!1,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,r.createEmpty)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0}useContainer(e,t,r){r<1&&(e=null),super.useContainer(e,t,r)}renderFrame(e,n){const s=e.pixelRatio,o=e.layerStatesArray[e.layerIndex];(0,u.makeScale)(this.pixelTransform,1/s,1/s),(0,u.makeInverse)(this.inversePixelTransform,this.pixelTransform);const d=(0,u.toString)(this.pixelTransform);this.useContainer(n,d,o.opacity);const h=this.context,l=h.canvas,c=this.replayGroup_;if(!c||c.isEmpty())return!this.containerReused&&l.width>0&&(l.width=0),this.container;const g=Math.round(e.size[0]*s),f=Math.round(e.size[1]*s);l.width!=g||l.height!=f?(l.width=g,l.height=f,l.style.transform!==d&&(l.style.transform=d)):this.containerReused||h.clearRect(0,0,g,f),this.preRender(h,e);const p=e.extent,_=e.viewState,y=_.center,x=_.resolution,m=_.projection,v=_.rotation,R=m.getExtent(),I=this.getLayer().getSource();let j=!1;if(o.extent){const t=(0,i.fromUserExtent)(o.extent,m);(j=!(0,r.containsExtent)(t,e.extent)&&(0,r.intersects)(t,e.extent))&&this.clip(h,e,t)}const E=e.viewHints,w=!(E[t.default.ANIMATING]||E[t.default.INTERACTING]),T=this.getRenderTransform(y,x,v,s,g,f,0),F=this.getLayer().getDeclutter()?{}:null;if(c.execute(h,T,v,w,void 0,F),I.getWrapX()&&m.canWrapX()&&!(0,r.containsExtent)(R,p)){let e=p[0];const t=(0,r.getWidth)(R);let n,i=0;for(;e<R[0];){n=t*--i;const r=this.getRenderTransform(y,x,v,s,g,f,n);c.execute(h,r,v,w,void 0,F),e+=t}for(i=0,e=p[2];e>R[2];){n=t*++i;const r=this.getRenderTransform(y,x,v,s,g,f,n);c.execute(h,r,v,w,void 0,F),e-=t}}if(F){const r=e.viewHints,n=!(r[t.default.ANIMATING]||r[t.default.INTERACTING]);(0,a.replayDeclutter)(F,h,v,1,n,e.declutterItems)}j&&h.restore(),this.postRender(h,e);const C=o.opacity,D=this.container;return C!==parseFloat(D.style.opacity)&&(D.style.opacity=1===C?"":C),this.container}getFeatures(e){return new Promise(function(t,n){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const e=[this.context.canvas.width,this.context.canvas.height];(0,u.apply)(this.pixelTransform,e);const t=this.renderedCenter_,n=this.renderedResolution_,i=this.renderedRotation_,s=this.renderedProjection_,a=this.renderedExtent_,o=this.getLayer(),d=[],l=e[0]/2,c=e[1]/2;d.push(this.getRenderTransform(t,n,i,.5,l,c,0).slice());const g=o.getSource(),f=s.getExtent();if(g.getWrapX()&&s.canWrapX()&&!(0,r.containsExtent)(f,a)){let e=a[0];const s=(0,r.getWidth)(f);let o,u=0;for(;e<f[0];)o=s*--u,d.push(this.getRenderTransform(t,n,i,.5,l,c,o).slice()),e+=s;for(u=0,e=a[2];e>f[2];)o=s*++u,d.push(this.getRenderTransform(t,n,i,.5,l,c,o).slice()),e-=s}this.hitDetectionImageData_=(0,h.createHitDetectionImageData)(e,d,this.renderedFeatures_,o.getStyleFunction(),a,n,i)}t((0,h.hitDetect)(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(t,r,n,i,s){if(this.replayGroup_){const a=r.viewState.resolution,o=r.viewState.rotation,d=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,a,o,n,function(t){const r=(0,e.getUid)(t);if(!(r in u))return u[r]=!0,i(t,d)},d.getDeclutter()?s:null)}}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const o=this.getLayer(),u=o.getSource();if(!u)return!1;const h=e.viewHints[t.default.ANIMATING],l=e.viewHints[t.default.INTERACTING],c=o.getUpdateWhileAnimating(),g=o.getUpdateWhileInteracting();if(!this.dirty_&&!c&&h||!g&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const f=e.extent,p=e.viewState,_=p.projection,y=p.resolution,x=e.pixelRatio,m=o.getRevision(),v=o.getRenderBuffer();let R=o.getRenderOrder();void 0===R&&(R=d.defaultOrder);const I=p.center.slice(),j=(0,r.buffer)(f,v*y),E=[j.slice()],w=_.getExtent();if(u.getWrapX()&&_.canWrapX()&&!(0,r.containsExtent)(w,e.extent)){const e=(0,r.getWidth)(w),t=Math.max((0,r.getWidth)(j)/2,e);j[0]=w[0]-t,j[2]=w[2]+t,(0,n.wrapX)(I,_);const i=(0,r.wrapX)(E[0],_);i[0]<w[0]&&i[2]<w[2]?E.push([i[0]+e,i[1],i[2]+e,i[3]]):i[0]>w[0]&&i[2]>w[2]&&E.push([i[0]-e,i[1],i[2]-e,i[3]])}if(!this.dirty_&&this.renderedResolution_==y&&this.renderedRevision_==m&&this.renderedRenderOrder_==R&&(0,r.containsExtent)(this.renderedExtent_,j))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;const T=new s.default((0,d.getTolerance)(y,x),j,y,x,o.getDeclutter()),F=(0,i.getUserProjection)();let C;if(F){for(let e=0,t=E.length;e<t;++e)u.loadFeatures((0,i.toUserExtent)(E[e],_),y,F);C=(0,i.getTransformFromProjections)(F,_)}else for(let t=0,r=E.length;t<r;++t)u.loadFeatures(E[t],y,_);const D=(0,d.getSquaredTolerance)(y,x),O=function(e){let t;const r=e.getStyleFunction()||o.getStyleFunction();if(r&&(t=r(e,y)),t){const r=this.renderFeature(e,D,t,T,C);this.dirty_=this.dirty_||r}}.bind(this),S=(0,i.toUserExtent)(j,_),G=u.getFeaturesInExtent(S);R&&G.sort(R);for(let t=0,r=G.length;t<r;++t)O(G[t]);this.renderedFeatures_=G;const b=T.finish(),A=new a.default(j,y,x,u.getOverlaps(),b,o.getRenderBuffer());return this.renderedResolution_=y,this.renderedRevision_=m,this.renderedRenderOrder_=R,this.renderedExtent_=j,this.renderedRotation_=p.rotation,this.renderedCenter_=I,this.renderedProjection_=_,this.replayGroup_=A,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,n,i){if(!r)return!1;let s=!1;if(Array.isArray(r))for(let a=0,o=r.length;a<o;++a)s=(0,d.renderFeature)(n,e,r[a],t,this.boundHandleStyleImageChange_,i)||s;else s=(0,d.renderFeature)(n,e,r,t,this.boundHandleStyleImageChange_,i);return s}}var p=f;exports.default=p;
},{"../../util.js":"gvrh","../../ViewHint.js":"LSsd","../../extent.js":"E4kN","../../coordinate.js":"irUP","../../proj.js":"HKfS","../../render/canvas/BuilderGroup.js":"ln4p","../../render/canvas/ExecutorGroup.js":"bDMr","./Layer.js":"XFdq","../vector.js":"NODI","../../transform.js":"fXLG","../../render/canvas/hitdetect.js":"V4Oz"}],"SuA6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./BaseVector.js")),r=t(require("../renderer/canvas/VectorLayer.js"));function t(e){return e&&e.__esModule?e:{default:e}}class s extends e.default{constructor(e){super(e)}createRenderer(){return new r.default(this)}}var u=s;exports.default=u;
},{"./BaseVector.js":"QB7Y","../renderer/canvas/VectorLayer.js":"lGFm"}],"wgkb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadFeaturesXhr=s,exports.xhr=o,exports.setWithCredentials=a;var e=require("./functions.js"),t=n(require("./format/FormatType.js"));function n(e){return e&&e.__esModule?e:{default:e}}let r=!1;function s(e,n,s,o){return function(a,u,i){const l=new XMLHttpRequest;l.open("GET","function"==typeof e?e(a,u,i):e,!0),n.getType()==t.default.ARRAY_BUFFER&&(l.responseType="arraybuffer"),l.withCredentials=r,l.onload=function(e){if(!l.status||l.status>=200&&l.status<300){const e=n.getType();let r;e==t.default.JSON||e==t.default.TEXT?r=l.responseText:e==t.default.XML?(r=l.responseXML)||(r=(new DOMParser).parseFromString(l.responseText,"application/xml")):e==t.default.ARRAY_BUFFER&&(r=l.response),r?s.call(this,n.readFeatures(r,{extent:a,featureProjection:i}),n.readProjection(r)):o.call(this)}else o.call(this)}.bind(this),l.onerror=function(){o.call(this)}.bind(this),l.send()}}function o(t,n){return s(t,n,function(e,t){const n=this;"function"==typeof n.addFeatures&&n.addFeatures(e)},e.VOID)}function a(e){r=e}
},{"./functions.js":"mKAY","./format/FormatType.js":"sCYO"}],"LNLt":[function(require,module,exports) {
"use strict";function e(e,t){return[[-1/0,-1/0,1/0,1/0]]}function t(e,t){return[e]}function n(e){return function(t,n){const o=e.getZForResolution(n),r=e.getTileRangeForExtentAndZ(t,o),u=[],i=[o,0,0];for(i[1]=r.minX;i[1]<=r.maxX;++i[1])for(i[2]=r.minY;i[2]<=r.maxY;++i[2])u.push(e.getTileCoordExtent(i));return u}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=e,exports.bbox=t,exports.tile=n;
},{}],"WE7m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=s(require("../Object.js")),r=require("../proj.js"),i=s(require("./State.js"));function s(t){return t&&t.__esModule?t:{default:t}}class o extends e.default{constructor(t){super(),this.projection_=(0,r.get)(t.projection),this.attributions_=n(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:i.default.READY,this.wrapX_=void 0!==t.wrapX&&t.wrapX}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection_}getResolutions(){return(0,t.abstract)()}getState(){return this.state_}getWrapX(){return this.wrapX_}refresh(){this.changed()}setAttributions(t){this.attributions_=n(t),this.changed()}setState(t){this.state_=t,this.changed()}}function n(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var u=o;exports.default=u;
},{"../util.js":"gvrh","../Object.js":"X18S","../proj.js":"HKfS","./State.js":"mqbu"}],"uZPc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};exports.default=e;
},{}],"yoYZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=i(require("rbush/rbush.js")),s=require("../extent.js"),r=require("../obj.js");function i(t){return t&&t.__esModule?t:{default:t}}class n{constructor(t){this.rbush_=new e.default(t),this.items_={}}insert(e,s){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:s};this.rbush_.insert(r),this.items_[(0,t.getUid)(s)]=r}load(e,s){const r=new Array(s.length);for(let i=0,n=s.length;i<n;i++){const n=e[i],u=s[i],h={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:u};r[i]=h,this.items_[(0,t.getUid)(u)]=h}this.rbush_.load(r)}remove(e){const s=(0,t.getUid)(e),r=this.items_[s];return delete this.items_[s],null!==this.rbush_.remove(r)}update(e,r){const i=this.items_[(0,t.getUid)(r)],n=[i.minX,i.minY,i.maxX,i.maxY];(0,s.equals)(n,e)||(this.remove(r),this.insert(e,r))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let s;for(let r=0,i=t.length;r<i;r++)if(s=e(t[r]))return s;return s}isEmpty(){return(0,r.isEmpty)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return(0,s.createOrUpdate)(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}var u=n;exports.default=u;
},{"../util.js":"gvrh","rbush/rbush.js":"tMOH","../extent.js":"E4kN","../obj.js":"c6bJ"}],"eQui":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.VectorSourceEvent=void 0;var e=require("../util.js"),t=x(require("../Collection.js")),r=x(require("../CollectionEventType.js")),s=x(require("../ObjectEventType.js")),i=require("../array.js"),n=require("../asserts.js"),a=require("../events.js"),o=x(require("../events/Event.js")),u=x(require("../events/EventType.js")),h=require("../extent.js"),l=require("../featureloader.js"),d=require("../functions.js"),f=require("../loadingstrategy.js"),_=require("../obj.js"),c=x(require("./Source.js")),E=x(require("./State.js")),g=x(require("./VectorEventType.js")),v=x(require("../structs/RBush.js"));function x(e){return e&&e.__esModule?e:{default:e}}class F extends o.default{constructor(e,t){super(e),this.feature=t}}exports.VectorSourceEvent=F;class I extends c.default{constructor(e){const r=e||{};super({attributions:r.attributions,projection:void 0,state:E.default.READY,wrapX:void 0===r.wrapX||r.wrapX}),this.loader_=d.VOID,this.format_=r.format,this.overlaps_=void 0===r.overlaps||r.overlaps,this.url_=r.url,void 0!==r.loader?this.loader_=r.loader:void 0!==this.url_&&((0,n.assert)(this.format_,7),this.loader_=(0,l.xhr)(this.url_,this.format_)),this.strategy_=void 0!==r.strategy?r.strategy:f.all;const s=void 0===r.useSpatialIndex||r.useSpatialIndex;let i,a;this.featuresRtree_=s?new v.default:null,this.loadedExtentsRtree_=new v.default,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(r.features)?a=r.features:r.features&&(a=(i=r.features).getArray()),s||void 0!==i||(i=new t.default(a)),void 0!==a&&this.addFeaturesInternal(a),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(t){const r=(0,e.getUid)(t);if(!this.addToIndex_(r,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(r,t);const s=t.getGeometry();if(s){const e=s.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[r]=t;this.dispatchEvent(new F(g.default.ADDFEATURE,t))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[(0,a.listen)(t,u.default.CHANGE,this.handleFeatureChange_,this),(0,a.listen)(t,s.default.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(e,t){let r=!0;const s=t.getId();return void 0!==s&&(s.toString()in this.idIndex_?r=!1:this.idIndex_[s.toString()]=t),r&&((0,n.assert)(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(t){const r=[],s=[],i=[];for(let n=0,a=t.length;n<a;n++){const r=t[n],i=(0,e.getUid)(r);this.addToIndex_(i,r)&&s.push(r)}for(let n=0,a=s.length;n<a;n++){const t=s[n],a=(0,e.getUid)(t);this.setupChangeEvents_(a,t);const o=t.getGeometry();if(o){const e=o.getExtent();r.push(e),i.push(t)}else this.nullGeometryFeatures_[a]=t}this.featuresRtree_&&this.featuresRtree_.load(r,i);for(let e=0,n=s.length;e<n;e++)this.dispatchEvent(new F(g.default.ADDFEATURE,s[e]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(g.default.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(g.default.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(r.default.ADD,function(e){t||(t=!0,this.addFeature(e.element),t=!1)}.bind(this)),e.addEventListener(r.default.REMOVE,function(e){t||(t=!0,this.removeFeature(e.element),t=!1)}.bind(this)),this.featuresCollection_=e}clear(e){if(e){for(const e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(a.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this));for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new F(g.default.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(e)?t(r):void 0})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){const e=t(r);if(e)return e}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray():this.featuresRtree_&&(e=this.featuresRtree_.getAll(),(0,_.isEmpty)(this.nullGeometryFeatures_)||(0,i.extend)(e,(0,_.getValues)(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t}getFeaturesInExtent(e){return this.featuresRtree_?this.featuresRtree_.getInExtent(e):this.featuresCollection_?this.featuresCollection_.getArray():[]}getClosestFeatureToCoordinate(e,t){const r=e[0],s=e[1];let i=null;const n=[NaN,NaN];let a=1/0;const o=[-1/0,-1/0,1/0,1/0],u=t||d.TRUE;return this.featuresRtree_.forEachInExtent(o,function(e){if(u(e)){const t=e.getGeometry(),u=a;if((a=t.closestPointXY(r,s,n,a))<u){i=e;const t=Math.sqrt(a);o[0]=r-t,o[1]=s-t,o[2]=r+t,o[3]=s+t}}}),i}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return void 0!==t?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return void 0!==t?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const r=t.target,s=(0,e.getUid)(r),i=r.getGeometry();if(i){const e=i.getExtent();s in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[s],this.featuresRtree_&&this.featuresRtree_.insert(e,r)):this.featuresRtree_&&this.featuresRtree_.update(e,r)}else s in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(r),this.nullGeometryFeatures_[s]=r);const n=r.getId();if(void 0!==n){const e=n.toString();this.idIndex_[e]!==r&&(this.removeFromIdIndex_(r),this.idIndex_[e]=r)}else this.removeFromIdIndex_(r),this.uidIndex_[s]=r;this.changed(),this.dispatchEvent(new F(g.default.CHANGEFEATURE,r))}hasFeature(t){const r=t.getId();return void 0!==r?r in this.idIndex_:(0,e.getUid)(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_.isEmpty()&&(0,_.isEmpty)(this.nullGeometryFeatures_)}loadFeatures(e,t,r){const s=this.loadedExtentsRtree_,i=this.strategy_(e,t);this.loading=!1;for(let n=0,a=i.length;n<a;++n){const e=i[n];s.forEachInExtent(e,function(t){return(0,h.containsExtent)(t.extent,e)})||(this.loader_.call(this,e,t,r),s.insert(e,{extent:e.slice()}),this.loading=this.loader_!==d.VOID)}}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let r;t.forEachInExtent(e,function(t){if((0,h.equals)(t.extent,e))return r=t,!0}),r&&t.remove(r)}removeFeature(t){const r=(0,e.getUid)(t);r in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[r]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()}removeFeatureInternal(t){const r=(0,e.getUid)(t);this.featureChangeKeys_[r].forEach(a.unlistenByKey),delete this.featureChangeKeys_[r];const s=t.getId();void 0!==s&&delete this.idIndex_[s.toString()],delete this.uidIndex_[r],this.dispatchEvent(new F(g.default.REMOVEFEATURE,t))}removeFromIdIndex_(e){let t=!1;for(const r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){(0,n.assert)(this.format_,7),this.setLoader((0,l.xhr)(e,this.format_))}}var y=I;exports.default=y;
},{"../util.js":"gvrh","../Collection.js":"ZHRB","../CollectionEventType.js":"zerY","../ObjectEventType.js":"ptNe","../array.js":"uHwP","../asserts.js":"kWiW","../events.js":"TEtv","../events/Event.js":"rYf1","../events/EventType.js":"Ak1Z","../extent.js":"E4kN","../featureloader.js":"wgkb","../functions.js":"mKAY","../loadingstrategy.js":"LNLt","../obj.js":"c6bJ","./Source.js":"WE7m","./State.js":"mqbu","./VectorEventType.js":"uZPc","../structs/RBush.js":"yoYZ"}],"wRr6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRegularPolygon=F,exports.createBox=R,exports.default=void 0;var t=N(require("../events/EventType.js")),e=N(require("../Feature.js")),i=N(require("../MapBrowserEventType.js")),s=N(require("../MapBrowserPointerEvent.js")),o=require("../Object.js"),n=require("../coordinate.js"),r=N(require("../events/Event.js")),h=require("../events/condition.js"),a=require("../extent.js"),d=require("../functions.js"),_=N(require("../geom/Circle.js")),u=N(require("../geom/GeometryType.js")),c=N(require("../geom/LineString.js")),l=N(require("../geom/MultiLineString.js")),f=N(require("../geom/MultiPoint.js")),g=N(require("../geom/MultiPolygon.js")),p=N(require("../geom/Point.js")),m=L(require("../geom/Polygon.js")),C=N(require("./Pointer.js")),y=N(require("./Property.js")),P=N(require("../layer/Vector.js")),k=N(require("../source/Vector.js")),T=require("../style/Style.js"),w=require("../proj.js");function O(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return O=function(){return t},t}function L(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=O();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var n=s?Object.getOwnPropertyDescriptor(t,o):null;n&&(n.get||n.set)?Object.defineProperty(i,o,n):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}function N(t){return t&&t.__esModule?t:{default:t}}const D={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},I={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class E extends r.default{constructor(t,e){super(t),this.feature=e}}class v extends C.default{constructor(t){const e=t;e.stopDown||(e.stopDown=d.FALSE),super(e),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=j(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_===D.POLYGON?3:2,this.maxPoints_=t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:d.TRUE;let i=t.geometryFunction;if(!i)if(this.type_===u.default.CIRCLE)i=function(t,e,i){const s=e||new _.default([NaN,NaN]),o=(0,w.fromUserCoordinate)(t[0],i),r=(0,n.squaredDistance)(o,(0,w.fromUserCoordinate)(t[1],i));s.setCenterAndRadius(o,Math.sqrt(r));const h=(0,w.getUserProjection)();return h&&s.transform(i,h),s};else{let t;const e=this.mode_;e===D.POINT?t=p.default:e===D.LINE_STRING?t=c.default:e===D.POLYGON&&(t=m.default),i=function(i,s,o){let n=s;return n?e===D.POLYGON?i[0].length?n.setCoordinates([i[0].concat([i[0][0]])]):n.setCoordinates([]):n.setCoordinates(i):n=new t(i),n}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new P.default({source:new k.default({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:G(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:h.noModifierKeys,this.freehandCondition_,t.freehand?this.freehandCondition_=h.always:this.freehandCondition_=t.freehandCondition?t.freehandCondition:h.shiftKeyOnly,this.addEventListener((0,o.getChangeEventType)(y.default.ACTIVE),this.updateState_)}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===t.default.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==D.POINT&&this.freehandCondition_(e);let s=e.type===i.default.POINTERMOVE,o=!0;if(!this.freehand_&&this.lastDragTime_&&e.type===i.default.POINTERDRAG){Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,s=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&e.type===i.default.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),o=!1):this.freehand_&&e.type===i.default.POINTERDOWN?o=!1:s?(o=e.type===i.default.POINTERMOVE)&&this.freehand_?o=this.handlePointerMove_(e):("mouse"==e.pointerEvent.pointerType||e.type===i.default.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===i.default.DBLCLICK&&(o=!1),super.handleEvent(e)&&o}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new s.default(i.default.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}handleUpEvent(t){let e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const i=this.mode_===D.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate):(this.startDrawing_(t),this.mode_===D.POINT&&this.finishDrawing()),e=!1):this.freehand_&&this.abortDrawing(),!e&&this.stopClick_&&t.stopPropagation(),e}handlePointerMove_(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,i=t.pixel,s=e[0]-i[0],o=e[1]-i[1],n=s*s+o*o;if(this.shouldHandle_=this.freehand_?n>this.squaredClickTolerance_:n<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0}atFinish_(t){let e=!1;if(this.sketchFeature_){let i=!1,s=[this.finishCoordinate_];if(this.mode_===D.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===D.POLYGON){const t=this.sketchCoords_;i=t[0].length>this.minPoints_,s=[t[0][0],t[0][t[0].length-2]]}if(i){const i=t.map;for(let o=0,n=s.length;o<n;o++){const n=s[o],r=i.getPixelFromCoordinate(n),h=t.pixel,a=h[0]-r[0],d=h[1]-r[1],_=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(a*a+d*d)<=_){this.finishCoordinate_=n;break}}}}return e}createOrUpdateSketchPoint_(t){const i=t.coordinate.slice();if(this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(i)}else this.sketchPoint_=new e.default(new p.default(i)),this.updateSketchFeatures_()}startDrawing_(t){const i=t.coordinate,s=t.map.getView().getProjection();this.finishCoordinate_=i,this.mode_===D.POINT?this.sketchCoords_=i.slice():this.mode_===D.POLYGON?(this.sketchCoords_=[[i.slice(),i.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[i.slice(),i.slice()],this.sketchLineCoords_&&(this.sketchLine_=new e.default(new c.default(this.sketchLineCoords_)));const o=this.geometryFunction_(this.sketchCoords_,void 0,s);this.sketchFeature_=new e.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(o),this.updateSketchFeatures_(),this.dispatchEvent(new E(I.DRAWSTART,this.sketchFeature_))}modifyDrawing_(t){let i=t.coordinate;const s=this.sketchFeature_.getGeometry(),o=t.map.getView().getProjection();let n,r,h;if(this.mode_===D.POINT?r=this.sketchCoords_:this.mode_===D.POLYGON?(r=(n=this.sketchCoords_[0])[n.length-1],this.atFinish_(t)&&(i=this.finishCoordinate_.slice())):r=(n=this.sketchCoords_)[n.length-1],r[0]=i[0],r[1]=i[1],this.geometryFunction_(this.sketchCoords_,s,o),this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(i)}if(s.getType()==u.default.POLYGON&&this.mode_!==D.POLYGON){this.sketchLine_||(this.sketchLine_=new e.default);const t=s.getLinearRing(0);(h=this.sketchLine_.getGeometry())?(h.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),h.changed()):(h=new c.default(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(h))}else this.sketchLineCoords_&&(h=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let s,o;this.mode_===D.LINE_STRING?(this.finishCoordinate_=t.slice(),(o=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?o.pop():s=!0),o.push(t.slice()),this.geometryFunction_(o,e,i)):this.mode_===D.POLYGON&&((o=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?o.pop():s=!0),o.push(t.slice()),s&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,e,i)),this.updateSketchFeatures_(),s&&this.finishDrawing()}removeLastPoint(){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),e=this.getMap().getView().getProjection();let i,s;this.mode_===D.LINE_STRING?((i=this.sketchCoords_).splice(-2,1),this.geometryFunction_(i,t,e),i.length>=2&&(this.finishCoordinate_=i[i.length-2].slice())):this.mode_===D.POLYGON&&((i=this.sketchCoords_[0]).splice(-2,1),(s=this.sketchLine_.getGeometry()).setCoordinates(i),this.geometryFunction_(this.sketchCoords_,t,e)),0===i.length&&this.abortDrawing(),this.updateSketchFeatures_()}finishDrawing(){const t=this.abortDrawing_();if(!t)return;let e=this.sketchCoords_;const i=t.getGeometry(),s=this.getMap().getView().getProjection();this.mode_===D.LINE_STRING?(e.pop(),this.geometryFunction_(e,i,s)):this.mode_===D.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i,s),e=i.getCoordinates()),this.type_===u.default.MULTI_POINT?t.setGeometry(new f.default([e])):this.type_===u.default.MULTI_LINE_STRING?t.setGeometry(new l.default([e])):this.type_===u.default.MULTI_POLYGON&&t.setGeometry(new g.default([e])),this.dispatchEvent(new E(I.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new E(I.DRAWABORT,t))}appendCoordinates(t){const e=this.mode_;let i=[];e===D.LINE_STRING?i=this.sketchCoords_:e===D.POLYGON&&(i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);const s=i.pop();for(let o=0;o<t.length;o++)this.addToDrawing_(t[o]);this.addToDrawing_(s)}extend(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new E(I.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)}}function G(){const t=(0,T.createEditingStyle)();return function(e,i){return t[e.getGeometry().getType()]}}function F(t,e){return function(i,s,o){const r=(0,w.fromUserCoordinate)(i[0],o),h=(0,w.fromUserCoordinate)(i[1],o),a=Math.sqrt((0,n.squaredDistance)(r,h)),d=s||(0,m.fromCircle)(new _.default(r),t);let u=e;if(!e){const t=h[0]-r[0],e=h[1]-r[1];u=Math.atan(e/t)-(t<0?Math.PI:0)}(0,m.makeRegular)(d,r,a,u);const c=(0,w.getUserProjection)();return c&&d.transform(o,c),d}}function R(){return function(t,e,i){const s=(0,a.boundingExtent)(t.map(function(t){return(0,w.fromUserCoordinate)(t,i)})),o=[[(0,a.getBottomLeft)(s),(0,a.getBottomRight)(s),(0,a.getTopRight)(s),(0,a.getTopLeft)(s),(0,a.getBottomLeft)(s)]];let n=e;n?n.setCoordinates(o):n=new m.default(o);const r=(0,w.getUserProjection)();return r&&n.transform(i,r),n}}function j(t){let e;return t===u.default.POINT||t===u.default.MULTI_POINT?e=D.POINT:t===u.default.LINE_STRING||t===u.default.MULTI_LINE_STRING?e=D.LINE_STRING:t===u.default.POLYGON||t===u.default.MULTI_POLYGON?e=D.POLYGON:t===u.default.CIRCLE&&(e=D.CIRCLE),e}var M=v;exports.default=M;
},{"../events/EventType.js":"Ak1Z","../Feature.js":"ZfC4","../MapBrowserEventType.js":"vFoD","../MapBrowserPointerEvent.js":"tNGF","../Object.js":"X18S","../coordinate.js":"irUP","../events/Event.js":"rYf1","../events/condition.js":"TePD","../extent.js":"E4kN","../functions.js":"mKAY","../geom/Circle.js":"baQX","../geom/GeometryType.js":"I79K","../geom/LineString.js":"nG5b","../geom/MultiLineString.js":"GJ0c","../geom/MultiPoint.js":"FLg1","../geom/MultiPolygon.js":"UyXA","../geom/Point.js":"xPgY","../geom/Polygon.js":"AvIG","./Pointer.js":"qhn4","./Property.js":"oxEL","../layer/Vector.js":"SuA6","../source/Vector.js":"eQui","../style/Style.js":"AL4u","../proj.js":"HKfS"}],"N8bO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("../Feature.js")),t=p(require("../MapBrowserEventType.js")),n=require("../coordinate.js"),r=p(require("../events/Event.js")),i=require("../extent.js"),a=p(require("../geom/GeometryType.js")),s=p(require("../geom/Point.js")),l=require("../geom/Polygon.js"),o=p(require("./Pointer.js")),u=p(require("../layer/Vector.js")),d=p(require("../source/Vector.js")),c=require("../style/Style.js"),x=require("../proj.js");function p(e){return e&&e.__esModule?e:{default:e}}const h={EXTENTCHANGED:"extentchanged"};class _ extends r.default{constructor(e){super(h.EXTENTCHANGED),this.extent=e}}class g extends o.default{constructor(e){const t=e||{};super(t),this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,e||(e={}),this.extentOverlay_=new u.default({source:new d.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:E(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new u.default({source:new d.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:f(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&this.setExtent(e.extent)}snapToVertex_(e,t){const r=t.getCoordinateFromPixelInternal(e),i=function(e,t){return(0,n.squaredDistanceToSegment)(r,e)-(0,n.squaredDistanceToSegment)(r,t)},a=this.getExtentInternal();if(a){const s=m(a);s.sort(i);const l=s[0];let o=(0,n.closestOnSegment)(r,l);const u=t.getPixelFromCoordinateInternal(o);if((0,n.distance)(e,u)<=this.pixelTolerance_){const e=t.getPixelFromCoordinateInternal(l[0]),r=t.getPixelFromCoordinateInternal(l[1]),i=(0,n.squaredDistance)(u,e),a=(0,n.squaredDistance)(u,r),s=Math.sqrt(Math.min(i,a));return this.snappedToVertex_=s<=this.pixelTolerance_,this.snappedToVertex_&&(o=i>a?l[1]:l[0]),o}}return null}handlePointerMove_(e){const t=e.pixel,n=e.map;let r=this.snapToVertex_(t,n);r||(r=n.getCoordinateFromPixelInternal(t)),this.createOrUpdatePointerFeature_(r)}createOrUpdateExtentFeature_(t){let n=this.extentFeature_;return n?t?n.setGeometry((0,l.fromExtent)(t)):n.setGeometry(void 0):(n=t?new e.default((0,l.fromExtent)(t)):new e.default({}),this.extentFeature_=n,this.extentOverlay_.getSource().addFeature(n)),n}createOrUpdatePointerFeature_(t){let n=this.vertexFeature_;if(n){n.getGeometry().setCoordinates(t)}else n=new e.default(new s.default(t)),this.vertexFeature_=n,this.vertexOverlay_.getSource().addFeature(n);return n}handleEvent(e){return!e.pointerEvent||(e.type!=t.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),super.handleEvent(e),!1)}handleDownEvent(e){const t=e.pixel,n=e.map,r=this.getExtentInternal();let i=this.snapToVertex_(t,n);const a=function(e){let t=null,n=null;return e[0]==r[0]?t=r[2]:e[0]==r[2]&&(t=r[0]),e[1]==r[1]?n=r[3]:e[1]==r[3]&&(n=r[1]),null!==t&&null!==n?[t,n]:null};if(i&&r){const e=i[0]==r[0]||i[0]==r[2]?i[0]:null,t=i[1]==r[1]||i[1]==r[3]?i[1]:null;null!==e&&null!==t?this.pointerHandler_=v(a(i)):null!==e?this.pointerHandler_=y(a([e,r[1]]),a([e,r[3]])):null!==t&&(this.pointerHandler_=y(a([r[0],t]),a([r[2],t])))}else i=n.getCoordinateFromPixelInternal(t),this.setExtent([i[0],i[1],i[0],i[1]]),this.pointerHandler_=v(i);return!0}handleDragEvent(e){if(this.pointerHandler_){const t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}return!0}handleUpEvent(e){this.pointerHandler_=null;const t=this.getExtentInternal();return t&&0!==(0,i.getArea)(t)||this.setExtent(null),!1}setMap(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),super.setMap(e)}getExtent(){return(0,x.toUserExtent)(this.getExtentInternal(),this.getMap().getView().getProjection())}getExtentInternal(){return this.extent_}setExtent(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new _(this.extent_))}}function E(){const e=(0,c.createEditingStyle)();return function(t,n){return e[a.default.POLYGON]}}function f(){const e=(0,c.createEditingStyle)();return function(t,n){return e[a.default.POINT]}}function v(e){return function(t){return(0,i.boundingExtent)([e,t])}}function y(e,t){return e[0]==t[0]?function(n){return(0,i.boundingExtent)([e,[n[0],t[1]]])}:e[1]==t[1]?function(n){return(0,i.boundingExtent)([e,[t[0],n[1]]])}:null}function m(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}var T=g;exports.default=T;
},{"../Feature.js":"ZfC4","../MapBrowserEventType.js":"vFoD","../coordinate.js":"irUP","../events/Event.js":"rYf1","../extent.js":"E4kN","../geom/GeometryType.js":"I79K","../geom/Point.js":"xPgY","../geom/Polygon.js":"AvIG","./Pointer.js":"qhn4","../layer/Vector.js":"SuA6","../source/Vector.js":"eQui","../style/Style.js":"AL4u","../proj.js":"HKfS"}],"M7rc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ModifyEvent=void 0;var e=require("../util.js"),t=C(require("../Collection.js")),r=C(require("../CollectionEventType.js")),i=C(require("../Feature.js")),n=C(require("../MapBrowserEventType.js")),s=require("../array.js"),o=require("../coordinate.js"),a=C(require("../events/Event.js")),d=C(require("../events/EventType.js")),h=require("../events/condition.js"),u=require("../extent.js"),l=C(require("../geom/GeometryType.js")),g=C(require("../geom/Point.js")),c=require("../geom/Polygon.js"),_=C(require("./Pointer.js")),m=C(require("../layer/Vector.js")),f=C(require("../source/Vector.js")),p=C(require("../source/VectorEventType.js")),x=C(require("../structs/RBush.js")),y=require("../style/Style.js"),v=require("../proj.js");function C(e){return e&&e.__esModule?e:{default:e}}const E=0,S=1,F=[0,0,0,0],P=[],T={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class I extends a.default{constructor(e,t,r){super(e),this.features=t,this.mapBrowserEvent=r}}exports.ModifyEvent=I;class G extends _.default{constructor(e){let i;if(super(e),this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:h.primaryAction,this.defaultDeleteCondition_=function(e){return(0,h.altKeyOnly)(e)&&(0,h.singleClick)(e)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:h.always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new x.default,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new m.default({source:new f.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:U(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,e.source?(this.source_=e.source,i=new t.default(this.source_.getFeatures()),this.source_.addEventListener(p.default.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(p.default.REMOVEFEATURE,this.handleSourceRemove_.bind(this))):i=e.features,!i)throw new Error("The modify interaction requires features or a source");this.features_=i,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(r.default.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(r.default.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null}addFeature_(e){const t=e.getGeometry();if(t){const r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}const r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,r),e.addEventListener(d.default.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new I(T.MODIFYSTART,this.features_,e)))}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(d.default.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,r=[];t.forEach(function(t){e===t.feature&&r.push(t)});for(let i=r.length-1;i>=0;--i){const e=r[i];for(let t=this.dragSegments_.length-1;t>=0;--t)this.dragSegments_[t][0]===e&&this.dragSegments_.splice(t,1);t.remove(e)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){const t=e.element;this.removeFeature_(t)}writePointGeometry_(e,t){const r=t.getCoordinates(),i={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),i)}writeMultiPointGeometry_(e,t){const r=t.getCoordinates();for(let i=0,n=r.length;i<n;++i){const n=r[i],s={feature:e,geometry:t,depth:[i],index:i,segment:[n,n]};this.rBush_.insert(t.getExtent(),s)}}writeLineStringGeometry_(e,t){const r=t.getCoordinates();for(let i=0,n=r.length-1;i<n;++i){const n=r.slice(i,i+2),s={feature:e,geometry:t,index:i,segment:n};this.rBush_.insert((0,u.boundingExtent)(n),s)}}writeMultiLineStringGeometry_(e,t){const r=t.getCoordinates();for(let i=0,n=r.length;i<n;++i){const n=r[i];for(let r=0,s=n.length-1;r<s;++r){const s=n.slice(r,r+2),o={feature:e,geometry:t,depth:[i],index:r,segment:s};this.rBush_.insert((0,u.boundingExtent)(s),o)}}}writePolygonGeometry_(e,t){const r=t.getCoordinates();for(let i=0,n=r.length;i<n;++i){const n=r[i];for(let r=0,s=n.length-1;r<s;++r){const s=n.slice(r,r+2),o={feature:e,geometry:t,depth:[i],index:r,segment:s};this.rBush_.insert((0,u.boundingExtent)(s),o)}}}writeMultiPolygonGeometry_(e,t){const r=t.getCoordinates();for(let i=0,n=r.length;i<n;++i){const n=r[i];for(let r=0,s=n.length;r<s;++r){const s=n[r];for(let n=0,o=s.length-1;n<o;++n){const o=s.slice(n,n+2),a={feature:e,geometry:t,depth:[r,i],index:n,segment:o};this.rBush_.insert((0,u.boundingExtent)(o),a)}}}}writeCircleGeometry_(e,t){const r=t.getCenter(),i={feature:e,geometry:t,index:E,segment:[r,r]},n={feature:e,geometry:t,index:S,segment:[r,r]},s=[i,n];i.featureSegments=s,n.featureSegments=s,this.rBush_.insert((0,u.createOrUpdateFromCoordinate)(r),i);let o=t;const a=(0,v.getUserProjection)();if(a&&this.getMap()){const e=this.getMap().getView().getProjection();o=o.clone().transform(a,e),o=(0,c.fromCircle)(o).transform(e,a)}this.rBush_.insert(o.getExtent(),n)}writeGeometryCollectionGeometry_(e,t){const r=t.getGeometriesArray();for(let i=0;i<r.length;++i){const t=r[i];(0,this.SEGMENT_WRITERS_[t.getType()])(e,t)}}createOrUpdateVertexFeature_(e){let t=this.vertexFeature_;if(t){t.getGeometry().setCoordinates(e)}else t=new i.default(new g.default(e)),this.vertexFeature_=t,this.overlay_.getSource().addFeature(t);return t}handleEvent(e){if(!e.pointerEvent)return!0;let t;return this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=n.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=n.default.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==n.default.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);const t=e.coordinate;for(let r=0,i=this.dragSegments_.length;r<i;++r){const i=this.dragSegments_[r],n=i[0],s=n.depth,a=n.geometry;let d;const h=n.segment,u=i[1];for(;t.length<a.getStride();)t.push(h[u][t.length]);switch(a.getType()){case l.default.POINT:d=t,h[0]=t,h[1]=t;break;case l.default.MULTI_POINT:(d=a.getCoordinates())[n.index]=t,h[0]=t,h[1]=t;break;case l.default.LINE_STRING:(d=a.getCoordinates())[n.index+u]=t,h[u]=t;break;case l.default.MULTI_LINE_STRING:case l.default.POLYGON:(d=a.getCoordinates())[s[0]][n.index+u]=t,h[u]=t;break;case l.default.MULTI_POLYGON:(d=a.getCoordinates())[s[1]][s[0]][n.index+u]=t,h[u]=t;break;case l.default.CIRCLE:if(h[0]=t,h[1]=t,n.index===E)this.changingFeature_=!0,a.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;const r=e.map.getView().getProjection();let i=(0,o.distance)((0,v.fromUserCoordinate)(a.getCenter(),r),(0,v.fromUserCoordinate)(t,r));const n=(0,v.getUserProjection)();if(n){const e=a.clone().transform(n,r);e.setRadius(i),i=e.transform(r,n).getRadius()}a.setRadius(i),this.changingFeature_=!1}}d&&this.setGeometryCoordinates_(a,d)}this.createOrUpdateVertexFeature_(t)}handleDownEvent(t){if(!this.condition_(t))return!1;const r=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,r),this.dragSegments_.length=0,this.modified_=!1;const i=this.vertexFeature_;if(i){const n=t.map.getView().getProjection(),s=[],a=i.getGeometry().getCoordinates(),d=(0,u.boundingExtent)([a]),h=this.rBush_.getInExtent(d),g={};h.sort(w);for(let i=0,u=h.length;i<u;++i){const d=h[i],u=d.segment;let c=(0,e.getUid)(d.feature);const _=d.depth;if(_&&(c+="-"+_.join("-")),g[c]||(g[c]=new Array(2)),d.geometry.getType()!==l.default.CIRCLE||d.index!==S)if(!(0,o.equals)(u[0],a)||g[c][0])if(!(0,o.equals)(u[1],a)||g[c][1])(0,e.getUid)(u)in this.vertexSegments_&&!g[c][0]&&!g[c][1]&&this.insertVertexCondition_(t)&&s.push([d,a]);else{if((d.geometry.getType()===l.default.LINE_STRING||d.geometry.getType()===l.default.MULTI_LINE_STRING)&&g[c][0]&&0===g[c][0].index)continue;this.dragSegments_.push([d,1]),g[c][1]=d}else this.dragSegments_.push([d,0]),g[c][0]=d;else{const e=L(r,d,n);(0,o.equals)(e,a)&&!g[c][0]&&(this.dragSegments_.push([d,0]),g[c][0]=d)}}s.length&&this.willModifyFeatures_(t);for(let e=s.length-1;e>=0;--e)this.insertVertex_.apply(this,s[e])}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const r=this.dragSegments_[t][0],i=r.geometry;if(i.getType()===l.default.CIRCLE){const t=i.getCenter(),n=r.featureSegments[0],s=r.featureSegments[1];n.segment[0]=t,n.segment[1]=t,s.segment[0]=t,s.segment[1]=t,this.rBush_.update((0,u.createOrUpdateFromCoordinate)(t),n);let o=i;const a=(0,v.getUserProjection)();if(a){const t=e.map.getView().getProjection();o=o.clone().transform(a,t),o=(0,c.fromCircle)(o).transform(t,a)}this.rBush_.update(o.getExtent(),s)}else this.rBush_.update((0,u.boundingExtent)(r.segment),r)}return this.modified_&&(this.dispatchEvent(new I(T.MODIFYEND,this.features_,e)),this.modified_=!1),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(t,r,i){const n=i||r.getCoordinateFromPixel(t),s=r.getView().getProjection(),a=function(e,t){return M(n,e,s)-M(n,t,s)},d=(0,v.fromUserExtent)((0,u.createOrUpdateFromCoordinate)(n,F),s),h=r.getView().getResolution()*this.pixelTolerance_,g=(0,v.toUserExtent)((0,u.buffer)(d,h,F),s),c=this.rBush_.getInExtent(g);if(c.length>0){c.sort(a);const i=c[0],d=i.segment;let h=L(n,i,s);const u=r.getPixelFromCoordinate(h);let g=(0,o.distance)(t,u);if(g<=this.pixelTolerance_){const t={};if(i.geometry.getType()===l.default.CIRCLE&&i.index===S)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h);else{const i=r.getPixelFromCoordinate(d[0]),n=r.getPixelFromCoordinate(d[1]),s=(0,o.squaredDistance)(u,i),a=(0,o.squaredDistance)(u,n);g=Math.sqrt(Math.min(s,a)),this.snappedToVertex_=g<=this.pixelTolerance_,this.snappedToVertex_&&(h=s>a?d[1]:d[0]),this.createOrUpdateVertexFeature_(h);for(let r=1,h=c.length;r<h;++r){const i=c[r].segment;if(!((0,o.equals)(d[0],i[0])&&(0,o.equals)(d[1],i[1])||(0,o.equals)(d[0],i[1])&&(0,o.equals)(d[1],i[0])))break;t[(0,e.getUid)(i)]=!0}}return t[(0,e.getUid)(d)]=!0,void(this.vertexSegments_=t)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const r=e.segment,i=e.feature,n=e.geometry,s=e.depth,o=e.index;let a;for(;t.length<n.getStride();)t.push(0);switch(n.getType()){case l.default.MULTI_LINE_STRING:case l.default.POLYGON:(a=n.getCoordinates())[s[0]].splice(o+1,0,t);break;case l.default.MULTI_POLYGON:(a=n.getCoordinates())[s[1]][s[0]].splice(o+1,0,t);break;case l.default.LINE_STRING:(a=n.getCoordinates()).splice(o+1,0,t);break;default:return}this.setGeometryCoordinates_(n,a);const d=this.rBush_;d.remove(e),this.updateSegmentIndices_(n,o,s,1);const h={segment:[r[0],t],feature:i,geometry:n,depth:s,index:o};d.insert((0,u.boundingExtent)(h.segment),h),this.dragSegments_.push([h,1]);const g={segment:[t,r[1]],feature:i,geometry:n,depth:s,index:o+1};d.insert((0,u.boundingExtent)(g.segment),g),this.dragSegments_.push([g,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=n.default.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e);const t=this.removeVertex_();return this.dispatchEvent(new I(T.MODIFYEND,this.features_,e)),this.modified_=!1,t}return!1}removeVertex_(){const t=this.dragSegments_,r={};let i,n,s,o,a,d,h,g,c,_,m,f=!1;for(a=t.length-1;a>=0;--a)_=(s=t[a])[0],m=(0,e.getUid)(_.feature),_.depth&&(m+="-"+_.depth.join("-")),m in r||(r[m]={}),0===s[1]?(r[m].right=_,r[m].index=_.index):1==s[1]&&(r[m].left=_,r[m].index=_.index+1);for(m in r){switch(c=r[m].right,h=r[m].left,(g=(d=r[m].index)-1)<0&&(g=0),i=n=(o=(_=void 0!==h?h:c).geometry).getCoordinates(),f=!1,o.getType()){case l.default.MULTI_LINE_STRING:n[_.depth[0]].length>2&&(n[_.depth[0]].splice(d,1),f=!0);break;case l.default.LINE_STRING:n.length>2&&(n.splice(d,1),f=!0);break;case l.default.MULTI_POLYGON:i=i[_.depth[1]];case l.default.POLYGON:(i=i[_.depth[0]]).length>4&&(d==i.length-1&&(d=0),i.splice(d,1),f=!0,0===d&&(i.pop(),i.push(i[0]),g=i.length-1))}if(f){this.setGeometryCoordinates_(o,n);const e=[];if(void 0!==h&&(this.rBush_.remove(h),e.push(h.segment[0])),void 0!==c&&(this.rBush_.remove(c),e.push(c.segment[1])),void 0!==h&&void 0!==c){const t={depth:_.depth,feature:_.feature,geometry:_.geometry,index:g,segment:e};this.rBush_.insert((0,u.boundingExtent)(t.segment),t)}this.updateSegmentIndices_(o,d,_.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return f}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,r,i){this.rBush_.forEachInExtent(e.getExtent(),function(n){n.geometry===e&&(void 0===r||void 0===n.depth||(0,s.equals)(n.depth,r))&&n.index>t&&(n.index+=i)})}}function w(e,t){return e.index-t.index}function M(e,t,r){const i=t.geometry;if(i.getType()===l.default.CIRCLE){let n=i;if(t.index===S){const t=(0,v.getUserProjection)();t&&(n=n.clone().transform(t,r));const i=(0,o.squaredDistance)(n.getCenter(),(0,v.fromUserCoordinate)(e,r)),s=Math.sqrt(i)-n.getRadius();return s*s}}const n=(0,v.fromUserCoordinate)(e,r);return P[0]=(0,v.fromUserCoordinate)(t.segment[0],r),P[1]=(0,v.fromUserCoordinate)(t.segment[1],r),(0,o.squaredDistanceToSegment)(n,P)}function L(e,t,r){const i=t.geometry;if(i.getType()===l.default.CIRCLE&&t.index===S){let t=i;const n=(0,v.getUserProjection)();return n&&(t=t.clone().transform(n,r)),(0,v.toUserCoordinate)(t.getClosestPoint((0,v.fromUserCoordinate)(e,r)),r)}const n=(0,v.fromUserCoordinate)(e,r);return P[0]=(0,v.fromUserCoordinate)(t.segment[0],r),P[1]=(0,v.fromUserCoordinate)(t.segment[1],r),(0,v.toUserCoordinate)((0,o.closestOnSegment)(n,P),r)}function U(){const e=(0,y.createEditingStyle)();return function(t,r){return e[l.default.POINT]}}var N=G;exports.default=N;
},{"../util.js":"gvrh","../Collection.js":"ZHRB","../CollectionEventType.js":"zerY","../Feature.js":"ZfC4","../MapBrowserEventType.js":"vFoD","../array.js":"uHwP","../coordinate.js":"irUP","../events/Event.js":"rYf1","../events/EventType.js":"Ak1Z","../events/condition.js":"TePD","../extent.js":"E4kN","../geom/GeometryType.js":"I79K","../geom/Point.js":"xPgY","../geom/Polygon.js":"AvIG","./Pointer.js":"qhn4","../layer/Vector.js":"SuA6","../source/Vector.js":"eQui","../source/VectorEventType.js":"uZPc","../structs/RBush.js":"yoYZ","../style/Style.js":"AL4u","../proj.js":"HKfS"}],"jAtE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=h(require("../CollectionEventType.js")),i=require("../array.js"),s=h(require("../events/Event.js")),r=require("../events/condition.js"),n=require("../functions.js"),o=h(require("../geom/GeometryType.js")),a=h(require("./Interaction.js")),l=require("../obj.js"),u=require("../style/Style.js"),d=h(require("../Collection.js"));function h(e){return e&&e.__esModule?e:{default:e}}const c={SELECT:"select"};class _ extends s.default{constructor(e,t,i,s){super(e),this.selected=t,this.deselected=i,this.mapBrowserEvent=s}}const y={};class f extends a.default{constructor(e){super({handleEvent:g});const t=e||{};let s;if(this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:r.singleClick,this.addCondition_=t.addCondition?t.addCondition:r.never,this.removeCondition_=t.removeCondition?t.removeCondition:r.never,this.toggleCondition_=t.toggleCondition?t.toggleCondition:r.shiftKeyOnly,this.multi_=!!t.multi&&t.multi,this.filter_=t.filter?t.filter:n.TRUE,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=void 0!==t.style?t.style:v(),this.features_=t.features||new d.default,t.layers)if("function"==typeof t.layers)s=t.layers;else{const e=t.layers;s=function(t){return(0,i.includes)(e,t)}}else s=n.TRUE;this.layerFilter_=s,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,i){this.featureLayerAssociation_[(0,e.getUid)(t)]=i}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[(0,e.getUid)(t)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(t.default.ADD,this.boundAddFeature_),this.features_.addEventListener(t.default.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(t.default.ADD,this.boundAddFeature_),this.features_.removeEventListener(t.default.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;this.style_&&this.applySelectedStyle_(t)}removeFeature_(e){const t=e.element;this.style_&&this.restorePreviousStyle_(t)}getStyle(){return this.style_}applySelectedStyle_(t){const i=(0,e.getUid)(t);i in y||(y[i]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){const i=(0,e.getUid)(t),s=this.getMap().getInteractions().getArray().filter(function(e){return e instanceof f&&e.getStyle()&&-1!==e.getFeatures().getArray().indexOf(t)});s.length>0?t.setStyle(s[s.length-1].getStyle()):(t.setStyle(y[i]),delete y[i])}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[(0,e.getUid)(t)]}}function g(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),s=this.removeCondition_(e),r=this.toggleCondition_(e),n=!t&&!s&&!r,o=e.map,a=this.getFeatures(),u=[],d=[];if(n){(0,l.clear)(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.filter_(e,t))return d.push(e),this.addFeatureLayerAssociation_(e,t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let e=a.getLength()-1;e>=0;--e){const t=a.item(e),i=d.indexOf(t);i>-1?d.splice(i,1):(a.remove(t),u.push(t))}0!==d.length&&a.extend(d)}else{o.forEachFeatureAtPixel(e.pixel,function(e,n){if(this.filter_(e,n))return!t&&!r||(0,i.includes)(a.getArray(),e)?(s||r)&&(0,i.includes)(a.getArray(),e)&&(u.push(e),this.removeFeatureLayerAssociation_(e)):(d.push(e),this.addFeatureLayerAssociation_(e,n)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let e=u.length-1;e>=0;--e)a.remove(u[e]);a.extend(d)}return(d.length>0||u.length>0)&&this.dispatchEvent(new _(c.SELECT,d,u,e)),!0}function v(){const e=(0,u.createEditingStyle)();return(0,i.extend)(e[o.default.POLYGON],e[o.default.LINE_STRING]),(0,i.extend)(e[o.default.GEOMETRY_COLLECTION],e[o.default.LINE_STRING]),function(t){return t.getGeometry()?e[t.getGeometry().getType()]:null}}var p=f;exports.default=p;
},{"../util.js":"gvrh","../CollectionEventType.js":"zerY","../array.js":"uHwP","../events/Event.js":"rYf1","../events/condition.js":"TePD","../functions.js":"mKAY","../geom/GeometryType.js":"I79K","./Interaction.js":"kIie","../obj.js":"c6bJ","../style/Style.js":"AL4u","../Collection.js":"ZHRB"}],"UJQJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=_(require("../CollectionEventType.js")),r=require("../coordinate.js"),i=require("../events.js"),s=_(require("../events/EventType.js")),n=require("../extent.js"),o=require("../functions.js"),a=_(require("../geom/GeometryType.js")),h=require("../geom/Polygon.js"),u=_(require("./Pointer.js")),l=require("../obj.js"),d=_(require("../source/VectorEventType.js")),c=_(require("../structs/RBush.js")),g=require("../proj.js");function _(e){return e&&e.__esModule?e:{default:e}}function f(e){return e.feature?e.feature:e.element?e.element:void 0}const m=[];class x extends u.default{constructor(e){const t=e||{},r=t;r.handleDownEvent||(r.handleDownEvent=o.TRUE),r.stopDown||(r.stopDown=o.FALSE),super(r),this.source_=t.source?t.source:null,this.vertex_=void 0===t.vertex||t.vertex,this.edge_=void 0===t.edge||t.edge,this.features_=t.features?t.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.rBush_=new c.default,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this)}}addFeature(t,r){const o=void 0===r||r,a=(0,e.getUid)(t),h=t.getGeometry();if(h){const e=this.SEGMENT_WRITERS_[h.getType()];e&&(this.indexedFeaturesExtents_[a]=h.getExtent((0,n.createEmpty)()),e(t,h))}o&&(this.featureChangeListenerKeys_[a]=(0,i.listen)(t,s.default.CHANGE,this.handleFeatureChange_,this))}forEachFeatureAdd_(e){this.addFeature(e)}forEachFeatureRemove_(e){this.removeFeature(e)}getFeatures_(){let e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e}handleEvent(e){const t=this.snapTo(e.pixel,e.coordinate,e.map);return t.snapped&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel),super.handleEvent(e)}handleFeatureAdd_(e){const t=f(e);this.addFeature(t)}handleFeatureRemove_(e){const t=f(e);this.removeFeature(t)}handleFeatureChange_(t){const r=t.target;if(this.handlingDownUpSequence){const t=(0,e.getUid)(r);t in this.pendingFeatures_||(this.pendingFeatures_[t]=r)}else this.updateFeature_(r)}handleUpEvent(e){const t=(0,l.getValues)(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}removeFeature(t,r){const s=void 0===r||r,n=(0,e.getUid)(t),o=this.indexedFeaturesExtents_[n];if(o){const e=this.rBush_,r=[];e.forEachInExtent(o,function(e){t===e.feature&&r.push(e)});for(let t=r.length-1;t>=0;--t)e.remove(r[t])}s&&((0,i.unlistenByKey)(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])}setMap(e){const r=this.getMap(),s=this.featuresListenerKeys_,n=this.getFeatures_();r&&(s.forEach(i.unlistenByKey),s.length=0,n.forEach(this.forEachFeatureRemove_.bind(this))),super.setMap(e),e&&(this.features_?s.push((0,i.listen)(this.features_,t.default.ADD,this.handleFeatureAdd_,this),(0,i.listen)(this.features_,t.default.REMOVE,this.handleFeatureRemove_,this)):this.source_&&s.push((0,i.listen)(this.source_,d.default.ADDFEATURE,this.handleFeatureAdd_,this),(0,i.listen)(this.source_,d.default.REMOVEFEATURE,this.handleFeatureRemove_,this)),n.forEach(this.forEachFeatureAdd_.bind(this)))}snapTo(e,t,i){const s=i.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),o=i.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),h=(0,n.boundingExtent)([s,o]);let u=this.rBush_.getInExtent(h);this.vertex_&&!this.edge_&&(u=u.filter(function(e){return e.feature.getGeometry().getType()!==a.default.CIRCLE}));let l=!1,d=null,c=null;if(0===u.length)return{snapped:l,vertex:d,vertexPixel:c};const _=i.getView().getProjection(),f=(0,g.fromUserCoordinate)(t,_);let x,p=1/0;for(let n=0;n<u.length;++n){const e=u[n];m[0]=(0,g.fromUserCoordinate)(e.segment[0],_),m[1]=(0,g.fromUserCoordinate)(e.segment[1],_);const t=(0,r.squaredDistanceToSegment)(f,m);t<p&&(x=e,p=t)}const E=x.segment;if(this.vertex_&&!this.edge_){const t=i.getPixelFromCoordinate(E[0]),s=i.getPixelFromCoordinate(E[1]),n=(0,r.squaredDistance)(e,t),o=(0,r.squaredDistance)(e,s);Math.sqrt(Math.min(n,o))<=this.pixelTolerance_&&(l=!0,d=n>o?E[1]:E[0],c=i.getPixelFromCoordinate(d))}else if(this.edge_){const t=x.feature.getGeometry().getType()===a.default.CIRCLE;if(t){let e=x.feature.getGeometry();const t=(0,g.getUserProjection)();t&&(e=e.clone().transform(t,_)),d=(0,g.toUserCoordinate)((0,r.closestOnCircle)(f,e),_)}else m[0]=(0,g.fromUserCoordinate)(E[0],_),m[1]=(0,g.fromUserCoordinate)(E[1],_),d=(0,g.toUserCoordinate)((0,r.closestOnSegment)(f,m),_);if(c=i.getPixelFromCoordinate(d),(0,r.distance)(e,c)<=this.pixelTolerance_&&(l=!0,this.vertex_&&!t)){const e=i.getPixelFromCoordinate(E[0]),t=i.getPixelFromCoordinate(E[1]),s=(0,r.squaredDistance)(c,e),n=(0,r.squaredDistance)(c,t);Math.sqrt(Math.min(s,n))<=this.pixelTolerance_&&(d=s>n?E[1]:E[0],c=i.getPixelFromCoordinate(d))}}return l&&(c=[Math.round(c[0]),Math.round(c[1])]),{snapped:l,vertex:d,vertexPixel:c}}updateFeature_(e){this.removeFeature(e,!1),this.addFeature(e,!1)}writeCircleGeometry_(e,t){const r=this.getMap().getView().getProjection();let i=t;const s=(0,g.getUserProjection)();s&&(i=i.clone().transform(s,r));const o=(0,h.fromCircle)(i);s&&o.transform(r,s);const a=o.getCoordinates()[0];for(let h=0,u=a.length-1;h<u;++h){const t=a.slice(h,h+2),r={feature:e,segment:t};this.rBush_.insert((0,n.boundingExtent)(t),r)}}writeGeometryCollectionGeometry_(e,t){const r=t.getGeometriesArray();for(let i=0;i<r.length;++i){const t=this.SEGMENT_WRITERS_[r[i].getType()];t&&t(e,r[i])}}writeLineStringGeometry_(e,t){const r=t.getCoordinates();for(let i=0,s=r.length-1;i<s;++i){const t=r.slice(i,i+2),s={feature:e,segment:t};this.rBush_.insert((0,n.boundingExtent)(t),s)}}writeMultiLineStringGeometry_(e,t){const r=t.getCoordinates();for(let i=0,s=r.length;i<s;++i){const t=r[i];for(let r=0,i=t.length-1;r<i;++r){const i=t.slice(r,r+2),s={feature:e,segment:i};this.rBush_.insert((0,n.boundingExtent)(i),s)}}}writeMultiPointGeometry_(e,t){const r=t.getCoordinates();for(let i=0,s=r.length;i<s;++i){const s=r[i],n={feature:e,segment:[s,s]};this.rBush_.insert(t.getExtent(),n)}}writeMultiPolygonGeometry_(e,t){const r=t.getCoordinates();for(let i=0,s=r.length;i<s;++i){const t=r[i];for(let r=0,i=t.length;r<i;++r){const i=t[r];for(let t=0,r=i.length-1;t<r;++t){const r=i.slice(t,t+2),s={feature:e,segment:r};this.rBush_.insert((0,n.boundingExtent)(r),s)}}}}writePointGeometry_(e,t){const r=t.getCoordinates(),i={feature:e,segment:[r,r]};this.rBush_.insert(t.getExtent(),i)}writePolygonGeometry_(e,t){const r=t.getCoordinates();for(let i=0,s=r.length;i<s;++i){const t=r[i];for(let r=0,i=t.length-1;r<i;++r){const i=t.slice(r,r+2),s={feature:e,segment:i};this.rBush_.insert((0,n.boundingExtent)(i),s)}}}}var p=x;exports.default=p;
},{"../util.js":"gvrh","../CollectionEventType.js":"zerY","../coordinate.js":"irUP","../events.js":"TEtv","../events/EventType.js":"Ak1Z","../extent.js":"E4kN","../functions.js":"mKAY","../geom/GeometryType.js":"I79K","../geom/Polygon.js":"AvIG","./Pointer.js":"qhn4","../obj.js":"c6bJ","../source/VectorEventType.js":"uZPc","../structs/RBush.js":"yoYZ","../proj.js":"HKfS"}],"MSuo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TranslateEvent=void 0;var t=o(require("../Collection.js")),e=require("../Object.js"),s=o(require("../events/Event.js")),a=require("../functions.js"),r=require("../array.js"),i=o(require("./Pointer.js")),n=o(require("./Property.js"));function o(t){return t&&t.__esModule?t:{default:t}}const l={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"};class h extends s.default{constructor(t,e,s,a,r){super(t),this.features=e,this.coordinate=s,this.startCoordinate=a,this.mapBrowserEvent=r}}exports.TranslateEvent=h;class u extends i.default{constructor(t){const s=t||{};let i;if(super(s),this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=void 0!==s.features?s.features:null,s.layers)if("function"==typeof s.layers)i=s.layers;else{const t=s.layers;i=function(e){return(0,r.includes)(t,e)}}else i=a.TRUE;this.layerFilter_=i,this.filter_=s.filter?s.filter:a.TRUE,this.hitTolerance_=s.hitTolerance?s.hitTolerance:0,this.lastFeature_=null,this.addEventListener((0,e.getChangeEventType)(n.default.ACTIVE),this.handleActiveChanged_)}handleDownEvent(e){if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);const s=this.features_||new t.default([this.lastFeature_]);return this.dispatchEvent(new h(l.TRANSLATESTART,s,e.coordinate,this.startCoordinate_,e)),!0}return!1}handleUpEvent(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);const s=this.features_||new t.default([this.lastFeature_]);return this.dispatchEvent(new h(l.TRANSLATEEND,s,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1}handleDragEvent(e){if(this.lastCoordinate_){const s=e.coordinate,a=s[0]-this.lastCoordinate_[0],r=s[1]-this.lastCoordinate_[1],i=this.features_||new t.default([this.lastFeature_]);i.forEach(function(t){const e=t.getGeometry();e.translate(a,r),t.setGeometry(e)}),this.lastCoordinate_=s,this.dispatchEvent(new h(l.TRANSLATING,i,s,this.startCoordinate_,e))}}handleMoveEvent(t){const e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||(0,r.includes)(this.features_.getArray(),t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(t){this.hitTolerance_=t}setMap(t){const e=this.getMap();super.setMap(t),this.updateState_(e)}handleActiveChanged_(){this.updateState_(null)}updateState_(t){let e=this.getMap();const s=this.getActive();if((!e||!s)&&(e=e||t)){e.getViewport().classList.remove("ol-grab","ol-grabbing")}}}var d=u;exports.default=d;
},{"../Collection.js":"ZHRB","../Object.js":"X18S","../events/Event.js":"rYf1","../functions.js":"mKAY","../array.js":"uHwP","./Pointer.js":"qhn4","./Property.js":"oxEL"}],"ohV4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=O,Object.defineProperty(exports,"DoubleClickZoom",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"DragPan",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"DragRotate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"DragZoom",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"KeyboardPan",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"KeyboardZoom",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"MouseWheelZoom",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"PinchRotate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"PinchZoom",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"DragAndDrop",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"DragBox",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"DragRotateAndZoom",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"Draw",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"Extent",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"Interaction",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"Modify",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"Pointer",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"Select",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(exports,"Snap",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"Translate",{enumerable:!0,get:function(){return h.default}});var e=q(require("./Collection.js")),t=q(require("./Kinetic.js")),r=q(require("./interaction/DoubleClickZoom.js")),n=q(require("./interaction/DragPan.js")),o=q(require("./interaction/DragRotate.js")),i=q(require("./interaction/DragZoom.js")),u=q(require("./interaction/KeyboardPan.js")),a=q(require("./interaction/KeyboardZoom.js")),d=q(require("./interaction/MouseWheelZoom.js")),c=q(require("./interaction/PinchRotate.js")),f=q(require("./interaction/PinchZoom.js")),l=require("./events/condition.js"),s=q(require("./interaction/DragAndDrop.js")),p=q(require("./interaction/DragBox.js")),b=q(require("./interaction/DragRotateAndZoom.js")),m=q(require("./interaction/Draw.js")),j=q(require("./interaction/Extent.js")),g=q(require("./interaction/Interaction.js")),P=q(require("./interaction/Modify.js")),y=q(require("./interaction/Pointer.js")),D=q(require("./interaction/Select.js")),x=q(require("./interaction/Snap.js")),h=q(require("./interaction/Translate.js"));function q(e){return e&&e.__esModule?e:{default:e}}function O(s){const p=s||{},b=new e.default,m=new t.default(-.005,.05,100);return(void 0===p.altShiftDragRotate||p.altShiftDragRotate)&&b.push(new o.default),(void 0===p.doubleClickZoom||p.doubleClickZoom)&&b.push(new r.default({delta:p.zoomDelta,duration:p.zoomDuration})),(void 0===p.dragPan||p.dragPan)&&b.push(new n.default({condition:p.onFocusOnly?l.focus:void 0,kinetic:m})),(void 0===p.pinchRotate||p.pinchRotate)&&b.push(new c.default),(void 0===p.pinchZoom||p.pinchZoom)&&b.push(new f.default({duration:p.zoomDuration})),(void 0===p.keyboard||p.keyboard)&&(b.push(new u.default),b.push(new a.default({delta:p.zoomDelta,duration:p.zoomDuration}))),(void 0===p.mouseWheelZoom||p.mouseWheelZoom)&&b.push(new d.default({condition:p.onFocusOnly?l.focus:void 0,duration:p.zoomDuration})),(void 0===p.shiftDragZoom||p.shiftDragZoom)&&b.push(new i.default({duration:p.zoomDuration})),b}
},{"./Collection.js":"ZHRB","./Kinetic.js":"TAWh","./interaction/DoubleClickZoom.js":"ksKa","./interaction/DragPan.js":"ceYo","./interaction/DragRotate.js":"LB7K","./interaction/DragZoom.js":"nRHY","./interaction/KeyboardPan.js":"leux","./interaction/KeyboardZoom.js":"JNNI","./interaction/MouseWheelZoom.js":"LWVd","./interaction/PinchRotate.js":"K4Bc","./interaction/PinchZoom.js":"j0Sj","./events/condition.js":"TePD","./interaction/DragAndDrop.js":"hngx","./interaction/DragBox.js":"gycp","./interaction/DragRotateAndZoom.js":"NBbe","./interaction/Draw.js":"wRr6","./interaction/Extent.js":"N8bO","./interaction/Interaction.js":"kIie","./interaction/Modify.js":"M7rc","./interaction/Pointer.js":"qhn4","./interaction/Select.js":"jAtE","./interaction/Snap.js":"UJQJ","./interaction/Translate.js":"MSuo"}],"Zd8W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./PluggableMap.js")),r=require("./control.js"),t=require("./interaction.js"),s=require("./obj.js"),o=u(require("./renderer/Composite.js"));function u(e){return e&&e.__esModule?e:{default:e}}class n extends e.default{constructor(e){(e=(0,s.assign)({},e)).controls||(e.controls=(0,r.defaults)()),e.interactions||(e.interactions=(0,t.defaults)()),super(e)}createRenderer(){return new o.default(this)}}var a=n;exports.default=a;
},{"./PluggableMap.js":"gqD6","./control.js":"KNR5","./interaction.js":"ohV4","./obj.js":"c6bJ","./renderer/Composite.js":"WZwh"}],"KXx2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MapWithActions=void 0;var t=require("ol/src/ol/interaction"),e=n(require("ol/src/ol/Map"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return function(){var e,n=p(t);if(h()){var o=p(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return f(this,e)}}function f(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(n){u(r,e.default);var o=s(r);function r(e){var n;i(this,r);var c=!(e=e||{}).disableRotation,u=!e.disableMouseWheelZoom,a=(0,t.defaults)({altShiftDragRotate:c,pinchRotate:c,mouseWheelZoom:u});if(e&&e.interactions&&e.interactions.forEach(function(t){a.push(t)}),e.interactions=a,(n=o.call(this,e)).actions=[],e.actions.forEach(function(t){n.addAction(t)}),setTimeout(function(){n.activateDefaultAction()}),!e.disableEscapeKey){var s=function(t){t&&t.keyCode&&27==t.keyCode&&n.activateDefaultAction()};document.body.removeEventListener("keydown",s),document.body.addEventListener("keydown",s)}return n}return c(r,null,[{key:"CLICK_COUNT_TIMEOUT",get:function(){return 300}}]),c(r,[{key:"activateAction",value:function(t){if(this.currentAction){if(this.currentAction==t)return!1;this.currentAction.deactivate(),clearTimeout(this.timeout)}this.currentAction=t,this.timeout=setTimeout(function(){t.activate()},r.CLICK_COUNT_TIMEOUT)}},{key:"addAction",value:function(t){var e=this;this.actions.push(t),t.map=this,t.interactions.forEach(function(t){e.addInteraction(t)})}},{key:"removeAction",value:function(t){var e=this;this.currentAction==t&&this.activateDefaultAction(),t.interactions.forEach(function(t){e.removeInteraction(t)}),this.actions.splice(this.actions.indexOf(t),1)}},{key:"activateDefaultAction",value:function(){this.actions.length>0&&this.actions[0]&&(this.currentAction==this.actions[0]&&(this.currentAction.deactivate(),this.currentAction=void 0),this.activateAction(this.actions[0]))}}]),r}();exports.MapWithActions=y;
},{"ol/src/ol/interaction":"ohV4","ol/src/ol/Map":"Zd8W"}],"wvKl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomMap=void 0;var e=i(require("ol/src/ol/format/GeoJSON")),t=i(require("ol/src/ol/View")),o=i(require("ol/src/ol/Overlay")),r=require("ol/src/ol/control"),n=require("./vl-mapactions-map-with-actions");function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,o){return t&&c(e.prototype,t),o&&c(e,o),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return function(){var t,o=h(e);if(m()){var r=h(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return f(this,t)}}function f(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(i){l(c,n.MapWithActions);var a=p(c);function c(t){var o;return s(this,c),t.layers=[t.customLayers.baseLayerGroup,t.customLayers.overlayGroup],t.controls=t.controls||[new r.Zoom,new r.Rotate,new r.ZoomSlider,new r.ScaleLine({minWidth:128})],(o=a.call(this,t)).projection=t.projection,o.geoJSONFormat=new e.default({dataProjection:t.projection}),o.custom=t.custom||{},t.customLayers.overviewMapLayers&&t.customLayers.overviewMapLayers.length>0&&o.createOverviewMapControl(t),o.baseLayers=t.customLayers.baseLayerGroup.getLayers().getArray(),o.maxZoomViewToExtent=t.maxZoomViewToExtent||16,o}return u(c,[{key:"createOverviewMapControl",value:function(e){var o=this;function n(e){function t(e){var t=0;return o.baseLayers.forEach(function(e,o){e.getVisible()&&(t=o)}),e[t+1>=e.length?0:t+1]}e||(e=t(o.baseLayers)),o.baseLayers.forEach(function(t){t.setVisible(t==e)});var r=o.overviewMapControl.getOverviewMap().getLayers().getArray(),n=t(r);r.forEach(function(e){e.setVisible(e==n)}),o.render(),o.overviewMapControl.getOverviewMap().render()}this.overviewMapLayers=e.customLayers.overviewMapLayers,this.overviewMapControl=new r.OverviewMap({layers:this.overviewMapLayers,collapsed:!1,view:new t.default({projection:this.projection})}),this.overviewMapControl.element.addEventListener("click",function(){n()},!1),e.view&&e.controls.push(this.overviewMapControl),this.custom.toggleBaseLayer=n}},{key:"addBaseLayerAndOverlayMapLayer",value:function(e,t){e.setVisible(0===this.baseLayers.length),this.baseLayers.push(e),this.overviewMapControl?this.overviewMapControl.getOverviewMap().getLayers().getArray().push(t):this.createOverviewMapControl({customLayers:{overviewMapLayers:[t]}}),t.setVisible(2===this.overviewMapControl.getOverviewMap().getLayers().getArray().length)}},{key:"getBaseLayers",value:function(){return this.getLayerGroup().getLayers().getArray()[0].getLayers().getArray()}},{key:"getOverlayLayers",value:function(){return this.getLayerGroup().getLayers().getArray()[1].getLayers().getArray()}},{key:"initializeView",value:function(e,o){if(!this.getView().getZoom()){var r=new t.default({extent:this.projection.getExtent(),projection:this.projection,maxZoom:16,minZoom:2,center:[140860.69299028325,190532.7165957574],zoom:2});this.zoomViewToExtent(r,e,o),this.setView(r),this.overviewMapControl&&this.addControl(this.overviewMapControl)}}},{key:"zoomToExtent",value:function(e,t){this.zoomViewToExtent(this.getView(),e,t)}},{key:"zoomViewToExtent",value:function(e,t,o){t&&e.fit(t,{size:this.getSize()}),(o||this.maxZoomViewToExtent)&&e.getZoom()>(o||this.maxZoomViewToExtent)&&e.setZoom(o||this.maxZoomViewToExtent)}},{key:"zoomToGeometry",value:function(e,t){var o={type:"FeatureCollection",features:[{type:"Feature",geometry:e}]};this.zoomToExtent(this.geoJSONFormat.readFeatures(o)[0].getGeometry().getExtent(),t)}},{key:"showInfo",value:function(e,t){var r=document.createElement("div");r.setAttribute("class","close"),r.onclick=function(){event.currentTarget.parentNode.remove()};var n=document.createElement("div");n.innerHTML="<span class='content'>"+e+"</span><div class='arrow'></div>",n.setAttribute("class","info-tooltip"),n.appendChild(r);var i=new o.default({offset:[0,-5],positioning:"bottom-center",element:n});this.addOverlay(i),i.setPosition(t),n.parentNode.style.position="fixed"}}]),c}();exports.CustomMap=w;
},{"ol/src/ol/format/GeoJSON":"uzCl","ol/src/ol/View":"TOcO","ol/src/ol/Overlay":"kpPG","ol/src/ol/control":"KNR5","./vl-mapactions-map-with-actions":"KXx2"}],"rfU2":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MapAction=void 0;var i=function(){function e(n){var i=this;t(this,e),Array.isArray(n)||(n=[n]),this.interactions=[],n.forEach(function(t){i.addInteraction(t)})}return n(e,[{key:"addInteraction",value:function(t){t.setActive(!1),this.interactions.push(t)}},{key:"activate",value:function(){this.interactions.forEach(function(t){t.setActive(!0)})}},{key:"deactivate",value:function(){this.interactions.forEach(function(t){t.setActive(!1)})}}]),e}();exports.MapAction=i;
},{}],"Qta4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SelectAction=void 0;var e=require("ol/src/ol/interaction"),t=require("ol/src/ol/events/condition"),r=require("./vl-mapactions-mapaction");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function c(e,t,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=u(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return function(){var t,r=g(e);if(v()){var n=g(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return h(this,t)}}function h(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(n){s(u,r.MapAction);var o=f(u);function u(r,n,a){var c;i(this,u);var s=a&&a.cluster,l=a&&a.filter?a.filter:function(){return!0},f=a?a.style:null,h=a&&a.hoverStyle||f,y=function(e,t){return c.selectInteraction.getFeatures().clear(),c.filter(e,t)},v=function(e,t){var r=-1!==c.selectInteraction.getFeatures().getArray().indexOf(e);return c.filter(e,t)&&!r},g=new e.Select({filter:v,condition:t.pointerMove,style:h}),p=new e.Select({style:f}),d=new e.Select({filter:y});(c=o.call(this,[p,d,g])).cluster=s,c.filter=l,c.layer=r,c.style=f,c.hoverStyle=h,c.hoverInteraction=g,c.markInteraction=p,c.selectInteraction=d,c.hoverInteraction.on("select",function(){var e=c.map.getTargetElement();c.hoverInteraction.getFeatures().getLength()>0?e.style.cursor="pointer":e.style.cursor=""}),c.selectedFeature=null,c.getLayer=function(){return r};return c.selectInteraction.on("select",function(e){if(c.markInteraction.getFeatures().clear(),c.selectInteraction.getFeatures().getLength()>0){1===c.selectInteraction.getFeatures().getLength()?c.selectedFeature=c.selectInteraction.getFeatures().getArray()[0]:c.selectedFeature=(t=c.selectInteraction.getFeatures(),(r=t.getArray().indexOf(c.selectedFeature)+1)>t.getLength()-1&&(r=0),t.getArray()[r]),n&&n(c.selectedFeature,e,c.getLayer(null))}else c.selectedFeature=null,n&&n();var t,r}),c.selectInteractionFilter=y,c.hoverInteractionFilter=v,c}return a(u,[{key:"_fixClusterBehavior",value:function(){var e=this;if(this.selectedFeature){var t=this.selectedFeature.get("features")||[this.selectedFeature];this.selectInteraction.getFeatures().clear(),this.markInteraction.getFeatures().clear(),t&&t.forEach(function(t){t.getId()&&e.markFeatureWithId(t.getId())})}}},{key:"getClusterWithFeatureId",value:function(e,t){for(var r=0;r<e.length;r++){var n=e[r].get("features");if(n&&this.getFeatureById(n,t))return e[r]}}},{key:"getFeatureById",value:function(e,t){for(var r=0;r<e.length;r++)if(e[r].getId()===t)return e[r]}},{key:"clearFeatures",value:function(){this.selectInteraction.getFeatures().clear(),this.markInteraction.getFeatures().clear(),this.hoverInteraction.getFeatures().clear()}},{key:"activate",value:function(){var e=this;this.cluster&&this.map&&(this._fixClusterBehaviorListener=function(){return e._fixClusterBehavior()},this.map.on("moveend",this._fixClusterBehaviorListener),this.selectInteraction.on("select",this._fixClusterBehaviorListener)),c(g(u.prototype),"activate",this).call(this)}},{key:"deactivate",value:function(){this._fixClusterBehaviorListener&&(this.map.un("moveend",this._fixClusterBehaviorListener),this.selectInteraction.un("select",this._fixClusterBehaviorListener)),this.clearFeatures(),c(g(u.prototype),"deactivate",this).call(this)}},{key:"selectFeature",value:function(e){this.selectInteraction.getFeatures().push(e),this.selectInteraction.dispatchEvent({type:"select",feature:e})}},{key:"getSelectedFeatures",value:function(){return this.selectInteraction.getFeatures()}},{key:"vergeetLaatstGeselecteerdeFeature",value:function(){this.selectedFeature=null}},{key:"markFeatureWithId",value:function(e,t){var r=(t=t||this.layer).getSource().getFeatureById(e)||this.getClusterWithFeatureId(t.getSource().getFeatures(),e);r&&-1===this.markInteraction.getFeatures().getArray().indexOf(r)&&this.markInteraction.getFeatures().push(r)}},{key:"isMarked",value:function(e){var t=!1;return this.markInteraction.getFeatures().forEach(function(r){r===e&&(t=!0)}),t}},{key:"demarkAllFeatures",value:function(){this.markInteraction.getFeatures().clear()}}]),u}();exports.SelectAction=p;
},{"ol/src/ol/interaction":"ohV4","ol/src/ol/events/condition":"TePD","./vl-mapactions-mapaction":"rfU2"}],"e1Xu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BoxSelectAction=void 0;var t=r(require("ol/src/ol/interaction/DragBox")),e=require("ol/src/ol/style"),n=require("./vl-mapactions-select-action");function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return function(){var e,n=p(t);if(s()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return f(this,e)}}function f(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(r){i(u,n.SelectAction);var o=a(u);function u(n,r,i){var a;return c(this,u),(a=o.call(this,n,function(t){t&&r([t])},i)).dragBoxInteraction=new t.default({style:new e.Style({stroke:new e.Stroke({color:[0,0,255,1]})})}),a.addInteraction(a.dragBoxInteraction),a.dragBoxInteraction.on("boxdrag",function(){var t=a.dragBoxInteraction.getGeometry().getExtent();a.hoverInteraction.getFeatures().clear(),n.getSource().forEachFeatureIntersectingExtent(t,function(t){a.hoverInteraction.getFeatures().push(t)})}),a.dragBoxInteraction.on("boxend",function(){a.hoverInteraction.getFeatures().getLength()>0&&r(a.hoverInteraction.getFeatures().getArray().slice(0))}),a}return u}();exports.BoxSelectAction=y;
},{"ol/src/ol/interaction/DragBox":"gycp","ol/src/ol/style":"KETh","./vl-mapactions-select-action":"Qta4"}],"yZTS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteAction=void 0;var t=require("ol/src/ol/style"),e=require("./vl-mapactions-box-select-action");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return function(){var e,r=a(t);if(l()){var o=a(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return i(this,e)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(r){n(i,e.BoxSelectAction);var c=u(i);function i(e,r,n){var u;o(this,i);var f=new t.Style({fill:new t.Fill({color:"rgba(217, 83, 79, 0.6)"}),stroke:new t.Stroke({color:"#d9534f",width:5}),image:new t.Circle({radius:4,stroke:new t.Stroke({color:"#d9534f",width:5}),fill:new t.Fill({color:"rgba(217, 83, 79, 0.6)"})})}),l=n&&n.style||f;function a(t){t&&e.getSource().getFeatureById(t.getId())===t&&e.getSource().removeFeature(t)}return u=c.call(this,e,function(t){r&&null!=r?r(t,function(t){a(t),u.clearFeatures()},function(){u.clearFeatures()}):(t.forEach(function(t){a(t)}),u.clearFeatures())},{style:l})}return i}();exports.DeleteAction=s;
},{"ol/src/ol/style":"KETh","./vl-mapactions-box-select-action":"e1Xu"}],"q8kg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Geometry",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"GeometryCollection",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"LineString",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"MultiLineString",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"MultiPoint",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"MultiPolygon",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Point",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Polygon",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"LinearRing",{enumerable:!0,get:function(){return g.default}});var e=c(require("./geom/Circle.js")),r=c(require("./geom/Geometry.js")),t=c(require("./geom/GeometryCollection.js")),n=c(require("./geom/LineString.js")),o=c(require("./geom/MultiLineString.js")),u=c(require("./geom/MultiPoint.js")),i=c(require("./geom/MultiPolygon.js")),l=c(require("./geom/Point.js")),f=c(require("./geom/Polygon.js")),g=c(require("./geom/LinearRing.js"));function c(e){return e&&e.__esModule?e:{default:e}}
},{"./geom/Circle.js":"baQX","./geom/Geometry.js":"feOh","./geom/GeometryCollection.js":"knKK","./geom/LineString.js":"nG5b","./geom/MultiLineString.js":"GJ0c","./geom/MultiPoint.js":"FLg1","./geom/MultiPolygon.js":"UyXA","./geom/Point.js":"xPgY","./geom/Polygon.js":"AvIG","./geom/LinearRing.js":"p64G"}],"jQkn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SnapInteraction=void 0;var t=e(require("ol/src/ol/interaction/Snap"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return function(){var e,n=l(t);if(a()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)}}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(e){o(c,t.default);var n=u(c);function c(t){var e;r(this,c);var o={source:t?t.getSource():null,pixelTolerance:7};return(e=n.call(this,o)).snapOptions=o,e}return c}();exports.SnapInteraction=s;
},{"ol/src/ol/interaction/Snap":"UJQJ"}],"ddC2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DrawAction=void 0;var e=a(require("ol/src/ol/interaction/Draw")),t=a(require("ol/src/ol/Overlay")),o=require("ol/src/ol/geom"),n=require("ol/src/ol/Observable"),r=require("./vl-mapactions-mapaction"),i=require("./vl-mapactions-snap-interaction");function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,o){return t&&s(e.prototype,t),o&&s(e,o),e}function f(e,t,o){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,o){var n=p(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(o):r.value}})(e,t,o||e)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return function(){var t,o=b(e);if(d()){var n=b(this).constructor;t=Reflect.construct(o,arguments,n)}else t=o.apply(this,arguments);return g(this,t)}}function g(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(a){y(p,r.MapAction);var s=v(p);function p(o,r,a,l){var f;c(this,p);var y=[],m=l||{};m.source=o.getSource(),m.type=r;var v=new e.default(m);return y.push(v),m.snapping&&y.push(new i.SnapInteraction(m.snapping.layer||o)),v.on("drawstart",function(e){if(m.measure){var o=e.feature;m.measure="object"===u(m.measure)?m.measure:{},m.measure.tooltip=m.measure.tooltip||{};var n=document.createElement("div");n.setAttribute("class","measure-tooltip"),f.tooltip=new t.default({offset:m.measure.tooltip.offset||[-15,10],positioning:"bottom-center"}),f.map.addOverlay(f.tooltip),f.measurePointermoveHandler=f.map.on("pointermove",function(){f._showMeasureTooltip(o,f.tooltip,n)})}}),v.on("drawend",function(e){var t=e.feature;a(t,function(){try{o.getSource().removeFeature(t)}catch(r){var e=o.getSource().on("addfeature",function(t){o.getSource().removeFeature(t.feature),(0,n.unByKey)(e)})}}),f._cleanUp()}),(f=s.call(this,y)).drawOptions=m,f.drawInteraction=v,f}return l(p,[{key:"deactivate",value:function(){this._cleanUp(),f(b(p.prototype),"deactivate",this).call(this)}},{key:"_cleanUp",value:function(){this.drawOptions.measure&&((0,n.unByKey)(this.measurePointermoveHandler),this._removeTooltip())}},{key:"_removeTooltip",value:function(){this.tooltip&&(this.map.removeOverlay(this.tooltip),this.tooltip=void 0)}},{key:"_showMeasureTooltip",value:function(e,t){if(this.tooltip){var o=this._getLengthOfLastSegment(e.getGeometry());0!==o&&(t.textContent=o+" m",this.tooltip.setElement(t),this.tooltip.setPosition(e.getGeometry().getLastCoordinate()))}}},{key:"_getLengthOfLastSegment",value:function(e){return e&&e instanceof o.LineString?new o.LineString(this._getCoordinatesOfLastSegment(e)).getLength().toFixed(2):e&&e instanceof o.Polygon?new o.LineString(this._getCoordinatesOfLastSegment(e.getLinearRing(0))).getLength().toFixed(2):0}},{key:"_getCoordinatesOfLastSegment",value:function(e){var t=e.getCoordinates().length;return e.getCoordinates().slice(t-2)}}]),p}();exports.DrawAction=O;
},{"ol/src/ol/interaction/Draw":"wRr6","ol/src/ol/Overlay":"kpPG","ol/src/ol/geom":"q8kg","ol/src/ol/Observable":"VYsY","./vl-mapactions-mapaction":"rfU2","./vl-mapactions-snap-interaction":"jQkn"}],"Qbec":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DrawLijnstukAction=void 0;var t=require("./vl-mapactions-draw-action");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&o(t,n)}function o(t,n){return(o=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function c(t){return function(){var n,e=s(t);if(f()){var r=s(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return i(this,n)}}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var a=function(n){r(i,t.DrawAction);var o=c(i);function i(t,n,r){var c;return e(this,i),(r=r||{}).maxPoints=2,(c=o.call(this,t,"LineString",n,r)).drawLijnstukOptions=r,c}return i}();exports.DrawLijnstukAction=a;
},{"./vl-mapactions-draw-action":"ddC2"}],"N6fZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DrawRectangleAction=void 0;var t=require("ol/src/ol/geom"),e=require("./vl-mapactions-draw-action");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){return function(){var e,n=s(t);if(a()){var r=s(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return u(this,e)}}function u(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(n){o(u,e.DrawAction);var c=i(u);function u(e,n,o){var i;r(this,u);var f=o||{};return f.maxPoints=2,f.geometryFunction=function(e,n){n||(n=new t.Polygon([]));var r=e[0],o=e[1];return n.setCoordinates([[r,[r[0],o[1]],o,[o[0],r[1]],r]]),n},(i=c.call(this,e,"LineString",n,f)).drawRectangleOptions=f,i}return u}();exports.DrawRectangleAction=l;
},{"ol/src/ol/geom":"q8kg","./vl-mapactions-draw-action":"ddC2"}],"AUpx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HighlightAction=void 0;var t=require("ol/src/ol/interaction"),e=require("ol/src/ol/events/condition"),r=require("./vl-mapactions-mapaction");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function c(t,e,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=a(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function a(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return function(){var e,r=p(t);if(g()){var n=p(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return h(this,e)}}function h(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(n){l(a,r.MapAction);var i=s(a);function a(r,n){var u;o(this,a);var c=new t.Select({layers:[r],condition:e.pointerMove,style:n?n.style:null});return(u=i.call(this,[c])).layer=r,u.highlightInteraction=c,u}return u(a,[{key:"deactivate",value:function(){this.dehighlightAllFeatures(),c(p(a.prototype),"deactivate",this).call(this)}},{key:"highlightFeatureWithId",value:function(t){if(t){var e=this.layer.getSource().getFeatureById(t)||this._getClusterByFeatureId(this.layer.getSource().getFeatures(),t);e&&-1===this.highlightInteraction.getFeatures().getArray().indexOf(e)&&this.highlightInteraction.getFeatures().push(e)}}},{key:"_getClusterByFeatureId",value:function(t,e){for(var r=0;r<t.length;r++){var n=t[r].get("features");if(n&&this._getFeatureById(n,e))return t[r]}}},{key:"_getFeatureById",value:function(t,e){for(var r=0;r<t.length;r++)if(t[r].getId()===e)return t[r]}},{key:"isHighlighted",value:function(t){var e=!1;return this.highlightInteraction.getFeatures().forEach(function(r){r===t&&(e=!0)}),e}},{key:"dehighlightAllFeatures",value:function(){this.highlightInteraction.getFeatures().clear()}}]),a}();exports.HighlightAction=v;
},{"ol/src/ol/interaction":"ohV4","ol/src/ol/events/condition":"TePD","./vl-mapactions-mapaction":"rfU2"}],"CfY0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeasureAction=void 0;var e=o(require("ol/src/ol/Overlay")),t=require("ol/src/ol/Observable"),r=require("./vl-mapactions-draw-action");function o(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=f(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return function(){var t,r=d(e);if(v()){var o=d(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return y(this,t)}}function y(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(o){l(i,r.DrawAction);var n=p(i);function i(r,o){var c;u(this,i),c=n.call(this,r,"LineString",function(){(0,t.unByKey)(c.measurePointermoveHandler)},o);var a=0;c.layer=r,c.measureTooltips=[],c.measurePointermoveHandler=void 0,c.drawInteraction.on("drawstart",function(t){var r=a++,o=t.feature;o.setId(r);var n=document.createElement("div");n.setAttribute("class","measure-tooltip");var u=new e.default({offset:[-15,10],positioning:"bottom-center"});c.map.addOverlay(u),c.measureTooltips[r]=u,c.measurePointermoveHandler=c.map.on("pointermove",function(){!function(e,t,r){var o=e.getGeometry().getLength().toFixed(2);r.textContent=o+" m",t.setElement(r),t.setPosition(e.getGeometry().getLastCoordinate())}(o,u,n)})});var f=function(e){c.map.removeOverlay(c.measureTooltips[e]),c.measureTooltips[e]=null};return c.layer.getSource().on("removefeature",function(e){f(e.feature.getId())}),c.cleanUp=function(){(0,t.unByKey)(c.measurePointermoveHandler);var e=[];c.measureTooltips.forEach(function(t,r){null==c.layer.getSource().getFeatureById(r)&&e.push(r)}),e.forEach(function(e){f(e)})},c.getTooltipFor=function(e){return c.measureTooltips[e]},c.measureOptions=o,c}return c(i,[{key:"deactivate",value:function(){this.cleanUp(),a(d(i.prototype),"deactivate",this).call(this,this)}}]),i}();exports.MeasureAction=b;
},{"ol/src/ol/Overlay":"kpPG","ol/src/ol/Observable":"VYsY","./vl-mapactions-draw-action":"ddC2"}],"pL2N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModifyAction=void 0;var t=require("ol/src/ol/interaction"),e=require("./vl-mapactions-snap-interaction"),n=require("./vl-mapactions-select-action");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,n=l(t);if(s()){var o=l(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return u(this,e)}}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(o){i(u,n.SelectAction);var c=f(u);function u(n,o,i){var f;r(this,u);var a=i?i.filter:null;return(f=c.call(this,n,null,{filter:a})).modifyInteraction=new t.Modify({features:f.selectInteraction.getFeatures()}),f.addInteraction(f.modifyInteraction),i&&i.snapping&&f.addInteraction(new e.SnapInteraction(i.snapping.layer||n)),f.modifyInteraction.on("modifystart",function(t){f.currentGeometryBeingModified=t.features.getArray()[0].getGeometry().clone()}),f.modifyInteraction.on("modifyend",function(t){t.features.forEach(function(t){o(t,function(t){t.setGeometry(f.currentGeometryBeingModified)})})}),f}return u}();exports.ModifyAction=y;
},{"ol/src/ol/interaction":"ohV4","./vl-mapactions-snap-interaction":"jQkn","./vl-mapactions-select-action":"Qta4"}],"KVt3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModifyAndTranslateAction=void 0;var t=require("ol/src/ol/interaction"),e=require("./vl-mapactions-modify-action");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){return function(){var e,n=s(t);if(f()){var r=s(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return u(this,e)}}function u(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(n){o(u,e.ModifyAction);var c=i(u);function u(e,n,o){var i;return r(this,u),(i=c.call(this,e,n,o)).translateInteraction=new t.Translate({features:i.selectInteraction.getFeatures()}),i.addInteraction(i.translateInteraction),i.translateInteraction.on("translateend",function(t){t.features.forEach(function(t){n(t,function(t){t.getGeometry().setCoordinates(t.get("entity").geometry.coordinates)}),i.selectInteraction.getFeatures().clear()})}),i}return u}();exports.ModifyAndTranslateAction=l;
},{"ol/src/ol/interaction":"ohV4","./vl-mapactions-modify-action":"pL2N"}],"LHew":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SelectActions=void 0;var t=require("./vl-mapactions-select-action");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function u(t,e,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=i(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return function(){var e,r=p(t);if(s()){var n=p(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return l(this,e)}}function l(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?y(t):r}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(e){c(i,t.SelectAction);var n=a(i);function i(t,e,o){var u;r(this,i);var c=t.map(function(t){return t.layer}),f=function(t){var e=u._getLayer(t),r=u._getLayerStyle(e);return r&&"function"==typeof r?r(t):r},a=function(t){var e=u._getLayer(t),r=u._getLayerHoverStyle(e);return r&&"function"==typeof r?r(t):r},l=function(t,e){var r=!1;return u.layers.forEach(function(t){t==e&&(r=!0)}),o&&o.filter?r&&o.filter(t):r};return(u=n.call(this,c,e,{filter:l,style:f,hoverStyle:a})).layerConfiguraties=t,u.layers=c,u.style=f,u.hoverStyle=a,u.filter=l,u}return o(i,[{key:"_getLayer",value:function(t){return this.layers.find(function(e){return-1!==e.getSource().getFeatures().indexOf(t)})}},{key:"_getLayerStyle",value:function(t,e){var r=this.layerConfiguraties.find(function(e){return e.layer===t});return r?r[e||"style"]:null}},{key:"_getLayerHoverStyle",value:function(t){return this._getLayerStyle(t,"hoverStyle")||this._getLayerStyle(t)}},{key:"markFeatureWithId",value:function(t,e){var r=this;e?u(p(i.prototype),"markFeatureWithId",this).call(this,t,e):this.layers.forEach(function(e){u(p(i.prototype),"markFeatureWithId",r).call(r,t,e)})}}]),i}();exports.SelectActions=h;
},{"./vl-mapactions-select-action":"Qta4"}],"slT2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tooltips=void 0;var t=e(require("ol/src/ol/Overlay"));function e(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function e(n,i,s,r){var a=this;o(this,e),this.layer=n,n.tooltips=[],this.showTooltip=function(e,o,a,l){l=l||{};var c=document.createElement("div");c.innerHTML="<span class='content'></span><div class='arrow'></div>",c.setAttribute("class","info-tooltip");var u=new t.default({offset:l.offset||[0,-10],positioning:"bottom-center",insertFirst:!1});function f(t){c.childNodes[0].innerHTML=t,u.setPosition(a),u.setElement(c),c.parentNode.style.position="fixed"}u.setElement(c),e.addOverlay(u),n.tooltips.push(u);var p=0,d=setTimeout(function(){p=500,f("<span class='icon'></span> "+(s||"Info berekenen  ..."))},100);i(o,a).then(function(t){setTimeout(function(){clearTimeout(d),f(t),e.render(),r&&r(o,a)},p)})},this.clear=function(t){a.layer.tooltips.forEach(function(e){t.removeOverlay(e)})}};exports.Tooltips=n;
},{"ol/src/ol/Overlay":"kpPG"}],"fRbi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShowInfoAction=void 0;var t=require("./vl-mapactions-draw-action"),e=require("./vl-mapactions-tooltips");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function i(t,e,o){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var r=u(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(o):n.value}})(t,e,o||t)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return function(){var e,o=b(t);if(y()){var r=b(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return p(this,e)}}function p(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(o){f(u,t.DrawAction);var n=l(u);function u(t,o,c,i){var f;r(this,u);var a=new e.Tooltips(t,o,c);return(f=n.call(this,t,"Point",function(t){f.tooltips.showTooltip(f.map,t,t.getGeometry().getCoordinates(),i)})).layer=t,f.tooltips=a,f}return c(u,[{key:"clear",value:function(){this.tooltips.clear(this.map),this.layer.getSource().clear()}},{key:"deactivate",value:function(){this.clear(),i(b(u.prototype),"deactivate",this).call(this)}}]),u}();exports.ShowInfoAction=h;
},{"./vl-mapactions-draw-action":"ddC2","./vl-mapactions-tooltips":"slT2"}],"BsYb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShowInfoSelectAction=void 0;var t=require("./vl-mapactions-select-action"),e=require("./vl-mapactions-tooltips");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function c(t,e,o){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var r=u(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(o):n.value}})(t,e,o||t)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return function(){var e,o=b(t);if(y()){var r=b(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return s(this,e)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(o){l(u,t.SelectAction);var n=a(u);function u(t,o,i,c,l){var f;return r(this,u),(f=n.call(this,t,function(t,e){if(t){var o=t.getGeometry().getClosestPoint(e.mapBrowserEvent.coordinate);f.tooltips.showTooltip(f.map,t,o,l)}})).tooltips=new e.Tooltips(t,o,i,c),f.layer=t,f}return i(u,[{key:"clear",value:function(){this.tooltips.clear(this.map)}},{key:"deactivate",value:function(){this.clear(),this.layer.setVisible(this.visible),c(b(u.prototype),"deactivate",this).call(this)}},{key:"activate",value:function(){this.visible=this.layer.getVisible(),this.layer.setVisible(!0),c(b(u.prototype),"activate",this).call(this)}}]),u}();exports.ShowInfoSelectAction=h;
},{"./vl-mapactions-select-action":"Qta4","./vl-mapactions-tooltips":"slT2"}],"ySAT":[function(require,module,exports) {
var define;
var t;function e(t,i,r){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var r=n(t,e);if(r){var s=Object.getOwnPropertyDescriptor(r,e);return s.get?s.get.call(i):s.value}})(t,i,r||t)}function n(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return function(){var e,n=l(t);if(u()){var i=l(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return o(this,e)}}function o(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(e,n){"object"==("undefined"==typeof exports?"undefined":g(exports))&&"undefined"!=typeof module?n(exports):"function"==typeof t&&t.amd?t(["exports"],n):n((e=e||self).jsts={})}(this,function(t){"use strict";var n=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"equalsWithTolerance",value:function(t,e,n){return Math.abs(t-e)<=n}}]),t}();function r(t){this.message=t}function u(t,e){this.low=0|e,this.high=0|t}function h(){}function g(){}function v(){}function _(){}function d(){}function y(t){this.name="RuntimeException",this.message=t,this.stack=(new Error).stack,Error.call(this,t)}n.constructor_=function(){},u.toBinaryString=function(t){var e,n="";for(e=2147483648;e>0;e>>>=1)n+=(t.high&e)===e?"1":"0";for(e=2147483648;e>0;e>>>=1)n+=(t.low&e)===e?"1":"0";return n},h.isNaN=function(t){return Number.isNaN(t)},h.isInfinite=function(t){return!Number.isFinite(t)},h.MAX_VALUE=Number.MAX_VALUE,"function"==typeof Float64Array&&"function"==typeof Int32Array?function(){var t=new Float64Array(1),e=new Int32Array(t.buffer);h.doubleToLongBits=function(n){t[0]=n;var i=0|e[0],r=0|e[1];return 2146435072==(2146435072&r)&&0!=(1048575&r)&&0!==i&&(i=0,r=2146959360),new u(r,i)},h.longBitsToDouble=function(n){return e[0]=n.low,e[1]=n.high,t[0]}}():function(){var t=Math.log2,e=Math.floor,n=Math.pow,i=function(){for(var i=53;i>0;i--){var r=n(2,i)-1;if(e(t(r))+1===i)return r}return 0}();h.doubleToLongBits=function(r){var s,o,a,l,c,h,f,g,v;if(r<0||1/r===Number.NEGATIVE_INFINITY?(h=1<<31,r=-r):h=0,0===r)return new u(g=h,v=0);if(r===1/0)return new u(g=2146435072|h,v=0);if(r!=r)return new u(g=2146959360,v=0);if(l=0,v=0,(s=e(r))>1)if(s<=i)(l=e(t(s)))<=20?(v=0,g=s<<20-l&1048575):(v=s%(o=n(2,a=l-20))<<32-a,g=s/o&1048575);else for(a=s,v=0;0!==(a=e(o=a/2));)l++,v>>>=1,v|=(1&g)<<31,g>>>=1,o!==a&&(g|=524288);if(f=l+1023,c=0===s,s=r-s,l<52&&0!==s)for(a=0;;){if((o=2*s)>=1?(s=o-1,c?(f--,c=!1):(a<<=1,a|=1,l++)):(s=o,c?0==--f&&(l++,c=!1):(a<<=1,l++)),20===l)g|=a,a=0;else if(52===l){v|=a;break}if(1===o){l<20?g|=a<<20-l:l<52&&(v|=a<<52-l);break}}return g|=f<<20,new u(g|=h,v)},h.longBitsToDouble=function(t){var e,i,r,s,o,a=t.high,u=t.low;for(r=a&1<<31?-1:1,s=((2146435072&a)>>20)-1023,o=0,i=1<<19,e=1;e<=20;e++)a&i&&(o+=n(2,-e)),i>>>=1;for(i=1<<31,e=21;e<=52;e++)u&i&&(o+=n(2,-e)),i>>>=1;if(-1023===s){if(0===o)return 0*r;s=-1022}else{if(1024===s)return 0===o?r/0:NaN;o+=1}return r*o*n(2,s)}}(),y.prototype=Object.create(Error.prototype),y.prototype.constructor=Error;var p=function(t){i(n,y);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();p.constructor_=function(){if(0===arguments.length)y.constructor_.call(this);else if(1===arguments.length){var t=arguments[0];y.constructor_.call(this,t)}};var m=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"shouldNeverReachHere",value:function(){if(0===arguments.length)t.shouldNeverReachHere(null);else if(1===arguments.length){var e=arguments[0];throw new p("Should never reach here"+(null!==e?": "+e:""))}}},{key:"isTrue",value:function(){if(1===arguments.length){var e=arguments[0];t.isTrue(e,null)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];if(!n)throw null===i?new p:new p(i)}}},{key:"equals",value:function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];t.equals(e,n,null)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];if(!r.equals(i))throw new p("Expected "+i+" but encountered "+r+(null!==s?": "+s:""))}}}]),t}();m.constructor_=function(){};var k=function(){function e(){c(this,e),e.constructor_.apply(this,arguments)}return f(e,[{key:"setOrdinate",value:function(t,n){switch(t){case e.X:this.x=n;break;case e.Y:this.y=n;break;case e.Z:this.z=n;break;default:throw new r("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!n.equalsWithTolerance(this.x,e.x,i)&&!!n.equalsWithTolerance(this.y,e.y,i)}}},{key:"getOrdinate",value:function(t){switch(t){case e.X:return this.x;case e.Y:return this.y;case e.Z:return this.z}throw new r("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||h.isNaN(this.z)&&h.isNaN(t.z))}},{key:"equals",value:function(t){return t instanceof e&&this.equals2D(t)}},{key:"equalInZ",value:function(t,e){return n.equalsWithTolerance(this.z,t.z,e)}},{key:"compareTo",value:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return m.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.z+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)}},{key:"distance",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return t=37*(t=37*t+e.hashCode(this.x))+e.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.z}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[g,v,d]}}],[{key:"hashCode",value:function(){if(1===arguments.length&&"number"==typeof arguments[0]){var t=arguments[0],e=h.doubleToLongBits(t);return Math.trunc(e^e>>>32)}}}]),e}(),x=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"compare",value:function(e,n){var i=e,r=n,s=t.compare(i.x,r.x);if(0!==s)return s;var o=t.compare(i.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:t.compare(i.z,r.z)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[_]}}],[{key:"compare",value:function(t,e){return t<e?-1:t>e?1:h.isNaN(t)?h.isNaN(e)?0:-1:h.isNaN(e)?1:0}}]),t}();function E(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1}function I(){}function N(t){this.message=t||""}function C(){}function S(t){this.message=t||""}function w(){this.array_=[],arguments[0]instanceof I&&this.addAll(arguments[0])}x.constructor_=function(){if(this._dimensionsToTest=2,0===arguments.length)x.constructor_.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new r("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}},k.DimensionalComparator=x,k.constructor_=function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)k.constructor_.call(this,0,0);else if(1===arguments.length){var t=arguments[0];k.constructor_.call(this,t.x,t.y,t.z)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];k.constructor_.call(this,e,n,k.NULL_ORDINATE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];this.x=i,this.y=r,this.z=s}},k.serialVersionUID=0x5cbf2c235c7e5800,k.NULL_ORDINATE=h.NaN,k.X=0,k.Y=1,k.Z=2,I.prototype.add=function(){},I.prototype.addAll=function(){},I.prototype.isEmpty=function(){},I.prototype.iterator=function(){},I.prototype.size=function(){},I.prototype.toArray=function(){},I.prototype.remove=function(){},N.prototype=new Error,N.prototype.name="IndexOutOfBoundsException",C.prototype=Object.create(I.prototype),C.prototype.constructor=C,C.prototype.get=function(){},C.prototype.set=function(){},C.prototype.isEmpty=function(){},S.prototype=new Error,S.prototype.name="NoSuchElementException",w.prototype=Object.create(C.prototype),w.prototype.constructor=w,w.prototype.ensureCapacity=function(){},w.prototype.interfaces_=[C,I],w.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],0,arguments[1]),!0},w.prototype.clear=function(){this.array_=[]},w.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},w.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},w.prototype.iterator=function(){return new L(this)},w.prototype.get=function(t){if(t<0||t>=this.size())throw new N;return this.array_[t]},w.prototype.isEmpty=function(){return 0===this.array_.length},w.prototype.size=function(){return this.array_.length},w.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},w.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},w.prototype.removeAll=function(t){for(var e=t.iterator();e.hasNext();)this.remove(e.next());return!0};var L=function(t){this.arrayList_=t,this.position_=0};L.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new S;return this.arrayList_.get(this.position_++)},L.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},L.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},L.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))};var T=function(t){i(r,w);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"getCoordinate",value:function(t){return this.get(t)}},{key:"addAll",value:function(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&E(arguments[0],I)){for(var t=arguments[0],n=arguments[1],i=!1,s=t.iterator();s.hasNext();)this.add(s.next(),n),i=!0;return i}return e(l(r.prototype),"addAll",this).apply(this,arguments)}},{key:"clone",value:function(){for(var t=e(l(r.prototype),"clone",this).call(this),n=0;n<this.size();n++)t.add(n,this.get(n).clone());return t}},{key:"toCoordinateArray",value:function(){return this.toArray(r.coordArrayType)}},{key:"add",value:function(){if(1===arguments.length){var t=arguments[0];e(l(r.prototype),"add",this).call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i,!0),!0}if(arguments[0]instanceof k&&"boolean"==typeof arguments[1]){var s=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(s))return null;e(l(r.prototype),"add",this).call(this,s)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var u=arguments[0],c=arguments[1];if(arguments[2])for(var h=0;h<u.length;h++)this.add(u[h],c);else for(var f=u.length-1;f>=0;f--)this.add(u[f],c);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof k){var g=arguments[0],v=arguments[1];if(!arguments[2]){var _=this.size();if(_>0){if(g>0&&this.get(g-1).equals2D(v))return null;if(g<_&&this.get(g).equals2D(v))return null}}e(l(r.prototype),"add",this).call(this,g,v)}}else if(4===arguments.length){var d=arguments[0],y=arguments[1],p=arguments[2],m=arguments[3],x=1;p>m&&(x=-1);for(var E=p;E!==m;E+=x)this.add(d[E],y);return!0}}},{key:"closeRing",value:function(){this.size()>0&&this.add(new k(this.get(0)),!1)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}]),r}();T.constructor_=function(){if(0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}},T.coordArrayType=new Array(0).fill(null);var R=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var n=e;return this.isNull()?n.isNull():this._maxx===n.getMaxX()&&this._maxy===n.getMaxY()&&this._minx===n.getMinX()&&this._miny===n.getMinY()}},{key:"intersection",value:function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new t;var n=this._minx>e._minx?this._minx:e._minx,i=this._miny>e._miny?this._miny:e._miny;return new t(n,this._maxx<e._maxx?this._maxx:e._maxx,i,this._maxy<e._maxy?this._maxy:e._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(1===arguments.length){if(arguments[0]instanceof k){var e=arguments[0];return this.covers(e.x,e.y)}if(arguments[0]instanceof t){var n=arguments[0];return!this.isNull()&&!n.isNull()&&n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return!this.isNull()&&i>=this._minx&&i<=this._maxx&&r>=this._miny&&r<=this._maxy}}},{key:"intersects",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var e=arguments[0];return!this.isNull()&&!e.isNull()&&!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}if(arguments[0]instanceof k){var n=arguments[0];return this.intersects(n.x,n.y)}}else if(2===arguments.length){if(arguments[0]instanceof k&&arguments[1]instanceof k){var i=arguments[0],r=arguments[1];return!(this.isNull()||(i.x<r.x?i.x:r.x)>this._maxx||(i.x>r.x?i.x:r.x)<this._minx||(i.y<r.y?i.y:r.y)>this._maxy||(i.y>r.y?i.y:r.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var s=arguments[0],o=arguments[1];return!this.isNull()&&!(s>this._maxx||s<this._minx||o>this._maxy||o<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(1===arguments.length){if(arguments[0]instanceof k){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];if(n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.isNull()?(this._minx=i,this._maxx=i,this._miny=r,this._maxy=r):(i<this._minx&&(this._minx=i),i>this._maxx&&(this._maxx=i),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var e=arguments[0];return this.covers(e)}if(arguments[0]instanceof k){var n=arguments[0];return this.covers(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return this.covers(i,r)}}},{key:"centre",value:function(){return this.isNull()?null:new k((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof k){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this._minx=n._minx,this._maxx=n._maxx,this._miny=n._miny,this._maxy=n._maxy}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var s=arguments[0],o=arguments[1],a=arguments[2],u=arguments[3];s<o?(this._minx=s,this._maxx=o):(this._minx=o,this._maxx=s),a<u?(this._miny=a,this._maxy=u):(this._miny=u,this._maxy=a)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+k.hashCode(this._minx))+k.hashCode(this._maxx))+k.hashCode(this._miny))+k.hashCode(this._maxy)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[g,d]}}],[{key:"intersects",value:function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3],a=Math.min(s.x,o.x),u=Math.max(s.x,o.x),l=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(l>u||c<a||(a=Math.min(s.y,o.y),u=Math.max(s.y,o.y),l=Math.min(i.y,r.y),c=Math.max(i.y,r.y),l>u||c<a))}}}]),t}();function P(){}R.constructor_=function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof R){var e=arguments[0];this.init(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];this.init(r,s,o,a)}},R.serialVersionUID=0x51845cd552189800;var O=function(t){i(n,P);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();function b(t){this.str=t}function M(t){this.value=t}function D(){}O.constructor_=function(){P.constructor_.call(this,"Projective point not representable on the Cartesian plane.")},b.prototype.append=function(t){this.str+=t},b.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},b.prototype.toString=function(t){return this.str},M.prototype.intValue=function(){return this.value},M.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},M.isNaN=function(t){return Number.isNaN(t)},D.isWhitespace=function(t){return t<=32&&t>=0||127===t},D.toUpperCase=function(t){return t.toUpperCase()};var A=function(){function e(){c(this,e),e.constructor_.apply(this,arguments)}return f(e,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(t,n){var i=this.abs(),r=e.magnitude(i._hi),s=e.TEN.pow(r);(i=i.divide(s)).gt(e.TEN)?(i=i.divide(e.TEN),r+=1):i.lt(e.ONE)&&(i=i.multiply(e.TEN),r-=1);for(var o=r+1,a=new b,u=e.MAX_PRINT_DIGITS-1,l=0;l<=u;l++){t&&l===o&&a.append(".");var c=Math.trunc(i._hi);if(c<0)break;var h=!1,f=0;c>9?(h=!0,f="9"):f="0"+c,a.append(f),i=i.subtract(e.valueOf(c)).multiply(e.TEN),h&&i.selfAdd(e.TEN);var g=!0,v=e.magnitude(i._hi);if(v<0&&Math.abs(v)>=u-l&&(g=!1),!g)break}return n[0]=r,a.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var n=arguments[0];return this.add(-n)}}},{key:"equals",value:function(){if(1===arguments.length&&arguments[0]instanceof e){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return 0===this._hi&&0===this._lo}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.isNaN()?this:this.selfAdd(-n,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.selfDivide(n,0)}}else if(2===arguments.length){var i,r,s,o,a=arguments[0],u=arguments[1],l=null,c=null,h=null,f=null;return s=this._hi/a,f=(l=(h=e.SPLIT*s)-(l=h-s))*(c=(f=e.SPLIT*a)-(c=f-a))-(o=s*a)+l*(r=a-c)+(i=s-l)*c+i*r,f=s+(h=(this._hi-o-f+this._lo-s*u)/a),this._hi=f,this._lo=s-f+h,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof e){var t,n,i,r,s=arguments[0],o=null,a=null,u=null,l=null;return t=(i=this._hi/s._hi)-(o=(u=e.SPLIT*i)-(o=u-i)),l=o*(a=(l=e.SPLIT*s._hi)-(a=l-s._hi))-(r=i*s._hi)+o*(n=s._hi-a)+t*a+t*n,new e(l=i+(u=(this._hi-r-l+this._lo-i*s._lo)/s._hi),i-l+u)}if("number"==typeof arguments[0]){var c=arguments[0];return h.isNaN(c)?e.createNaN():e.copy(this).selfDivide(c,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(t){if(0===t)return e.valueOf(1);var n=new e(this),i=e.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&i.selfMultiply(n),(r/=2)>0&&(n=n.sqr());else i=n;return t<0?i.reciprocal():i}},{key:"ceil",value:function(){if(this.isNaN())return e.NaN;var t=Math.ceil(this._hi),n=0;return t===this._hi&&(n=Math.ceil(this._lo)),new e(t,n)}},{key:"compareTo",value:function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var n=arguments[0];return this.init(n),this}}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return e.valueOf(0);if(this.isNegative())return e.NaN;var t=1/Math.sqrt(this._hi),n=this._hi*t,i=e.valueOf(n),r=this.subtract(i.sqr())._hi*(.5*t);return i.add(r)}},{key:"selfAdd",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var n,i,r,s,o,a=arguments[0],u=null;return u=(r=this._hi+a)-(s=r-this._hi),i=(o=(u=a-s+(this._hi-u))+this._lo)+(r-(n=r+o)),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var l,c,h,f,g=arguments[0],v=arguments[1],_=null,d=null,y=null;h=this._hi+g,c=this._lo+v,d=h-(y=h-this._hi),_=c-(f=c-this._lo);var p=(l=h+(y=(d=g-y+(this._hi-d))+c))+(y=(_=v-f+(this._lo-_))+(y+(h-l))),m=y+(l-p);return this._hi=p,this._lo=m,this}}},{key:"selfMultiply",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.selfMultiply(n,0)}}else if(2===arguments.length){var i,r,s=arguments[0],o=arguments[1],a=null,u=null,l=null,c=null;a=(l=e.SPLIT*this._hi)-this._hi,c=e.SPLIT*s,a=l-a,i=this._hi-a,u=c-s;var h=(l=this._hi*s)+(c=a*(u=c-u)-l+a*(r=s-u)+i*u+i*r+(this._hi*o+this._lo*s)),f=c+(a=l-h);return this._hi=h,this._lo=f,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return e.NaN;var t=Math.floor(this._hi),n=0;return t===this._hi&&(n=Math.floor(this._lo)),new e(t,n)}},{key:"negate",value:function(){return this.isNaN()?this:new e(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return t.isNaN()?e.createNaN():e.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var n=arguments[0];return h.isNaN(n)?e.createNaN():e.copy(this).selfMultiply(n,0)}}},{key:"isNaN",value:function(){return h.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=e.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!0,n),r=n[0]+1,s=i;if("."===i.charAt(0))s="0"+i;else if(r<0)s="0."+e.stringOfChar("0",-r)+i;else if(-1===i.indexOf(".")){var o=r-i.length;s=i+e.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+s:s}},{key:"reciprocal",value:function(){var t,n,i,r,s=null,o=null,a=null,u=null;t=(i=1/this._hi)-(s=(a=e.SPLIT*i)-(s=a-i)),o=(u=e.SPLIT*this._hi)-this._hi;var l=i+(a=(1-(r=i*this._hi)-(u=s*(o=u-o)-r+s*(n=this._hi-o)+t*o+t*n)-i*this._lo)/this._hi);return new e(l,i-l+a)}},{key:"toSciNotation",value:function(){if(this.isZero())return e.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!1,n),r=e.SCI_NOT_EXPONENT_CHAR+n[0];if("0"===i.charAt(0))throw new IllegalStateException("Found leading zero: "+i);var s="";i.length>1&&(s=i.substring(1));var o=i.charAt(0)+"."+s;return this.isNegative()?"-"+o+r:o+r}},{key:"abs",value:function(){return this.isNaN()?e.NaN:this.isNegative()?this.negate():new e(this)}},{key:"isPositive",value:function(){return this._hi>0||0===this._hi&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return e.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var n=arguments[0];return e.copy(this).selfAdd(n)}}},{key:"init",value:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof e){var n=arguments[0];this._hi=n._hi,this._lo=n._lo}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this._hi=i,this._lo=r}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||0===this._hi&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?e.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[d,g,v]}}],[{key:"sqr",value:function(t){return e.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){if("string"==typeof arguments[0]){var t=arguments[0];return e.parse(t)}if("number"==typeof arguments[0])return new e(arguments[0])}},{key:"sqrt",value:function(t){return e.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var n=0,i=t.length;D.isWhitespace(t.charAt(n));)n++;var r=!1;if(n<i){var s=t.charAt(n);"-"!==s&&"+"!==s||(n++,"-"===s&&(r=!0))}for(var o=new e,a=0,u=0,l=0;!(n>=i);){var c=t.charAt(n);if(n++,D.isDigit(c)){var h=c-"0";o.selfMultiply(e.TEN),o.selfAdd(h),a++}else{if("."!==c){if("e"===c||"E"===c){var f=t.substring(n);try{l=M.parseInt(f)}catch(n){throw n instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+f+" in string "+t):n}break}throw new NumberFormatException("Unexpected character '"+c+"' at position "+n+" in string "+t)}u=a}}var g=o,v=a-u-l;if(0===v)g=o;else if(v>0){var _=e.TEN.pow(v);g=o.divide(_)}else if(v<0){var d=e.TEN.pow(-v);g=o.multiply(d)}return r?g.negate():g}},{key:"createNaN",value:function(){return new e(h.NaN,h.NaN)}},{key:"copy",value:function(t){return new e(t)}},{key:"magnitude",value:function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i}},{key:"stringOfChar",value:function(t,e){for(var n=new b,i=0;i<e;i++)n.append(t);return n.toString()}}]),e}();A.constructor_=function(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof A){var e=arguments[0];this.init(e)}else if("string"==typeof arguments[0]){var n=arguments[0];A.constructor_.call(this,A.parse(n))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r)}},A.PI=new A(3.141592653589793,1.2246467991473532e-16),A.TWO_PI=new A(6.283185307179586,2.4492935982947064e-16),A.PI_2=new A(1.5707963267948966,6.123233995736766e-17),A.E=new A(2.718281828459045,1.4456468917292502e-16),A.NaN=new A(h.NaN,h.NaN),A.EPS=1.23259516440783e-32,A.SPLIT=134217729,A.MAX_PRINT_DIGITS=32,A.TEN=A.valueOf(10),A.ONE=A.valueOf(1),A.SCI_NOT_EXPONENT_CHAR="E",A.SCI_NOT_ZERO="0.0E0";var F=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"orientationIndex",value:function(e,n,i){var r=t.orientationIndexFilter(e,n,i);if(r<=1)return r;var s=A.valueOf(n.x).selfAdd(-e.x),o=A.valueOf(n.y).selfAdd(-e.y),a=A.valueOf(i.x).selfAdd(-n.x),u=A.valueOf(i.y).selfAdd(-n.y);return s.selfMultiply(u).selfSubtract(o.selfMultiply(a)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof A&&arguments[2]instanceof A&&arguments[0]instanceof A&&arguments[1]instanceof A){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];return t.multiply(i).selfSubtract(e.multiply(n)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3],u=A.valueOf(r),l=A.valueOf(s),c=A.valueOf(o),h=A.valueOf(a);return u.multiply(h).selfSubtract(l.multiply(c)).signum()}}},{key:"intersection",value:function(t,e,n,i){var r=A.valueOf(i.y).selfSubtract(n.y).selfMultiply(A.valueOf(e.x).selfSubtract(t.x)),s=A.valueOf(i.x).selfSubtract(n.x).selfMultiply(A.valueOf(e.y).selfSubtract(t.y)),o=r.subtract(s),a=A.valueOf(i.x).selfSubtract(n.x).selfMultiply(A.valueOf(t.y).selfSubtract(n.y)),u=A.valueOf(i.y).selfSubtract(n.y).selfMultiply(A.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u).selfDivide(o).doubleValue(),c=A.valueOf(t.x).selfAdd(A.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=A.valueOf(e.x).selfSubtract(t.x).selfMultiply(A.valueOf(t.y).selfSubtract(n.y)),f=A.valueOf(e.y).selfSubtract(t.y).selfMultiply(A.valueOf(t.x).selfSubtract(n.x)),g=h.subtract(f).selfDivide(o).doubleValue(),v=A.valueOf(n.y).selfAdd(A.valueOf(i.y).selfSubtract(n.y).selfMultiply(g)).doubleValue();return new k(c,v)}},{key:"orientationIndexFilter",value:function(e,n,i){var r=null,s=(e.x-i.x)*(n.y-i.y),o=(e.y-i.y)*(n.x-i.x),a=s-o;if(s>0){if(o<=0)return t.signum(a);r=s+o}else{if(!(s<0))return t.signum(a);if(o>=0)return t.signum(a);r=-s-o}var u=t.DP_SAFE_EPSILON*r;return a>=u||-a>=u?t.signum(a):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}]),t}();F.constructor_=function(){},F.DP_SAFE_EPSILON=1e-15;var G=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"index",value:function(t,e,n){return F.orientationIndex(t,e,n)}},{key:"isCCW",value:function(e){var n=e.length-1;if(n<3)throw new r("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=e[0],s=0,o=1;o<=n;o++){var a=e[o];a.y>i.y&&(i=a,s=o)}var u=s;do{(u-=1)<0&&(u=n)}while(e[u].equals2D(i)&&u!==s);var l=s;do{l=(l+1)%n}while(e[l].equals2D(i)&&l!==s);var c=e[u],h=e[l];if(c.equals2D(i)||h.equals2D(i)||c.equals2D(h))return!1;var f=t.index(c,i,h);return 0===f?c.x>h.x:f>0}}]),t}();function q(){}G.constructor_=function(){},G.CLOCKWISE=-1,G.RIGHT=G.CLOCKWISE,G.COUNTERCLOCKWISE=1,G.LEFT=G.COUNTERCLOCKWISE,G.COLLINEAR=0,G.STRAIGHT=G.COLLINEAR,q.arraycopy=function(t,e,n,i,r){for(var s=0,o=e;o<e+r;o++)n[i+s]=t[o],s++},q.getProperty=function(t){return{"line.separator":"\n"}[t]};var B=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getY",value:function(){var t=this.y/this.w;if(h.isNaN(t)||h.isInfinite(t))throw new O;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(h.isNaN(t)||h.isInfinite(t))throw new O;return t}},{key:"getCoordinate",value:function(){var t=new k;return t.x=this.getX(),t.y=this.getY(),t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"intersection",value:function(t,e,n,i){var r=t.y-e.y,s=e.x-t.x,o=t.x*e.y-e.x*t.y,a=n.y-i.y,u=i.x-n.x,l=n.x*i.y-i.x*n.y,c=r*u-a*s,f=(s*l-u*o)/c,g=(a*o-r*l)/c;if(h.isNaN(f)||h.isInfinite(f)||h.isNaN(g)||h.isInfinite(g))throw new O;return new k(f,g)}}]),t}();B.constructor_=function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof B&&arguments[1]instanceof B){var i=arguments[0],r=arguments[1];this.x=i.y*r.w-r.y*i.w,this.y=r.x*i.w-i.x*r.w,this.w=i.x*r.y-r.x*i.y}else if(arguments[0]instanceof k&&arguments[1]instanceof k){var s=arguments[0],o=arguments[1];this.x=s.y-o.y,this.y=o.x-s.x,this.w=s.x*o.y-o.x*s.y}}else if(3===arguments.length){var a=arguments[0],u=arguments[1],l=arguments[2];this.x=a,this.y=u,this.w=l}else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],g=arguments[3],v=c.y-h.y,_=h.x-c.x,d=c.x*h.y-h.x*c.y,y=f.y-g.y,p=g.x-f.x,m=f.x*g.y-g.x*f.y;this.x=_*m-p*d,this.y=y*d-v*m,this.w=v*p-y*_}};var V=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"log10",value:function(e){var n=Math.log(e);return h.isInfinite(n)||h.isNaN(n)?n:n/t.LOG_10}},{key:"min",value:function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r}},{key:"clamp",value:function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],s=arguments[2];return i<r?r:i>s?s:i}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t;return e>i&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3],u=r;return s>u&&(u=s),o>u&&(u=o),a>u&&(u=a),u}}},{key:"average",value:function(t,e){return(t+e)/2}}]),t}();V.constructor_=function(){},V.LOG_10=Math.log(10);var z=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"segmentToSegment",value:function(e,n,i,r){if(e.equals(n))return t.pointToSegment(e,i,r);if(i.equals(r))return t.pointToSegment(r,e,n);var s=!1;if(R.intersects(e,n,i,r)){var o=(n.x-e.x)*(r.y-i.y)-(n.y-e.y)*(r.x-i.x);if(0===o)s=!0;else{var a=(e.y-i.y)*(r.x-i.x)-(e.x-i.x)*(r.y-i.y),u=((e.y-i.y)*(n.x-e.x)-(e.x-i.x)*(n.y-e.y))/o,l=a/o;(l<0||l>1||u<0||u>1)&&(s=!0)}}else s=!0;return s?V.min(t.pointToSegment(e,i,r),t.pointToSegment(n,i,r),t.pointToSegment(i,e,n),t.pointToSegment(r,e,n)):0}},{key:"pointToSegment",value:function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;if(r<=0)return t.distance(e);if(r>=1)return t.distance(n);var s=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(s)*Math.sqrt(i)}},{key:"pointToLinePerpendicular",value:function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)}},{key:"pointToSegmentString",value:function(e,n){if(0===n.length)throw new r("Line array must contain at least one vertex");for(var i=e.distance(n[0]),s=0;s<n.length-1;s++){var o=t.pointToSegment(e,n[s],n[s+1]);o<i&&(i=o)}return i}}]),t}();z.constructor_=function(){};var Y=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"setOrdinate",value:function(t,e,n){}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(t,e){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(t){}},{key:"getDimension",value:function(){}},{key:"getX",value:function(t){}},{key:"expandEnvelope",value:function(t){}},{key:"copy",value:function(){}},{key:"getY",value:function(t){}},{key:"toCoordinateArray",value:function(){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[v]}}]),t}();Y.constructor_=function(){},Y.X=0,Y.Y=1,Y.Z=2,Y.M=3;var U=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"create",value:function(){1===arguments.length&&(arguments[0]instanceof Array||E(arguments[0],Y))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();U.constructor_=function(){};var X=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();X.constructor_=function(){};var H=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===t.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equals",value:function(){if(arguments[0]instanceof t){var e=arguments[0];return null!==e&&this.equalsTopo(e)}if(arguments[0]instanceof Object){var n=arguments[0];if(!(n instanceof t))return!1;var i=n;return this.equalsExact(i)}}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(t.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return null!==t&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(1===arguments.length){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,i)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(e){if(e.getTypeCode()===t.TYPECODE_GEOMETRYCOLLECTION)throw new r("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new R(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),s=i.next(),o=r.compareTo(s);if(0!==o)return o}return n.hasNext()?1:i.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===t.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===t.TYPECODE_MULTIPOINT||this.getTypeCode()===t.TYPECODE_MULTILINESTRING||this.getTypeCode()===t.TYPECODE_MULTIPOLYGON}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[v,g,d]}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}]),t}();H.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},H.serialVersionUID=0x799ea46522854c00,H.TYPECODE_POINT=0,H.TYPECODE_MULTIPOINT=1,H.TYPECODE_LINESTRING=2,H.TYPECODE_LINEARRING=3,H.TYPECODE_MULTILINESTRING=4,H.TYPECODE_POLYGON=5,H.TYPECODE_MULTIPOLYGON=6,H.TYPECODE_GEOMETRYCOLLECTION=7,H.TYPENAME_POINT="Point",H.TYPENAME_MULTIPOINT="MultiPoint",H.TYPENAME_LINESTRING="LineString",H.TYPENAME_LINEARRING="LinearRing",H.TYPENAME_MULTILINESTRING="MultiLineString",H.TYPENAME_POLYGON="Polygon",H.TYPENAME_MULTIPOLYGON="MultiPolygon",H.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",H.geometryChangedFilter={get interfaces_(){return[X]},filter:function(t){t.geometryChangedAction()}};var W=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();W.constructor_=function(){};var j=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isInBoundary",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(),K=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isInBoundary",value:function(t){return t%2==1}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[j]}}]),t}();K.constructor_=function(){};var Z=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isInBoundary",value:function(t){return t>0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[j]}}]),t}();Z.constructor_=function(){};var Q=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isInBoundary",value:function(t){return t>1}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[j]}}]),t}();Q.constructor_=function(){};var J=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isInBoundary",value:function(t){return 1===t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[j]}}]),t}();J.constructor_=function(){},j.Mod2BoundaryNodeRule=K,j.EndPointBoundaryNodeRule=Z,j.MultiValentEndPointBoundaryNodeRule=Q,j.MonoValentEndPointBoundaryNodeRule=J,j.constructor_=function(){},j.MOD2_BOUNDARY_RULE=new K,j.ENDPOINT_BOUNDARY_RULE=new Z,j.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new Q,j.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new J,j.OGC_SFS_BOUNDARY_RULE=j.MOD2_BOUNDARY_RULE;var $=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"isRing",value:function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))}},{key:"ptNotInList",value:function(e,n){for(var i=0;i<e.length;i++){var r=e[i];if(t.indexOf(r,n)<0)return r}return null}},{key:"scroll",value:function(e,n){var i=t.indexOf(n,e);if(i<0)return null;var r=new Array(e.length).fill(null);q.arraycopy(e,i,r,0,e.length-i),q.arraycopy(e,0,r,e.length-i,i),q.arraycopy(r,0,e,0,e.length)}},{key:"equals",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var o=0;o<i.length;o++)if(0!==s.compare(i[o],r[o]))return!1;return!0}}},{key:"intersection",value:function(t,e){for(var n=new T,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(e){return t.hasRepeatedPoints(e)?new T(e,!1).toCoordinateArray():e}},{key:"reverse",value:function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}}},{key:"removeNull",value:function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,s=0;s<t.length;s++)null!==t[s]&&(i[r++]=t[s]);return i}},{key:"copyDeep",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new k(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3],a=arguments[4],u=0;u<a;u++)s[o+u]=new k(i[r+u])}},{key:"isEqualReversed",value:function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0}},{key:"envelope",value:function(t){for(var e=new R,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}},{key:"toCoordinateArray",value:function(e){return e.toArray(t.coordArrayType)}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1}},{key:"compare",value:function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e}},{key:"extract",value:function(t,e,n){e=V.clamp(e,0,t.length);var i=(n=V.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var s=0,o=e;o<=n;o++)r[s++]=t[o];return r}}]),t}(),tt=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"compare",value:function(t,e){var n=t,i=e;return $.compare(n,i)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[_]}}]),t}();tt.constructor_=function(){};var et=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"compare",value:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=$.compare(n,i);return $.isEqualReversed(n,i)?0:r}},{key:"OLDcompare",value:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=$.increasingDirection(n),s=$.increasingDirection(i),o=r>0?0:n.length-1,a=s>0?0:n.length-1,u=0;u<n.length;u++){var l=n[o].compareTo(i[a]);if(0!==l)return l;o+=r,a+=s}return 0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[_]}}]),t}();function nt(){}function it(){}function rt(t){this.message=t||""}function st(){}function ot(){this.array_=[],arguments[0]instanceof I&&this.addAll(arguments[0])}et.constructor_=function(){},$.ForwardComparator=tt,$.BidirectionalComparator=et,$.constructor_=function(){},$.coordArrayType=new Array(0).fill(null),nt.prototype.get=function(){},nt.prototype.put=function(){},nt.prototype.size=function(){},nt.prototype.values=function(){},nt.prototype.entrySet=function(){},it.prototype=new nt,rt.prototype=new Error,rt.prototype.name="OperationNotSupported",st.prototype=new I,st.prototype.contains=function(){},ot.prototype=new st,ot.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},ot.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},ot.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},ot.prototype.remove=function(t){throw new rt},ot.prototype.size=function(){return this.array_.length},ot.prototype.isEmpty=function(){return 0===this.array_.length},ot.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},ot.prototype.iterator=function(){return new at(this)};var at=function(t){this.hashSet_=t,this.position_=0};function ut(t){return null==t?0:t.color}function lt(t){return null==t?null:t.parent}function ct(t,e){null!==t&&(t.color=e)}function ht(t){return null==t?null:t.left}function ft(t){return null==t?null:t.right}function gt(){this.root_=null,this.size_=0}at.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new S;return this.hashSet_.array_[this.position_++]},at.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},at.prototype.remove=function(){throw new rt},gt.prototype=new it,gt.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},gt.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var s=r.value;return r.value=e,s}r=r.right}}while(null!==r);var o={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=o:n.right=o,this.fixAfterInsertion(o),this.size_++,null},gt.prototype.fixAfterInsertion=function(t){var e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)lt(t)===ht(lt(lt(t)))?1===ut(e=ft(lt(lt(t))))?(ct(lt(t),0),ct(e,0),ct(lt(lt(t)),1),t=lt(lt(t))):(t===ft(lt(t))&&(t=lt(t),this.rotateLeft(t)),ct(lt(t),0),ct(lt(lt(t)),1),this.rotateRight(lt(lt(t)))):1===ut(e=ht(lt(lt(t))))?(ct(lt(t),0),ct(e,0),ct(lt(lt(t)),1),t=lt(lt(t))):(t===ht(lt(t))&&(t=lt(t),this.rotateRight(t)),ct(lt(t),0),ct(lt(lt(t)),1),this.rotateLeft(lt(lt(t))));this.root_.color=0},gt.prototype.values=function(){var t=new w,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=gt.successor(e));)t.add(e.value);return t},gt.prototype.entrySet=function(){var t=new ot,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=gt.successor(e));)t.add(e);return t},gt.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},gt.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},gt.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},gt.successor=function(t){var e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e},gt.prototype.size=function(){return this.size_},gt.prototype.containsKey=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return!0;e=e.right}}return!1};var vt=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();function _t(){}function dt(){this.array_=[],arguments[0]instanceof I&&this.addAll(arguments[0])}vt.constructor_=function(){},_t.prototype=new st,dt.prototype=new _t,dt.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},dt.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},dt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},dt.prototype.remove=function(t){throw new rt},dt.prototype.size=function(){return this.array_.length},dt.prototype.isEmpty=function(){return 0===this.array_.length},dt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},dt.prototype.iterator=function(){return new yt(this)};var yt=function(t){this.treeSet_=t,this.position_=0};function pt(){}yt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new S;return this.treeSet_.array_[this.position_++]},yt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},yt.prototype.remove=function(){throw new rt},pt.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)i=function(t,e){return t.compareTo(e)},r.sort(i);else if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var s=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<s.length;t++)r.push(s[t])}else if(4===arguments.length){e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i);var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])}},pt.asList=function(t){for(var e=new w,n=0,i=t.length;n<i;n++)e.add(t[n]);return e};var mt=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"toDimensionSymbol",value:function(e){switch(e){case t.FALSE:return t.SYM_FALSE;case t.TRUE:return t.SYM_TRUE;case t.DONTCARE:return t.SYM_DONTCARE;case t.P:return t.SYM_P;case t.L:return t.SYM_L;case t.A:return t.SYM_A}throw new r("Unknown dimension value: "+e)}},{key:"toDimensionValue",value:function(e){switch(D.toUpperCase(e)){case t.SYM_FALSE:return t.FALSE;case t.SYM_TRUE:return t.TRUE;case t.SYM_DONTCARE:return t.DONTCARE;case t.SYM_P:return t.P;case t.SYM_L:return t.L;case t.SYM_A:return t.A}throw new r("Unknown dimension symbol: "+e)}}]),t}();mt.constructor_=function(){},mt.P=0,mt.L=1,mt.A=2,mt.FALSE=-1,mt.TRUE=-2,mt.DONTCARE=-3,mt.SYM_FALSE="F",mt.SYM_TRUE="T",mt.SYM_DONTCARE="*",mt.SYM_P="0",mt.SYM_L="1",mt.SYM_A="2";var kt=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();kt.constructor_=function(){};var xt=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t,e){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();xt.constructor_=function(){};var Et=function(t){i(r,H);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"computeEnvelopeInternal",value:function(){for(var t=new R,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}},{key:"getGeometryN",value:function(t){return this._geometries[t]}},{key:"getCoordinates",value:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t}},{key:"getArea",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof H){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t;if(this._geometries.length!==i._geometries.length)return!1;for(var s=0;s<this._geometries.length;s++)if(!this._geometries[s].equalsExact(i._geometries[s],n))return!1;return!0}return e(l(r.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();pt.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var t=mt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}},{key:"getTypeCode",value:function(){return H.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var t=mt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}},{key:"getLength",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"reverse",value:function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0],e=new dt(pt.asList(this._geometries)),n=new dt(pt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],s=i,o=this.getNumGeometries(),a=s.getNumGeometries(),u=0;u<o&&u<a;){var l=this.getGeometryN(u),c=s.getGeometryN(u),h=l.compareToSameClass(c,r);if(0!==h)return h;u++}return u<o?1:u<a?-1:0}}},{key:"apply",value:function(){if(E(arguments[0],W))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(E(arguments[0],xt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(E(arguments[0],kt)){var r=arguments[0];r.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(r)}else if(E(arguments[0],X)){var o=arguments[0];o.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(o)}}},{key:"getBoundary",value:function(){return this.checkNotGeometryCollection(this),m.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return H.TYPENAME_GEOMETRYCOLLECTION}},{key:"copy",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)}},{key:"isEmpty",value:function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}]),r}();Et.constructor_=function(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];if(H.constructor_.call(this,e),null===t&&(t=[]),H.hasNullElements(t))throw new r("geometries must not contain null elements");this._geometries=t}},Et.serialVersionUID=-0x4f07bcb1f857d800;var It=function(t){i(r,Et);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof H){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&e(l(r.prototype),"equalsExact",this).call(this,t,n)}return e(l(r.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?mt.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return H.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"reverse",value:function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)}},{key:"getBoundary",value:function(){return new Nt(this).getBoundary()}},{key:"getGeometryType",value:function(){return H.TYPENAME_MULTILINESTRING}},{key:"copy",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[vt]}}]),r}();It.constructor_=function(){var t=arguments[0],e=arguments[1];Et.constructor_.call(this,t,e)},It.serialVersionUID=0x7155d2ab4afa8000;var Nt=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"boundaryMultiLineString",value:function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)}},{key:"getBoundary",value:function(){return this._geom instanceof Dt?this.boundaryLineString(this._geom):this._geom instanceof It?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()}},{key:"boundaryLineString",value:function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])}},{key:"getEmptyMultiPoint",value:function(){return this._geomFact.createMultiPoint()}},{key:"computeBoundaryCoordinates",value:function(t){var e=new w;this._endpointMap=new gt;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var s=r.next(),o=s.getValue().count;this._bnRule.isInBoundary(o)&&e.add(s.getKey())}return $.toCoordinateArray(e)}},{key:"addEndpoint",value:function(t){var e=this._endpointMap.get(t);null===e&&(e=new Ct,this._endpointMap.put(t,e)),e.count++}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBoundary",value:function(){return 1===arguments.length?new t(arguments[0]).getBoundary():2===arguments.length?new t(arguments[0],arguments[1]).getBoundary():void 0}}]),t}();Nt.constructor_=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0];Nt.constructor_.call(this,t,j.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._geom=e,this._geomFact=e.getFactory(),this._bnRule=n}};var Ct=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ct.constructor_=function(){this.count=null};var St=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"ofLine",value:function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new k;t.getCoordinate(0,i);for(var r=i.x,s=i.y,o=1;o<e;o++){t.getCoordinate(o,i);var a=i.x,u=i.y,l=a-r,c=u-s;n+=Math.sqrt(l*l+c*c),r=a,s=u}return n}}]),t}();function wt(){}function Lt(){}function Tt(){}function Rt(){}function Pt(){}St.constructor_=function(){};var Ot=function(){function e(){c(this,e),e.constructor_.apply(this,arguments)}return f(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"chars",value:function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return new String(n)}},{key:"getStackTrace",value:function(){if(1===arguments.length){var n=arguments[0],i=new Tt,r=new wt(i);return n.printStackTrace(r),i.toString()}if(2===arguments.length){for(var s=arguments[0],o=arguments[1],a="",u=new Pt(new Lt(e.getStackTrace(s))),l=0;l<o;l++)try{a+=u.readLine()+e.NEWLINE}catch(t){if(!(t instanceof Rt))throw t;m.shouldNeverReachHere()}return a}}},{key:"split",value:function(t,e){for(var n=e.length,i=new w,r=""+t,s=r.indexOf(e);s>=0;){var o=r.substring(0,s);i.add(o),s=(r=r.substring(s+n)).indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),u=0;u<a.length;u++)a[u]=i.get(u);return a}},{key:"toString",value:function(){if(1===arguments.length&&"number"==typeof arguments[0]){var t=arguments[0];return e.SIMPLE_ORDINATE_FORMAT.format(t)}}},{key:"spaces",value:function(t){return e.chars(" ",t)}}]),e}();function bt(t){this.str=t}Ot.constructor_=function(){},Ot.NEWLINE=q.getProperty("line.separator"),Ot.SIMPLE_ORDINATE_FORMAT=new function(){}("0.#"),bt.prototype.append=function(t){this.str+=t},bt.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},bt.prototype.toString=function(t){return this.str};var Mt=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"copyCoord",value:function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),s=0;s<r;s++)n.setOrdinate(i,s,t.getOrdinate(e,s))}},{key:"isRing",value:function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Y.X)===t.getOrdinate(e-1,Y.X)&&t.getOrdinate(0,Y.Y)===t.getOrdinate(e-1,Y.Y)}},{key:"isEqual",value:function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var s=0;s<i;s++){var o=t.getOrdinate(r,s),a=e.getOrdinate(r,s);if(!(t.getOrdinate(r,s)===e.getOrdinate(r,s)||h.isNaN(o)&&h.isNaN(a)))return!1}return!0}},{key:"extend",value:function(e,n,i){var r=e.create(i,n.getDimension()),s=n.size();if(t.copy(n,0,r,0,s),s>0)for(var o=s;o<i;o++)t.copy(n,s-1,r,o,1);return r}},{key:"reverse",value:function(e){for(var n=e.size()-1,i=Math.trunc(n/2),r=0;r<=i;r++)t.swap(e,r,n-r)}},{key:"swap",value:function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}}},{key:"copy",value:function(e,n,i,r,s){for(var o=0;o<s;o++)t.copyCoord(e,n+o,i,r+o)}},{key:"toString",value:function(){if(1===arguments.length&&E(arguments[0],Y)){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new bt;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var s=0;s<n;s++)s>0&&i.append(","),i.append(Ot.toString(t.getOrdinate(r,s)))}return i.append(")"),i.toString()}}},{key:"ensureValidRing",value:function(e,n){var i=n.size();return 0===i?n:i<=3?t.createClosedRing(e,n,4):n.getOrdinate(0,Y.X)===n.getOrdinate(i-1,Y.X)&&n.getOrdinate(0,Y.Y)===n.getOrdinate(i-1,Y.Y)?n:t.createClosedRing(e,n,i+1)}},{key:"createClosedRing",value:function(e,n,i){var r=e.create(i,n.getDimension()),s=n.size();t.copy(n,0,r,0,s);for(var o=s;o<i;o++)t.copy(n,0,r,o,1);return r}}]),t}();Mt.constructor_=function(){};var Dt=function(t){i(o,H);var n=s(o);function o(){var t;return c(this,o),t=n.call(this),o.constructor_.apply(a(t),arguments),t}return f(o,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new R:this._points.expandEnvelope(new R)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof H){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t;if(this._points.size()!==i._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n))return!1;return!0}return e(l(o.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){var n=this._points.copy();Mt.reverse(n),this._points=n}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?mt.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return H.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return St.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"reverse",value:function(){var t=this._points.copy();return Mt.reverse(t),this.getFactory().createLineString(t)}},{key:"compareToSameClass",value:function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}}},{key:"apply",value:function(){if(E(arguments[0],W))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(E(arguments[0],xt)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else E(arguments[0],kt)?arguments[0].filter(this):E(arguments[0],X)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return new Nt(this).getBoundary()}},{key:"isEquivalentClass",value:function(t){return t instanceof o}},{key:"getCoordinateN",value:function(t){return this._points.getCoordinate(t)}},{key:"getGeometryType",value:function(){return H.TYPENAME_LINESTRING}},{key:"copy",value:function(){return new o(this._points.copy(),this._factory)}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return 0===this._points.size()}},{key:"init",value:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new r("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}},{key:"isCoordinate",value:function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}},{key:"getClass",value:function(){return o}},{key:"interfaces_",get:function(){return[vt]}}]),o}();Dt.constructor_=function(){if(this._points=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];H.constructor_.call(this,e),this.init(t)}},Dt.serialVersionUID=0x2b2b51ba435c8e00;var At=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();At.constructor_=function(){};var Ft=function(t){i(r,H);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new R;var t=new R;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof H){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),n))}return e(l(r.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return mt.FALSE}},{key:"getTypeCode",value:function(){return H.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"reverse",value:function(){return this.copy()}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}}},{key:"apply",value:function(){if(E(arguments[0],W)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(E(arguments[0],xt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else E(arguments[0],kt)?arguments[0].filter(this):E(arguments[0],X)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return H.TYPENAME_POINT}},{key:"copy",value:function(){return new r(this._coordinates.copy(),this._factory)}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this._coordinates.size()}},{key:"init",value:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),m.isTrue(t.size()<=1),this._coordinates=t}},{key:"isSimple",value:function(){return!0}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[At]}}]),r}();Ft.constructor_=function(){this._coordinates=null;var t=arguments[0],e=arguments[1];H.constructor_.call(this,e),this.init(t)},Ft.serialVersionUID=0x44077bad161cbc00;var Gt=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var e=arguments[0];return Math.abs(t.ofRingSigned(e))}if(E(arguments[0],Y)){var n=arguments[0];return Math.abs(t.ofRingSigned(n))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,s=t[i+1].y;e+=r*(t[i-1].y-s)}return e/2}if(E(arguments[0],Y)){var o=arguments[0],a=o.size();if(a<3)return 0;var u=new k,l=new k,c=new k;o.getCoordinate(0,l),o.getCoordinate(1,c);var h=l.x;c.x-=h;for(var f=0,g=1;g<a-1;g++)u.y=l.y,l.x=c.x,l.y=c.y,o.getCoordinate(g+1,c),c.x-=h,f+=l.x*(u.y-c.y);return f/2}}}]),t}();Gt.constructor_=function(){};var qt=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();qt.constructor_=function(){};var Bt=function(t){i(r,H);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var s=this._holes[r].getCoordinates(),o=0;o<s.length;o++)t[++e]=s[o];return t}},{key:"getArea",value:function(){var t=0;t+=Gt.ofRing(this._shell.getCoordinateSequence());for(var e=0;e<this._holes.length;e++)t-=Gt.ofRing(this._holes[e].getCoordinateSequence());return t}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var s=t.getX(0),o=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==s==(l!==o))return!1;s=u,o=l}return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof H){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t,s=this._shell,o=i._shell;if(!s.equalsExact(o,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(i._holes[a],n))return!1;return!0}return e(l(r.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);pt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);q.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=$.minCoordinate(e.getCoordinates());$.scroll(i,r),q.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],G.isCCW(e.getCoordinates())===n&&$.reverse(e.getCoordinates())}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return H.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}},{key:"reverse",value:function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],s=i,o=this._shell,a=s._shell,u=o.compareToSameClass(a,r);if(0!==u)return u;for(var l=this.getNumInteriorRing(),c=s.getNumInteriorRing(),h=0;h<l&&h<c;){var f=this.getInteriorRingN(h),g=s.getInteriorRingN(h),v=f.compareToSameClass(g,r);if(0!==v)return v;h++}return h<l?1:h<c?-1:0}}},{key:"apply",value:function(){if(E(arguments[0],W)){var t=arguments[0];this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(E(arguments[0],xt)){var n=arguments[0];if(this._shell.apply(n),!n.isDone())for(var i=0;i<this._holes.length&&(this._holes[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(E(arguments[0],kt))arguments[0].filter(this);else if(E(arguments[0],X)){var r=arguments[0];r.filter(this),this._shell.apply(r);for(var s=0;s<this._holes.length;s++)this._holes[s].apply(r)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}},{key:"getGeometryType",value:function(){return H.TYPENAME_POLYGON}},{key:"copy",value:function(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)e[n]=this._holes[n].copy();return new r(t,e,this._factory)}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(t){return this._holes[t]}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[qt]}}]),r}();Bt.constructor_=function(){this._shell=null,this._holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(H.constructor_.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),H.hasNullElements(e))throw new r("holes must not contain null elements");if(t.isEmpty()&&H.hasNonEmptyElements(e))throw new r("shell is empty but holes are not");this._shell=t,this._holes=e},Bt.serialVersionUID=-0x307ffefd8dc97200;var Vt=function(t){i(r,Et);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof H){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&e(l(r.prototype),"equalsExact",this).call(this,t,n)}return e(l(r.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(1===arguments.length&&Number.isInteger(arguments[0])){var t=arguments[0];return this._geometries[t].getCoordinate()}return e(l(r.prototype),"getCoordinate",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return mt.FALSE}},{key:"getTypeCode",value:function(){return H.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return H.TYPENAME_MULTIPOINT}},{key:"copy",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[At]}}]),r}();Vt.constructor_=function(){var t=arguments[0],e=arguments[1];Et.constructor_.call(this,t,e)},Vt.serialVersionUID=-0x6fb1ed4162e0fc00;var zt=function(t){i(o,Dt);var n=s(o);function o(){var t;return c(this,o),t=n.call(this),o.constructor_.apply(a(t),arguments),t}return f(o,[{key:"getBoundaryDimension",value:function(){return mt.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||e(l(o.prototype),"isClosed",this).call(this)}},{key:"getTypeCode",value:function(){return H.TYPECODE_LINEARRING}},{key:"reverse",value:function(){var t=this._points.copy();return Mt.reverse(t),this.getFactory().createLinearRing(t)}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!e(l(o.prototype),"isClosed",this).call(this))throw new r("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<o.MINIMUM_VALID_SIZE)throw new r("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return H.TYPENAME_LINEARRING}},{key:"copy",value:function(){return new o(this._points.copy(),this._factory)}},{key:"getClass",value:function(){return o}},{key:"interfaces_",get:function(){return[]}}]),o}();zt.constructor_=function(){if(arguments[0]instanceof Array&&arguments[1]instanceof te){var t=arguments[0],e=arguments[1];zt.constructor_.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(E(arguments[0],Y)&&arguments[1]instanceof te){var n=arguments[0],i=arguments[1];Dt.constructor_.call(this,n,i),this.validateConstruction()}},zt.MINIMUM_VALID_SIZE=4,zt.serialVersionUID=-0x3b229e262367a600;var Yt=function(t){i(r,Et);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof H){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&e(l(r.prototype),"equalsExact",this).call(this,t,n)}return e(l(r.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return H.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"reverse",value:function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new w,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))}},{key:"getGeometryType",value:function(){return H.TYPENAME_MULTIPOLYGON}},{key:"copy",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[qt]}}]),r}();Yt.constructor_=function(){var t=arguments[0],e=arguments[1];Et.constructor_.call(this,t,e)},Yt.serialVersionUID=-0x7a5aa1369171980;var Ut=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"setCopyUserData",value:function(t){this._isUserDataCopied=t}},{key:"edit",value:function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n}},{key:"editInternal",value:function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Et?this.editGeometryCollection(t,e):t instanceof Bt?this.editPolygon(t,e):t instanceof Ft||t instanceof Dt?e.edit(t,this._factory):(m.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)}},{key:"editGeometryCollection",value:function(t,e){for(var n=e.edit(t,this._factory),i=new w,r=0;r<n.getNumGeometries();r++){var s=this.edit(n.getGeometryN(r),e);null===s||s.isEmpty()||i.add(s)}return n.getClass()===Vt?this._factory.createMultiPoint(i.toArray([])):n.getClass()===It?this._factory.createMultiLineString(i.toArray([])):n.getClass()===Yt?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))}},{key:"editPolygon",value:function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon()),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new w,s=0;s<n.getNumInteriorRing();s++){var o=this.edit(n.getInteriorRingN(s),e);null===o||o.isEmpty()||r.add(o)}return this._factory.createPolygon(i,r.toArray([]))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();function Xt(){}Ut.GeometryEditorOperation=Xt;var Ht=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"edit",value:function(t,e){return t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Xt]}}]),t}();Ht.constructor_=function(){};var Wt=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"edit",value:function(t,e){var n=this.edit(t.getCoordinates(),t);return t instanceof zt?null===n?e.createLinearRing():e.createLinearRing(n):t instanceof Dt?null===n?e.createLineString():e.createLineString(n):t instanceof Ft?null===n||0===n.length?e.createPoint():e.createPoint(n[0]):t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Xt]}}]),t}();Wt.constructor_=function(){};var jt=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"edit",value:function(t,e){return t instanceof zt?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Dt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Ft?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Xt]}}]),t}();jt.constructor_=function(){},Ut.NoOpGeometryOperation=Ht,Ut.CoordinateOperation=Wt,Ut.CoordinateSequenceOperation=jt,Ut.constructor_=function(){if(this._factory=null,this._isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._factory=t}};var Kt=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"setOrdinate",value:function(t,e,n){switch(e){case Y.X:this._coordinates[t].x=n;break;case Y.Y:this._coordinates[t].y=n;break;case Y.Z:this._coordinates[t].z=n;break;default:throw new r("invalid ordinateIndex")}}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case Y.X:return this._coordinates[t].x;case Y.Y:return this._coordinates[t].y;case Y.Z:return this._coordinates[t].z}return h.NaN}},{key:"getCoordinate",value:function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}}},{key:"getCoordinateCopy",value:function(t){return new k(this._coordinates[t])}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var e=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)e[n]=this._coordinates[n].copy();return new t(e,this._dimension)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new bt(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Y,d]}}]),t}();Kt.constructor_=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];Kt.constructor_.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this._coordinates[n]=new k}else if(E(arguments[0],Y)){var i=arguments[0];if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=i.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var s=arguments[0],o=arguments[1];this._coordinates=s,this._dimension=o,null===s&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)this._coordinates[l]=new k}},Kt.serialVersionUID=-0xcb44a778db18e00;var Zt=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"readResolve",value:function(){return t.instance()}},{key:"create",value:function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Kt(t)}if(E(arguments[0],Y)){var e=arguments[0];return new Kt(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new Kt(n):new Kt(n,i)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[U,d]}}],[{key:"instance",value:function(){return t.instanceObject}}]),t}();function Qt(){this.map_=new Map}Zt.constructor_=function(){},Zt.serialVersionUID=-0x38e49fa6cf6f2e00,Zt.instanceObject=new Zt,Qt.prototype=new nt,Qt.prototype.get=function(t){return this.map_.get(t)||null},Qt.prototype.put=function(t,e){return this.map_.set(t,e),e},Qt.prototype.values=function(){for(var t=new w,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},Qt.prototype.entrySet=function(){var t=new ot;return this.map_.entries().forEach(function(e){return t.add(e)}),t},Qt.prototype.size=function(){return this.map_.size()};var Jt=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"equals",value:function(e){if(!(e instanceof t))return!1;var n=e;return this._modelType===n._modelType&&this._scale===n._scale}},{key:"compareTo",value:function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new M(n).compareTo(new M(i))}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===t.FLOATING||this._modelType===t.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var e="UNKNOWN";return this._modelType===t.FLOATING?e="Floating":this._modelType===t.FLOATING_SINGLE?e="Floating-Single":this._modelType===t.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e}},{key:"makePrecise",value:function(){if("number"==typeof arguments[0]){var e=arguments[0];return h.isNaN(e)?e:this._modelType===t.FLOATING_SINGLE?e:this._modelType===t.FIXED?Math.round(e*this._scale)/this._scale:e}if(arguments[0]instanceof k){var n=arguments[0];if(this._modelType===t.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}}},{key:"getMaximumSignificantDigits",value:function(){var e=16;return this._modelType===t.FLOATING?e=16:this._modelType===t.FLOATING_SINGLE?e=6:this._modelType===t.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[d,g]}}],[{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}]),t}(),$t=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"readResolve",value:function(){return t.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[d]}}]),t}();$t.constructor_=function(){this._name=null;var t=arguments[0];this._name=t,$t.nameToTypeMap.put(t,this)},$t.serialVersionUID=-552860263173159e4,$t.nameToTypeMap=new Qt,Jt.Type=$t,Jt.constructor_=function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=Jt.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof $t){var t=arguments[0];this._modelType=t,t===Jt.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this._modelType=Jt.FIXED,this.setScale(e)}else if(arguments[0]instanceof Jt){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}},Jt.serialVersionUID=0x6bee6404e9a25c00,Jt.FIXED=new $t("FIXED"),Jt.FLOATING=new $t("FLOATING"),Jt.FLOATING_SINGLE=new $t("FLOATING SINGLE"),Jt.maximumPreciseValue=9007199254740992;var te=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new k(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new k(t.getMinX(),t.getMinY()),new k(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new k(t.getMinX(),t.getMinY()),new k(t.getMinX(),t.getMaxY()),new k(t.getMaxX(),t.getMaxY()),new k(t.getMaxX(),t.getMinY()),new k(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(E(arguments[0],Y)){var e=arguments[0];return new Dt(e,this)}}}},{key:"createMultiLineString",value:function(){if(0===arguments.length)return new It(null,this);if(1===arguments.length){var t=arguments[0];return new It(t,this)}}},{key:"buildGeometry",value:function(e){for(var n=null,i=!1,r=!1,s=e.iterator();s.hasNext();){var o=s.next(),a=o.getClass();null===n&&(n=a),a!==n&&(i=!0),o instanceof Et&&(r=!0)}if(null===n)return this.createGeometryCollection();if(i||r)return this.createGeometryCollection(t.toGeometryArray(e));var u=e.iterator().next();if(e.size()>1){if(u instanceof Bt)return this.createMultiPolygon(t.toPolygonArray(e));if(u instanceof Dt)return this.createMultiLineString(t.toLineStringArray(e));if(u instanceof Ft)return this.createMultiPoint(t.toPointArray(e));m.shouldNeverReachHere("Unhandled class: "+u.getClass().getName())}return u}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(E(arguments[0],Y)){var e=arguments[0];return new Ft(e,this)}}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(E(arguments[0],Y)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof zt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return new Bt(i,r,this)}}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){if(0===arguments.length)return new Et(null,this);if(1===arguments.length){var t=arguments[0];return new Et(t,this)}}},{key:"createGeometry",value:function(t){return new Ut(this).edit(t,new ee(this._coordinateSequenceFactory))}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(E(arguments[0],Y)){var e=arguments[0];return new zt(e,this)}}}},{key:"createMultiPolygon",value:function(){if(0===arguments.length)return new Yt(null,this);if(1===arguments.length){var t=arguments[0];return new Yt(t,this)}}},{key:"createMultiPoint",value:function(){if(0===arguments.length)return new Vt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Vt(t,this)}if(E(arguments[0],Y)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),i=0;i<e.size();i++){var r=this.getCoordinateSequenceFactory().create(1,e.getDimension());Mt.copy(e,i,r,0,1),n[i]=this.createPoint(r)}return this.createMultiPoint(n)}}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[d]}}],[{key:"toMultiPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Zt.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}]),t}(),ee=function(t){i(r,Ut.CoordinateSequenceOperation);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"edit",value:function(){if(2===arguments.length&&arguments[1]instanceof H&&E(arguments[0],Y)){var t=arguments[0];return this.coordinateSequenceFactory.create(t)}return e(l(r.prototype),"edit",this).apply(this,arguments)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}]),r}();ee.constructor_=function(){this.coordinateSequenceFactory=null;var t=arguments[0];this.coordinateSequenceFactory=t},te.CloneOp=ee,te.constructor_=function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)te.constructor_.call(this,new Jt,0);else if(1===arguments.length){if(E(arguments[0],U)){var t=arguments[0];te.constructor_.call(this,new Jt,0,t)}else if(arguments[0]instanceof Jt){var e=arguments[0];te.constructor_.call(this,e,0,te.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];te.constructor_.call(this,n,i,te.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this._precisionModel=r,this._coordinateSequenceFactory=o,this._SRID=s}},te.serialVersionUID=-0x5ea75f2051eeb400;var ne={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},ie=function(){function t(e){c(this,t),this.geometryFactory=e||new te,this.precisionModel=this.geometryFactory.getPrecisionModel()}return f(t,[{key:"read",value:function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=ne.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=ne.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],se[n]&&(e=se[n].call(this,i))),void 0===e)throw new Error("Could not parse WKT "+t);return e}},{key:"write",value:function(t){return this.extractGeometry(t)}},{key:"extractGeometry",value:function(t){var e=t.getGeometryType().toLowerCase();if(!re[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+re[e].call(this,t)+")"}}]),t}(),re={coordinate:function(t){return this.precisionModel.makePrecise(t),t.x+" "+t.y},point:function(t){return re.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+re.point.call(this,t._geometries[n])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(re.coordinate.call(this,t._points._coordinates[n]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(re.coordinate.call(this,t._points._coordinates[n]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+re.linestring.call(this,t._geometries[n])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+re.linestring.call(this,t._shell)+")");for(var n=0,i=t._holes.length;n<i;++n)e.push("("+re.linestring.call(this,t._holes[n])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+re.polygon.call(this,t._geometries[n])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},se={coord:function(t){var e=t.trim().split(ne.spaces),n=new k(Number.parseFloat(e[0]),Number.parseFloat(e[1]));return this.precisionModel.makePrecise(n),n},point:function(t){return void 0===t?this.geometryFactory.createPoint():this.geometryFactory.createPoint(se.coord.call(this,t))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,s=n.length;r<s;++r)e=n[r].replace(ne.trimParens,"$1"),i.push(se.point.call(this,e));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e=t.trim().split(","),n=[],i=0,r=e.length;i<r;++i)n.push(se.coord.call(this,e[i]));return this.geometryFactory.createLineString(n)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e=t.trim().split(","),n=[],i=0,r=e.length;i<r;++i)n.push(se.coord.call(this,e[i]));return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(ne.parenComma),i=[],r=0,s=n.length;r<s;++r)e=n[r].replace(ne.trimParens,"$1"),i.push(se.linestring.call(this,e));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,s=t.trim().split(ne.parenComma),o=[],a=0,u=s.length;a<u;++a)e=s[a].replace(ne.trimParens,"$1"),n=se.linestring.call(this,e),i=this.geometryFactory.createLinearRing(n._points),0===a?r=i:o.push(i);return this.geometryFactory.createPolygon(r,o)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(ne.doubleParenComma),i=[],r=0,s=n.length;r<s;++r)e=n[r].replace(ne.trimParens,"$1"),i.push(se.polygon.call(this,e));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}},oe=function(){function t(e){c(this,t),this.parser=new ie(e)}return f(t,[{key:"write",value:function(t){return this.parser.write(t)}}],[{key:"toLineString",value:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}]),t}(),ae=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new bt;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==t.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(e,n){return t.computeEdgeDistance(this._intPt[n],this._inputLines[e][0],this._inputLines[e][1])}},{key:"isCollinear",value:function(){return this._result===t.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return oe.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+oe.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeEdgeDistance",value:function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),s=-1;if(t.equals(e))s=0;else if(t.equals(n))s=i>r?i:r;else{var o=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(s=i>r?o:a)||t.equals(e)||(s=Math.max(o,a))}return m.isTrue(!(0===s&&!t.equals(e)),"Bad distance calculation"),s}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y,s=Math.sqrt(i*i+r*r);return m.isTrue(!(0===s&&!t.equals(e)),"Invalid distance calculation"),s}}]),t}();ae.constructor_=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new k,this._intPt[1]=new k,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},ae.DONT_INTERSECT=0,ae.DO_INTERSECT=1,ae.COLLINEAR=2,ae.NO_INTERSECTION=0,ae.POINT_INTERSECTION=1,ae.COLLINEAR_INTERSECTION=2;var ue=function(t){i(r,ae);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"isInSegmentEnvelopes",value:function(t){var e=new R(this._inputLines[0][0],this._inputLines[0][1]),n=new R(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)}},{key:"computeIntersection",value:function(){if(3!==arguments.length)return e(l(r.prototype),"computeIntersection",this).apply(this,arguments);var t=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,R.intersects(n,i,t)&&0===G.index(n,i,t)&&0===G.index(i,n,t))return this._isProper=!0,(t.equals(n)||t.equals(i))&&(this._isProper=!1),this._result=ae.POINT_INTERSECTION,null;this._result=ae.NO_INTERSECTION}},{key:"normalizeToMinimum",value:function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y}},{key:"safeHCoordinateIntersection",value:function(t,e,n,i){var s=null;try{s=B.intersection(t,e,n,i)}catch(g){if(!(g instanceof O))throw g;s=r.nearestEndpoint(t,e,n,i)}return s}},{key:"intersection",value:function(t,e,n,i){var s=this.intersectionWithNormalization(t,e,n,i);return this.isInSegmentEnvelopes(s)||(s=new k(r.nearestEndpoint(t,e,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(s),s}},{key:"smallestInAbsValue",value:function(t,e,n,i){var r=t,s=Math.abs(r);return Math.abs(e)<s&&(r=e,s=Math.abs(e)),Math.abs(n)<s&&(r=n,s=Math.abs(n)),Math.abs(i)<s&&(r=i),r}},{key:"checkDD",value:function(t,e,n,i,r){var s=F.intersection(t,e,n,i),o=this.isInSegmentEnvelopes(s);q.out.println("DD in env = "+o+"  --------------------- "+s),r.distance(s)>1e-4&&q.out.println("Distance = "+r.distance(s))}},{key:"intersectionWithNormalization",value:function(t,e,n,i){var r=new k(t),s=new k(e),o=new k(n),a=new k(i),u=new k;this.normalizeToEnvCentre(r,s,o,a,u);var l=this.safeHCoordinateIntersection(r,s,o,a);return l.x+=u.x,l.y+=u.y,l}},{key:"computeCollinearIntersection",value:function(t,e,n,i){var r=R.intersects(t,e,n),s=R.intersects(t,e,i),o=R.intersects(n,i,t),a=R.intersects(n,i,e);return r&&s?(this._intPt[0]=n,this._intPt[1]=i,ae.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=t,this._intPt[1]=e,ae.COLLINEAR_INTERSECTION):r&&o?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||s||a?ae.COLLINEAR_INTERSECTION:ae.POINT_INTERSECTION):r&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||s||o?ae.COLLINEAR_INTERSECTION:ae.POINT_INTERSECTION):s&&o?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||r||a?ae.COLLINEAR_INTERSECTION:ae.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||r||o?ae.COLLINEAR_INTERSECTION:ae.POINT_INTERSECTION):ae.NO_INTERSECTION}},{key:"normalizeToEnvCentre",value:function(t,e,n,i,r){var s=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,f=n.y>i.y?n.y:i.y,g=((s>l?s:l)+(a<h?a:h))/2,v=((o>c?o:c)+(u<f?u:f))/2;r.x=g,r.y=v,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y}},{key:"computeIntersect",value:function(t,e,n,i){if(this._isProper=!1,!R.intersects(t,e,n,i))return ae.NO_INTERSECTION;var r=G.index(t,e,n),s=G.index(t,e,i);if(r>0&&s>0||r<0&&s<0)return ae.NO_INTERSECTION;var o=G.index(n,i,t),a=G.index(n,i,e);return o>0&&a>0||o<0&&a<0?ae.NO_INTERSECTION:0===r&&0===s&&0===o&&0===a?this.computeCollinearIntersection(t,e,n,i):(0===r||0===s||0===o||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:0===r?this._intPt[0]=new k(n):0===s?this._intPt[0]=new k(i):0===o?this._intPt[0]=new k(t):0===a&&(this._intPt[0]=new k(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,i)),ae.POINT_INTERSECTION)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"nearestEndpoint",value:function(t,e,n,i){var r=t,s=z.pointToSegment(t,n,i),o=z.pointToSegment(e,n,i);return o<s&&(s=o,r=e),(o=z.pointToSegment(n,t,e))<s&&(s=o,r=n),(o=z.pointToSegment(i,t,e))<s&&(s=o,r=i),r}}]),r}();ue.constructor_=function(){};var le=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof t){var e=arguments[0],n=G.index(this.p0,this.p1,e.p0),i=G.index(this.p0,this.p1,e.p1);return n>=0&&i>=0||n<=0&&i<=0?Math.max(n,i):0}if(arguments[0]instanceof k){var r=arguments[0];return G.index(this.p0,this.p1,r)}}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var n=e;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)}},{key:"intersection",value:function(t){var e=new ue;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof k){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new k(e);var n=this.projectionFactor(e),i=new k;return i.x=this.p0.x+n*(this.p1.x-this.p0.x),i.y=this.p0.y+n*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof t){var r=arguments[0],s=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(s>=1&&o>=1)return null;if(s<=0&&o<=0)return null;var a=this.project(r.p0);s<0&&(a=this.p0),s>1&&(a=this.p1);var u=this.project(r.p1);return o<0&&(u=this.p0),o>1&&(u=this.p1),new t(a,u)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return 0===t?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return z.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return t.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?h.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=h.MAX_VALUE,r=null,s=this.closestPoint(t.p0);i=s.distance(t.p0),n[0]=s,n[1]=t.p0;var o=this.closestPoint(t.p1);(r=o.distance(t.p1))<i&&(i=r,n[0]=o,n[1]=t.p1);var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(r=u.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=u),n}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){try{return B.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof O))throw t}return null}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,s=this.p1.y-this.p0.y,o=Math.sqrt(r*r+s*s),a=0,u=0;if(0!==e){if(o<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/o,u=e*s/o}return new k(n-u,i+a)}},{key:"setCoordinates",value:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||h.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"distance",value:function(){if(arguments[0]instanceof t){var e=arguments[0];return z.segmentToSegment(this.p0,this.p1,e.p0,e.p1)}if(arguments[0]instanceof k){var n=arguments[0];return z.pointToSegment(n,this.p0,this.p1)}}},{key:"pointAlong",value:function(t){var e=new k;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);return n^=31*java.lang.Double.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[g,d]}}],[{key:"midPoint",value:function(t,e){return new k((t.x+e.x)/2,(t.y+e.y)/2)}}]),t}();le.constructor_=function(){if(this.p0=null,this.p1=null,0===arguments.length)le.constructor_.call(this,new k,new k);else if(1===arguments.length){var t=arguments[0];le.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3];le.constructor_.call(this,new k(i,r),new k(s,o))}},le.serialVersionUID=0x2d2172135f411c00;var ce=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"toLocationSymbol",value:function(e){switch(e){case t.EXTERIOR:return"e";case t.BOUNDARY:return"b";case t.INTERIOR:return"i";case t.NONE:return"-"}throw new r("Unknown location value: "+e)}}]),t}();ce.constructor_=function(){},ce.INTERIOR=0,ce.BOUNDARY=1,ce.EXTERIOR=2,ce.NONE=-1;var he=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(t.isTrue(this._matrix[ce.INTERIOR][ce.INTERIOR])||t.isTrue(this._matrix[ce.INTERIOR][ce.BOUNDARY])||t.isTrue(this._matrix[ce.BOUNDARY][ce.INTERIOR])||t.isTrue(this._matrix[ce.BOUNDARY][ce.BOUNDARY]))&&this._matrix[ce.EXTERIOR][ce.INTERIOR]===mt.FALSE&&this._matrix[ce.EXTERIOR][ce.BOUNDARY]===mt.FALSE}},{key:"isCoveredBy",value:function(){return(t.isTrue(this._matrix[ce.INTERIOR][ce.INTERIOR])||t.isTrue(this._matrix[ce.INTERIOR][ce.BOUNDARY])||t.isTrue(this._matrix[ce.BOUNDARY][ce.INTERIOR])||t.isTrue(this._matrix[ce.BOUNDARY][ce.BOUNDARY]))&&this._matrix[ce.INTERIOR][ce.EXTERIOR]===mt.FALSE&&this._matrix[ce.BOUNDARY][ce.EXTERIOR]===mt.FALSE}},{key:"set",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this._matrix[n][i]=mt.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this._matrix[r][s]=o}}},{key:"isContains",value:function(){return t.isTrue(this._matrix[ce.INTERIOR][ce.INTERIOR])&&this._matrix[ce.EXTERIOR][ce.INTERIOR]===mt.FALSE&&this._matrix[ce.EXTERIOR][ce.BOUNDARY]===mt.FALSE}},{key:"setAtLeast",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.setAtLeast(n,i,mt.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this._matrix[r][s]<o&&(this._matrix[r][s]=o)}}},{key:"setAtLeastIfValid",value:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}},{key:"isWithin",value:function(){return t.isTrue(this._matrix[ce.INTERIOR][ce.INTERIOR])&&this._matrix[ce.INTERIOR][ce.EXTERIOR]===mt.FALSE&&this._matrix[ce.BOUNDARY][ce.EXTERIOR]===mt.FALSE}},{key:"isTouches",value:function(e,n){return e>n?this.isTouches(n,e):(e===mt.A&&n===mt.A||e===mt.L&&n===mt.L||e===mt.L&&n===mt.A||e===mt.P&&n===mt.A||e===mt.P&&n===mt.L)&&this._matrix[ce.INTERIOR][ce.INTERIOR]===mt.FALSE&&(t.isTrue(this._matrix[ce.INTERIOR][ce.BOUNDARY])||t.isTrue(this._matrix[ce.BOUNDARY][ce.INTERIOR])||t.isTrue(this._matrix[ce.BOUNDARY][ce.BOUNDARY]))}},{key:"isOverlaps",value:function(e,n){return e===mt.P&&n===mt.P||e===mt.A&&n===mt.A?t.isTrue(this._matrix[ce.INTERIOR][ce.INTERIOR])&&t.isTrue(this._matrix[ce.INTERIOR][ce.EXTERIOR])&&t.isTrue(this._matrix[ce.EXTERIOR][ce.INTERIOR]):e===mt.L&&n===mt.L&&1===this._matrix[ce.INTERIOR][ce.INTERIOR]&&t.isTrue(this._matrix[ce.INTERIOR][ce.EXTERIOR])&&t.isTrue(this._matrix[ce.EXTERIOR][ce.INTERIOR])}},{key:"isEquals",value:function(e,n){return e===n&&t.isTrue(this._matrix[ce.INTERIOR][ce.INTERIOR])&&this._matrix[ce.INTERIOR][ce.EXTERIOR]===mt.FALSE&&this._matrix[ce.BOUNDARY][ce.EXTERIOR]===mt.FALSE&&this._matrix[ce.EXTERIOR][ce.INTERIOR]===mt.FALSE&&this._matrix[ce.EXTERIOR][ce.BOUNDARY]===mt.FALSE}},{key:"toString",value:function(){for(var t=new bt("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,mt.toDimensionSymbol(this._matrix[e][n]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(e){if(9!==e.length)throw new r("Should be length 9: "+e);for(var n=0;n<3;n++)for(var i=0;i<3;i++)if(!t.matches(this._matrix[n][i],e.charAt(3*n+i)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}},{key:"isDisjoint",value:function(){return this._matrix[ce.INTERIOR][ce.INTERIOR]===mt.FALSE&&this._matrix[ce.INTERIOR][ce.BOUNDARY]===mt.FALSE&&this._matrix[ce.BOUNDARY][ce.INTERIOR]===mt.FALSE&&this._matrix[ce.BOUNDARY][ce.BOUNDARY]===mt.FALSE}},{key:"isCrosses",value:function(e,n){return e===mt.P&&n===mt.L||e===mt.P&&n===mt.A||e===mt.L&&n===mt.A?t.isTrue(this._matrix[ce.INTERIOR][ce.INTERIOR])&&t.isTrue(this._matrix[ce.INTERIOR][ce.EXTERIOR]):e===mt.L&&n===mt.P||e===mt.A&&n===mt.P||e===mt.A&&n===mt.L?t.isTrue(this._matrix[ce.INTERIOR][ce.INTERIOR])&&t.isTrue(this._matrix[ce.EXTERIOR][ce.INTERIOR]):e===mt.L&&n===mt.L&&0===this._matrix[ce.INTERIOR][ce.INTERIOR]}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[v]}}],[{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return n===mt.SYM_DONTCARE||n===mt.SYM_TRUE&&(e>=0||e===mt.TRUE)||n===mt.SYM_FALSE&&e===mt.FALSE||n===mt.SYM_P&&e===mt.P||n===mt.SYM_L&&e===mt.L||n===mt.SYM_A&&e===mt.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var i=arguments[0],r=arguments[1];return new t(i).matches(r)}}},{key:"isTrue",value:function(t){return t>=0||t===mt.TRUE}}]),t}();he.constructor_=function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(mt.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];he.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof he){var e=arguments[0];he.constructor_.call(this),this._matrix[ce.INTERIOR][ce.INTERIOR]=e._matrix[ce.INTERIOR][ce.INTERIOR],this._matrix[ce.INTERIOR][ce.BOUNDARY]=e._matrix[ce.INTERIOR][ce.BOUNDARY],this._matrix[ce.INTERIOR][ce.EXTERIOR]=e._matrix[ce.INTERIOR][ce.EXTERIOR],this._matrix[ce.BOUNDARY][ce.INTERIOR]=e._matrix[ce.BOUNDARY][ce.INTERIOR],this._matrix[ce.BOUNDARY][ce.BOUNDARY]=e._matrix[ce.BOUNDARY][ce.BOUNDARY],this._matrix[ce.BOUNDARY][ce.EXTERIOR]=e._matrix[ce.BOUNDARY][ce.EXTERIOR],this._matrix[ce.EXTERIOR][ce.INTERIOR]=e._matrix[ce.EXTERIOR][ce.INTERIOR],this._matrix[ce.EXTERIOR][ce.BOUNDARY]=e._matrix[ce.EXTERIOR][ce.BOUNDARY],this._matrix[ce.EXTERIOR][ce.EXTERIOR]=e._matrix[ce.EXTERIOR][ce.EXTERIOR]}};var fe=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(e){for(;e>Math.PI;)e-=t.PI_TIMES_2;for(;e<=-Math.PI;)e+=t.PI_TIMES_2;return e}},{key:"angle",value:function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}}},{key:"isAcute",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0}},{key:"isObtuse",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0}},{key:"interiorAngle",value:function(e,n,i){var r=t.angle(n,e),s=t.angle(n,i);return Math.abs(s-r)}},{key:"normalizePositive",value:function(e){if(e<0){for(;e<0;)e+=t.PI_TIMES_2;e>=t.PI_TIMES_2&&(e=0)}else{for(;e>=t.PI_TIMES_2;)e-=t.PI_TIMES_2;e<0&&(e=0)}return e}},{key:"angleBetween",value:function(e,n,i){var r=t.angle(n,e),s=t.angle(n,i);return t.diff(r,s)}},{key:"diff",value:function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(e,n){var i=Math.sin(n-e);return i>0?t.COUNTERCLOCKWISE:i<0?t.CLOCKWISE:t.NONE}},{key:"angleBetweenOriented",value:function(e,n,i){var r=t.angle(n,e),s=t.angle(n,i)-r;return s<=-Math.PI?s+t.PI_TIMES_2:s>Math.PI?s-t.PI_TIMES_2:s}}]),t}();fe.constructor_=function(){},fe.PI_TIMES_2=2*Math.PI,fe.PI_OVER_2=Math.PI/2,fe.PI_OVER_4=Math.PI/4,fe.COUNTERCLOCKWISE=G.COUNTERCLOCKWISE,fe.CLOCKWISE=G.CLOCKWISE,fe.NONE=G.COLLINEAR;var ge=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"area",value:function(){return t.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return t.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(e){if(null===e)throw new r("Supplied point is null.");return t.interpolateZ(e,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return t.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return t.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return t.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return t.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return t.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return t.inCentre(this.p0,this.p1,this.p2)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"area",value:function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)}},{key:"signedArea",value:function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2}},{key:"det",value:function(t,e,n,i){return t*i-e*n}},{key:"interpolateZ",value:function(t,e,n,i){var r=e.x,s=e.y,o=n.x-r,a=i.x-r,u=n.y-s,l=i.y-s,c=o*l-a*u,h=t.x-r,f=t.y-s,g=(l*h-a*f)/c,v=(-u*h+o*f)/c;return e.z+g*(n.z-e.z)+v*(i.z-e.z)}},{key:"longestSideLength",value:function(t,e,n){var i=t.distance(e),r=e.distance(n),s=n.distance(t),o=i;return r>o&&(o=r),s>o&&(o=s),o}},{key:"isAcute",value:function(t,e,n){return!!fe.isAcute(t,e,n)&&!!fe.isAcute(e,n,t)&&!!fe.isAcute(n,t,e)}},{key:"circumcentre",value:function(e,n,i){var r=i.x,s=i.y,o=e.x-r,a=e.y-s,u=n.x-r,l=n.y-s,c=2*t.det(o,a,u,l),h=t.det(a,o*o+a*a,l,u*u+l*l),f=t.det(o,o*o+a*a,u,u*u+l*l);return new k(r-h/c,s+f/c)}},{key:"perpendicularBisector",value:function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new B(t.x+n/2,t.y+i/2,1),s=new B(t.x-i+n/2,t.y+n+i/2,1);return new B(r,s)}},{key:"angleBisector",value:function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),s=n.x-t.x,o=n.y-t.y;return new k(t.x+r*s,t.y+r*o)}},{key:"area3D",value:function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=e.z-t.z,o=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=r*u-s*a,c=s*o-i*u,h=i*a-r*o,f=l*l+c*c+h*h;return Math.sqrt(f)/2}},{key:"centroid",value:function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new k(i,r)}},{key:"inCentre",value:function(t,e,n){var i=e.distance(n),r=t.distance(n),s=t.distance(e),o=i+r+s,a=(i*t.x+r*e.x+s*n.x)/o,u=(i*t.y+r*e.y+s*n.y)/o;return new k(a,u)}}]),t}();ge.constructor_=function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n};var ve=function(t){i(n,P);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();ve.constructor_=function(){if(0===arguments.length)P.constructor_.call(this);else if(1===arguments.length){var t=arguments[0];P.constructor_.call(this,t)}};var _e=function(){function e(){c(this,e),e.constructor_.apply(this,arguments)}return f(e,[{key:"setToReflectionBasic",value:function(t,e,n,i){if(t===n&&e===i)throw new r("Reflection line points must be distinct");var s=n-t,o=i-e,a=Math.sqrt(s*s+o*o),u=o/a,l=s/a,c=2*u*l,h=l*l-u*u;return this._m00=h,this._m01=c,this._m02=0,this._m10=c,this._m11=-h,this._m12=0,this}},{key:"getInverse",value:function(){var t=this.getDeterminant();if(0===t)throw new ve("Transformation is non-invertible");var n=this._m11/t,i=-this._m10/t,r=-this._m01/t,s=this._m00/t;return new e(n,r,(this._m01*this._m12-this._m02*this._m11)/t,i,s,(-this._m00*this._m12+this._m10*this._m02)/t)}},{key:"compose",value:function(t){var e=t._m00*this._m00+t._m01*this._m10,n=t._m00*this._m01+t._m01*this._m11,i=t._m00*this._m02+t._m01*this._m12+t._m02,r=t._m10*this._m00+t._m11*this._m10,s=t._m10*this._m01+t._m11*this._m11,o=t._m10*this._m02+t._m11*this._m12+t._m12;return this._m00=e,this._m01=n,this._m02=i,this._m10=r,this._m11=s,this._m12=o,this}},{key:"equals",value:function(t){if(null===t)return!1;if(!(t instanceof e))return!1;var n=t;return this._m00===n._m00&&this._m01===n._m01&&this._m02===n._m02&&this._m10===n._m10&&this._m11===n._m11&&this._m12===n._m12}},{key:"setToScale",value:function(t,e){return this._m00=t,this._m01=0,this._m02=0,this._m10=0,this._m11=e,this._m12=0,this}},{key:"isIdentity",value:function(){return 1===this._m00&&0===this._m01&&0===this._m02&&0===this._m10&&1===this._m11&&0===this._m12}},{key:"scale",value:function(t,n){return this.compose(e.scaleInstance(t,n)),this}},{key:"setToIdentity",value:function(){return this._m00=1,this._m01=0,this._m02=0,this._m10=0,this._m11=1,this._m12=0,this}},{key:"isGeometryChanged",value:function(){return!0}},{key:"setTransformation",value:function(){if(1===arguments.length){var t=arguments[0];return this._m00=t._m00,this._m01=t._m01,this._m02=t._m02,this._m10=t._m10,this._m11=t._m11,this._m12=t._m12,this}if(6===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3],s=arguments[4],o=arguments[5];return this._m00=e,this._m01=n,this._m02=i,this._m10=r,this._m11=s,this._m12=o,this}}},{key:"setToRotation",value:function(){if(1===arguments.length){var t=arguments[0];return this.setToRotation(Math.sin(t),Math.cos(t)),this}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this._m00=n,this._m01=-e,this._m02=0,this._m10=e,this._m11=n,this._m12=0,this}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];return this.setToRotation(Math.sin(i),Math.cos(i),r,s),this}if(4===arguments.length){var o=arguments[0],a=arguments[1],u=arguments[2],l=arguments[3];return this._m00=a,this._m01=-o,this._m02=u-u*a+l*o,this._m10=o,this._m11=a,this._m12=l-u*o-l*a,this}}},{key:"getMatrixEntries",value:function(){return[this._m00,this._m01,this._m02,this._m10,this._m11,this._m12]}},{key:"filter",value:function(t,e){this.transform(t,e)}},{key:"rotate",value:function(){if(1===arguments.length){var t=arguments[0];return this.compose(e.rotationInstance(t)),this}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.compose(e.rotationInstance(n,i)),this}if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];return this.compose(e.rotationInstance(r,s,o)),this}if(4===arguments.length){var a=arguments[0],u=arguments[1];return this.compose(e.rotationInstance(a,u)),this}}},{key:"getDeterminant",value:function(){return this._m00*this._m11-this._m01*this._m10}},{key:"composeBefore",value:function(t){var e=this._m00*t._m00+this._m01*t._m10,n=this._m00*t._m01+this._m01*t._m11,i=this._m00*t._m02+this._m01*t._m12+this._m02,r=this._m10*t._m00+this._m11*t._m10,s=this._m10*t._m01+this._m11*t._m11,o=this._m10*t._m02+this._m11*t._m12+this._m12;return this._m00=e,this._m01=n,this._m02=i,this._m10=r,this._m11=s,this._m12=o,this}},{key:"setToShear",value:function(t,e){return this._m00=1,this._m01=t,this._m02=0,this._m10=e,this._m11=1,this._m12=0,this}},{key:"isDone",value:function(){return!1}},{key:"clone",value:function(){try{return null}catch(t){if(!(t instanceof P))throw t;m.shouldNeverReachHere()}return null}},{key:"translate",value:function(t,n){return this.compose(e.translationInstance(t,n)),this}},{key:"setToReflection",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new r("Reflection vector must be non-zero");if(t===e)return this._m00=0,this._m01=1,this._m02=0,this._m10=1,this._m11=0,this._m12=0,this;var n=Math.sqrt(t*t+e*e),i=e/n,s=t/n;return this.rotate(-i,s),this.scale(1,-1),this.rotate(i,s),this}if(4===arguments.length){var o=arguments[0],a=arguments[1],u=arguments[2],l=arguments[3];if(o===u&&a===l)throw new r("Reflection line points must be distinct");this.setToTranslation(-o,-a);var c=u-o,h=l-a,f=Math.sqrt(c*c+h*h),g=h/f,v=c/f;return this.rotate(-g,v),this.scale(1,-1),this.rotate(g,v),this.translate(o,a),this}}},{key:"toString",value:function(){return"AffineTransformation[["+this._m00+", "+this._m01+", "+this._m02+"], ["+this._m10+", "+this._m11+", "+this._m12+"]]"}},{key:"setToTranslation",value:function(t,e){return this._m00=1,this._m01=0,this._m02=t,this._m10=0,this._m11=1,this._m12=e,this}},{key:"shear",value:function(t,n){return this.compose(e.shearInstance(t,n)),this}},{key:"transform",value:function(){if(1===arguments.length){var t=arguments[0].copy();return t.apply(this),t}if(2===arguments.length){if(arguments[0]instanceof k&&arguments[1]instanceof k){var e=arguments[0],n=arguments[1],i=this._m00*e.x+this._m01*e.y+this._m02,r=this._m10*e.x+this._m11*e.y+this._m12;return n.x=i,n.y=r,n}if(E(arguments[0],Y)&&Number.isInteger(arguments[1])){var s=arguments[0],o=arguments[1],a=this._m00*s.getOrdinate(o,0)+this._m01*s.getOrdinate(o,1)+this._m02,u=this._m10*s.getOrdinate(o,0)+this._m11*s.getOrdinate(o,1)+this._m12;s.setOrdinate(o,0,a),s.setOrdinate(o,1,u)}}}},{key:"reflect",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return this.compose(e.reflectionInstance(t,n)),this}if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3];return this.compose(e.reflectionInstance(i,r,s,o)),this}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[v,xt]}}],[{key:"translationInstance",value:function(t,n){var i=new e;return i.setToTranslation(t,n),i}},{key:"shearInstance",value:function(t,n){var i=new e;return i.setToShear(t,n),i}},{key:"reflectionInstance",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1],i=new e;return i.setToReflection(t,n),i}if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3],u=new e;return u.setToReflection(r,s,o,a),u}}},{key:"rotationInstance",value:function(){if(1===arguments.length){var t=arguments[0];return e.rotationInstance(Math.sin(t),Math.cos(t))}if(2===arguments.length){var n=arguments[0],i=arguments[1],r=new e;return r.setToRotation(n,i),r}if(3===arguments.length){var s=arguments[0],o=arguments[1],a=arguments[2];return e.rotationInstance(Math.sin(s),Math.cos(s),o,a)}if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3],f=new e;return f.setToRotation(u,l,c,h),f}}},{key:"scaleInstance",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1],i=new e;return i.setToScale(t,n),i}if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3],u=new e;return u.translate(-o,-a),u.scale(r,s),u.translate(o,a),u}}}]),e}();_e.constructor_=function(){if(this._m00=null,this._m01=null,this._m02=null,this._m10=null,this._m11=null,this._m12=null,0===arguments.length)this.setToIdentity();else if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this._m00=t[0],this._m01=t[1],this._m02=t[2],this._m10=t[3],this._m11=t[4],this._m12=t[5]}else if(arguments[0]instanceof _e){var e=arguments[0];this.setTransformation(e)}}else if(6===arguments.length&&"number"==typeof arguments[5]&&"number"==typeof arguments[4]&&"number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3],o=arguments[4],a=arguments[5];this.setTransformation(n,i,r,s,o,a)}};var de=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"solve",value:function(e,n){var i=n.length;if(e.length!==i||e[0].length!==i)throw new r("Matrix A is incorrectly sized");for(var s=0;s<i;s++){for(var o=s,a=s+1;a<i;a++)Math.abs(e[a][s])>Math.abs(e[o][s])&&(o=a);if(0===e[o][s])return null;t.swapRows(e,s,o),t.swapRows(n,s,o);for(var u=s+1;u<i;u++){for(var l=e[u][s]/e[s][s],c=i-1;c>=s;c--)e[u][c]-=e[s][c]*l;n[u]-=n[s]*l}}for(var h=new Array(i).fill(null),f=i-1;f>=0;f--){for(var g=0,v=f+1;v<i;v++)g+=e[f][v]*h[v];h[f]=(n[f]-g)/e[f][f]}return h}},{key:"swapRows",value:function(){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var t=arguments[0],e=arguments[1],n=arguments[2];if(e===n)return null;for(var i=0;i<t[0].length;i++){var r=t[e][i];t[e][i]=t[n][i],t[n][i]=r}}else if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var s=arguments[0],o=arguments[1],a=arguments[2];if(o===a)return null;var u=s[o];s[o]=s[a],s[a]=u}}}]),t}();de.constructor_=function(){};var ye=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"solve",value:function(t){var e=[[this._src0.x,this._src0.y,1],[this._src1.x,this._src1.y,1],[this._src2.x,this._src2.y,1]];return de.solve(e,t)}},{key:"compute",value:function(){var t=[this._dest0.x,this._dest1.x,this._dest2.x],e=this.solve(t);if(null===e)return!1;this._m00=e[0],this._m01=e[1],this._m02=e[2];var n=[this._dest0.y,this._dest1.y,this._dest2.y],i=this.solve(n);return null!==i&&(this._m10=i[0],this._m11=i[1],this._m12=i[2],!0)}},{key:"getTransformation",value:function(){return this.compute()?new _e(this._m00,this._m01,this._m02,this._m10,this._m11,this._m12):null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ye.constructor_=function(){this._src0=null,this._src1=null,this._src2=null,this._dest0=null,this._dest1=null,this._dest2=null,this._m00=null,this._m01=null,this._m02=null,this._m10=null,this._m11=null,this._m12=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=arguments[4],s=arguments[5];this._src0=t,this._src1=e,this._src2=n,this._dest0=i,this._dest1=r,this._dest2=s};var pe=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"createFromBaseLines",value:function(t,e,n,i){var r=new k(t.x+i.x-n.x,t.y+i.y-n.y),s=fe.angleBetweenOriented(e,t,r),o=e.distance(t),a=i.distance(n);if(0===o)return new _e;var u=a/o,l=_e.translationInstance(-t.x,-t.y);return l.rotate(s),l.scale(u,u),l.translate(n.x,n.y),l}},{key:"createFromControlVectors",value:function(){if(2===arguments.length){if(arguments[0]instanceof k&&arguments[1]instanceof k){var e=arguments[0],n=arguments[1],i=n.x-e.x,s=n.y-e.y;return _e.translationInstance(i,s)}if(arguments[0]instanceof Array&&arguments[1]instanceof Array){var o=arguments[0],a=arguments[1];if(o.length!==a.length)throw new r("Src and Dest arrays are not the same length");if(o.length<=0)throw new r("Too few control points");if(o.length>3)throw new r("Too many control points");return 1===o.length?t.createFromControlVectors(o[0],a[0]):2===o.length?t.createFromControlVectors(o[0],o[1],a[0],a[1]):t.createFromControlVectors(o[0],o[1],o[2],a[0],a[1],a[2])}}else{if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3],f=new k(h.x-c.x,h.y-c.y),g=fe.angleBetweenOriented(l,u,f),v=l.distance(u),_=h.distance(c);if(0===v)return null;var d=_/v,y=_e.translationInstance(-u.x,-u.y);return y.rotate(g),y.scale(d,d),y.translate(c.x,c.y),y}if(6===arguments.length){var p=arguments[0],m=arguments[1],x=arguments[2],E=arguments[3],I=arguments[4],N=arguments[5];return new ye(p,m,x,E,I,N).getTransformation()}}}}]),t}();pe.constructor_=function(){};var me=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){(t instanceof Dt||t instanceof Ft)&&this._coords.add(t.getCoordinate())}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[X]}}],[{key:"getCoordinates",value:function(e){var n=new w;return e.apply(new t(n)),n}}]),t}();me.constructor_=function(){this._coords=null;var t=arguments[0];this._coords=t};var ke=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"map",value:function(t){for(var e=new w,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(te.toGeometryArray(e))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"map",value:function(e,n){return new t(n).map(e)}}]),t}();ke.constructor_=function(){this._mapOp=null;var t=arguments[0];this._mapOp=t};var xe=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"extractElements",value:function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}}},{key:"combine",value:function(){for(var t=new w,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection():null:this._geomFactory.buildGeometry(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"combine",value:function(){if(1===arguments.length)return new t(arguments[0]).combine();if(2===arguments.length){var e=arguments[0],n=arguments[1];return new t(t.createList(e,n)).combine()}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];return new t(t.createList(i,r,s)).combine()}}},{key:"extractFactory",value:function(t){return t.isEmpty()?null:t.iterator().next().getFactory()}},{key:"createList",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new w;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=new w;return o.add(i),o.add(r),o.add(s),o}}}]),t}();xe.constructor_=function(){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null;var t=arguments[0];this._geomFactory=xe.extractFactory(t),this._inputGeoms=t};var Ee=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(e){(null===this._geometryType||t.isOfType(e,this._geometryType))&&this._comps.add(e)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[kt]}}],[{key:"isOfType",value:function(t,e){return t.getGeometryType()===e||e===H.TYPENAME_LINESTRING&&t.getGeometryType()===H.TYPENAME_LINEARRING}},{key:"extract",value:function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.extract(e,n,new w)}if(3===arguments.length){if(E(arguments[2],C)&&arguments[0]instanceof H&&"string"==typeof arguments[1]){var i=arguments[0],r=arguments[1],s=arguments[2];return i.getGeometryType()===r?s.add(i):i instanceof Et&&i.apply(new t(r,s)),s}if(E(arguments[2],C)&&arguments[0]instanceof H&&arguments[1]instanceof Class){var o=arguments[0],a=arguments[1],u=arguments[2];return t.extract(o,t.toGeometryType(a),u)}}}}]),t}();Ee.constructor_=function(){this._geometryType=null,this._comps=null;var t=arguments[0],e=arguments[1];this._geometryType=t,this._comps=e};var Ie=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"map",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ie.constructor_=function(){};var Ne=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"map",value:function(){if(arguments[0]instanceof H&&E(arguments[1],Ie)){for(var t=arguments[0],e=arguments[1],n=new w,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i));null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(E(arguments[0],I)&&E(arguments[1],Ie)){for(var s=arguments[0],o=arguments[1],a=new w,u=s.iterator();u.hasNext();){var l=u.next(),c=o.map(l);null!==c&&a.add(c)}return a}}}]),t}();Ne.constructor_=function(){};var Ce=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"transformPoint",value:function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))}},{key:"transformPolygon",value:function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof zt&&!i.isEmpty()||(n=!1);for(var r=new w,s=0;s<t.getNumInteriorRing();s++){var o=this.transformLinearRing(t.getInteriorRingN(s),t);null===o||o.isEmpty()||(o instanceof zt||(n=!1),r.add(o))}if(n)return this._factory.createPolygon(i,r.toArray([]));var a=new w;return null!==i&&a.add(i),a.addAll(r),this._factory.buildGeometry(a)}},{key:"createCoordinateSequence",value:function(t){return this._factory.getCoordinateSequenceFactory().create(t)}},{key:"getInputGeometry",value:function(){return this._inputGeom}},{key:"transformMultiLineString",value:function(t,e){for(var n=new w,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)}},{key:"transformCoordinates",value:function(t,e){return this.copy(t)}},{key:"transformLineString",value:function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))}},{key:"transformMultiPoint",value:function(t,e){for(var n=new w,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)}},{key:"transformMultiPolygon",value:function(t,e){for(var n=new w,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)}},{key:"copy",value:function(t){return t.copy()}},{key:"transformGeometryCollection",value:function(t,e){for(var n=new w,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(te.toGeometryArray(n)):this._factory.buildGeometry(n)}},{key:"transform",value:function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Ft)return this.transformPoint(t,null);if(t instanceof Vt)return this.transformMultiPoint(t,null);if(t instanceof zt)return this.transformLinearRing(t,null);if(t instanceof Dt)return this.transformLineString(t,null);if(t instanceof It)return this.transformMultiLineString(t,null);if(t instanceof Bt)return this.transformPolygon(t,null);if(t instanceof Yt)return this.transformMultiPolygon(t,null);if(t instanceof Et)return this.transformGeometryCollection(t,null);throw new r("Unknown Geometry subtype: "+t.getClass().getName())}},{key:"transformLinearRing",value:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ce.constructor_=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};var Se=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){t instanceof Dt&&this._comps.add(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[kt]}}],[{key:"getGeometry",value:function(e){return e.getFactory().buildGeometry(t.getLines(e))}},{key:"getLines",value:function(){if(1===arguments.length){var e=arguments[0];return t.getLines(e,new w)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return n instanceof Dt?i.add(n):n instanceof Et&&n.apply(new t(i)),i}}}]),t}();Se.constructor_=function(){this._comps=null;var t=arguments[0];this._comps=t};var we=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){if(this._isForcedToLineString&&t instanceof zt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Dt&&this._lines.add(t)}},{key:"setForceToLineString",value:function(t){this._isForcedToLineString=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[X]}}],[{key:"getGeometry",value:function(){if(1===arguments.length){var e=arguments[0];return e.getFactory().buildGeometry(t.getLines(e))}if(2===arguments.length){var n=arguments[0],i=arguments[1];return n.getFactory().buildGeometry(t.getLines(n,i))}}},{key:"getLines",value:function(){if(1===arguments.length){var e=arguments[0];return t.getLines(e,!1)}if(2===arguments.length){if(E(arguments[0],I)&&E(arguments[1],I)){for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var s=r.next();t.getLines(s,i)}return i}if(arguments[0]instanceof H&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],u=new w;return o.apply(new t(u,a)),u}if(arguments[0]instanceof H&&E(arguments[1],I)){var l=arguments[0],c=arguments[1];return l instanceof Dt?c.add(l):l.apply(new t(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&E(arguments[0],I)&&E(arguments[1],I)){for(var h=arguments[0],f=arguments[1],g=arguments[2],v=h.iterator();v.hasNext();){var _=v.next();t.getLines(_,f,g)}return f}if("boolean"==typeof arguments[2]&&arguments[0]instanceof H&&E(arguments[1],I)){var d=arguments[0],y=arguments[1],p=arguments[2];return d.apply(new t(y,p)),y}}}}]),t}();we.constructor_=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};var Le={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return Le.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?pt.sort(n,e):pt.sort(n);for(var i=t.iterator(),r=0,s=n.length;r<s;r++)i.next(),i.set(n[r])},singletonList:function(t){var e=new w;return e.add(t),e}},Te=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){t instanceof Ft&&this._pts.add(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[kt]}}],[{key:"getPoints",value:function(){if(1===arguments.length){var e=arguments[0];return e instanceof Ft?Le.singletonList(e):t.getPoints(e,new w)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return n instanceof Ft?i.add(n):n instanceof Et&&n.apply(new t(i)),i}}}]),t}();Te.constructor_=function(){this._pts=null;var t=arguments[0];this._pts=t};var Re=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){t instanceof Bt&&this._comps.add(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[kt]}}],[{key:"getPolygons",value:function(){if(1===arguments.length){var e=arguments[0];return t.getPolygons(e,new w)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return n instanceof Bt?i.add(n):n instanceof Et&&n.apply(new t(i)),i}}}]),t}();Re.constructor_=function(){this._comps=null;var t=arguments[0];this._comps=t};var Pe=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"applyTo",value:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof Et)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Pe.constructor_=function(){this._isDone=!1};var Oe=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"createSupercircle",value:function(t){for(var e=1/t,n=this._dim.getMinSize()/2,i=this._dim.getCentre(),r=Math.pow(n,t),s=n,o=Math.pow(r/2,e),a=Math.trunc(this._nPts/8),u=new Array(8*a+1).fill(null),l=o/a,c=0;c<=a;c++){var h=0,f=s;if(0!==c){h=l*c;var g=Math.pow(h,t);f=Math.pow(r-g,e)}u[c]=this.coordTrans(h,f,i),u[2*a-c]=this.coordTrans(f,h,i),u[2*a+c]=this.coordTrans(f,-h,i),u[4*a-c]=this.coordTrans(h,-f,i),u[4*a+c]=this.coordTrans(-h,-f,i),u[6*a-c]=this.coordTrans(-f,-h,i),u[6*a+c]=this.coordTrans(-f,h,i),u[8*a-c]=this.coordTrans(-h,f,i)}u[u.length-1]=new k(u[0]);var v=this._geomFact.createLinearRing(u),_=this._geomFact.createPolygon(v);return this.rotate(_)}},{key:"setNumPoints",value:function(t){this._nPts=t}},{key:"setBase",value:function(t){this._dim.setBase(t)}},{key:"setRotation",value:function(t){this._rotationAngle=t}},{key:"setWidth",value:function(t){this._dim.setWidth(t)}},{key:"createEllipse",value:function(){for(var t=this._dim.getEnvelope(),e=t.getWidth()/2,n=t.getHeight()/2,i=t.getMinX()+e,r=t.getMinY()+n,s=new Array(this._nPts+1).fill(null),o=0,a=0;a<this._nPts;a++){var u=a*(2*Math.PI/this._nPts),l=e*Math.cos(u)+i,c=n*Math.sin(u)+r;s[o++]=this.coord(l,c)}s[o]=new k(s[0]);var h=this._geomFact.createLinearRing(s),f=this._geomFact.createPolygon(h);return this.rotate(f)}},{key:"coordTrans",value:function(t,e,n){return this.coord(t+n.x,e+n.y)}},{key:"createSquircle",value:function(){return this.createSupercircle(4)}},{key:"setEnvelope",value:function(t){this._dim.setEnvelope(t)}},{key:"setCentre",value:function(t){this._dim.setCentre(t)}},{key:"createArc",value:function(t,e){var n=this._dim.getEnvelope(),i=n.getWidth()/2,r=n.getHeight()/2,s=n.getMinX()+i,o=n.getMinY()+r,a=e;(a<=0||a>2*Math.PI)&&(a=2*Math.PI);for(var u=a/(this._nPts-1),l=new Array(this._nPts).fill(null),c=0,h=0;h<this._nPts;h++){var f=t+h*u,g=i*Math.cos(f)+s,v=r*Math.sin(f)+o;l[c++]=this.coord(g,v)}var _=this._geomFact.createLineString(l);return this.rotate(_)}},{key:"rotate",value:function(t){if(0!==this._rotationAngle){var e=_e.rotationInstance(this._rotationAngle,this._dim.getCentre().x,this._dim.getCentre().y);t.apply(e)}return t}},{key:"coord",value:function(t,e){var n=new k(t,e);return this._precModel.makePrecise(n),n}},{key:"createArcPolygon",value:function(t,e){var n=this._dim.getEnvelope(),i=n.getWidth()/2,r=n.getHeight()/2,s=n.getMinX()+i,o=n.getMinY()+r,a=e;(a<=0||a>2*Math.PI)&&(a=2*Math.PI);var u=a/(this._nPts-1),l=new Array(this._nPts+2).fill(null),c=0;l[c++]=this.coord(s,o);for(var h=0;h<this._nPts;h++){var f=t+u*h,g=i*Math.cos(f)+s,v=r*Math.sin(f)+o;l[c++]=this.coord(g,v)}l[c++]=this.coord(s,o);var _=this._geomFact.createLinearRing(l),d=this._geomFact.createPolygon(_);return this.rotate(d)}},{key:"createRectangle",value:function(){var t=null,e=0,n=Math.trunc(this._nPts/4);n<1&&(n=1);var i=this._dim.getEnvelope().getWidth()/n,r=this._dim.getEnvelope().getHeight()/n,s=new Array(4*n+1).fill(null),o=this._dim.getEnvelope();for(t=0;t<n;t++){var a=o.getMinX()+t*i,u=o.getMinY();s[e++]=this.coord(a,u)}for(t=0;t<n;t++){var l=o.getMaxX(),c=o.getMinY()+t*r;s[e++]=this.coord(l,c)}for(t=0;t<n;t++){var h=o.getMaxX()-t*i,f=o.getMaxY();s[e++]=this.coord(h,f)}for(t=0;t<n;t++){var g=o.getMinX(),v=o.getMaxY()-t*r;s[e++]=this.coord(g,v)}s[e++]=new k(s[0]);var _=this._geomFact.createLinearRing(s),d=this._geomFact.createPolygon(_);return this.rotate(d)}},{key:"createCircle",value:function(){return this.createEllipse()}},{key:"setHeight",value:function(t){this._dim.setHeight(t)}},{key:"setSize",value:function(t){this._dim.setSize(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(),be=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"setBase",value:function(t){this.base=t}},{key:"setWidth",value:function(t){this.width=t}},{key:"getBase",value:function(){return this.base}},{key:"getWidth",value:function(){return this.width}},{key:"setEnvelope",value:function(t){this.width=t.getWidth(),this.height=t.getHeight(),this.base=new k(t.getMinX(),t.getMinY()),this.centre=new k(t.centre())}},{key:"setCentre",value:function(t){this.centre=t}},{key:"getMinSize",value:function(){return Math.min(this.width,this.height)}},{key:"getEnvelope",value:function(){return null!==this.base?new R(this.base.x,this.base.x+this.width,this.base.y,this.base.y+this.height):null!==this.centre?new R(this.centre.x-this.width/2,this.centre.x+this.width/2,this.centre.y-this.height/2,this.centre.y+this.height/2):new R(0,this.width,0,this.height)}},{key:"getCentre",value:function(){return null===this.centre&&(this.centre=new k(this.base.x+this.width/2,this.base.y+this.height/2)),this.centre}},{key:"getHeight",value:function(){return this.height}},{key:"setHeight",value:function(t){this.height=t}},{key:"setSize",value:function(t){this.height=t,this.width=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();be.constructor_=function(){this.base=null,this.centre=null,this.width=null,this.height=null},Oe.Dimensions=be,Oe.constructor_=function(){if(this._geomFact=null,this._precModel=null,this._dim=new be,this._nPts=100,this._rotationAngle=0,0===arguments.length)Oe.constructor_.call(this,new te);else if(1===arguments.length){var t=arguments[0];this._geomFact=t,this._precModel=t.getPrecisionModel()}};var Me=function(t){i(n,Oe);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"setNumArms",value:function(t){this._numArms=t}},{key:"setArmLengthRatio",value:function(t){this._armLengthRatio=t}},{key:"createSineStar",value:function(){var t=this._dim.getEnvelope(),e=t.getWidth()/2,n=this._armLengthRatio;n<0&&(n=0),n>1&&(n=1);for(var i=n*e,r=(1-n)*e,s=t.getMinX()+e,o=t.getMinY()+e,a=new Array(this._nPts+1).fill(null),u=0,l=0;l<this._nPts;l++){var c=l/this._nPts*this._numArms,h=c-Math.floor(c),f=2*Math.PI*h,g=r+i*((Math.cos(f)+1)/2),v=l*(2*Math.PI/this._nPts),_=g*Math.cos(v)+s,d=g*Math.sin(v)+o;a[u++]=this.coord(_,d)}a[u]=new k(a[0]);var y=this._geomFact.createLinearRing(a);return this._geomFact.createPolygon(y)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();Me.constructor_=function(){if(this._numArms=8,this._armLengthRatio=.5,0===arguments.length)Oe.constructor_.call(this);else if(1===arguments.length){var t=arguments[0];Oe.constructor_.call(this,t)}};var De=Object.freeze({__proto__:null,AffineTransformation:_e,AffineTransformationBuilder:ye,AffineTransformationFactory:pe,ComponentCoordinateExtracter:me,GeometryCollectionMapper:ke,GeometryCombiner:xe,GeometryEditor:Ut,GeometryExtracter:Ee,GeometryMapper:Ne,GeometryTransformer:Ce,LineStringExtracter:Se,LinearComponentExtracter:we,MapOp:Ie,PointExtracter:Te,PolygonExtracter:Re,ShortCircuitedGeometryVisitor:Pe,SineStarFactory:Me}),Ae=Object.freeze({__proto__:null,Coordinate:k,CoordinateList:T,Envelope:R,LineSegment:le,GeometryFactory:te,Geometry:H,Point:Ft,LineString:Dt,LinearRing:zt,Polygon:Bt,GeometryCollection:Et,MultiPoint:Vt,MultiLineString:It,MultiPolygon:Yt,Dimension:mt,IntersectionMatrix:he,PrecisionModel:Jt,Location:ce,Triangle:ge,util:De}),Fe=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getCoordinates",value:function(){return this._pt}},{key:"getCoordinate",value:function(t){return this._pt[t]}},{key:"setMinimum",value:function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}}},{key:"initialize",value:function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}}},{key:"toString",value:function(){return oe.toLineString(this._pt[0],this._pt[1])}},{key:"getDistance",value:function(){return this._distance}},{key:"setMaximum",value:function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Fe.constructor_=function(){this._pt=[new k,new k],this._distance=h.NaN,this._isNull=!0};var Ge=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeDistance",value:function(){if(arguments[2]instanceof Fe&&arguments[0]instanceof Dt&&arguments[1]instanceof k)for(var e=arguments[0],n=arguments[1],i=arguments[2],r=new le,s=e.getCoordinates(),o=0;o<s.length-1;o++){r.setCoordinates(s[o],s[o+1]);var a=r.closestPoint(n);i.setMinimum(a,n)}else if(arguments[2]instanceof Fe&&arguments[0]instanceof Bt&&arguments[1]instanceof k){var u=arguments[0],l=arguments[1],c=arguments[2];t.computeDistance(u.getExteriorRing(),l,c);for(var h=0;h<u.getNumInteriorRing();h++)t.computeDistance(u.getInteriorRingN(h),l,c)}else if(arguments[2]instanceof Fe&&arguments[0]instanceof H&&arguments[1]instanceof k){var f=arguments[0],g=arguments[1],v=arguments[2];if(f instanceof Dt)t.computeDistance(f,g,v);else if(f instanceof Bt)t.computeDistance(f,g,v);else if(f instanceof Et)for(var _=f,d=0;d<_.getNumGeometries();d++){var y=_.getGeometryN(d);t.computeDistance(y,g,v)}else v.setMinimum(f.getCoordinate(),g)}else if(arguments[2]instanceof Fe&&arguments[0]instanceof le&&arguments[1]instanceof k){var p=arguments[0],m=arguments[1],x=arguments[2],E=p.closestPoint(m);x.setMinimum(E,m)}}}]),t}();Ge.constructor_=function(){};var qe=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getCoordinates",value:function(){return this._ptDist.getCoordinates()}},{key:"setDensifyFraction",value:function(t){if(t>1||t<=0)throw new r("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t}},{key:"compute",value:function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)}},{key:"distance",value:function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()}},{key:"computeOrientedDistance",value:function(t,e,n){var i=new Be(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new Ve(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}}},{key:"orientedDistance",value:function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"distance",value:function(){if(2===arguments.length)return new t(arguments[0],arguments[1]).distance();if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=new t(e,n);return r.setDensifyFraction(i),r.distance()}}}]),t}(),Be=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){this._minPtDist.initialize(),Ge.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},{key:"getMaxPointDistance",value:function(){return this._maxPtDist}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[W]}}]),t}();Be.constructor_=function(){this._maxPtDist=new Fe,this._minPtDist=new Fe,this._euclideanDist=new Ge,this._geom=null;var t=arguments[0];this._geom=t};var Ve=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=(i.x-n.x)/this._numSubSegs,s=(i.y-n.y)/this._numSubSegs,o=0;o<this._numSubSegs;o++){var a=n.x+o*r,u=n.y+o*s,l=new k(a,u);this._minPtDist.initialize(),Ge.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}}},{key:"isDone",value:function(){return!1}},{key:"isGeometryChanged",value:function(){return!1}},{key:"getMaxPointDistance",value:function(){return this._maxPtDist}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[xt]}}]),t}();Ve.constructor_=function(){this._maxPtDist=new Fe,this._minPtDist=new Fe,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))},qe.MaxPointDistanceFilter=Be,qe.MaxDensifiedByFractionDistanceFilter=Ve,qe.constructor_=function(){this._g0=null,this._g1=null,this._ptDist=new Fe,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e};var ze=Object.freeze({__proto__:null,DiscreteHausdorffDistance:qe,DistanceToPoint:Ge,PointPairDistance:Fe}),Ye=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"visitItem",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ye.constructor_=function(){};var Ue=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"locate",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ue.constructor_=function(){};var Xe=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getMin",value:function(){return this._min}},{key:"intersects",value:function(t,e){return!(this._min>e||this._max<t)}},{key:"getMax",value:function(){return this._max}},{key:"toString",value:function(){return oe.toLineString(new k(this._min,0),new k(this._max,0))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(),He=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"compare",value:function(t,e){var n=t,i=e,r=(n._min+n._max)/2,s=(i._min+i._max)/2;return r<s?-1:r>s?1:0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[_]}}]),t}();He.constructor_=function(){},Xe.NodeComparator=He,Xe.constructor_=function(){this._min=h.POSITIVE_INFINITY,this._max=h.NEGATIVE_INFINITY};var We=function(t){i(n,Xe);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"query",value:function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();We.constructor_=function(){this._item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._min=t,this._max=e,this._item=n};var je=function(t){i(n,Xe);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"buildExtent",value:function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)}},{key:"query",value:function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();je.constructor_=function(){this._node1=null,this._node2=null;var t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)};var Ke=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"buildTree",value:function(){Le.sort(this._leaves,new Xe.NodeComparator);for(var t=this._leaves,e=null,n=new w;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}}},{key:"insert",value:function(t,e,n){if(null!==this._root)throw new IllegalStateException("Index cannot be added to once it has been queried");this._leaves.add(new We(t,e,n))}},{key:"query",value:function(t,e,n){this.init(),this._root.query(t,e,n)}},{key:"buildRoot",value:function(){if(null!==this._root)return null;this._root=this.buildTree()}},{key:"printNode",value:function(t){q.out.println(oe.toLineString(new k(t._min,this._level),new k(t._max,this._level)))}},{key:"init",value:function(){if(null!==this._root)return null;this.buildRoot()}},{key:"buildLevel",value:function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new je(t.get(n),t.get(n+1));e.add(r)}}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ke.constructor_=function(){this._leaves=new w,this._root=null,this._level=0};var Ze=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"visitItem",value:function(t){this._items.add(t)}},{key:"getItems",value:function(){return this._items}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ye]}}]),t}();Ze.constructor_=function(){this._items=new w};var Qe=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=G.index(t,e,this._p);if(r===G.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(r=-r),r===G.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==ce.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?ce.BOUNDARY:this._crossingCount%2==1?ce.INTERIOR:ce.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"locatePointInRing",value:function(){if(arguments[0]instanceof k&&E(arguments[1],Y)){for(var e=arguments[0],n=arguments[1],i=new t(e),r=new k,s=new k,o=1;o<n.size();o++)if(n.getCoordinate(o,r),n.getCoordinate(o-1,s),i.countSegment(r,s),i.isOnSegment())return i.getLocation();return i.getLocation()}if(arguments[0]instanceof k&&arguments[1]instanceof Array){for(var a=arguments[0],u=arguments[1],l=new t(a),c=1;c<u.length;c++){var h=u[c],f=u[c-1];if(l.countSegment(h,f),l.isOnSegment())return l.getLocation()}return l.getLocation()}}}]),t}();Qe.constructor_=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};var Je=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"locate",value:function(t){var e=new Qe(t),n=new $e(e);return this._index.query(t.y,t.y,n),e.getLocation()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ue]}}]),t}(),$e=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"visitItem",value:function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ye]}}]),t}();$e.constructor_=function(){this._counter=null;var t=arguments[0];this._counter=t};var tn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"init",value:function(t){for(var e=we.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}}},{key:"addLine",value:function(t){for(var e=1;e<t.length;e++){var n=new le(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}}},{key:"query",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Ze;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];this._index.query(i,r,s)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();tn.constructor_=function(){this._index=new Ke;var t=arguments[0];this.init(t)},Je.SegmentVisitor=$e,Je.IntervalIndexedGeometry=tn,Je.constructor_=function(){this._index=null;var t=arguments[0];if(!(E(t,qt)||t instanceof zt))throw new r("Argument must be Polygonal or LinearRing");this._index=new tn(t)};var en=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"isOnLine",value:function(){if(arguments[0]instanceof k&&E(arguments[1],Y)){for(var t=arguments[0],e=arguments[1],n=new ue,i=new k,r=new k,s=e.size(),o=1;o<s;o++)if(e.getCoordinate(o-1,i),e.getCoordinate(o,r),n.computeIntersection(t,i,r),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof k&&arguments[1]instanceof Array){for(var a=arguments[0],u=arguments[1],l=new ue,c=1;c<u.length;c++){var h=u[c-1],f=u[c];if(l.computeIntersection(a,h,f),l.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(t,e){return Qe.locatePointInRing(t,e)}},{key:"isInRing",value:function(e,n){return t.locateInRing(e,n)!==ce.EXTERIOR}}]),t}();function nn(){}en.constructor_=function(){},nn.prototype.hasNext=function(){},nn.prototype.next=function(){},nn.prototype.remove=function(){};var rn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,t.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new S;var e=this._parent.getGeometryN(this._index++);return e instanceof Et?(this._subcollectionIterator=new t(e),this._subcollectionIterator.next()):e}},{key:"remove",value:function(){throw new rt(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[nn]}}],[{key:"isAtomic",value:function(t){return!(t instanceof Et)}}]),t}();rn.constructor_=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};var sn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"locate",value:function(e){return t.locate(e,this._geom)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ue]}}],[{key:"locatePointInPolygon",value:function(e,n){if(n.isEmpty())return ce.EXTERIOR;var i=n.getExteriorRing(),r=t.locatePointInRing(e,i);if(r!==ce.INTERIOR)return r;for(var s=0;s<n.getNumInteriorRing();s++){var o=n.getInteriorRingN(s),a=t.locatePointInRing(e,o);if(a===ce.BOUNDARY)return ce.BOUNDARY;if(a===ce.INTERIOR)return ce.EXTERIOR}return ce.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?en.locateInRing(t,e.getCoordinates()):ce.EXTERIOR}},{key:"containsPointInPolygon",value:function(e,n){return ce.EXTERIOR!==t.locatePointInPolygon(e,n)}},{key:"locateInGeometry",value:function(e,n){if(n instanceof Bt)return t.locatePointInPolygon(e,n);if(n instanceof Et)for(var i=new rn(n);i.hasNext();){var r=i.next();if(r!==n){var s=t.locateInGeometry(e,r);if(s!==ce.EXTERIOR)return s}}return ce.EXTERIOR}},{key:"locate",value:function(e,n){return n.isEmpty()?ce.EXTERIOR:t.locateInGeometry(e,n)}}]),t}();sn.constructor_=function(){this._geom=null;var t=arguments[0];this._geom=t};var on=Object.freeze({__proto__:null,IndexedPointInAreaLocator:Je,PointOnGeometryLocator:Ue,SimplePointInAreaLocator:sn}),an=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"measure",value:function(t,e){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();an.constructor_=function(){};var un=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"measure",value:function(t,e){return t.intersection(e).getArea()/t.union(e).getArea()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[an]}}]),t}();un.constructor_=function(){};var ln=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"measure",value:function(e,n){var i=qe.distance(e,n,t.DENSIFY_FRACTION),r=new R(e.getEnvelopeInternal());return r.expandToInclude(n.getEnvelopeInternal()),1-i/t.diagonalSize(r)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[an]}}],[{key:"diagonalSize",value:function(t){if(t.isNull())return 0;var e=t.getWidth(),n=t.getHeight();return Math.sqrt(e*e+n*n)}}]),t}();ln.constructor_=function(){},ln.DENSIFY_FRACTION=.25;var cn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"combine",value:function(t,e){return Math.min(t,e)}}]),t}();cn.constructor_=function(){};var hn=Object.freeze({__proto__:null,AreaSimilarityMeasure:un,HausdorffSimilarityMeasure:ln,SimilarityMeasure:an,SimilarityMeasureCombiner:cn}),fn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"setAreaBasePoint",value:function(t){this._areaBasePt=t}},{key:"addPoint",value:function(t){this._ptCount+=1,this._ptCentSum.x+=t.x,this._ptCentSum.y+=t.y}},{key:"addLineSegments",value:function(t){for(var e=0,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);if(0!==i){e+=i;var r=(t[n].x+t[n+1].x)/2;this._lineCentSum.x+=i*r;var s=(t[n].y+t[n+1].y)/2;this._lineCentSum.y+=i*s}}this._totalLength+=e,0===e&&t.length>0&&this.addPoint(t[0])}},{key:"addHole",value:function(t){for(var e=G.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this._areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)}},{key:"getCentroid",value:function(){var t=new k;if(Math.abs(this._areasum2)>0)t.x=this._cg3.x/3/this._areasum2,t.y=this._cg3.y/3/this._areasum2;else if(this._totalLength>0)t.x=this._lineCentSum.x/this._totalLength,t.y=this._lineCentSum.y/this._totalLength;else{if(!(this._ptCount>0))return null;t.x=this._ptCentSum.x/this._ptCount,t.y=this._ptCentSum.y/this._ptCount}return t}},{key:"addShell",value:function(t){t.length>0&&this.setAreaBasePoint(t[0]);for(var e=!G.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this._areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)}},{key:"addTriangle",value:function(e,n,i,r){var s=r?1:-1;t.centroid3(e,n,i,this._triangleCent3);var o=t.area2(e,n,i);this._cg3.x+=s*o*this._triangleCent3.x,this._cg3.y+=s*o*this._triangleCent3.y,this._areasum2+=s*o}},{key:"add",value:function(){if(arguments[0]instanceof Bt){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof H){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof Ft)this.addPoint(n.getCoordinate());else if(n instanceof Dt)this.addLineSegments(n.getCoordinates());else if(n instanceof Bt){var i=n;this.add(i)}else if(n instanceof Et)for(var r=n,s=0;s<r.getNumGeometries();s++)this.add(r.getGeometryN(s))}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"area2",value:function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)}},{key:"centroid3",value:function(t,e,n,i){return i.x=t.x+e.x+n.x,i.y=t.y+e.y+n.y,null}},{key:"getCentroid",value:function(e){return new t(e).getCentroid()}}]),t}();function gn(t){this.message=t||""}function vn(){this.array_=[]}fn.constructor_=function(){this._areaBasePt=null,this._triangleCent3=new k,this._areasum2=0,this._cg3=new k,this._lineCentSum=new k,this._totalLength=0,this._ptCount=0,this._ptCentSum=new k;var t=arguments[0];this._areaBasePt=null,this.add(t)},gn.prototype=new Error,gn.prototype.name="EmptyStackException",vn.prototype=new C,vn.prototype.add=function(t){return this.array_.push(t),!0},vn.prototype.get=function(t){if(t<0||t>=this.size())throw new N;return this.array_[t]},vn.prototype.push=function(t){return this.array_.push(t),t},vn.prototype.pop=function(t){if(0===this.array_.length)throw new gn;return this.array_.pop()},vn.prototype.peek=function(){if(0===this.array_.length)throw new gn;return this.array_[this.array_.length-1]},vn.prototype.empty=function(){return 0===this.array_.length},vn.prototype.isEmpty=function(){return this.empty()},vn.prototype.search=function(t){return this.array_.indexOf(t)},vn.prototype.size=function(){return this.array_.length},vn.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var _n=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))}},{key:"getCoordinates",value:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[W]}}],[{key:"filterCoordinates",value:function(e){for(var n=new t,i=0;i<e.length;i++)n.filter(e[i]);return n.getCoordinates()}}]),t}();_n.constructor_=function(){this.treeSet=new dt,this.list=new w};var dn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"preSort",value:function(t){for(var e=null,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return pt.sort(t,1,t.length,new yn(t[0])),t}},{key:"computeOctRing",value:function(t){var e=this.computeOctPts(t),n=new T;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())}},{key:"lineOrPolygon",value:function(t){if(3===(t=this.cleanRing(t)).length)return this._geomFactory.createLineString([t[0],t[1]]);var e=this._geomFactory.createLinearRing(t);return this._geomFactory.createPolygon(e)}},{key:"cleanRing",value:function(t){m.equals(t[0],t[t.length-1]);for(var e=new w,n=null,i=0;i<=t.length-2;i++){var r=t[i],s=t[i+1];r.equals(s)||null!==n&&this.isBetween(n,r,s)||(e.add(r),n=r)}e.add(t[t.length-1]);var o=new Array(e.size()).fill(null);return e.toArray(o)}},{key:"isBetween",value:function(t,e,n){if(0!==G.index(t,e,n))return!1;if(t.x!==n.x){if(t.x<=e.x&&e.x<=n.x)return!0;if(n.x<=e.x&&e.x<=t.x)return!0}if(t.y!==n.y){if(t.y<=e.y&&e.y<=n.y)return!0;if(n.y<=e.y&&e.y<=t.y)return!0}return!1}},{key:"reduce",value:function(t){var e=this.computeOctRing(t);if(null===e)return t;for(var n=new dt,i=0;i<e.length;i++)n.add(e[i]);for(var r=0;r<t.length;r++)en.isInRing(t[r],e)||n.add(t[r]);var s=$.toCoordinateArray(n);return s.length<3?this.padArray3(s):s}},{key:"getConvexHull",value:function(){if(0===this._inputPts.length)return this._geomFactory.createGeometryCollection();if(1===this._inputPts.length)return this._geomFactory.createPoint(this._inputPts[0]);if(2===this._inputPts.length)return this._geomFactory.createLineString(this._inputPts);var t=this._inputPts;this._inputPts.length>50&&(t=this.reduce(this._inputPts));var e=this.preSort(t),n=this.grahamScan(e),i=this.toCoordinateArray(n);return this.lineOrPolygon(i)}},{key:"padArray3",value:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e}},{key:"computeOctPts",value:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var i=1;i<t.length;i++)t[i].x<e[0].x&&(e[0]=t[i]),t[i].x-t[i].y<e[1].x-e[1].y&&(e[1]=t[i]),t[i].y>e[2].y&&(e[2]=t[i]),t[i].x+t[i].y>e[3].x+e[3].y&&(e[3]=t[i]),t[i].x>e[4].x&&(e[4]=t[i]),t[i].x-t[i].y>e[5].x-e[5].y&&(e[5]=t[i]),t[i].y<e[6].y&&(e[6]=t[i]),t[i].x+t[i].y<e[7].x+e[7].y&&(e[7]=t[i]);return e}},{key:"toCoordinateArray",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=t.get(n);e[n]=i}return e}},{key:"grahamScan",value:function(t){var e=null,n=new vn;n.push(t[0]),n.push(t[1]),n.push(t[2]);for(var i=3;i<t.length;i++){for(e=n.pop();!n.empty()&&G.index(n.peek(),e,t[i])>0;)e=n.pop();n.push(e),n.push(t[i])}return n.push(t[0]),n}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"extractCoordinates",value:function(t){var e=new _n;return t.apply(e),e.getCoordinates()}}]),t}(),yn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"compare",value:function(e,n){var i=e,r=n;return t.polarCompare(this._origin,i,r)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[_]}}],[{key:"polarCompare",value:function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=n.x-t.x,o=n.y-t.y,a=G.index(t,e,n);if(a===G.COUNTERCLOCKWISE)return 1;if(a===G.CLOCKWISE)return-1;var u=i*i+r*r,l=s*s+o*o;return u<l?-1:u>l?1:0}}]),t}();yn.constructor_=function(){this._origin=null;var t=arguments[0];this._origin=t},dn.RadialComparator=yn,dn.constructor_=function(){if(this._geomFactory=null,this._inputPts=null,1===arguments.length){var t=arguments[0];dn.constructor_.call(this,dn.extractCoordinates(t),t.getFactory())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._inputPts=_n.filterCoordinates(e),this._geomFactory=n}};var pn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"addPolygon",value:function(e){if(e.isEmpty())return null;var n=null,i=null,r=this.horizontalBisector(e);if(0===r.getLength())i=0,n=r.getCoordinate();else{var s=r.intersection(e),o=this.widestGeometry(s);i=o.getEnvelopeInternal().getWidth(),n=t.centre(o.getEnvelopeInternal())}(null===this._interiorPoint||i>this._maxWidth)&&(this._interiorPoint=n,this._maxWidth=i)}},{key:"getInteriorPoint",value:function(){return this._interiorPoint}},{key:"widestGeometry",value:function(){if(arguments[0]instanceof Et){var t=arguments[0];if(t.isEmpty())return t;for(var e=t.getGeometryN(0),n=1;n<t.getNumGeometries();n++)t.getGeometryN(n).getEnvelopeInternal().getWidth()>e.getEnvelopeInternal().getWidth()&&(e=t.getGeometryN(n));return e}if(arguments[0]instanceof H){var i=arguments[0];return i instanceof Et?this.widestGeometry(i):i}}},{key:"horizontalBisector",value:function(t){var e=t.getEnvelopeInternal(),n=mn.getBisectorY(t);return this._factory.createLineString([new k(e.getMinX(),n),new k(e.getMaxX(),n)])}},{key:"add",value:function(t){if(t instanceof Bt)this.addPolygon(t);else if(t instanceof Et)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"centre",value:function(e){return new k(t.avg(e.getMinX(),e.getMaxX()),t.avg(e.getMinY(),e.getMaxY()))}},{key:"avg",value:function(t,e){return(t+e)/2}}]),t}(),mn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"updateInterval",value:function(t){t<=this._centreY?t>this._loY&&(this._loY=t):t>this._centreY&&t<this._hiY&&(this._hiY=t)}},{key:"getBisectorY",value:function(){this.process(this._poly.getExteriorRing());for(var t=0;t<this._poly.getNumInteriorRing();t++)this.process(this._poly.getInteriorRingN(t));return pn.avg(this._hiY,this._loY)}},{key:"process",value:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var i=e.getY(n);this.updateInterval(i)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBisectorY",value:function(e){return new t(e).getBisectorY()}}]),t}();mn.constructor_=function(){this._poly=null,this._centreY=null,this._hiY=h.MAX_VALUE,this._loY=-h.MAX_VALUE;var t=arguments[0];this._poly=t,this._hiY=t.getEnvelopeInternal().getMaxY(),this._loY=t.getEnvelopeInternal().getMinY(),this._centreY=pn.avg(this._loY,this._hiY)},pn.SafeBisectorFinder=mn,pn.constructor_=function(){this._factory=null,this._interiorPoint=null,this._maxWidth=0;var t=arguments[0];this._factory=t.getFactory(),this.add(t)};var kn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"addEndpoints",value:function(){if(arguments[0]instanceof H){var t=arguments[0];if(t instanceof Dt)this.addEndpoints(t.getCoordinates());else if(t instanceof Et)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var i=arguments[0];this.add(i[0]),this.add(i[i.length-1])}}},{key:"getInteriorPoint",value:function(){return this._interiorPoint}},{key:"addInterior",value:function(){if(arguments[0]instanceof H){var t=arguments[0];if(t instanceof Dt)this.addInterior(t.getCoordinates());else if(t instanceof Et)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array)for(var i=arguments[0],r=1;r<i.length-1;r++)this.add(i[r])}},{key:"add",value:function(t){var e=t.distance(this._centroid);e<this._minDistance&&(this._interiorPoint=new k(t),this._minDistance=e)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();kn.constructor_=function(){this._centroid=null,this._minDistance=h.MAX_VALUE,this._interiorPoint=null;var t=arguments[0];t.isEmpty()?this._centroid=new k:this._centroid=fn.getCentroid(t),this.addInterior(t),null===this._interiorPoint&&this.addEndpoints(t)};var xn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getInteriorPoint",value:function(){return this._interiorPoint}},{key:"add",value:function(){if(arguments[0]instanceof H){var t=arguments[0];if(t instanceof Ft)this.add(t.getCoordinate());else if(t instanceof Et)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else if(arguments[0]instanceof k){var i=arguments[0],r=i.distance(this._centroid);r<this._minDistance&&(this._interiorPoint=new k(i),this._minDistance=r)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();xn.constructor_=function(){this._centroid=null,this._minDistance=h.MAX_VALUE,this._interiorPoint=null;var t=arguments[0];this._centroid=t.getCentroid().getCoordinate(),this.add(t)};var En=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"locateInPolygonRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?en.locateInRing(t,e.getCoordinates()):ce.EXTERIOR}},{key:"intersects",value:function(t,e){return this.locate(t,e)!==ce.EXTERIOR}},{key:"updateLocationInfo",value:function(t){t===ce.INTERIOR&&(this._isIn=!0),t===ce.BOUNDARY&&this._numBoundaries++}},{key:"computeLocation",value:function(t,e){if(e instanceof Ft&&this.updateLocationInfo(this.locateOnPoint(t,e)),e instanceof Dt)this.updateLocationInfo(this.locateOnLineString(t,e));else if(e instanceof Bt)this.updateLocationInfo(this.locateInPolygon(t,e));else if(e instanceof It)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateOnLineString(t,r))}else if(e instanceof Yt)for(var s=e,o=0;o<s.getNumGeometries();o++){var a=s.getGeometryN(o);this.updateLocationInfo(this.locateInPolygon(t,a))}else if(e instanceof Et)for(var u=new rn(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}}},{key:"locateOnPoint",value:function(t,e){return e.getCoordinate().equals2D(t)?ce.INTERIOR:ce.EXTERIOR}},{key:"locateOnLineString",value:function(t,e){if(!e.getEnvelopeInternal().intersects(t))return ce.EXTERIOR;var n=e.getCoordinateSequence();return e.isClosed()||!t.equals(n.getCoordinate(0))&&!t.equals(n.getCoordinate(n.size()-1))?en.isOnLine(t,n)?ce.INTERIOR:ce.EXTERIOR:ce.BOUNDARY}},{key:"locateInPolygon",value:function(t,e){if(e.isEmpty())return ce.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===ce.EXTERIOR)return ce.EXTERIOR;if(i===ce.BOUNDARY)return ce.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var s=e.getInteriorRingN(r),o=this.locateInPolygonRing(t,s);if(o===ce.INTERIOR)return ce.EXTERIOR;if(o===ce.BOUNDARY)return ce.BOUNDARY}return ce.INTERIOR}},{key:"locate",value:function(t,e){return e.isEmpty()?ce.EXTERIOR:e instanceof Dt?this.locateOnLineString(t,e):e instanceof Bt?this.locateInPolygon(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?ce.BOUNDARY:this._numBoundaries>0||this._isIn?ce.INTERIOR:ce.EXTERIOR)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();En.constructor_=function(){if(this._boundaryRule=j.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new r("Rule must be non-null");this._boundaryRule=t}};var In=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getRadius",value:function(){return this.compute(),this._radius}},{key:"getDiameter",value:function(){switch(this.compute(),this._extremalPts.length){case 0:return this._input.getFactory().createLineString();case 1:return this._input.getFactory().createPoint(this._centre)}var t=this._extremalPts[0],e=this._extremalPts[1];return this._input.getFactory().createLineString([t,e])}},{key:"getExtremalPoints",value:function(){return this.compute(),this._extremalPts}},{key:"computeCirclePoints",value:function(){if(this._input.isEmpty())return this._extremalPts=new Array(0).fill(null),null;if(1===this._input.getNumPoints()){var e=this._input.getCoordinates();return this._extremalPts=[new k(e[0])],null}var n=this._input.convexHull().getCoordinates(),i=n;if(n[0].equals2D(n[n.length-1])&&(i=new Array(n.length-1).fill(null),$.copyDeep(n,0,i,0,n.length-1)),i.length<=2)return this._extremalPts=$.copyDeep(i),null;for(var r=t.lowestPoint(i),s=t.pointWitMinAngleWithX(i,r),o=0;o<i.length;o++){var a=t.pointWithMinAngleWithSegment(i,r,s);if(fe.isObtuse(r,a,s))return this._extremalPts=[new k(r),new k(s)],null;if(fe.isObtuse(a,r,s))r=a;else{if(!fe.isObtuse(a,s,r))return this._extremalPts=[new k(r),new k(s),new k(a)],null;s=a}}m.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")}},{key:"compute",value:function(){if(null!==this._extremalPts)return null;this.computeCirclePoints(),this.computeCentre(),null!==this._centre&&(this._radius=this._centre.distance(this._extremalPts[0]))}},{key:"getFarthestPoints",value:function(){switch(this.compute(),this._extremalPts.length){case 0:return this._input.getFactory().createLineString();case 1:return this._input.getFactory().createPoint(this._centre)}var t=this._extremalPts[0],e=this._extremalPts[this._extremalPts.length-1];return this._input.getFactory().createLineString([t,e])}},{key:"getCircle",value:function(){if(this.compute(),null===this._centre)return this._input.getFactory().createPolygon();var t=this._input.getFactory().createPoint(this._centre);return 0===this._radius?t:t.buffer(this._radius)}},{key:"getCentre",value:function(){return this.compute(),this._centre}},{key:"computeCentre",value:function(){switch(this._extremalPts.length){case 0:this._centre=null;break;case 1:this._centre=this._extremalPts[0];break;case 2:this._centre=new k((this._extremalPts[0].x+this._extremalPts[1].x)/2,(this._extremalPts[0].y+this._extremalPts[1].y)/2);break;case 3:this._centre=ge.circumcentre(this._extremalPts[0],this._extremalPts[1],this._extremalPts[2])}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"pointWitMinAngleWithX",value:function(t,e){for(var n=h.MAX_VALUE,i=null,r=0;r<t.length;r++){var s=t[r];if(s!==e){var o=s.x-e.x,a=s.y-e.y;a<0&&(a=-a);var u=a/Math.sqrt(o*o+a*a);u<n&&(n=u,i=s)}}return i}},{key:"lowestPoint",value:function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e}},{key:"pointWithMinAngleWithSegment",value:function(t,e,n){for(var i=h.MAX_VALUE,r=null,s=0;s<t.length;s++){var o=t[s];if(o!==e&&o!==n){var a=fe.angleBetween(e,o,n);a<i&&(i=a,r=o)}}return r}}]),t}();In.constructor_=function(){this._input=null,this._extremalPts=null,this._centre=null,this._radius=0;var t=arguments[0];this._input=t};var Nn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getWidthCoordinate",value:function(){return this.computeMinimumDiameter(),this._minWidthPt}},{key:"getSupportingSegment",value:function(){return this.computeMinimumDiameter(),this._inputGeom.getFactory().createLineString([this._minBaseSeg.p0,this._minBaseSeg.p1])}},{key:"getDiameter",value:function(){if(this.computeMinimumDiameter(),null===this._minWidthPt)return this._inputGeom.getFactory().createLineString();var t=this._minBaseSeg.project(this._minWidthPt);return this._inputGeom.getFactory().createLineString([t,this._minWidthPt])}},{key:"computeWidthConvex",value:function(t){this._convexHullPts=t instanceof Bt?t.getExteriorRing().getCoordinates():t.getCoordinates(),0===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=null,this._minBaseSeg=null):1===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=this._convexHullPts[0],this._minBaseSeg.p0=this._convexHullPts[0],this._minBaseSeg.p1=this._convexHullPts[0]):2===this._convexHullPts.length||3===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=this._convexHullPts[0],this._minBaseSeg.p0=this._convexHullPts[0],this._minBaseSeg.p1=this._convexHullPts[1]):this.computeConvexRingMinDiameter(this._convexHullPts)}},{key:"computeConvexRingMinDiameter",value:function(t){this._minWidth=h.MAX_VALUE;for(var e=1,n=new le,i=0;i<t.length-1;i++)n.p0=t[i],n.p1=t[i+1],e=this.findMaxPerpDistance(t,n,e)}},{key:"computeMinimumDiameter",value:function(){if(null!==this._minWidthPt)return null;if(this._isConvex)this.computeWidthConvex(this._inputGeom);else{var t=new dn(this._inputGeom).getConvexHull();this.computeWidthConvex(t)}}},{key:"getLength",value:function(){return this.computeMinimumDiameter(),this._minWidth}},{key:"findMaxPerpDistance",value:function(e,n,i){for(var r=n.distancePerpendicular(e[i]),s=r,o=i,a=o;s>=r;)r=s,o=a,a=t.nextIndex(e,o),s=n.distancePerpendicular(e[a]);return r<this._minWidth&&(this._minPtIndex=o,this._minWidth=r,this._minWidthPt=e[this._minPtIndex],this._minBaseSeg=new le(n)),o}},{key:"getMinimumRectangle",value:function(){if(this.computeMinimumDiameter(),0===this._minWidth)return this._minBaseSeg.p0.equals2D(this._minBaseSeg.p1)?this._inputGeom.getFactory().createPoint(this._minBaseSeg.p0):this._minBaseSeg.toGeometry(this._inputGeom.getFactory());for(var e=this._minBaseSeg.p1.x-this._minBaseSeg.p0.x,n=this._minBaseSeg.p1.y-this._minBaseSeg.p0.y,i=h.MAX_VALUE,r=-h.MAX_VALUE,s=h.MAX_VALUE,o=-h.MAX_VALUE,a=0;a<this._convexHullPts.length;a++){var u=t.computeC(e,n,this._convexHullPts[a]);u>r&&(r=u),u<i&&(i=u);var l=t.computeC(-n,e,this._convexHullPts[a]);l>o&&(o=l),l<s&&(s=l)}var c=t.computeSegmentForLine(-e,-n,o),f=t.computeSegmentForLine(-e,-n,s),g=t.computeSegmentForLine(-n,e,r),v=t.computeSegmentForLine(-n,e,i),_=g.lineIntersection(c),d=v.lineIntersection(c),y=v.lineIntersection(f),p=g.lineIntersection(f),m=this._inputGeom.getFactory().createLinearRing([_,d,y,p,_]);return this._inputGeom.getFactory().createPolygon(m)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"nextIndex",value:function(t,e){return++e>=t.length&&(e=0),e}},{key:"computeC",value:function(t,e,n){return t*n.y-e*n.x}},{key:"getMinimumDiameter",value:function(e){return new t(e).getDiameter()}},{key:"getMinimumRectangle",value:function(e){return new t(e).getMinimumRectangle()}},{key:"computeSegmentForLine",value:function(t,e,n){var i=null,r=null;return Math.abs(e)>Math.abs(t)?(i=new k(0,n/e),r=new k(1,n/e-t/e)):(i=new k(n/t,0),r=new k(n/t-e/t,1)),new le(i,r)}}]),t}();Nn.constructor_=function(){if(this._inputGeom=null,this._isConvex=null,this._convexHullPts=null,this._minBaseSeg=new le,this._minWidthPt=null,this._minPtIndex=null,this._minWidth=0,1===arguments.length){var t=arguments[0];Nn.constructor_.call(this,t,!1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._inputGeom=e,this._isConvex=n}};var Cn=Object.freeze({__proto__:null,distance:ze,locate:on,match:hn,Angle:fe,Area:Gt,Centroid:fn,ConvexHull:dn,Distance:z,InteriorPointArea:pn,InteriorPointLine:kn,InteriorPointPoint:xn,Length:St,Orientation:G,PointLocation:en,PointLocator:En,RobustLineIntersector:ue,MinimumBoundingCircle:In,MinimumDiameter:Nn}),Sn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getResultGeometry",value:function(){return new wn(this._distanceTolerance).transform(this._inputGeom)}},{key:"setDistanceTolerance",value:function(t){if(t<=0)throw new r("Tolerance must be positive");this._distanceTolerance=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"densifyPoints",value:function(t,e,n){for(var i=new le,r=new T,s=0;s<t.length-1;s++){i.p0=t[s],i.p1=t[s+1],r.add(i.p0,!1);var o=i.getLength(),a=Math.trunc(o/e)+1;if(a>1)for(var u=o/a,l=1;l<a;l++){var c=l*u/o,h=i.pointAlong(c);n.makePrecise(h),r.add(h,!1)}}return r.add(t[t.length-1],!1),r.toCoordinateArray()}},{key:"densify",value:function(e,n){var i=new t(e);return i.setDistanceTolerance(n),i.getResultGeometry()}}]),t}(),wn=function(t){i(r,Ce);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"transformMultiPolygon",value:function(t,n){var i=e(l(r.prototype),"transformMultiPolygon",this).call(this,t,n);return this.createValidArea(i)}},{key:"transformPolygon",value:function(t,n){var i=e(l(r.prototype),"transformPolygon",this).call(this,t,n);return n instanceof Yt?i:this.createValidArea(i)}},{key:"transformCoordinates",value:function(t,e){var n=t.toCoordinateArray(),i=Sn.densifyPoints(n,this.distanceTolerance,e.getPrecisionModel());return e instanceof Dt&&1===i.length&&(i=new Array(0).fill(null)),this._factory.getCoordinateSequenceFactory().create(i)}},{key:"createValidArea",value:function(t){return t.buffer(0)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}]),r}();wn.constructor_=function(){this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t},Sn.DensifyTransformer=wn,Sn.constructor_=function(){this._inputGeom=null,this._distanceTolerance=null;var t=arguments[0];this._inputGeom=t};var Ln=Object.freeze({__proto__:null,Densifier:Sn}),Tn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"isNorthern",value:function(e){return e===t.NE||e===t.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&2==(t-e+4)%4}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n}},{key:"isInHalfPlane",value:function(e,n){return n===t.SE?e===t.SE||e===t.SW:e===n||e===n+1}},{key:"quadrant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];if(0===e&&0===n)throw new r("Cannot compute the quadrant for point ( "+e+", "+n+" )");return e>=0?n>=0?t.NE:t.SE:n>=0?t.NW:t.SW}if(arguments[0]instanceof k&&arguments[1]instanceof k){var i=arguments[0],s=arguments[1];if(s.x===i.x&&s.y===i.y)throw new r("Cannot compute the quadrant for two identical points "+i);return s.x>=i.x?s.y>=i.y?t.NE:t.SE:s.y>=i.y?t.NW:t.SW}}}]),t}();Tn.constructor_=function(){},Tn.NE=0,Tn.NW=1,Tn.SW=2,Tn.SE=3;var Rn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"find",value:function(t){var e=this;do{if(null===e)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null}},{key:"dest",value:function(){return this._sym._orig}},{key:"oNext",value:function(){return this._sym._next}},{key:"insert",value:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var i=n.oNext();if(i.compareTo(t)!==e||i===this)return n.insertAfter(t),null;n=i}while(n!==this);m.shouldNeverReachHere()}},{key:"insertAfter",value:function(t){m.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)}},{key:"degree",value:function(){var t=0,e=this;do{t++,e=e.oNext()}while(e!==this);return t}},{key:"equals",value:function(){if(2===arguments.length&&arguments[1]instanceof k&&arguments[0]instanceof k){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}}},{key:"deltaY",value:function(){return this._sym._orig.y-this._orig.y}},{key:"sym",value:function(){return this._sym}},{key:"prev",value:function(){return this._sym.next()._sym}},{key:"compareAngularDirection",value:function(t){var e=this.deltaX(),n=this.deltaY(),i=t.deltaX(),r=t.deltaY();if(e===i&&n===r)return 0;var s=Tn.quadrant(e,n),o=Tn.quadrant(i,r);return s>o?1:s<o?-1:G.index(t._orig,t.dest(),this.dest())}},{key:"prevNode",value:function(){for(var t=this;2===t.degree();)if((t=t.prev())===this)return null;return t}},{key:"compareTo",value:function(t){var e=t;return this.compareAngularDirection(e)}},{key:"next",value:function(){return this._next}},{key:"setSym",value:function(t){this._sym=t}},{key:"orig",value:function(){return this._orig}},{key:"toString",value:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"}},{key:"setNext",value:function(t){this._next=t}},{key:"init",value:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)}},{key:"deltaX",value:function(){return this._sym._orig.x-this._orig.x}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"init",value:function(t,e){if(null!==t._sym||null!==e._sym||null!==t._next||null!==e._next)throw new IllegalStateException("Edges are already initialized");return t.init(e),t}},{key:"create",value:function(e,n){var i=new t(e),r=new t(n);return i.init(r),i}}]),t}();Rn.constructor_=function(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t};var Pn=function(t){i(n,Rn);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"mark",value:function(){this._isMarked=!0}},{key:"setMark",value:function(t){this._isMarked=t}},{key:"isMarked",value:function(){return this._isMarked}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"setMarkBoth",value:function(t,e){t.setMark(e),t.sym().setMark(e)}},{key:"isMarked",value:function(t){return t.isMarked()}},{key:"setMark",value:function(t,e){t.setMark(e)}},{key:"markBoth",value:function(t){t.mark(),t.sym().mark()}},{key:"mark",value:function(t){t.mark()}}]),n}();Pn.constructor_=function(){this._isMarked=!1;var t=arguments[0];Rn.constructor_.call(this,t)};var On=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"insert",value:function(t,e,n){var i=this.create(t,e);null!==n?n.insert(i):this._vertexMap.put(t,i);var r=this._vertexMap.get(e);return null!==r?r.insert(i.sym()):this._vertexMap.put(e,i.sym()),i}},{key:"create",value:function(t,e){var n=this.createEdge(t),i=this.createEdge(e);return Rn.init(n,i),n}},{key:"createEdge",value:function(t){return new Rn(t)}},{key:"addEdge",value:function(e,n){if(!t.isValidEdge(e,n))return null;var i=this._vertexMap.get(e),r=null;return null!==i&&(r=i.find(n)),null!==r?r:this.insert(e,n,i)}},{key:"getVertexEdges",value:function(){return this._vertexMap.values()}},{key:"findEdge",value:function(t,e){var n=this._vertexMap.get(t);return null===n?null:n.find(e)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"isValidEdge",value:function(t,e){return 0!==e.compareTo(t)}}]),t}();On.constructor_=function(){this._vertexMap=new Qt};var bn=function(t){i(n,Pn);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"setStart",value:function(){this._isStart=!0}},{key:"isStart",value:function(){return this._isStart}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();bn.constructor_=function(){this._isStart=!1;var t=arguments[0];Pn.constructor_.call(this,t)};var Mn=function(t){i(n,On);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"createEdge",value:function(t){return new bn(t)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();Mn.constructor_=function(){};var Dn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"addLine",value:function(t){this._lines.add(this._factory.createLineString(t.toCoordinateArray()))}},{key:"updateRingStartEdge",value:function(t){return t.isStart()||(t=t.sym()).isStart()?null===this._ringStartEdge?(this._ringStartEdge=t,null):void(t.orig().compareTo(this._ringStartEdge.orig())<0&&(this._ringStartEdge=t)):null}},{key:"getResult",value:function(){return null===this._result&&this.computeResult(),this._result}},{key:"process",value:function(t){var e=t.prevNode();null===e&&(e=t),this.stackEdges(e),this.buildLines()}},{key:"buildRing",value:function(t){var e=new T,n=t;for(e.add(n.orig().copy(),!1);2===n.sym().degree();){var i=n.next();if(i===t)break;e.add(i.orig().copy(),!1),n=i}e.add(n.dest().copy(),!1),this.addLine(e)}},{key:"buildLine",value:function(t){var e=new T,n=t;for(this._ringStartEdge=null,Pn.markBoth(n),e.add(n.orig().copy(),!1);2===n.sym().degree();){this.updateRingStartEdge(n);var i=n.next();if(i===t)return this.buildRing(this._ringStartEdge),null;e.add(i.orig().copy(),!1),n=i,Pn.markBoth(n)}e.add(n.dest().clone(),!1),this.stackEdges(n.sym()),this.addLine(e)}},{key:"stackEdges",value:function(t){var e=t;do{Pn.isMarked(e)||this._nodeEdgeStack.add(e),e=e.oNext()}while(e!==t)}},{key:"computeResult",value:function(){for(var t=this._graph.getVertexEdges().iterator();t.hasNext();){var e=t.next();Pn.isMarked(e)||this.process(e)}this._result=this._factory.buildGeometry(this._lines)}},{key:"buildLines",value:function(){for(;!this._nodeEdgeStack.empty();){var t=this._nodeEdgeStack.pop();Pn.isMarked(t)||this.buildLine(t)}}},{key:"add",value:function(){if(arguments[0]instanceof H)arguments[0].apply(new(function(){function t(){c(this,t)}return f(t,[{key:"filter",value:function(t){t instanceof Dt&&this.add(t)}},{key:"interfaces_",get:function(){return[X]}}]),t}()));else if(E(arguments[0],I))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.add(e)}else if(arguments[0]instanceof Dt){var n=arguments[0];null===this._factory&&(this._factory=n.getFactory());for(var i=n.getCoordinateSequence(),r=!1,s=1;s<i.size();s++){var o=this._graph.addEdge(i.getCoordinate(s-1),i.getCoordinate(s));null!==o&&(r||(o.setStart(),r=!0))}}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"dissolve",value:function(e){var n=new t;return n.add(e),n.getResult()}}]),t}();Dn.constructor_=function(){this._result=null,this._factory=null,this._graph=null,this._lines=new w,this._nodeEdgeStack=new vn,this._ringStartEdge=null,this._graph=new Mn};var An=Object.freeze({__proto__:null,LineDissolver:Dn}),Fn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"opposite",value:function(e){return e===t.LEFT?t.RIGHT:e===t.RIGHT?t.LEFT:e}}]),t}();Fn.constructor_=function(){},Fn.ON=0,Fn.LEFT=1,Fn.RIGHT=2;var Gn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"computeIntersections",value:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Gn.constructor_=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};var qn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isDelete",value:function(){return this._eventType===t.DELETE}},{key:"setDeleteEventIndex",value:function(t){this._deleteEventIndex=t}},{key:"getObject",value:function(){return this._obj}},{key:"compareTo",value:function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0}},{key:"getInsertEvent",value:function(){return this._insertEvent}},{key:"isInsert",value:function(){return this._eventType===t.INSERT}},{key:"isSameLabel",value:function(t){return null!==this._label&&this._label===t._label}},{key:"getDeleteEventIndex",value:function(){return this._deleteEventIndex}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[g]}}]),t}();qn.constructor_=function(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var t=arguments[0],e=arguments[1];this._eventType=qn.DELETE,this._xValue=t,this._insertEvent=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._eventType=qn.INSERT,this._label=n,this._xValue=i,this._obj=r}},qn.INSERT=1,qn.DELETE=2;var Bn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Bn.constructor_=function(){};var Vn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isTrivialIntersection",value:function(e,n,i,r){if(e===i&&1===this._li.getIntersectionNum()){if(t.isAdjacentSegments(n,r))return!0;if(e.isClosed()){var s=e.getNumPoints()-1;if(0===n&&r===s||0===r&&n===s)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"setIsDoneIfProperInt",value:function(t){this._isDoneWhenProperInt=t}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"isBoundaryPointInternal",value:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return this._isDone}},{key:"isBoundaryPoint",value:function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))}},{key:"setBoundaryNodes",value:function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e}},{key:"addIntersections",value:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,s,o,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"isAdjacentSegments",value:function(t,e){return 1===Math.abs(t-e)}}]),t}();Vn.constructor_=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};var zn=function(t){i(n,Bn);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"prepareEvents",value:function(){Le.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}}},{key:"computeIntersections",value:function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Vn&&E(arguments[0],C)&&E(arguments[1],C)){var i=arguments[0],r=arguments[1],s=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&E(arguments[0],C)&&arguments[1]instanceof Vn){var o=arguments[0],a=arguments[1];arguments[2]?this.addEdges(o,null):this.addEdges(o),this.computeIntersections(a)}}},{key:"addEdge",value:function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var s=new Gn(n,r),o=new qn(e,n.getMinX(r),s);this.events.add(o),this.events.add(new qn(n.getMaxX(r),o))}}},{key:"processOverlaps",value:function(t,e,n,i){for(var r=n.getObject(),s=t;s<e;s++){var o=this.events.get(s);if(o.isInsert()){var a=o.getObject();n.isSameLabel(o)||(r.computeIntersections(a,i),this.nOverlaps++)}}}},{key:"addEdges",value:function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var s=r.next();this.addEdge(s,i)}}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();zn.constructor_=function(){this.events=new w,this.nOverlaps=null};var Yn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==ce.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===ce.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Fn.ON]=this.location[Fn.ON],e[Fn.LEFT]=ce.NONE,e[Fn.RIGHT]=ce.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===ce.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[Fn.LEFT];this.location[Fn.LEFT]=this.location[Fn.RIGHT],this.location[Fn.RIGHT]=t}},{key:"toString",value:function(){var t=new b;return this.location.length>1&&t.append(ce.toLocationSymbol(this.location[Fn.LEFT])),t.append(ce.toLocationSymbol(this.location[Fn.ON])),this.location.length>1&&t.append(ce.toLocationSymbol(this.location[Fn.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,n){this.location[Fn.ON]=t,this.location[Fn.LEFT]=e,this.location[Fn.RIGHT]=n}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:ce.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===ce.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Fn.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}}},{key:"init",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(ce.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Yn.constructor_=function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[Fn.ON]=e}else if(arguments[0]instanceof Yn){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this.init(3),this.location[Fn.ON]=r,this.location[Fn.LEFT]=s,this.location[Fn.RIGHT]=o}};var Un=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Yn(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Fn.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}}},{key:"toString",value:function(){var t=new b;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Fn.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new Yn(this.elt[t].location[0]))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"toLineLabel",value:function(e){for(var n=new t(ce.NONE),i=0;i<2;i++)n.setLocation(i,e.getLocation(i));return n}}]),t}();Un.constructor_=function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Yn(t),this.elt[1]=new Yn(t)}else if(arguments[0]instanceof Un){var e=arguments[0];this.elt[0]=new Yn(e.elt[0]),this.elt[1]=new Yn(e.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new Yn(ce.NONE),this.elt[1]=new Yn(ce.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this.elt[0]=new Yn(r,s,o),this.elt[1]=new Yn(r,s,o)}else if(4===arguments.length){var a=arguments[0],u=arguments[1],l=arguments[2],c=arguments[3];this.elt[0]=new Yn(ce.NONE,ce.NONE,ce.NONE),this.elt[1]=new Yn(ce.NONE,ce.NONE,ce.NONE),this.elt[a].setLocations(u,l,c)}};var Xn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}},{key:"compareTo",value:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[g]}}]),t}();Xn.constructor_=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new k(t),this.segmentIndex=e,this.dist=n};var Hn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"print",value:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}}},{key:"addEndpoints",value:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}},{key:"createSplitEdge",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var s=new Array(n).fill(null),o=0;s[o++]=new k(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)s[o++]=this.edge.pts[a];return r&&(s[o]=e.coord),new Qn(s,new Un(this.edge._label))}},{key:"add",value:function(t,e,n){var i=new Xn(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)}},{key:"isIntersection",value:function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Hn.constructor_=function(){this._nodeMap=new gt,this.edge=null;var t=arguments[0];this.edge=t};var Wn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getChainStartIndices",value:function(e){var n=0,i=new w;i.add(new M(n));do{var r=this.findChainEnd(e,n);i.add(new M(r)),n=r}while(n<e.length-1);return t.toIntArray(i)}},{key:"findChainEnd",value:function(t,e){for(var n=Tn.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&Tn.quadrant(t[i-1],t[i])===n;)i++;return i-1}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"toIntArray",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}]),t}();Wn.constructor_=function(){};var jn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n}},{key:"getMinX",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n}},{key:"computeIntersectsForChain",value:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5];if(s-r==1&&u-a==1)return l.addIntersections(this.e,r,o.e,a),null;if(!this.overlaps(r,s,o,a,u))return null;var c=Math.trunc((r+s)/2),h=Math.trunc((a+u)/2);r<c&&(a<h&&this.computeIntersectsForChain(r,c,o,a,h,l),h<u&&this.computeIntersectsForChain(r,c,o,h,u,l)),c<s&&(a<h&&this.computeIntersectsForChain(c,s,o,a,h,l),h<u&&this.computeIntersectsForChain(c,s,o,h,u,l))}}},{key:"overlaps",value:function(t,e,n,i,r){return R.intersects(this.pts[t],this.pts[e],n.pts[i],n.pts[r])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();jn.constructor_=function(){this.e=null,this.pts=null,this.startIndex=null;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Wn;this.startIndex=e.getChainStartIndices(this.pts)};var Kn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,n){this._depth[t][e]=n}},{key:"isNull",value:function(){if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(this._depth[e][n]!==t.NULL_VALUE)return!1;return!0}if(1===arguments.length){var i=arguments[0];return this._depth[i][1]===t.NULL_VALUE}if(2===arguments.length){var r=arguments[0],s=arguments[1];return this._depth[r][s]===t.NULL_VALUE}}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}}},{key:"getDelta",value:function(t){return this._depth[t][Fn.RIGHT]-this._depth[t][Fn.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?ce.EXTERIOR:ce.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var r=e.getLocation(n,i);r!==ce.EXTERIOR&&r!==ce.INTERIOR||(this.isNull(n,i)?this._depth[n][i]=t.depthAtLocation(r):this._depth[n][i]+=t.depthAtLocation(r))}else if(3===arguments.length){var s=arguments[0],o=arguments[1];arguments[2]===ce.INTERIOR&&this._depth[s][o]++}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthAtLocation",value:function(e){return e===ce.EXTERIOR?0:e===ce.INTERIOR?1:t.NULL_VALUE}}]),t}();Kn.constructor_=function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=Kn.NULL_VALUE},Kn.NULL_VALUE=-1;var Zn=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"setVisited",value:function(t){this._isVisited=t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(t){this._label=t}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(t){this._isCovered=t,this._isCoveredSet=!0}},{key:"updateIM",value:function(t){m.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Zn.constructor_=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};var Qn=function(t){i(r,Zn);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new r(t,Un.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(t){this._isIsolated=t}},{key:"setName",value:function(t){this._name=t}},{key:"equals",value:function(t){if(!(t instanceof r))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,i=!0,s=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--s])||(i=!1),!n&&!i)return!1;return!0}},{key:"getCoordinate",value:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}}},{key:"print",value:function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(t){r.updateIM(this._label,t)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this._mce&&(this._mce=new jn(this)),this._mce}},{key:"getEnvelope",value:function(){if(null===this._env){this._env=new R;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}},{key:"addIntersection",value:function(t,e,n,i){var r=new k(t.getIntersection(i)),s=e,o=t.getEdgeDistance(n,i),a=s+1;if(a<this.pts.length){var u=this.pts[a];r.equals2D(u)&&(s=a,o=0)}this.eiList.add(r,s,o)}},{key:"toString",value:function(){var t=new bt;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}},{key:"isPointwiseEqual",value:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}},{key:"setDepthDelta",value:function(t){this._depthDelta=t}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"updateIM",value:function(){if(!(2===arguments.length&&arguments[1]instanceof he&&arguments[0]instanceof Un))return e(l(r),"updateIM",this).apply(this,arguments);var t=arguments[0],n=arguments[1];n.setAtLeastIfValid(t.getLocation(0,Fn.ON),t.getLocation(1,Fn.ON),1),t.isArea()&&(n.setAtLeastIfValid(t.getLocation(0,Fn.LEFT),t.getLocation(1,Fn.LEFT),2),n.setAtLeastIfValid(t.getLocation(0,Fn.RIGHT),t.getLocation(1,Fn.RIGHT),2))}}]),r}();Qn.constructor_=function(){if(this.pts=null,this._env=null,this.eiList=new Hn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Kn,this._depthDelta=0,1===arguments.length){var t=arguments[0];Qn.constructor_.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this._label=n}};var Jn=function(t){i(r,Zn);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"isIncidentEdgeInResult",value:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(t){t.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(t){}},{key:"computeMergedLocation",value:function(t,e){var n=ce.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==ce.BOUNDARY&&(n=i)}return n}},{key:"setLabel",value:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return e(l(r.prototype),"setLabel",this).apply(this,arguments);var t=arguments[0],n=arguments[1];null===this._label?this._label=new Un(t,n):this._label.setLocation(t,n)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof r){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Un)for(var e=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(e,n);this._label.getLocation(n)===ce.NONE&&this._label.setLocation(n,i)}}},{key:"add",value:function(t){this._edges.insert(t),t.setNode(this)}},{key:"setLabelBoundary",value:function(t){if(null===this._label)return null;var e=ce.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case ce.BOUNDARY:n=ce.INTERIOR;break;case ce.INTERIOR:default:n=ce.BOUNDARY}this._label.setLocation(t,n)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}]),r}();Jn.constructor_=function(){this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new Un(0,ce.NONE)};var $n=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"find",value:function(t){return this.nodeMap.get(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof k){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Jn){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}}},{key:"print",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(t){for(var e=new w,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===ce.BOUNDARY&&e.add(i)}return e}},{key:"add",value:function(t){var e=t.getCoordinate();this.addNode(e).add(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();$n.constructor_=function(){this.nodeMap=new gt,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};var ti=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:G.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){var e=t;return this.compareDirection(e)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Tn.quadrant(this._dx,this._dy),m.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[g]}}]),t}();ti.constructor_=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];ti.constructor_.call(this,e,n,i,null)}else if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];ti.constructor_.call(this,r),this.init(s,o),this._label=a}};var ei=function(t){i(n,y);var e=s(n);function n(){var t;if(c(this,n),1===arguments.length){var i=arguments[0];t=e.call(this,i),y.call(a(t),i)}else{if(2!==arguments.length)throw Error();var r=arguments[0],s=arguments[1];(t=e.call(this,n.msgWithCoord(r,s))).name="TopologyException",t.pt=new k(s)}return o(t)}return f(n,[{key:"getCoordinate",value:function(){return this.pt}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"msgWithCoord",value:function(t,e){return null!==e?t+" [ "+e+" ]":t}}]),n}(),ni=function(t){i(r,ti);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(t){return this._depth[t]}},{key:"setVisited",value:function(t){this._isVisited=t}},{key:"computeDirectedLabel",value:function(){this._label=new Un(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new ei("assigned depths do not match",this.getCoordinate());this._depth[t]=e}},{key:"isInteriorAreaEdge",value:function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Fn.LEFT)===ce.INTERIOR&&this._label.getLocation(e,Fn.RIGHT)===ce.INTERIOR||(t=!1);return t}},{key:"setNextMin",value:function(t){this._nextMin=t}},{key:"print",value:function(t){e(l(r.prototype),"print",this).call(this,t),t.print(" "+this._depth[Fn.LEFT]+"/"+this._depth[Fn.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}},{key:"setMinEdgeRing",value:function(t){this._minEdgeRing=t}},{key:"isLineEdge",value:function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,ce.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,ce.EXTERIOR);return t&&e&&n}},{key:"setEdgeRing",value:function(t){this._edgeRing=t}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}},{key:"setSym",value:function(t){this._sym=t}},{key:"setVisitedEdge",value:function(t){this.setVisited(t),this._sym.setVisited(t)}},{key:"setEdgeDepths",value:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Fn.LEFT&&(i=-1);var r=Fn.opposite(t),s=e+n*i;this.setDepth(t,e),this.setDepth(r,s)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(t){this._next=t}},{key:"isVisited",value:function(){return this._isVisited}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthFactor",value:function(t,e){return t===ce.EXTERIOR&&e===ce.INTERIOR?1:t===ce.INTERIOR&&e===ce.EXTERIOR?-1:0}}]),r}();ni.constructor_=function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(ti.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()};var ii=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"createNode",value:function(t){return new Jn(t,null)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ii.constructor_=function(){};var ri=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"printEdges",value:function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}}},{key:"find",value:function(t){return this._nodes.find(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof Jn){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof k){var e=arguments[0];return this._nodes.addNode(e)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(t){q.out.println(t)}},{key:"isBoundaryNode",value:function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===ce.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(t,e,n,i){return!!t.equals(n)&&G.index(t,e,i)===G.COLLINEAR&&Tn.quadrant(t,e)===Tn.quadrant(n,i)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(t){q.out.print(t)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null}},{key:"insertEdge",value:function(t){this._edges.add(t)}},{key:"findEdgeEnd",value:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null}},{key:"addEdges",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new ni(n,!0),r=new ni(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}}},{key:"add",value:function(t){this._nodes.add(t),this._edgeEndList.add(t)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"linkResultDirectedEdges",value:function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}}]),t}();ri.constructor_=function(){if(this._edges=new w,this._nodes=null,this._edgeEndList=new w,0===arguments.length)this._nodes=new $n(new ii);else if(1===arguments.length){var t=arguments[0];this._nodes=new $n(t)}};var si=function(t){i(r,ri);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"insertBoundaryPoint",value:function(t,e){var n=this._nodes.addNode(e).getLabel(),i=1;ce.NONE;n.getLocation(t,Fn.ON)===ce.BOUNDARY&&i++;var s=r.determineBoundary(this._boundaryNodeRule,i);n.setLocation(t,s)}},{key:"computeSelfNodes",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=new Vn(n,!0,!1);s.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof zt||this._parentGeom instanceof Bt||this._parentGeom instanceof Yt,u=i||!a;return o.computeIntersections(this._edges,s,u),this.addSelfIntersectionNodes(this._argIndex),s}}},{key:"computeSplitEdges",value:function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)}},{key:"computeEdgeIntersections",value:function(t,e,n){var i=new Vn(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i}},{key:"getGeometry",value:function(){return this._parentGeom}},{key:"getBoundaryNodeRule",value:function(){return this._boundaryNodeRule}},{key:"hasTooFewPoints",value:function(){return this._hasTooFewPoints}},{key:"addPoint",value:function(){if(arguments[0]instanceof Ft){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,ce.INTERIOR)}else if(arguments[0]instanceof k){var e=arguments[0];this.insertPoint(this._argIndex,e,ce.INTERIOR)}}},{key:"addPolygon",value:function(t){this.addPolygonRing(t.getExteriorRing(),ce.EXTERIOR,ce.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,ce.INTERIOR,ce.EXTERIOR)}}},{key:"addEdge",value:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],ce.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],ce.BOUNDARY)}},{key:"addLineString",value:function(t){var e=$.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new Qn(e,new Un(this._argIndex,ce.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),m.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])}},{key:"getInvalidPoint",value:function(){return this._invalidPoint}},{key:"getBoundaryPoints",value:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e}},{key:"getBoundaryNodes",value:function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}},{key:"addSelfIntersectionNode",value:function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===ce.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)}},{key:"addPolygonRing",value:function(t,e,n){if(t.isEmpty())return null;var i=$.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,s=n;G.isCCW(i)&&(r=n,s=e);var o=new Qn(i,new Un(this._argIndex,ce.BOUNDARY,r,s));this._lineEdgeMap.put(t,o),this.insertEdge(o),this.insertPoint(this._argIndex,i[0],ce.BOUNDARY)}},{key:"insertPoint",value:function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new Un(t,n):r.setLocation(t,n)}},{key:"createEdgeSetIntersector",value:function(){return new zn}},{key:"addSelfIntersectionNodes",value:function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var s=r.next();this.addSelfIntersectionNode(t,s.coord,i)}}},{key:"add",value:function(){if(!(1===arguments.length&&arguments[0]instanceof H))return e(l(r.prototype),"add",this).apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Yt&&(this._useBoundaryDeterminationRule=!1),t instanceof Bt)this.addPolygon(t);else if(t instanceof Dt)this.addLineString(t);else if(t instanceof Ft)this.addPoint(t);else if(t instanceof Vt)this.addCollection(t);else if(t instanceof It)this.addCollection(t);else if(t instanceof Yt)this.addCollection(t);else{if(!(t instanceof Et))throw new rt(t.getClass().getName());this.addCollection(t)}}},{key:"addCollection",value:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}}},{key:"locate",value:function(t){return E(this._parentGeom,qt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Je(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)}},{key:"findEdge",value:function(){if(1===arguments.length&&arguments[0]instanceof Dt){var t=arguments[0];return this._lineEdgeMap.get(t)}return e(l(r.prototype),"findEdge",this).apply(this,arguments)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}],[{key:"determineBoundary",value:function(t,e){return t.isInBoundary(e)?ce.BOUNDARY:ce.INTERIOR}}]),r}();si.constructor_=function(){if(this._parentGeom=null,this._lineEdgeMap=new Qt,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new En,2===arguments.length){var t=arguments[0],e=arguments[1];si.constructor_.call(this,t,e,j.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._argIndex=n,this._parentGeom=i,this._boundaryNodeRule=r,null!==i&&this.add(i)}};var oi=Object.freeze({__proto__:null,GeometryGraph:si}),ai=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"visit",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ai.constructor_=function(){};var ui=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isRepeated",value:function(){return this._count>1}},{key:"getRight",value:function(){return this._right}},{key:"getCoordinate",value:function(){return this._p}},{key:"setLeft",value:function(t){this._left=t}},{key:"getX",value:function(){return this._p.x}},{key:"getData",value:function(){return this._data}},{key:"getCount",value:function(){return this._count}},{key:"getLeft",value:function(){return this._left}},{key:"getY",value:function(){return this._p.y}},{key:"increment",value:function(){this._count=this._count+1}},{key:"setRight",value:function(t){this._right=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ui.constructor_=function(){if(this._p=null,this._data=null,this._left=null,this._right=null,this._count=null,2===arguments.length){var t=arguments[0],e=arguments[1];this._p=new k(t),this._left=null,this._right=null,this._count=1,this._data=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._p=new k(n,i),this._left=null,this._right=null,this._count=1,this._data=r}};var li=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"insert",value:function(){if(1===arguments.length){var t=arguments[0];return this.insert(t,null)}if(2===arguments.length){var e=arguments[0],n=arguments[1];if(null===this._root)return this._root=new ui(e,n),this._root;if(this._tolerance>0){var i=this.findBestMatchNode(e);if(null!==i)return i.increment(),i}return this.insertExact(e,n)}}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0],e=new w;return this.query(t,e),e}if(2===arguments.length)if(arguments[0]instanceof R&&E(arguments[1],C)){var n=arguments[0],i=arguments[1];this.queryNode(this._root,n,!0,new(function(){function t(){c(this,t)}return f(t,[{key:"visit",value:function(t){i.add(t)}},{key:"interfaces_",get:function(){return[ai]}}]),t}()))}else if(arguments[0]instanceof R&&E(arguments[1],ai)){var r=arguments[0],s=arguments[1];this.queryNode(this._root,r,!0,s)}}},{key:"queryNode",value:function(t,e,n,i){if(null===t)return null;var r=null,s=null,o=null;n?(r=e.getMinX(),s=e.getMaxX(),o=t.getX()):(r=e.getMinY(),s=e.getMaxY(),o=t.getY());var a=o<=s;r<o&&this.queryNode(t.getLeft(),e,!n,i),e.contains(t.getCoordinate())&&i.visit(t),a&&this.queryNode(t.getRight(),e,!n,i)}},{key:"findBestMatchNode",value:function(t){var e=new ci(t,this._tolerance);return this.query(e.queryEnvelope(),e),e.getNode()}},{key:"isEmpty",value:function(){return null===this._root}},{key:"insertExact",value:function(t,e){for(var n=this._root,i=this._root,r=!0,s=!0;null!==n;){if(null!==n&&t.distance(n.getCoordinate())<=this._tolerance)return n.increment(),n;s=r?t.x<n.getX():t.y<n.getY(),i=n,n=s?n.getLeft():n.getRight(),r=!r}this._numberOfNodes=this._numberOfNodes+1;var o=new ui(t,e);return s?i.setLeft(o):i.setRight(o),o}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"toCoordinates",value:function(){if(1===arguments.length){var e=arguments[0];return t.toCoordinates(e,!1)}if(2===arguments.length){for(var n=arguments[0],i=arguments[1],r=new T,s=n.iterator();s.hasNext();)for(var o=s.next(),a=i?o.getCount():1,u=0;u<a;u++)r.add(o.getCoordinate(),!0);return r.toCoordinateArray()}}}]),t}(),ci=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"visit",value:function(t){var e=this._p.distance(t.getCoordinate());if(!(e<=this._tolerance))return null;var n=!1;(null===this._matchNode||e<this._matchDist||null!==this._matchNode&&e===this._matchDist&&t.getCoordinate().compareTo(this._matchNode.getCoordinate())<1)&&(n=!0),n&&(this._matchNode=t,this._matchDist=e)}},{key:"queryEnvelope",value:function(){var t=new R(this._p);return t.expandBy(this._tolerance),t}},{key:"getNode",value:function(){return this._matchNode}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[ai]}}]),t}();ci.constructor_=function(){this._tolerance=null,this._matchNode=null,this._matchDist=0,this._p=null;var t=arguments[0],e=arguments[1];this._p=t,this._tolerance=e},li.BestMatchVisitor=ci,li.constructor_=function(){if(this._root=null,this._numberOfNodes=null,this._tolerance=null,0===arguments.length)li.constructor_.call(this,0);else if(1===arguments.length){var t=arguments[0];this._tolerance=t}};var hi=Object.freeze({__proto__:null,KdTree:li}),fi=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"hasChildren",value:function(){for(var t=0;t<4;t++)if(null!==this._subnode[t])return!0;return!1}},{key:"isPrunable",value:function(){return!(this.hasChildren()||this.hasItems())}},{key:"addAllItems",value:function(t){t.addAll(this._items);for(var e=0;e<4;e++)null!==this._subnode[e]&&this._subnode[e].addAllItems(t);return t}},{key:"getNodeCount",value:function(){for(var t=0,e=0;e<4;e++)null!==this._subnode[e]&&(t+=this._subnode[e].size());return t+1}},{key:"size",value:function(){for(var t=0,e=0;e<4;e++)null!==this._subnode[e]&&(t+=this._subnode[e].size());return t+this._items.size()}},{key:"addAllItemsFromOverlapping",value:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this._items);for(var n=0;n<4;n++)null!==this._subnode[n]&&this._subnode[n].addAllItemsFromOverlapping(t,e)}},{key:"visitItems",value:function(t,e){for(var n=this._items.iterator();n.hasNext();)e.visitItem(n.next())}},{key:"hasItems",value:function(){return!this._items.isEmpty()}},{key:"remove",value:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;i<4;i++)if(null!==this._subnode[i]&&(n=this._subnode[i].remove(t,e))){this._subnode[i].isPrunable()&&(this._subnode[i]=null);break}return n||(n=this._items.remove(e))}},{key:"visit",value:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;n<4;n++)null!==this._subnode[n]&&this._subnode[n].visit(t,e)}},{key:"getItems",value:function(){return this._items}},{key:"depth",value:function(){for(var t=0,e=0;e<4;e++)if(null!==this._subnode[e]){var n=this._subnode[e].depth();n>t&&(t=n)}return t+1}},{key:"isEmpty",value:function(){var t=!0;if(this._items.isEmpty()){for(var e=0;e<4;e++)if(null!==this._subnode[e]&&!this._subnode[e].isEmpty()){t=!1;break}}else t=!1;return t}},{key:"add",value:function(t){this._items.add(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[d]}}],[{key:"getSubnodeIndex",value:function(t,e,n){var i=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(i=3),t.getMaxY()<=n&&(i=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(i=2),t.getMaxY()<=n&&(i=0)),i}}]),t}();function gi(){}fi.constructor_=function(){this._items=new w,this._subnode=new Array(4).fill(null)},gi.exponent=function(t){return function(t,e){var n,i,r,s;if(s||(n=e<0||1/e<0,isFinite(e)||(s={d:32752,c:0,b:0,a:0},n&&(s.d+=32768),i=Math.pow(2,11)-1,r=0)),!s){for(i=1023,r=Math.abs(e);r>=2;)i++,r/=2;for(;r<1&&i>0;)i--,r*=2;i<=0&&(r/=2)}return i}(0,t)-1023},gi.powerOf2=function(t){return Math.pow(2,t)};var vi=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getLevel",value:function(){return this._level}},{key:"computeKey",value:function(){if(1===arguments.length){var e=arguments[0];for(this._level=t.computeQuadLevel(e),this._env=new R,this.computeKey(this._level,e);!this._env.contains(e);)this._level+=1,this.computeKey(this._level,e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=gi.powerOf2(n);this._pt.x=Math.floor(i.getMinX()/r)*r,this._pt.y=Math.floor(i.getMinY()/r)*r,this._env.init(this._pt.x,this._pt.x+r,this._pt.y,this._pt.y+r)}}},{key:"getEnvelope",value:function(){return this._env}},{key:"getCentre",value:function(){return new k((this._env.getMinX()+this._env.getMaxX())/2,(this._env.getMinY()+this._env.getMaxY())/2)}},{key:"getPoint",value:function(){return this._pt}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeQuadLevel",value:function(t){var e=t.getWidth(),n=t.getHeight(),i=e>n?e:n;return gi.exponent(i)+1}}]),t}();vi.constructor_=function(){this._pt=new k,this._level=0,this._env=null;var t=arguments[0];this.computeKey(t)};var _i=function(t){i(n,fi);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"find",value:function(t){var e=fi.getSubnodeIndex(t,this._centrex,this._centrey);return-1===e?this:null!==this._subnode[e]?this._subnode[e].find(t):this}},{key:"isSearchMatch",value:function(t){return null!==t&&this._env.intersects(t)}},{key:"getSubnode",value:function(t){return null===this._subnode[t]&&(this._subnode[t]=this.createSubnode(t)),this._subnode[t]}},{key:"getEnvelope",value:function(){return this._env}},{key:"getNode",value:function(t){var e=fi.getSubnodeIndex(t,this._centrex,this._centrey);return-1!==e?this.getSubnode(e).getNode(t):this}},{key:"createSubnode",value:function(t){var e=0,i=0,r=0,s=0;switch(t){case 0:e=this._env.getMinX(),i=this._centrex,r=this._env.getMinY(),s=this._centrey;break;case 1:e=this._centrex,i=this._env.getMaxX(),r=this._env.getMinY(),s=this._centrey;break;case 2:e=this._env.getMinX(),i=this._centrex,r=this._centrey,s=this._env.getMaxY();break;case 3:e=this._centrex,i=this._env.getMaxX(),r=this._centrey,s=this._env.getMaxY()}return new n(new R(e,i,r,s),this._level-1)}},{key:"insertNode",value:function(t){m.isTrue(null===this._env||this._env.contains(t._env));var e=fi.getSubnodeIndex(t._env,this._centrex,this._centrey);if(t._level===this._level-1)this._subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this._subnode[e]=n}}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"createNode",value:function(t){var e=new vi(t);return new n(e.getEnvelope(),e.getLevel())}},{key:"createExpanded",value:function(t,e){var i=new R(e);null!==t&&i.expandToInclude(t._env);var r=n.createNode(i);return null!==t&&r.insertNode(t),r}}]),n}();_i.constructor_=function(){this._env=null,this._centrex=null,this._centrey=null,this._level=null;var t=arguments[0],e=arguments[1];this._env=t,this._level=e,this._centrex=(t.getMinX()+t.getMaxX())/2,this._centrey=(t.getMinY()+t.getMaxY())/2};var di=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"isZeroWidth",value:function(e,n){var i=n-e;if(0===i)return!0;var r=i/Math.max(Math.abs(e),Math.abs(n));return gi.exponent(r)<=t.MIN_BINARY_EXPONENT}}]),t}();di.constructor_=function(){},di.MIN_BINARY_EXPONENT=-50;var yi=function(t){i(n,fi);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"insert",value:function(t,e){var i=fi.getSubnodeIndex(t,n.origin.x,n.origin.y);if(-1===i)return this.add(e),null;var r=this._subnode[i];if(null===r||!r.getEnvelope().contains(t)){var s=_i.createExpanded(r,t);this._subnode[i]=s}this.insertContained(this._subnode[i],t,e)}},{key:"isSearchMatch",value:function(t){return!0}},{key:"insertContained",value:function(t,e,n){m.isTrue(t.getEnvelope().contains(e));var i=di.isZeroWidth(e.getMinX(),e.getMaxX()),r=di.isZeroWidth(e.getMinY(),e.getMaxY());(i||r?t.find(e):t.getNode(e)).add(n)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();yi.constructor_=function(){},yi.origin=new k(0,0);var pi=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"insert",value:function(t,e){}},{key:"remove",value:function(t,e){}},{key:"query",value:function(){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();pi.constructor_=function(){};var mi=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"size",value:function(){return null!==this._root?this._root.size():0}},{key:"insert",value:function(e,n){this.collectStats(e);var i=t.ensureExtent(e,this._minExtent);this._root.insert(i,n)}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0],e=new Ze;return this.query(t,e),e.getItems()}if(2===arguments.length){var n=arguments[0],i=arguments[1];this._root.visit(n,i)}}},{key:"queryAll",value:function(){var t=new w;return this._root.addAllItems(t),t}},{key:"remove",value:function(e,n){var i=t.ensureExtent(e,this._minExtent);return this._root.remove(i,n)}},{key:"collectStats",value:function(t){var e=t.getWidth();e<this._minExtent&&e>0&&(this._minExtent=e);var n=t.getHeight();n<this._minExtent&&n>0&&(this._minExtent=n)}},{key:"depth",value:function(){return null!==this._root?this._root.depth():0}},{key:"isEmpty",value:function(){return null===this._root||this._root.isEmpty()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[pi,d]}}],[{key:"ensureExtent",value:function(t,e){var n=t.getMinX(),i=t.getMaxX(),r=t.getMinY(),s=t.getMaxY();return n!==i&&r!==s?t:(n===i&&(i=(n-=e/2)+e/2),r===s&&(s=(r-=e/2)+e/2),new R(n,i,r,s))}}]),t}();mi.constructor_=function(){this._root=null,this._minExtent=1,this._root=new yi},mi.serialVersionUID=-0x678b60c967a25400;var ki=Object.freeze({__proto__:null,Quadtree:mi}),xi=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getBounds",value:function(){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();xi.constructor_=function(){};var Ei=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[xi,d]}}]),t}();Ei.constructor_=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};var Ii=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"poll",value:function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ii.constructor_=function(){this._size=null,this._items=null,this._size=0,this._items=new w,this._items.add(null)};var Ni=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(t){m.isTrue(null===this._bounds),this._childBoundables.add(t)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[xi,d]}}]),t}();Ni.constructor_=function(){if(this._childBoundables=new w,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Ni.serialVersionUID=0x5a1e55ec41369800;var Ci=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"expandToQueue",value:function(e,n){var i=t.isComposite(this._boundable1),s=t.isComposite(this._boundable2);if(i&&s)return t.area(this._boundable1)>t.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,n),null):(this.expand(this._boundable2,this._boundable1,e,n),null);if(i)return this.expand(this._boundable1,this._boundable2,e,n),null;if(s)return this.expand(this._boundable2,this._boundable1,e,n),null;throw new r("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(t.isComposite(this._boundable1)||t.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}},{key:"expand",value:function(e,n,i,r){for(var s=e.getChildBoundables().iterator();s.hasNext();){var o=new t(s.next(),n,this._itemDistance);o.getDistance()<r&&i.add(o)}}},{key:"getBoundable",value:function(t){return 0===t?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[g]}}],[{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof Ni}}]),t}();Ci.constructor_=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};var Si=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"queryInternal",value:function(){if(E(arguments[2],Ye)&&arguments[0]instanceof Object&&arguments[1]instanceof Ni)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=e.getChildBoundables(),r=0;r<i.size();r++){var s=i.get(r);this.getIntersectsOp().intersects(s.getBounds(),t)&&(s instanceof Ni?this.queryInternal(t,s,n):s instanceof Ei?n.visitItem(s.getItem()):m.shouldNeverReachHere())}else if(E(arguments[2],C)&&arguments[0]instanceof Object&&arguments[1]instanceof Ni)for(var o=arguments[0],a=arguments[1],u=arguments[2],l=a.getChildBoundables(),c=0;c<l.size();c++){var h=l.get(c);this.getIntersectsOp().intersects(h.getBounds(),o)&&(h instanceof Ni?this.queryInternal(o,h,u):h instanceof Ei?u.add(h.getItem()):m.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ni?t+=this.size(n):n instanceof Ei&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof Ei&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new w:t}if(1===arguments.length){for(var e=arguments[0],n=new w,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Ni){var s=this.itemsTree(r);null!==s&&n.add(s)}else r instanceof Ei?n.add(r.getItem()):m.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(t,e){m.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ei(t,e))}},{key:"boundablesAtLevel",value:function(){if(1===arguments.length){var t=arguments[0],e=new w;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(m.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var o=s.next();o instanceof Ni?this.boundablesAtLevel(n,o,r):(m.isTrue(o instanceof Ei),-1===n&&r.add(o))}return null}}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new w;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,i)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=this.removeItem(i,r);if(s)return!0;for(var o=null,a=i.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Ni&&(s=this.remove(n,u,r))){o=u;break}}return null!==o&&o.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(o),s}}},{key:"createHigherLevels",value:function(t,e){m.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)}},{key:"depth",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ni){var i=this.depth(n);i>t&&(t=i)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){m.isTrue(!t.isEmpty());var n=new w;n.add(this.createNode(e));var i=new w(t);Le.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var s=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(s)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[d]}}],[{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}]),t}();Si.IntersectsOp=function(){},Si.constructor_=function(){if(this._root=null,this._built=!1,this._itemBoundables=new w,this._nodeCapacity=null,0===arguments.length)Si.constructor_.call(this,Si.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];m.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}},Si.serialVersionUID=-0x35ef64c82d4c5400,Si.DEFAULT_NODE_CAPACITY=10;var wi=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"distance",value:function(t,e){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();wi.constructor_=function(){};var Li=function(t){i(r,Si);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"createParentBoundablesFromVerticalSlices",value:function(t,e){m.isTrue(t.length>0);for(var n=new w,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n}},{key:"createNode",value:function(t){return new Ti(t)}},{key:"size",value:function(){return 0===arguments.length?e(l(r.prototype),"size",this).call(this):e(l(r.prototype),"size",this).apply(this,arguments)}},{key:"insert",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof R))return e(l(r.prototype),"insert",this).apply(this,arguments);var t=arguments[0],n=arguments[1];if(t.isNull())return null;e(l(r.prototype),"insert",this).call(this,t,n)}},{key:"getIntersectsOp",value:function(){return r.intersectsOp}},{key:"verticalSlices",value:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),s=0;s<e;s++){i[s]=new w;for(var o=0;r.hasNext()&&o<n;){var a=r.next();i[s].add(a),o++}}return i}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0];return e(l(r.prototype),"query",this).call(this,t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];e(l(r.prototype),"query",this).call(this,n,i)}}},{key:"getComparator",value:function(){return r.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(t,n){return e(l(r.prototype),"createParentBoundables",this).call(this,t,n)}},{key:"remove",value:function(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof R){var t=arguments[0],n=arguments[1];return e(l(r.prototype),"remove",this).call(this,t,n)}return e(l(r.prototype),"remove",this).apply(this,arguments)}},{key:"depth",value:function(){return 0===arguments.length?e(l(r.prototype),"depth",this).call(this):e(l(r.prototype),"depth",this).apply(this,arguments)}},{key:"createParentBoundables",value:function(t,e){m.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new w(t);Le.sort(i,r.xComparator);var s=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(s,e)}},{key:"nearestNeighbour",value:function(){if(1===arguments.length){if(E(arguments[0],wi)){var t=arguments[0],e=new Ci(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof Ci){var n=arguments[0];return this.nearestNeighbour(n,h.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof r&&E(arguments[1],wi)){var i=arguments[0],s=arguments[1],o=new Ci(this.getRoot(),i.getRoot(),s);return this.nearestNeighbour(o)}if(arguments[0]instanceof Ci&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],l=null,c=new Ii;for(c.add(a);!c.isEmpty()&&u>0;){var f=c.poll(),g=f.getDistance();if(g>=u)break;f.isLeaves()?(u=g,l=f):f.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}if(arguments[0]instanceof Ci&&Number.isInteger(arguments[1])){var v=arguments[0],_=arguments[1];return this.nearestNeighbour(v,h.POSITIVE_INFINITY,_)}}else if(3===arguments.length){if(E(arguments[2],wi)&&arguments[0]instanceof R&&arguments[1]instanceof Object){var d=arguments[0],y=arguments[1],p=arguments[2],m=new Ei(d,y),k=new Ci(this.getRoot(),m,p);return this.nearestNeighbour(k)[0]}if(Number.isInteger(arguments[2])&&arguments[0]instanceof Ci&&"number"==typeof arguments[1]){var x=arguments[0],I=arguments[1],N=arguments[2],C=I,S=new Ii;S.add(x);for(var w=new Ii;!S.isEmpty()&&C>=0;){var L=S.poll(),T=L.getDistance();if(T>=C)break;L.isLeaves()?w.size()<N?w.add(L):(w.peek().getDistance()>T&&(w.poll(),w.add(L)),C=w.peek().getDistance()):L.expandToQueue(S,C)}return r.getItems(w)}}else if(4===arguments.length){var P=arguments[0],O=arguments[1],b=arguments[2],M=arguments[3],D=new Ei(P,O),A=new Ci(this.getRoot(),D,b);return this.nearestNeighbour(A,M)}}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[pi,d]}}],[{key:"centreX",value:function(t){return r.avg(t.getMinX(),t.getMaxX())}},{key:"avg",value:function(t,e){return(t+e)/2}},{key:"getItems",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;!t.isEmpty();){var i=t.poll();e[n]=i.getBoundable(0).getItem(),n++}return e}},{key:"centreY",value:function(t){return r.avg(t.getMinY(),t.getMaxY())}}]),r}(),Ti=function(t){i(n,Ni);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"computeBounds",value:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new R(n.getBounds()):t.expandToInclude(n.getBounds())}return t}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();Ti.constructor_=function(){var t=arguments[0];Ni.constructor_.call(this,t)},Li.STRtreeNode=Ti,Li.constructor_=function(){if(0===arguments.length)Li.constructor_.call(this,Li.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];Si.constructor_.call(this,t)}},Li.serialVersionUID=0x39920f7d5f261e0,Li.xComparator=new(function(){function t(){c(this,t)}return f(t,[{key:"compare",value:function(t,e){return Si.compareDoubles(Li.centreX(t.getBounds()),Li.centreX(e.getBounds()))}},{key:"interfaces_",get:function(){return[_]}}]),t}()),Li.yComparator=new(function(){function t(){c(this,t)}return f(t,[{key:"compare",value:function(t,e){return Si.compareDoubles(Li.centreY(t.getBounds()),Li.centreY(e.getBounds()))}},{key:"interfaces_",get:function(){return[_]}}]),t}()),Li.intersectsOp=new(function(){function t(){c(this,t)}return f(t,[{key:"intersects",value:function(t,e){return t.intersects(e)}},{key:"interfaces_",get:function(){return[IntersectsOp]}}]),t}()),Li.DEFAULT_NODE_CAPACITY=10;var Ri=Object.freeze({__proto__:null,STRtree:Li}),Pi=Object.freeze({__proto__:null,kdtree:hi,quadtree:ki,strtree:Ri}),Oi=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],bi=function(){function t(e){c(this,t),this.geometryFactory=e||new te}return f(t,[{key:"read",value:function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Mi[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Oi.indexOf(n)?Mi[n].call(this,e.coordinates):"GeometryCollection"===n?Mi[n].call(this,e.geometries):Mi[n].call(this,e)}},{key:"write",value:function(t){var e=t.getGeometryType();if(!Di[e])throw new Error("Geometry is not supported");return Di[e].call(this,t)}}]),t}(),Mi={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!Mi[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Mi.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new k(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new k(t[0],t[1]),new k(t[2],t[1]),new k(t[2],t[3]),new k(t[0],t[3]),new k(t[0],t[1])])},Point:function(t){var e=new k(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Mi.Point.call(this,t[n]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Mi.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Mi.LineString.call(this,t[n]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Mi.coordinates.call(this,t[0]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var s=t[r],o=Mi.coordinates.call(this,s),a=this.geometryFactory.createLinearRing(o);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(Mi.Polygon.call(this,i))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},Di={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Di.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Di.Point.call(this,i);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(Di.coordinate.call(this,r))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Di.LineString.call(this,i);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Di.LineString.call(this,t._shell);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=t._holes[i],s=Di.LineString.call(this,r);e.push(s.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Di.Polygon.call(this,i);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(Di[r].call(this,i))}return{type:"GeometryCollection",geometries:e}}};function Ai(t){return[t.x,t.y]}var Fi=Object.freeze({__proto__:null,GeoJSONReader:function(){function t(e){c(this,t),this.parser=new bi(e||new te)}return f(t,[{key:"read",value:function(t){return this.parser.read(t)}}]),t}(),GeoJSONWriter:function(){function t(){c(this,t),this.parser=new bi(this.geometryFactory)}return f(t,[{key:"write",value:function(t){return this.parser.write(t)}}]),t}(),OL3Parser:function(){function t(e,n){c(this,t),this.geometryFactory=e||new te,this.ol=n||"undefined"!=typeof ol&&ol}return f(t,[{key:"inject",value:function(t,e,n,i,r,s,o,a){this.ol={geom:{Point:t,LineString:e,LinearRing:n,Polygon:i,MultiPoint:r,MultiLineString:s,MultiPolygon:o,GeometryCollection:a}}}},{key:"read",value:function(t){var e=this.ol;return t instanceof e.geom.Point?this.convertFromPoint(t):t instanceof e.geom.LineString?this.convertFromLineString(t):t instanceof e.geom.LinearRing?this.convertFromLinearRing(t):t instanceof e.geom.Polygon?this.convertFromPolygon(t):t instanceof e.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof e.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof e.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof e.geom.GeometryCollection?this.convertFromCollection(t):void 0}},{key:"convertFromPoint",value:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new k(e[0],e[1]))}},{key:"convertFromLineString",value:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(t){return new k(t[0],t[1])}))}},{key:"convertFromLinearRing",value:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(t){return new k(t[0],t[1])}))}},{key:"convertFromPolygon",value:function(t){for(var e=t.getLinearRings(),n=null,i=[],r=0;r<e.length;r++){var s=this.convertFromLinearRing(e[r]);0===r?n=s:i.push(s)}return this.geometryFactory.createPolygon(n,i)}},{key:"convertFromMultiPoint",value:function(t){var e=t.getPoints().map(function(t){return this.convertFromPoint(t)},this);return this.geometryFactory.createMultiPoint(e)}},{key:"convertFromMultiLineString",value:function(t){var e=t.getLineStrings().map(function(t){return this.convertFromLineString(t)},this);return this.geometryFactory.createMultiLineString(e)}},{key:"convertFromMultiPolygon",value:function(t){var e=t.getPolygons().map(function(t){return this.convertFromPolygon(t)},this);return this.geometryFactory.createMultiPolygon(e)}},{key:"convertFromCollection",value:function(t){var e=t.getGeometries().map(function(t){return this.read(t)},this);return this.geometryFactory.createGeometryCollection(e)}},{key:"write",value:function(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0}},{key:"convertToPoint",value:function(t){return new this.ol.geom.Point([t.x,t.y])}},{key:"convertToLineString",value:function(t){var e=t._points._coordinates.map(Ai);return new this.ol.geom.LineString(e)}},{key:"convertToLinearRing",value:function(t){var e=t._points._coordinates.map(Ai);return new this.ol.geom.LinearRing(e)}},{key:"convertToPolygon",value:function(t){for(var e=[t._shell._points._coordinates.map(Ai)],n=0;n<t._holes.length;n++)e.push(t._holes[n]._points._coordinates.map(Ai));return new this.ol.geom.Polygon(e)}},{key:"convertToMultiPoint",value:function(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(Ai))}},{key:"convertToMultiLineString",value:function(t){for(var e=[],n=0;n<t._geometries.length;n++)e.push(this.convertToLineString(t._geometries[n]).getCoordinates());return new this.ol.geom.MultiLineString(e)}},{key:"convertToMultiPolygon",value:function(t){for(var e=[],n=0;n<t._geometries.length;n++)e.push(this.convertToPolygon(t._geometries[n]).getCoordinates());return new this.ol.geom.MultiPolygon(e)}},{key:"convertToCollection",value:function(t){for(var e=[],n=0;n<t._geometries.length;n++){var i=t._geometries[n];e.push(this.write(i))}return new this.ol.geom.GeometryCollection(e)}}]),t}(),WKTReader:function(){function t(e){c(this,t),this.parser=new ie(e||new te)}return f(t,[{key:"read",value:function(t){return this.parser.read(t)}}]),t}(),WKTWriter:oe}),Gi=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"relativeSign",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"compare",value:function(e,n,i){if(n.equals2D(i))return 0;var r=t.relativeSign(n.x,i.x),s=t.relativeSign(n.y,i.y);switch(e){case 0:return t.compareValue(r,s);case 1:return t.compareValue(s,r);case 2:return t.compareValue(s,-r);case 3:return t.compareValue(-r,s);case 4:return t.compareValue(-r,-s);case 5:return t.compareValue(-s,-r);case 6:return t.compareValue(-s,r);case 7:return t.compareValue(r,-s)}return m.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}]),t}();Gi.constructor_=function(){};var qi=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Gi.compare(this._segmentOctant,this.coord,e.coord)}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t}},{key:"isInterior",value:function(){return this._isInterior}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[g]}}]),t}();qi.constructor_=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new k(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))};var Bi=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getSplitCoordinates",value:function(){var t=new T;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var t=new w;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}}},{key:"print",value:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"findCollapsesFromExistingVertices",value:function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=(this._edge.getCoordinate(e+1),this._edge.getCoordinate(e+2));n.equals2D(i)&&t.add(new M(e+1))}}},{key:"addEdgeCoordinates",value:function(t,e,n){e.segmentIndex,t.segmentIndex;var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new k(t.coord),!1);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)n.add(this._edge.getCoordinate(s));r&&n.add(new k(e.coord))}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}}},{key:"findCollapseIndex",value:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new M(e[0])),i=r}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)}},{key:"createSplitEdge",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var s=new Array(n).fill(null),o=0;s[o++]=new k(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)s[o++]=this._edge.getCoordinate(a);return r&&(s[o]=new k(e.coord)),new Ui(s,this._edge.getData())}},{key:"add",value:function(t,e){var n=new qi(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(m.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)}},{key:"checkSplitEdgesCorrectness",value:function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new y("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new y("bad split edge end point at "+r)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Bi.constructor_=function(){this._nodeMap=new gt,this._edge=null;var t=arguments[0];this._edge=t};var Vi=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"octant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];if(0===e&&0===n)throw new r("Cannot compute the octant for point ( "+e+", "+n+" )");var i=Math.abs(e),s=Math.abs(n);return e>=0?n>=0?i>=s?0:1:i>=s?7:6:n>=0?i>=s?3:2:i>=s?4:5}if(arguments[0]instanceof k&&arguments[1]instanceof k){var o=arguments[0],a=arguments[1],u=a.x-o.x,l=a.y-o.y;if(0===u&&0===l)throw new r("Cannot compute the octant for two identical points "+o);return t.octant(u,l)}}}]),t}();Vi.constructor_=function(){};var zi=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(t){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(t){}},{key:"getData",value:function(){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();zi.constructor_=function(){};var Yi=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"addIntersection",value:function(t,e){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[zi]}}]),t}();Yi.constructor_=function(){};var Ui=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"safeOctant",value:function(t,e){return t.equals2D(e)?0:Vi.octant(t,e)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[3],s=new k(n.getIntersection(r));this.addIntersection(s,i)}}},{key:"toString",value:function(){return oe.toLineString(new Kt(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(t,e){var n=e,i=n+1;if(i<this._pts.length){var r=this._pts[i];t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)}},{key:"addIntersections",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Yi]}}],[{key:"getNodedSubstrings",value:function(){if(1===arguments.length){var e=arguments[0],n=new w;return t.getNodedSubstrings(e,n),n}if(2===arguments.length)for(var i=arguments[0],r=arguments[1],s=i.iterator();s.hasNext();)s.next().getNodeList().addSplitEdges(r)}}]),t}();Ui.constructor_=function(){this._nodeList=new Bi(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};var Xi=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"overlap",value:function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Xi.constructor_=function(){this._overlapSeg1=new le,this._overlapSeg2=new le};var Hi=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getLineSegment",value:function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]}},{key:"computeSelect",value:function(t,e,n,i){var r=this._pts[e],s=this._pts[n];if(n-e==1)return i.select(this,e),null;if(!t.intersects(r,s))return null;var o=Math.trunc((e+n)/2);e<o&&this.computeSelect(t,e,o,i),o<n&&this.computeSelect(t,o,n,i)}},{key:"getCoordinates",value:function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t}},{key:"computeOverlaps",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.computeOverlaps(this._start,this._end,t,t._start,t._end,e)}else if(6===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3],o=arguments[4],a=arguments[5];if(i-n==1&&o-s==1)return a.overlap(this,n,r,s),null;if(!this.overlaps(n,i,r,s,o))return null;var u=Math.trunc((n+i)/2),l=Math.trunc((s+o)/2);n<u&&(s<l&&this.computeOverlaps(n,u,r,s,l,a),l<o&&this.computeOverlaps(n,u,r,l,o,a)),u<i&&(s<l&&this.computeOverlaps(u,i,r,s,l,a),l<o&&this.computeOverlaps(u,i,r,l,o,a))}}},{key:"setId",value:function(t){this._id=t}},{key:"select",value:function(t,e){this.computeSelect(t,this._start,this._end,e)}},{key:"getEnvelope",value:function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new R(t,e)}return this._env}},{key:"overlaps",value:function(t,e,n,i,r){return R.intersects(this._pts[t],this._pts[e],n._pts[i],n._pts[r])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Hi.constructor_=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i};var Wi=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"getChainStartIndices",value:function(e){var n=0,i=new w;i.add(new M(n));do{var r=t.findChainEnd(e,n);i.add(new M(r)),n=r}while(n<e.length-1);return t.toIntArray(i)}},{key:"findChainEnd",value:function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Tn.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||Tn.quadrant(t[r-1],t[r])===i);)r++;return r-1}},{key:"getChains",value:function(){if(1===arguments.length){var e=arguments[0];return t.getChains(e,null)}if(2===arguments.length){for(var n=arguments[0],i=arguments[1],r=new w,s=t.getChainStartIndices(n),o=0;o<s.length-1;o++){var a=new Hi(n,s[o],s[o+1],i);r.add(a)}return r}}},{key:"toIntArray",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}]),t}();Wi.constructor_=function(){};var ji=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"computeNodes",value:function(t){}},{key:"getNodedSubstrings",value:function(){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ji.constructor_=function(){};var Ki=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"setSegmentIntersector",value:function(t){this._segInt=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[ji]}}]),t}();Ki.constructor_=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};var Zi=function(t){i(n,Ki);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return Ui.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(t){for(var e=Wi.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}}},{key:"computeNodes",value:function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var t=new Qi(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}(),Qi=function(t){i(r,Xi);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"overlap",value:function(){if(4!==arguments.length)return e(l(r.prototype),"overlap",this).apply(this,arguments);var t=arguments[0],n=arguments[1],i=arguments[2],s=arguments[3],o=t.getContext(),a=i.getContext();this._si.processIntersections(o,n,a,s)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}]),r}();Qi.constructor_=function(){this._si=null;var t=arguments[0];this._si=t},Zi.SegmentOverlapAction=Qi,Zi.constructor_=function(){if(this._monoChains=new w,this._index=new Li,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];Ki.constructor_.call(this,t)}};var Ji=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"rescale",value:function(){if(E(arguments[0],I))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){var n=arguments[0];2===n.length&&(new k(n[0]),new k(n[1]));for(var i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&q.out.println(n)}}},{key:"scale",value:function(){if(E(arguments[0],I)){for(var t=arguments[0],e=new w(t.size()),n=t.iterator();n.hasNext();){var i=n.next();e.add(new Ui(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],s=new Array(r.length).fill(null),o=0;o<r.length;o++)s[o]=new k(Math.round((r[o].x-this._offsetX)*this._scaleFactor),Math.round((r[o].y-this._offsetY)*this._scaleFactor),r[o].z);return $.removeRepeatedPoints(s)}}},{key:"isIntegerPrecision",value:function(){return 1===this._scaleFactor}},{key:"getNodedSubstrings",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[ji]}}]),t}();Ji.constructor_=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];Ji.constructor_.call(this,t,e,0,0)}else if(4===arguments.length){var n=arguments[0],i=arguments[1];this._noder=n,this._scaleFactor=i,this._isScaled=!this.isIntegerPrecision()}};var $i=Object.freeze({__proto__:null,MCIndexNoder:Zi,ScaledNoder:Ji,SegmentString:zi}),tr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isSimpleMultiPoint",value:function(t){if(t.isEmpty())return!0;for(var e=new dt,n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n).getCoordinate();if(e.contains(i))return this._nonSimpleLocation=i,!1;e.add(i)}return!0}},{key:"isSimplePolygonal",value:function(t){for(var e=we.getLines(t).iterator();e.hasNext();){var n=e.next();if(!this.isSimpleLinearGeometry(n))return!1}return!0}},{key:"hasClosedEndpointIntersection",value:function(t){for(var e=new gt,n=t.getEdgeIterator();n.hasNext();){var i=n.next(),r=(i.getMaximumSegmentIndex(),i.isClosed()),s=i.getCoordinate(0);this.addEndpoint(e,s,r);var o=i.getCoordinate(i.getNumPoints()-1);this.addEndpoint(e,o,r)}for(var a=e.values().iterator();a.hasNext();){var u=a.next();if(u.isClosed&&2!==u.degree)return this._nonSimpleLocation=u.getCoordinate(),!0}return!1}},{key:"getNonSimpleLocation",value:function(){return this._nonSimpleLocation}},{key:"isSimpleLinearGeometry",value:function(t){if(t.isEmpty())return!0;var e=new si(0,t),n=new ue,i=e.computeSelfNodes(n,!0);return!(i.hasIntersection()&&(i.hasProperIntersection()?(this._nonSimpleLocation=i.getProperIntersectionPoint(),1):this.hasNonEndpointIntersection(e)||this._isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(e)))}},{key:"hasNonEndpointIntersection",value:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getMaximumSegmentIndex(),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next();if(!s.isEndPoint(i))return this._nonSimpleLocation=s.getCoordinate(),!0}return!1}},{key:"addEndpoint",value:function(t,e,n){var i=t.get(e);null===i&&(i=new er(e),t.put(e,i)),i.addEndpoint(n)}},{key:"computeSimple",value:function(t){return this._nonSimpleLocation=null,!!t.isEmpty()||(t instanceof Dt||t instanceof It?this.isSimpleLinearGeometry(t):t instanceof Vt?this.isSimpleMultiPoint(t):E(t,qt)?this.isSimplePolygonal(t):!(t instanceof Et)||this.isSimpleGeometryCollection(t))}},{key:"isSimple",value:function(){return this._nonSimpleLocation=null,this.computeSimple(this._inputGeom)}},{key:"isSimpleGeometryCollection",value:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"isSimple",value:function(){return 1===arguments.length?new t(arguments[0]).isSimple():2===arguments.length?new t(arguments[0],arguments[1]).isSimple():void 0}}]),t}(),er=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"addEndpoint",value:function(t){this.degree++,this.isClosed|=t}},{key:"getCoordinate",value:function(){return this.pt}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();er.constructor_=function(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0},tr.EndpointInfo=er,tr.constructor_=function(){if(this._inputGeom=null,this._isClosedEndpointsInInterior=!0,this._nonSimpleLocation=null,1===arguments.length){var t=arguments[0];this._inputGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._inputGeom=e,this._isClosedEndpointsInInterior=!n.isInBoundary(2)}};var nr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(e){this._quadrantSegments=e,0===this._quadrantSegments&&(this._joinStyle=t.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=t.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==t.JOIN_ROUND&&(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(t){this._joinStyle=t}},{key:"setSimplifyFactor",value:function(t){this._simplifyFactor=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(t){this._endCapStyle=t}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(t){this._mitreLimit=t}},{key:"setSingleSided",value:function(t){this._isSingleSided=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"bufferDistanceError",value:function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}}]),t}();nr.constructor_=function(){if(this._quadrantSegments=nr.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=nr.CAP_ROUND,this._joinStyle=nr.JOIN_ROUND,this._mitreLimit=nr.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=nr.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(r),this.setJoinStyle(s),this.setMitreLimit(o)}},nr.CAP_ROUND=1,nr.CAP_FLAT=2,nr.CAP_SQUARE=3,nr.JOIN_ROUND=1,nr.JOIN_MITRE=2,nr.JOIN_BEVEL=3,nr.DEFAULT_QUADRANT_SEGMENTS=8,nr.DEFAULT_MITRE_LIMIT=5,nr.DEFAULT_SIMPLIFY_FACTOR=.01;var ir=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n}},{key:"findRightmostEdgeAtVertex",value:function(){var t=this._minDe.getEdge().getCoordinates();m.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=G.index(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===G.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===G.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=Fn.LEFT;return n[e].y<n[e+1].y&&(i=Fn.RIGHT),i}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])}},{key:"findRightmostEdgeAtNode",value:function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}m.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Fn.LEFT&&(this._orientedDe=this._minDe.getSym())}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();function rr(){this.array_=[]}ir.constructor_=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null},rr.prototype.addLast=function(t){this.array_.push(t)},rr.prototype.removeFirst=function(){return this.array_.shift()},rr.prototype.isEmpty=function(){return 0===this.array_.length};var sr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"clearVisitedEdges",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new ei("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var s=r.next();s.setVisited(!0),this.copySymDepths(s)}}},{key:"computeDepth",value:function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(Fn.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)}},{key:"create",value:function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Fn.RIGHT)>=1&&e.getDepth(Fn.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}}},{key:"computeDepths",value:function(t){var e=new ot,n=new rr,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var s=r.getEdges().iterator();s.hasNext();){var o=s.next().getSym();if(!o.isVisited()){var a=o.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}}},{key:"compareTo",value:function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(null===this._env){for(var t=new R,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env}},{key:"addReachable",value:function(t){var e=new vn;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}}},{key:"copySymDepths",value:function(t){var e=t.getSym();e.setDepth(Fn.LEFT,t.getDepth(Fn.RIGHT)),e.setDepth(Fn.RIGHT,t.getDepth(Fn.LEFT))}},{key:"add",value:function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[g]}}]),t}();sr.constructor_=function(){this._finder=null,this._dirEdgeList=new w,this._nodes=new w,this._rightMostCoord=null,this._env=null,this._finder=new ir};var or=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"computeRing",value:function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=G.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"computePoints",value:function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new ei("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new ei("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var i=e.getLabel();m.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(t){return this._pts.get(t)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var s=r;s<i.length;s++)this._pts.add(i[s])}else{var o=i.length-2;n&&(o=i.length-1);for(var a=o;a>=0;a--)this._pts.add(i[a])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)}},{key:"containsPoint",value:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!en.isInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0}},{key:"addHole",value:function(t){this._holes.add(t)}},{key:"isShell",value:function(){return null===this._shell}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,Fn.RIGHT);if(i===ce.NONE)return null;if(this._label.getLocation(n)===ce.NONE)return this._label.setLocation(n,i),null}}},{key:"setShell",value:function(t){this._shell=t,null!==t&&t.addHole(this)}},{key:"toPolygon",value:function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();or.constructor_=function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new w,this._pts=new w,this._label=new Un(ce.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new w,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}};var ar=function(t){i(n,or);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"setEdgeRing",value:function(t,e){t.setMinEdgeRing(e)}},{key:"getNext",value:function(t){return t.getNextMin()}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();ar.constructor_=function(){var t=arguments[0],e=arguments[1];or.constructor_.call(this,t,e)};var ur=function(t){i(n,or);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"buildMinimalRings",value:function(){var t=new w,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new ar(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t}},{key:"setEdgeRing",value:function(t,e){t.setEdgeRing(e)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)}},{key:"getNext",value:function(t){return t.getNext()}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();ur.constructor_=function(){var t=arguments[0],e=arguments[1];or.constructor_.call(this,t,e)};var lr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"sortShellsAndHoles",value:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}}},{key:"computePolygons",value:function(t){for(var e=new w,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e}},{key:"placeFreeHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new ei("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}}},{key:"buildMinimalEdgeRings",value:function(t,e,n){for(var i=new w,r=t.iterator();r.hasNext();){var s=r.next();if(s.getMaxNodeDegree()>2){s.linkDirectedEdgesForMinimalEdgeRings();var o=s.buildMinimalRings(),a=this.findShell(o);null!==a?(this.placePolygonHoles(a,o),e.add(a)):n.addAll(o)}else i.add(s)}return i}},{key:"containsPoint",value:function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1}},{key:"buildMaximalEdgeRings",value:function(t){for(var e=new w,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new ur(i,this._geometryFactory);e.add(r),r.setInResult()}}return e}},{key:"placePolygonHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findEdgeRingContaining",value:function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),s=null,o=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==s&&(o=s.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(i)&&en.isInRing(r,l.getCoordinates())&&(h=!0),h&&(null===s||o.contains(c))&&(s=u)}return s}},{key:"findShell",value:function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return m.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];ri.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new w,s=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(s,this._shellList,r),this.placeFreeHoles(this._shellList,r)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();lr.constructor_=function(){this._geometryFactory=null,this._shellList=new w;var t=arguments[0];this._geometryFactory=t};var cr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isDeletable",value:function(t,e,n,i){var r=this._inputLine[t],s=this._inputLine[e],o=this._inputLine[n];return!!this.isConcave(r,s,o)&&!!this.isShallow(r,s,o,i)&&this.isShallowSampled(r,s,t,n,i)}},{key:"deleteShallowConcavities",value:function(){var e=1;this._inputLine.length;for(var n=this.findNextNonDeletedIndex(e),i=this.findNextNonDeletedIndex(n),r=!1;i<this._inputLine.length;){var s=!1;this.isDeletable(e,n,i,this._distanceTol)&&(this._isDeleted[n]=t.DELETE,s=!0,r=!0),e=s?i:n,n=this.findNextNonDeletedIndex(e),i=this.findNextNonDeletedIndex(n)}return r}},{key:"isShallowConcavity",value:function(t,e,n,i){return G.index(t,e,n)===this._angleOrientation&&z.pointToSegment(e,t,n)<i}},{key:"isShallowSampled",value:function(e,n,i,r,s){var o=Math.trunc((r-i)/t.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=i;a<r;a+=o)if(!this.isShallow(e,n,this._inputLine[a],s))return!1;return!0}},{key:"isConcave",value:function(t,e,n){return G.index(t,e,n)===this._angleOrientation}},{key:"simplify",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=G.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(e){for(var n=e+1;n<this._inputLine.length&&this._isDeleted[n]===t.DELETE;)n++;return n}},{key:"isShallow",value:function(t,e,n,i){return z.pointToSegment(e,t,n)<i}},{key:"collapseLine",value:function(){for(var e=new T,n=0;n<this._inputLine.length;n++)this._isDeleted[n]!==t.DELETE&&e.add(this._inputLine[n]);return e.toCoordinateArray()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(e,n){return new t(e).simplify(n)}}]),t}();cr.constructor_=function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=G.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t},cr.INIT=0,cr.DELETE=1,cr.KEEP=1,cr.NUM_PTS_TO_CHECK=10;var hr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getCoordinates",value:function(){return this._ptList.toArray(t.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"addPt",value:function(t){var e=new k(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])}},{key:"isRedundant",value:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:"toString",value:function(){return(new te).createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var t=new k(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(this._ptList.size()>=2&&this._ptList.get(this._ptList.size()-2),t.equals(e))return null;this._ptList.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this._minimimVertexDistance=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();hr.constructor_=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new w},hr.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var fr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"addNextSegment",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=G.index(this._s0,this._s1,this._s2),i=n===G.CLOCKWISE&&this._side===Fn.LEFT||n===G.COUNTERCLOCKWISE&&this._side===Fn.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},{key:"addLineEndCap",value:function(t,e){var n=new le(t,e),i=new le;this.computeOffsetSegment(n,Fn.LEFT,this._distance,i);var r=new le;this.computeOffsetSegment(n,Fn.RIGHT,this._distance,r);var s=e.x-t.x,o=e.y-t.y,a=Math.atan2(o,s);switch(this._bufParams.getEndCapStyle()){case nr.CAP_ROUND:this._segList.addPt(i.p1),this.addDirectedFillet(e,a+Math.PI/2,a-Math.PI/2,G.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case nr.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case nr.CAP_SQUARE:var u=new k;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new k(i.p1.x+u.x,i.p1.y+u.y),c=new k(r.p1.x+u.x,r.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(t,e,n,i){var r=!0,s=null;try{s=B.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:s.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof O))throw t;s=new k(0,0),r=!1}r?this._segList.addPt(s):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(e,n){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*t.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===nr.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===nr.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(n&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(t){this._segList.addPt(new k(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new k(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new k(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new k(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(t,e){this._segList.addPts(t,e)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(t,e,n,i,r){var s=e.x-t.x,o=e.y-t.y,a=Math.atan2(o,s),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);i===G.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,a,c,i,r),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(t,e,n,i){var r=this._seg0.p1,s=fe.angle(r,this._seg0.p0),o=(fe.angle(r,this._seg1.p1),fe.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2),a=fe.normalize(s+o),u=fe.normalize(a+Math.PI),l=i*n,c=n-l*Math.abs(Math.sin(o)),h=r.x+l*Math.cos(u),f=r.y+l*Math.sin(u),g=new k(h,f),v=new le(r,g),_=v.pointAlongOffset(1,c),d=v.pointAlongOffset(1,-c);this._side===Fn.LEFT?(this._segList.addPt(_),this._segList.addPt(d)):(this._segList.addPt(d),this._segList.addPt(_))}},{key:"addDirectedFillet",value:function(t,e,n,i,r){var s=i===G.CLOCKWISE?-1:1,o=Math.abs(e-n),a=Math.trunc(o/this._filletAngleQuantum+.5);if(a<1)return null;var u;u=o/a;for(var l=0,c=new k;l<o;){var h=e+s*l;c.x=t.x+r*Math.cos(h),c.y=t.y+r*Math.sin(h),this._segList.addPt(c),l+=u}}},{key:"computeOffsetSegment",value:function(t,e,n,i){var r=e===Fn.LEFT?1:-1,s=t.p1.x-t.p0.x,o=t.p1.y-t.p0.y,a=Math.sqrt(s*s+o*o),u=r*n*s/a,l=r*n*o/a;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+u}},{key:"addInsideTurn",value:function(e,n){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*t.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var i=new k((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i);var r=new k((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(t){var e=new k(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:"init",value:function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new hr,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*t.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===nr.JOIN_BEVEL||this._bufParams.getJoinStyle()===nr.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,G.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();fr.constructor_=function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new le,this._seg1=new le,this._offset0=new le,this._offset1=new le,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new ue,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===nr.JOIN_ROUND&&(this._closingSegLengthFactor=fr.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},fr.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,fr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,fr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,fr.MAX_CLOSING_SEG_LEN_FACTOR=80;var gr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getOffsetCurve",value:function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var s=r.getCoordinates();return n&&$.reverse(s),s}},{key:"computeSingleSidedBufferCurve",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=cr.simplify(t,-i),s=r.length-1;n.initSideSegments(r[s],r[s-1],Fn.LEFT),n.addFirstSegment();for(var o=s-2;o>=0;o--)n.addNextSegment(r[o],!0)}else{n.addSegments(t,!1);var a=cr.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],Fn.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);e===Fn.RIGHT&&(i=-i);var r=cr.simplify(t,i),s=r.length-1;n.initSideSegments(r[s-1],r[0],e);for(var o=1;o<=s;o++){var a=1!==o;n.addNextSegment(r[o],a)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(t,e){var n=this.simplifyTolerance(this._distance),i=cr.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Fn.LEFT);for(var s=2;s<=r;s++)e.addNextSegment(i[s],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var o=cr.simplify(t,-n),a=o.length-1;e.initSideSegments(o[a],o[a-1],Fn.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(o[u],!0);e.addLastSegment(),e.addLineEndCap(o[1],o[0]),e.closeRing()}},{key:"computePointCurve",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case nr.CAP_ROUND:e.createCircle(t);break;case nr.CAP_SQUARE:e.createSquare(t)}}},{key:"getLineCurve",value:function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(e,n,i){if(this._distance=i,e.length<=2)return this.getLineCurve(e,i);if(0===i)return t.copyCoordinates(e);var r=this.getSegGen(i);return this.computeRingBufferCurve(e,n,r),r.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=cr.simplify(t,-i),s=r.length-1;n.initSideSegments(r[s],r[s-1],Fn.LEFT),n.addFirstSegment();for(var o=s-2;o>=0;o--)n.addNextSegment(r[o],!0)}else{var a=cr.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],Fn.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()}},{key:"getSegGen",value:function(t){return new fr(this._precisionModel,this._bufParams,t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"copyCoordinates",value:function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new k(t[n]);return e}}]),t}();gr.constructor_=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};var vr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"findStabbedSegments",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new w,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(E(arguments[2],C)&&arguments[0]instanceof k&&arguments[1]instanceof ni){for(var s=arguments[0],o=arguments[1],a=arguments[2],u=o.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(!(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),Math.max(this._seg.p0.x,this._seg.p1.x)<s.x||this._seg.isHorizontal()||s.y<this._seg.p0.y||s.y>this._seg.p1.y||G.index(this._seg.p0,this._seg.p1,s)===G.RIGHT)){var c=o.getDepth(Fn.LEFT);this._seg.p0.equals(u[l])||(c=o.getDepth(Fn.RIGHT));var h=new _r(this._seg,c);a.add(h)}}else if(E(arguments[2],C)&&arguments[0]instanceof k&&E(arguments[1],C))for(var f=arguments[0],g=arguments[1],v=arguments[2],_=g.iterator();_.hasNext();){var d=_.next();d.isForward()&&this.findStabbedSegments(f,d,v)}}},{key:"getDepth",value:function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Le.min(e)._leftDepth}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(),_r=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"compareTo",value:function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:0!==(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)}},{key:"compareX",value:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[g]}}]),t}();_r.constructor_=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new le(t),this._leftDepth=e},vr.DepthSegment=_r,vr.constructor_=function(){this._subgraphs=null,this._seg=new le;var t=arguments[0];this._subgraphs=t};var dr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"addPoint",value:function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,ce.EXTERIOR,ce.INTERIOR)}},{key:"addPolygon",value:function(t){var e=this._distance,n=Fn.LEFT;this._distance<0&&(e=-this._distance,n=Fn.RIGHT);var i=t.getExteriorRing(),r=$.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,ce.EXTERIOR,ce.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var o=t.getInteriorRingN(s),a=$.removeRepeatedPoints(o.getCoordinates());this._distance>0&&this.isErodedCompletely(o,-this._distance)||this.addPolygonRing(a,e,Fn.opposite(n),ce.INTERIOR,ce.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(t,e){var n=new ge(t[0],t[1],t[2]),i=n.inCentre();return z.pointToSegment(i,n.p0,n.p1)<Math.abs(e)}},{key:"addLineString",value:function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=$.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,ce.EXTERIOR,ce.INTERIOR)}},{key:"addCurve",value:function(t,e,n){if(null===t||t.length<2)return null;var i=new Ui(t,new Un(0,ce.BOUNDARY,e,n));this._curveList.add(i)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"addPolygonRing",value:function(t,e,n,i,r){if(0===e&&t.length<zt.MINIMUM_VALID_SIZE)return null;var s=i,o=r;t.length>=zt.MINIMUM_VALID_SIZE&&G.isCCW(t)&&(s=r,o=i,n=Fn.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,s,o)}},{key:"add",value:function(t){if(t.isEmpty())return null;if(t instanceof Bt)this.addPolygon(t);else if(t instanceof Dt)this.addLineString(t);else if(t instanceof Ft)this.addPoint(t);else if(t instanceof Vt)this.addCollection(t);else if(t instanceof It)this.addCollection(t);else if(t instanceof Yt)this.addCollection(t);else{if(!(t instanceof Et))throw new rt(t.getClass().getName());this.addCollection(t)}}},{key:"isErodedCompletely",value:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r}},{key:"addCollection",value:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();dr.constructor_=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new w;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};var yr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getNextCW",value:function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)}},{key:"propagateSideLabels",value:function(t){for(var e=ce.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,Fn.LEFT)!==ce.NONE&&(e=i.getLocation(t,Fn.LEFT))}if(e===ce.NONE)return null;for(var r=e,s=this.iterator();s.hasNext();){var o=s.next(),a=o.getLabel();if(a.getLocation(t,Fn.ON)===ce.NONE&&a.setLocation(t,Fn.ON,r),a.isArea(t)){var u=a.getLocation(t,Fn.LEFT),l=a.getLocation(t,Fn.RIGHT);if(l!==ce.NONE){if(l!==r)throw new ei("side location conflict",o.getCoordinate());u===ce.NONE&&m.shouldNeverReachHere("found single null side (at "+o.getCoordinate()+")"),r=u}else m.isTrue(a.getLocation(t,Fn.LEFT)===ce.NONE,"found single null side"),a.setLocation(t,Fn.RIGHT,r),a.setLocation(t,Fn.LEFT,r)}}}},{key:"getCoordinate",value:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}},{key:"print",value:function(t){q.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"isAreaLabelsConsistent",value:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Fn.LEFT);m.isTrue(i!==ce.NONE,"Found unlabelled area edge");for(var r=i,s=this.iterator();s.hasNext();){var o=s.next().getLabel();m.isTrue(o.isArea(t),"Found non-area edge");var a=o.getLocation(t,Fn.LEFT),u=o.getLocation(t,Fn.RIGHT);if(a===u)return!1;if(u!==r)return!1;r=a}return!0}},{key:"findIndex",value:function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this._edgeList&&(this._edgeList=new w(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(t,e,n){return this._ptInAreaLocation[t]===ce.NONE&&(this._ptInAreaLocation[t]=sn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]}},{key:"toString",value:function(){var t=new b;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()}},{key:"computeEdgeEndLabels",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)}},{key:"computeLabelling",value:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===ce.BOUNDARY&&(e[r]=!0);for(var s=this.iterator();s.hasNext();)for(var o=s.next(),a=o.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=ce.NONE;if(e[u])l=ce.EXTERIOR;else{var c=o.getCoordinate();l=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,l)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(t,e){this._edgeMap.put(t,e),this._edgeList=null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();yr.constructor_=function(){this._edgeMap=new gt,this._edgeList=null,this._ptInAreaLocation=[ce.NONE,ce.NONE]};var pr=function(t){i(r,yr);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),s=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;e=s,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new ei("no outgoing dirEdge found",this.getCoordinate());m.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}}},{key:"insert",value:function(t){var e=t;this.insertEdgeEnd(e,e)}},{key:"getRightmostEdge",value:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),s=i.getQuadrant();return Tn.isNorthern(r)&&Tn.isNorthern(s)?n:Tn.isNorthern(r)||Tn.isNorthern(s)?0!==n.getDy()?n:0!==i.getDy()?i:(m.shouldNeverReachHere("found two horizontal edges incident on node"),null):i}},{key:"print",value:function(t){q.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new w;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)}},{key:"computeDepths",value:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Fn.LEFT),i=t.getDepth(Fn.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new ei("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var s=arguments[0],o=arguments[1],a=arguments[2],u=s;u<o;u++){var l=this._edgeList.get(u);l.setEdgeDepths(Fn.RIGHT,a),a=l.getDepth(Fn.LEFT)}return a}}},{key:"mergeSymLabels",value:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var s=this._resultAreaEdgeList.get(r),o=s.getSym();switch(null===e&&s.getEdgeRing()===t&&(e=s),i){case this._SCANNING_FOR_INCOMING:if(o.getEdgeRing()!==t)continue;n=o,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;n.setNextMin(s),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(m.isTrue(null!==e,"found null for first outgoing dirEdge"),m.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))}},{key:"getOutgoingDegree",value:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var t=ce.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=ce.INTERIOR;break}if(i.isInResult()){t=ce.EXTERIOR;break}}}if(t===ce.NONE)return null;for(var r=t,s=this.iterator();s.hasNext();){var o=s.next(),a=o.getSym();o.isLineEdge()?o.getEdge().setCovered(r===ce.INTERIOR):(o.isInResult()&&(r=ce.EXTERIOR),a.isInResult()&&(r=ce.INTERIOR))}}},{key:"computeLabelling",value:function(t){e(l(r.prototype),"computeLabelling",this).call(this,t),this._label=new Un(ce.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),s=0;s<2;s++){var o=i.getLocation(s);o!==ce.INTERIOR&&o!==ce.BOUNDARY||this._label.setLocation(s,ce.INTERIOR)}}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}]),r}();pr.constructor_=function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2};var mr=function(t){i(n,ii);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"createNode",value:function(t){return new Jn(t,new pr)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();mr.constructor_=function(){};var kr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"compareTo",value:function(e){var n=e;return t.compareOriented(this._pts,this._orientation,n._pts,n._orientation)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[g]}}],[{key:"orientation",value:function(t){return 1===$.increasingDirection(t)}},{key:"compareOriented",value:function(t,e,n,i){for(var r=e?1:-1,s=i?1:-1,o=e?t.length:-1,a=i?n.length:-1,u=e?0:t.length-1,l=i?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var h=(u+=r)===o,f=(l+=s)===a;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}}}]),t}();kr.constructor_=function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=kr.orientation(t)};var xr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"print",value:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")}},{key:"addAll",value:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())}},{key:"findEdgeIndex",value:function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(t){return this._edges.get(t)}},{key:"findEqualEdge",value:function(t){var e=new kr(t.getCoordinates());return this._ocaMap.get(e)}},{key:"add",value:function(t){this._edges.add(t);var e=new kr(t.getCoordinates());this._ocaMap.put(e,t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();xr.constructor_=function(){this._edges=new w,this._ocaMap=new gt};var Er=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"processIntersections",value:function(t,e,n,i){}},{key:"isDone",value:function(){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Er.constructor_=function(){};var Ir=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isTrivialIntersection",value:function(e,n,i,r){if(e===i&&1===this._li.getIntersectionNum()){if(t.isAdjacentSegments(n,r))return!0;if(e.isClosed()){var s=e.size()-1;if(0===n&&r===s||0===r&&n===s)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,s,o,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Er]}}],[{key:"isAdjacentSegments",value:function(t,e){return 1===Math.abs(t-e)}}]),t}();Ir.constructor_=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};var Nr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"setWorkingPrecisionModel",value:function(t){this._workingPrecisionModel=t}},{key:"insertUniqueEdge",value:function(e){var n=this._edgeList.findEqualEdge(e);if(null!==n){var i=n.getLabel(),r=e.getLabel();n.isPointwiseEqual(e)||(r=new Un(e.getLabel())).flip(),i.merge(r);var s=t.depthDelta(r),o=n.getDepthDelta()+s;n.setDepthDelta(o)}else this._edgeList.add(e),e.setDepthDelta(t.depthDelta(e.getLabel()))}},{key:"buildSubgraphs",value:function(t,e){for(var n=new w,i=t.iterator();i.hasNext();){var r=i.next(),s=r.getRightmostCoordinate(),o=new vr(n).getDepth(s);r.computeDepth(o),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var e=new w,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new sr;r.create(i),e.add(r)}}return Le.sort(e,Le.reverseOrder()),e}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Zi,n=new ue;return n.setPrecisionModel(t),e.setSegmentIntersector(new Ir(n)),e}},{key:"buffer",value:function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new gr(n,this._bufParams),r=new dr(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new ri(new mr),this._graph.addEdges(this._edgeList.getEdges());var s=this.createSubgraphs(this._graph),o=new lr(this._geomFact);this.buildSubgraphs(s,o);var a=o.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)}},{key:"computeNodedEdges",value:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),s=r.getCoordinates();if(2!==s.length||!s[0].equals2D(s[1])){var o=r.getData(),a=new Qn(r.getCoordinates(),new Un(o));this.insertUniqueEdge(a)}}}},{key:"setNoder",value:function(t){this._workingNoder=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthDelta",value:function(t){var e=t.getLocation(0,Fn.LEFT),n=t.getLocation(0,Fn.RIGHT);return e===ce.INTERIOR&&n===ce.EXTERIOR?1:e===ce.EXTERIOR&&n===ce.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var e=new te,n=new w;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)}}]),t}();Nr.constructor_=function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new xr;var t=arguments[0];this._bufParams=t};var Cr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"checkEndPtVertexIntersections",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),s=1;s<r.length-1;s++)if(r[s].equals(n))throw new y("found endpt/interior pt intersection at index "+s+" :pt "+n)}},{key:"checkInteriorIntersections",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],s=arguments[1],o=r.getCoordinates(),a=s.getCoordinates(),u=0;u<o.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(r,u,s,l);else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],g=arguments[3];if(c===f&&h===g)return null;var v=c.getCoordinates()[h],_=c.getCoordinates()[h+1],d=f.getCoordinates()[g],p=f.getCoordinates()[g+1];if(this._li.computeIntersection(v,_,d,p),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,v,_)||this.hasInteriorIntersection(this._li,d,p)))throw new y("found non-noded intersection at "+v+"-"+_+" and "+d+"-"+p)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])}},{key:"hasInteriorIntersection",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(e,n,i){if(e.equals(i))throw new y("found non-noded collapse at "+t.fact.createLineString([e,n,i]))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Cr.constructor_=function(){this._li=new ue,this._segStrings=null;var t=arguments[0];this._segStrings=t},Cr.fact=new te;var Sr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"intersectsScaled",value:function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),s=Math.max(t.y,e.y),o=this._maxx<n||this._minx>i||this._maxy<r||this._miny>s;if(o)return!1;var a=this.intersectsToleranceSquare(t,e);return m.isTrue(!(o&&a),"Found bad envelope test"),a}},{key:"initCorners",value:function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new k(this._maxx,this._maxy),this._corner[1]=new k(this._minx,this._maxy),this._corner[2]=new k(this._minx,this._miny),this._corner[3]=new k(this._maxx,this._miny)}},{key:"intersects",value:function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(t){return Math.round(t*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){if(null===this._safeEnv){var e=t.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new R(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))}},{key:"intersectsToleranceSquare",value:function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))}},{key:"addSnappedNode",value:function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Sr.constructor_=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new r("Scale factor must be non-zero");1!==e&&(this._pt=new k(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new k,this._p1Scaled=new k),this.initCorners(this._pt)},Sr.SAFE_ENV_EXPANSION_FACTOR=.75;var wr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"select",value:function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();wr.constructor_=function(){this.selectedSegment=new le};var Lr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"snap",value:function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),s=new Tr(e,n,i);return this._index.query(r,new(function(){function t(){c(this,t)}return f(t,[{key:"visitItem",value:function(t){t.select(r,s)}},{key:"interfaces_",get:function(){return[Ye]}}]),t}())),s.isNodeAdded()}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(),Tr=function(t){i(r,wr);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof Hi))return e(l(r.prototype),"select",this).apply(this,arguments);var t=arguments[0],n=arguments[1],i=t.getContext();if(null!==this._parentEdge&&i===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,n)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}]),r}();Tr.constructor_=function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n},Lr.HotPixelSnapAction=Tr,Lr.constructor_=function(){this._index=null;var t=arguments[0];this._index=t};var Rr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"processIntersections",value:function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,s,o,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Er]}}]),t}();Rr.constructor_=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new w};var Pr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"checkCorrectness",value:function(t){var e=Ui.getNodedSubstrings(t),n=new Cr(e);try{n.checkValid()}catch(t){if(!(t instanceof P))throw t;t.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return Ui.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)}},{key:"findInteriorIntersections",value:function(t,e){var n=new Rr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(E(arguments[0],I))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Ui)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var s=new Sr(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(s,n,r)&&n.addIntersection(i[r],r)}}},{key:"computeNodes",value:function(t){this._nodedSegStrings=t,this._noder=new Zi,this._pointSnapper=new Lr(this._noder.getIndex()),this.snapRound(t,this._li)}},{key:"computeIntersectionSnaps",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new Sr(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[ji]}}]),t}();Pr.constructor_=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new ue,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};var Or=function(){function e(){c(this,e),e.constructor_.apply(this,arguments)}return f(e,[{key:"bufferFixedPrecision",value:function(t){var e=new Ji(new Pr(new Jt(1)),t.getScale()),n=new Nr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(0===arguments.length){for(var n=e.MAX_PRECISION_DIGITS;n>=0;n--){try{this.bufferReducedPrecision(n)}catch(t){if(!(t instanceof ei))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var i=arguments[0],r=e.precisionScaleFactor(this._argGeom,this._distance,i),s=new Jt(r);this.bufferFixedPrecision(s)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Jt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var e=new Nr(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof y))throw t;this._saveException=t}}},{key:"getResultGeometry",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(t){this._bufParams.setEndCapStyle(t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"bufferOp",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return new e(t).getResultGeometry(n)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof H&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1],s=arguments[2],o=new e(i);return o.setQuadrantSegments(s),o.getResultGeometry(r)}if(arguments[2]instanceof nr&&arguments[0]instanceof H&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1];return new e(a,arguments[2]).getResultGeometry(u)}}else if(4===arguments.length){var l=arguments[0],c=arguments[1],h=arguments[2],f=arguments[3],g=new e(l);return g.setQuadrantSegments(h),g.setEndCapStyle(f),g.getResultGeometry(c)}}},{key:"precisionScaleFactor",value:function(t,e,n){var i=t.getEnvelopeInternal(),r=V.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),s=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,s)}}]),e}();Or.constructor_=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new nr,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},Or.CAP_ROUND=nr.CAP_ROUND,Or.CAP_BUTT=nr.CAP_FLAT,Or.CAP_FLAT=nr.CAP_FLAT,Or.CAP_SQUARE=nr.CAP_SQUARE,Or.MAX_PRECISION_DIGITS=12;var br=Object.freeze({__proto__:null,BufferOp:Or,BufferParameters:nr}),Mr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isInsideArea",value:function(){return this._segIndex===t.INSIDE_AREA}},{key:"getCoordinate",value:function(){return this._pt}},{key:"getGeometryComponent",value:function(){return this._component}},{key:"getSegmentIndex",value:function(){return this._segIndex}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Mr.constructor_=function(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var t=arguments[0],e=arguments[1];Mr.constructor_.call(this,t,Mr.INSIDE_AREA,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._component=n,this._segIndex=i,this._pt=r}},Mr.INSIDE_AREA=-1;var Dr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){(t instanceof Ft||t instanceof Dt||t instanceof Bt)&&this._locations.add(new Mr(t,0,t.getCoordinate()))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[kt]}}],[{key:"getLocations",value:function(e){var n=new w;return e.apply(new t(n)),n}}]),t}();Dr.constructor_=function(){this._locations=null;var t=arguments[0];this._locations=t};var Ar=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"computeContainmentDistance",value:function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=this._geom[e];if(i.getDimension()<2)return null;var r=1-e,s=Re.getPolygons(i);if(s.size()>0){var o=Dr.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,s,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&E(arguments[0],C)&&E(arguments[1],C)){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=0;c<a.size();c++)for(var h=a.get(c),f=0;f<u.size();f++)if(this.computeContainmentDistance(h,u.get(f),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Mr&&arguments[1]instanceof Bt){var g=arguments[0],v=arguments[1],_=arguments[2],d=g.getCoordinate();if(ce.EXTERIOR!==this._ptLocator.locate(d,v))return this._minDistance=0,_[0]=g,_[1]=new Mr(v,d),null}}},{key:"computeMinDistanceLinesPoints",value:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),s=0;s<e.size();s++){var o=e.get(s);if(this.computeMinDistance(r,o,n),this._minDistance<=this._terminateDistance)return null}}},{key:"computeFacetDistance",value:function(){var t=new Array(2).fill(null),e=we.getLines(this._geom[0]),n=we.getLines(this._geom[1]),i=Te.getPoints(this._geom[0]),r=Te.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))}},{key:"nearestLocations",value:function(){return this.computeMinDistance(),this._minDistanceLocation}},{key:"updateMinDistance",value:function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])}},{key:"nearestPoints",value:function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]}},{key:"computeMinDistance",value:function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Dt&&arguments[1]instanceof Ft){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),s=0;s<i.length-1;s++){var o=z.pointToSegment(r,i[s],i[s+1]);if(o<this._minDistance){this._minDistance=o;var a=new le(i[s],i[s+1]).closestPoint(r);n[0]=new Mr(t,s,a),n[1]=new Mr(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Dt&&arguments[1]instanceof Dt){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var h=u.getCoordinates(),f=l.getCoordinates(),g=0;g<h.length-1;g++)for(var v=0;v<f.length-1;v++){var _=z.segmentToSegment(h[g],h[g+1],f[v],f[v+1]);if(_<this._minDistance){this._minDistance=_;var d=new le(h[g],h[g+1]),y=new le(f[v],f[v+1]),p=d.closestPoints(y);c[0]=new Mr(u,g,p[0]),c[1]=new Mr(l,v,p[1])}if(this._minDistance<=this._terminateDistance)return null}}}},{key:"computeMinDistancePoints",value:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),s=0;s<e.size();s++){var o=e.get(s),a=r.getCoordinate().distance(o.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Mr(r,0,r.getCoordinate()),n[1]=new Mr(o,0,o.getCoordinate())),this._minDistance<=this._terminateDistance)return null}}},{key:"distance",value:function(){if(null===this._geom[0]||null===this._geom[1])throw new r("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)}},{key:"computeMinDistanceLines",value:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),s=0;s<e.size();s++){var o=e.get(s);if(this.computeMinDistance(r,o,n),this._minDistance<=this._terminateDistance)return null}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"distance",value:function(e,n){return new t(e,n).distance()}},{key:"isWithinDistance",value:function(e,n,i){return!(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>i)&&new t(e,n,i).distance()<=i}},{key:"nearestPoints",value:function(e,n){return new t(e,n).nearestPoints()}}]),t}();Ar.constructor_=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new En,this._minDistanceLocation=null,this._minDistance=h.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];Ar.constructor_.call(this,t,e,0)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}};var Fr=Object.freeze({__proto__:null,DistanceOp:Ar}),Gr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getCoordinates",value:function(){if(null===this._coordinates){for(var t=0,e=0,n=new T,i=this._directedEdges.iterator();i.hasNext();){var r=i.next();r.getEdgeDirection()?t++:e++,n.add(r.getEdge().getLine().getCoordinates(),!1,r.getEdgeDirection())}this._coordinates=n.toCoordinateArray(),e>t&&$.reverse(this._coordinates)}return this._coordinates}},{key:"toLineString",value:function(){return this._factory.createLineString(this.getCoordinates())}},{key:"add",value:function(t){this._directedEdges.add(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Gr.constructor_=function(){this._factory=null,this._directedEdges=new w,this._coordinates=null;var t=arguments[0];this._factory=t};var qr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"setVisited",value:function(t){this._isVisited=t}},{key:"isMarked",value:function(){return this._isMarked}},{key:"setData",value:function(t){this._data=t}},{key:"getData",value:function(){return this._data}},{key:"setMarked",value:function(t){this._isMarked=t}},{key:"getContext",value:function(){return this._data}},{key:"isVisited",value:function(){return this._isVisited}},{key:"setContext",value:function(t){this._data=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"getComponentWithVisitedState",value:function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null}},{key:"setVisited",value:function(t,e){for(;t.hasNext();)t.next().setVisited(e)}},{key:"setMarked",value:function(t,e){for(;t.hasNext();)t.next().setMarked(e)}}]),t}();qr.constructor_=function(){this._isMarked=!1,this._isVisited=!1,this._data=null};var Br=function(t){i(n,qr);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"isRemoved",value:function(){return null===this._parentEdge}},{key:"compareDirection",value:function(t){return this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:G.index(t._p0,t._p1,this._p1)}},{key:"getCoordinate",value:function(){return this._from.getCoordinate()}},{key:"print",value:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),i=e.substring(n+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+this._angle)}},{key:"getDirectionPt",value:function(){return this._p1}},{key:"getAngle",value:function(){return this._angle}},{key:"compareTo",value:function(t){var e=t;return this.compareDirection(e)}},{key:"getFromNode",value:function(){return this._from}},{key:"getSym",value:function(){return this._sym}},{key:"setEdge",value:function(t){this._parentEdge=t}},{key:"remove",value:function(){this._sym=null,this._parentEdge=null}},{key:"getEdge",value:function(){return this._parentEdge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"setSym",value:function(t){this._sym=t}},{key:"getToNode",value:function(){return this._to}},{key:"getEdgeDirection",value:function(){return this._edgeDirection}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[g]}}],[{key:"toEdges",value:function(t){for(var e=new w,n=t.iterator();n.hasNext();)e.add(n.next()._parentEdge);return e}}]),n}();Br.constructor_=function(){if(this._parentEdge=null,this._from=null,this._to=null,this._p0=null,this._p1=null,this._sym=null,this._edgeDirection=null,this._quadrant=null,this._angle=null,0===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._from=t,this._to=e,this._edgeDirection=i,this._p0=t.getCoordinate(),this._p1=n;var r=this._p1.x-this._p0.x,s=this._p1.y-this._p0.y;this._quadrant=Tn.quadrant(r,s),this._angle=Math.atan2(s,r)}};var Vr=function(t){i(n,Br);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"getNext",value:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(m.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();Vr.constructor_=function(){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];Br.constructor_.call(this,t,e,n,i)};var zr=function(t){i(n,qr);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"isRemoved",value:function(){return null===this._dirEdge}},{key:"setDirectedEdges",value:function(t,e){this._dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)}},{key:"getDirEdge",value:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this._dirEdge[t]}if(arguments[0]instanceof Ur){var e=arguments[0];return this._dirEdge[0].getFromNode()===e?this._dirEdge[0]:this._dirEdge[1].getFromNode()===e?this._dirEdge[1]:null}}},{key:"remove",value:function(){this._dirEdge=null}},{key:"getOppositeNode",value:function(t){return this._dirEdge[0].getFromNode()===t?this._dirEdge[0].getToNode():this._dirEdge[1].getFromNode()===t?this._dirEdge[1].getToNode():null}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();zr.constructor_=function(){if(this._dirEdge=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}};var Yr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getNextEdge",value:function(t){var e=this.getIndex(t);return this._outEdges.get(this.getIndex(e+1))}},{key:"getCoordinate",value:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}},{key:"iterator",value:function(){return this.sortEdges(),this._outEdges.iterator()}},{key:"sortEdges",value:function(){this._sorted||(Le.sort(this._outEdges),this._sorted=!0)}},{key:"remove",value:function(t){this._outEdges.remove(t)}},{key:"getEdges",value:function(){return this.sortEdges(),this._outEdges}},{key:"getNextCWEdge",value:function(t){var e=this.getIndex(t);return this._outEdges.get(this.getIndex(e-1))}},{key:"getIndex",value:function(){if(arguments[0]instanceof zr){var t=arguments[0];this.sortEdges();for(var e=0;e<this._outEdges.size();e++)if(this._outEdges.get(e).getEdge()===t)return e;return-1}if(arguments[0]instanceof Br){var n=arguments[0];this.sortEdges();for(var i=0;i<this._outEdges.size();i++)if(this._outEdges.get(i)===n)return i;return-1}if(Number.isInteger(arguments[0])){var r=arguments[0]%this._outEdges.size();return r<0&&(r+=this._outEdges.size()),r}}},{key:"add",value:function(t){this._outEdges.add(t),this._sorted=!1}},{key:"getDegree",value:function(){return this._outEdges.size()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Yr.constructor_=function(){this._outEdges=new w,this._sorted=!1};var Ur=function(t){i(n,qr);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"isRemoved",value:function(){return null===this._pt}},{key:"addOutEdge",value:function(t){this._deStar.add(t)}},{key:"getCoordinate",value:function(){return this._pt}},{key:"getOutEdges",value:function(){return this._deStar}},{key:"remove",value:function(){if(0===arguments.length)this._pt=null;else if(1===arguments.length){var t=arguments[0];this._deStar.remove(t)}}},{key:"getIndex",value:function(t){return this._deStar.getIndex(t)}},{key:"getDegree",value:function(){return this._deStar.getDegree()}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"getEdgesBetween",value:function(t,e){var n=new ot(Br.toEdges(t.getOutEdges().getEdges())),i=Br.toEdges(e.getOutEdges().getEdges());return n.retainAll(i),n}}]),n}();Ur.constructor_=function(){if(this._pt=null,this._deStar=null,1===arguments.length){var t=arguments[0];Ur.constructor_.call(this,t,new Yr)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._pt=e,this._deStar=n}};var Xr=function(t){i(n,zr);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"getLine",value:function(){return this._line}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();Xr.constructor_=function(){this._line=null;var t=arguments[0];this._line=t};var Hr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"find",value:function(t){return this._nodeMap.get(t)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"remove",value:function(t){return this._nodeMap.remove(t)}},{key:"values",value:function(){return this._nodeMap.values()}},{key:"add",value:function(t){return this._nodeMap.put(t.getCoordinate(),t),t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Hr.constructor_=function(){this._nodeMap=new gt};var Wr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"findNodesOfDegree",value:function(t){for(var e=new w,n=this.nodeIterator();n.hasNext();){var i=n.next();i.getDegree()===t&&e.add(i)}return e}},{key:"dirEdgeIterator",value:function(){return this._dirEdges.iterator()}},{key:"edgeIterator",value:function(){return this._edges.iterator()}},{key:"remove",value:function(){if(arguments[0]instanceof zr){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this._edges.remove(t),t.remove()}else if(arguments[0]instanceof Br){var e=arguments[0],n=e.getSym();null!==n&&n.setSym(null),e.getFromNode().remove(e),e.remove(),this._dirEdges.remove(e)}else if(arguments[0]instanceof Ur){for(var i=arguments[0],r=i.getOutEdges().getEdges().iterator();r.hasNext();){var s=r.next(),o=s.getSym();null!==o&&this.remove(o),this._dirEdges.remove(s);var a=s.getEdge();null!==a&&this._edges.remove(a)}this._nodeMap.remove(i.getCoordinate()),i.remove()}}},{key:"findNode",value:function(t){return this._nodeMap.find(t)}},{key:"getEdges",value:function(){return this._edges}},{key:"nodeIterator",value:function(){return this._nodeMap.iterator()}},{key:"contains",value:function(){if(arguments[0]instanceof zr){var t=arguments[0];return this._edges.contains(t)}if(arguments[0]instanceof Br){var e=arguments[0];return this._dirEdges.contains(e)}}},{key:"add",value:function(){if(arguments[0]instanceof Ur){var t=arguments[0];this._nodeMap.add(t)}else if(arguments[0]instanceof zr){var e=arguments[0];this._edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof Br){var n=arguments[0];this._dirEdges.add(n)}}},{key:"getNodes",value:function(){return this._nodeMap.values()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Wr.constructor_=function(){this._edges=new ot,this._dirEdges=new ot,this._nodeMap=new Hr};var jr=function(t){i(n,Wr);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"addEdge",value:function(t){if(t.isEmpty())return null;var e=$.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),s=this.getNode(i),o=new Vr(r,s,e[1],!0),a=new Vr(s,r,e[e.length-2],!1),u=new Xr(t);u.setDirectedEdges(o,a),this.add(u)}},{key:"getNode",value:function(t){var e=this.findNode(t);return null===e&&(e=new Ur(t),this.add(e)),e}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();jr.constructor_=function(){};var Kr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"buildEdgeStringsForUnprocessedNodes",value:function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(m.isTrue(2===e.getDegree()),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}}},{key:"buildEdgeStringsForNonDegree2Nodes",value:function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next();2!==e.getDegree()&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}}},{key:"buildEdgeStringsForObviousStartNodes",value:function(){this.buildEdgeStringsForNonDegree2Nodes()}},{key:"getMergedLineStrings",value:function(){return this.merge(),this._mergedLineStrings}},{key:"buildEdgeStringsStartingAt",value:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this._edgeStrings.add(this.buildEdgeStringStartingWith(n))}}},{key:"merge",value:function(){if(null!==this._mergedLineStrings)return null;qr.setMarked(this._graph.nodeIterator(),!1),qr.setMarked(this._graph.edgeIterator(),!1),this._edgeStrings=new w,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this._mergedLineStrings=new w;for(var t=this._edgeStrings.iterator();t.hasNext();){var e=t.next();this._mergedLineStrings.add(e.toLineString())}}},{key:"addLineString",value:function(t){null===this._factory&&(this._factory=t.getFactory()),this._graph.addEdge(t)}},{key:"buildEdgeStringStartingWith",value:function(t){var e=new Gr(this._factory),n=t;do{e.add(n),n.getEdge().setMarked(!0),n=n.getNext()}while(null!==n&&n!==t);return e}},{key:"add",value:function(){if(arguments[0]instanceof H)for(var t=arguments[0],e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);n instanceof Dt&&this.addLineString(n)}else if(E(arguments[0],I)){var i=arguments[0];this._mergedLineStrings=null;for(var r=i.iterator();r.hasNext();){var s=r.next();this.add(s)}}}},{key:"buildEdgeStringsForIsolatedLoops",value:function(){this.buildEdgeStringsForUnprocessedNodes()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Kr.constructor_=function(){this._graph=new jr,this._mergedLineStrings=null,this._factory=null,this._edgeStrings=null};var Zr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"dirEdgeIterator",value:function(){return this._dirEdges.iterator()}},{key:"edgeIterator",value:function(){return this._edges.iterator()}},{key:"getParent",value:function(){return this._parentGraph}},{key:"nodeIterator",value:function(){return this._nodeMap.iterator()}},{key:"contains",value:function(t){return this._edges.contains(t)}},{key:"add",value:function(t){if(this._edges.contains(t))return null;this._edges.add(t),this._dirEdges.add(t.getDirEdge(0)),this._dirEdges.add(t.getDirEdge(1)),this._nodeMap.add(t.getDirEdge(0).getFromNode()),this._nodeMap.add(t.getDirEdge(1).getFromNode())}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Zr.constructor_=function(){this._parentGraph=null,this._edges=new ot,this._dirEdges=new w,this._nodeMap=new Hr;var t=arguments[0];this._parentGraph=t};var Qr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"addReachable",value:function(t,e){var n=new vn;for(n.add(t);!n.empty();){var i=n.pop();this.addEdges(i,n,e)}}},{key:"findSubgraph",value:function(t){var e=new Zr(this._graph);return this.addReachable(t,e),e}},{key:"getConnectedSubgraphs",value:function(){var t=new w;qr.setVisited(this._graph.nodeIterator(),!1);for(var e=this._graph.edgeIterator();e.hasNext();){var n=e.next().getDirEdge(0).getFromNode();n.isVisited()||t.add(this.findSubgraph(n))}return t}},{key:"addEdges",value:function(t,e,n){t.setVisited(!0);for(var i=t.getOutEdges().iterator();i.hasNext();){var r=i.next();n.add(r.getEdge());var s=r.getToNode();s.isVisited()||e.push(s)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Qr.constructor_=function(){this._graph=null;var t=arguments[0];this._graph=t};var Jr=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"addLine",value:function(t){null===this._factory&&(this._factory=t.getFactory()),this._graph.addEdge(t),this._lineCount++}},{key:"hasSequence",value:function(t){for(var e=0,n=t.nodeIterator();n.hasNext();)n.next().getDegree()%2==1&&e++;return e<=2}},{key:"computeSequence",value:function(){if(this._isRun)return null;this._isRun=!0;var t=this.findSequences();if(null===t)return null;this._sequencedGeometry=this.buildSequencedGeometry(t),this._isSequenceable=!0;var e=this._sequencedGeometry.getNumGeometries();m.isTrue(this._lineCount===e,"Lines were missing from result"),m.isTrue(this._sequencedGeometry instanceof Dt||this._sequencedGeometry instanceof It,"Result is not lineal")}},{key:"findSequences",value:function(){for(var t=new w,e=new Qr(this._graph).getConnectedSubgraphs().iterator();e.hasNext();){var n=e.next();if(!this.hasSequence(n))return null;var i=this.findSequence(n);t.add(i)}return t}},{key:"addReverseSubpath",value:function(e,n,i){for(var r=e.getToNode(),s=null;;){n.add(e.getSym()),e.getEdge().setVisited(!0),s=e.getFromNode();var o=t.findUnvisitedBestOrientedDE(s);if(null===o)break;e=o.getSym()}i&&m.isTrue(s===r,"path not contiguous")}},{key:"findSequence",value:function(e){qr.setVisited(e.edgeIterator(),!1);var n=t.findLowestDegreeNode(e).getOutEdges().iterator().next().getSym(),i=new rr,r=i.listIterator();for(this.addReverseSubpath(n,r,!1);r.hasPrevious();){var s=r.previous(),o=t.findUnvisitedBestOrientedDE(s.getFromNode());null!==o&&this.addReverseSubpath(o.getSym(),r,!0)}return this.orient(i)}},{key:"reverse",value:function(t){for(var e=new rr,n=t.iterator();n.hasNext();){var i=n.next();e.addFirst(i.getSym())}return e}},{key:"orient",value:function(t){var e=t.get(0),n=t.get(t.size()-1),i=e.getFromNode(),r=n.getToNode(),s=!1;if(1===i.getDegree()||1===r.getDegree()){var o=!1;1===n.getToNode().getDegree()&&!1===n.getEdgeDirection()&&(o=!0,s=!0),1===e.getFromNode().getDegree()&&!0===e.getEdgeDirection()&&(o=!0,s=!1),o||1===e.getFromNode().getDegree()&&(s=!0)}return s?this.reverse(t):t}},{key:"buildSequencedGeometry",value:function(e){for(var n=new w,i=e.iterator();i.hasNext();)for(var r=i.next().iterator();r.hasNext();){var s=r.next(),o=s.getEdge().getLine(),a=o;s.getEdgeDirection()||o.isClosed()||(a=t.reverse(o)),n.add(a)}return 0===n.size()?this._factory.createMultiLineString(new Array(0).fill(null)):this._factory.buildGeometry(n)}},{key:"getSequencedLineStrings",value:function(){return this.computeSequence(),this._sequencedGeometry}},{key:"isSequenceable",value:function(){return this.computeSequence(),this._isSequenceable}},{key:"add",value:function(){if(E(arguments[0],I))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.add(e)}else arguments[0]instanceof H&&arguments[0].apply(new(function(){function t(){c(this,t)}return f(t,[{key:"filter",value:function(t){t instanceof Dt&&this.addLine(t)}},{key:"interfaces_",get:function(){return[X]}}]),t}()))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"findUnvisitedBestOrientedDE",value:function(t){for(var e=null,n=null,i=t.getOutEdges().iterator();i.hasNext();){var r=i.next();r.getEdge().isVisited()||(n=r,r.getEdgeDirection()&&(e=r))}return null!==e?e:n}},{key:"findLowestDegreeNode",value:function(t){for(var e=M.MAX_VALUE,n=null,i=t.nodeIterator();i.hasNext();){var r=i.next();(null===n||r.getDegree()<e)&&(e=r.getDegree(),n=r)}return n}},{key:"isSequenced",value:function(t){if(!(t instanceof It))return!0;for(var e=t,n=new dt,i=null,r=new w,s=0;s<e.getNumGeometries();s++){var o=e.getGeometryN(s),a=o.getCoordinateN(0),u=o.getCoordinateN(o.getNumPoints()-1);if(n.contains(a))return!1;if(n.contains(u))return!1;null!==i&&(a.equals(i)||(n.addAll(r),r.clear())),r.add(a),r.add(u),i=u}return!0}},{key:"reverse",value:function(t){for(var e=t.getCoordinates(),n=new Array(e.length).fill(null),i=e.length,r=0;r<i;r++)n[i-1-r]=new k(e[r]);return t.getFactory().createLineString(n)}},{key:"sequence",value:function(e){var n=new t;return n.add(e),n.getSequencedLineStrings()}}]),t}();Jr.constructor_=function(){this._graph=new jr,this._factory=new te,this._lineCount=0,this._isRun=!1,this._sequencedGeometry=null,this._isSequenceable=!1};var $r=Object.freeze({__proto__:null,LineMerger:Kr,LineSequencer:Jr}),ts=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"snapVertices",value:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),s=this.findSnapForVertex(r,e);null!==s&&(t.set(i,new k(s)),0===i&&this._isClosed&&t.set(t.size()-1,new k(s)))}}},{key:"findSnapForVertex",value:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null}},{key:"snapTo",value:function(t){var e=new T(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()}},{key:"snapSegments",value:function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],s=this.findSegmentIndexToSnap(r,t);s>=0&&t.add(s+1,new k(r),!1)}}},{key:"findSegmentIndexToSnap",value:function(t,e){for(var n=h.MAX_VALUE,i=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var s=this._seg.distance(t);s<this._snapTolerance&&s<n&&(n=s,i=r)}return i}},{key:"setAllowSnappingToSourceVertices",value:function(t){this._allowSnappingToSourceVertices=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"isClosed",value:function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])}}]),t}();ts.constructor_=function(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new le,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Dt&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];ts.constructor_.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=ts.isClosed(n),this._snapTolerance=i}};var es=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"snapTo",value:function(t,e){var n=this.extractTargetCoordinates(t);return new ns(e,n).transform(this._srcGeom)}},{key:"snapToSelf",value:function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new ns(t,n,!0).transform(this._srcGeom),r=i;return e&&E(r,qt)&&(r=i.buffer(0)),r}},{key:"computeSnapTolerance",value:function(t){return this.computeMinimumSegmentLength(t)/10}},{key:"extractTargetCoordinates",value:function(t){for(var e=new dt,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))}},{key:"computeMinimumSegmentLength",value:function(t){for(var e=h.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"snap",value:function(e,n,i){var r=new Array(2).fill(null),s=new t(e);r[0]=s.snapTo(n,i);var o=new t(n);return r[1]=o.snapTo(r[0],i),r}},{key:"computeOverlaySnapTolerance",value:function(){if(1===arguments.length){var e=arguments[0],n=t.computeSizeBasedSnapTolerance(e),i=e.getPrecisionModel();if(i.getType()===Jt.FIXED){var r=1/i.getScale()*2/1.415;r>n&&(n=r)}return n}if(2===arguments.length){var s=arguments[0],o=arguments[1];return Math.min(t.computeOverlaySnapTolerance(s),t.computeOverlaySnapTolerance(o))}}},{key:"computeSizeBasedSnapTolerance",value:function(e){var n=e.getEnvelopeInternal();return Math.min(n.getHeight(),n.getWidth())*t.SNAP_PRECISION_FACTOR}},{key:"snapToSelf",value:function(e,n,i){return new t(e).snapToSelf(n,i)}}]),t}();es.constructor_=function(){this._srcGeom=null;var t=arguments[0];this._srcGeom=t},es.SNAP_PRECISION_FACTOR=1e-9;var ns=function(t){i(n,Ce);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"snapLine",value:function(t,e){var n=new ts(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)}},{key:"transformCoordinates",value:function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();ns.constructor_=function(){if(this._snapTolerance=null,this._snapPts=null,this._isSelfSnap=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._snapTolerance=t,this._snapPts=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._snapTolerance=n,this._snapPts=i,this._isSelfSnap=r}};var is=Object.freeze({__proto__:null,GeometrySnapper:es,LineStringSnapper:ts}),rs=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:Vi.octant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"getData",value:function(){return this._data}},{key:"toString",value:function(){return oe.toLineString(new Kt(this._pts))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[zi]}}]),t}();rs.constructor_=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};var ss=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getInteriorIntersection",value:function(){return this._interiorIntersection}},{key:"setCheckEndSegmentsOnly",value:function(t){this._isCheckEndSegmentsOnly=t}},{key:"getIntersectionSegments",value:function(){return this._intSegments}},{key:"count",value:function(){return this._intersectionCount}},{key:"getIntersections",value:function(){return this._intersections}},{key:"setFindAllIntersections",value:function(t){this._findAllIntersections=t}},{key:"setKeepIntersections",value:function(t){this._keepIntersections=t}},{key:"processIntersections",value:function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,s,o,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=s,this._intSegments[2]=o,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)}},{key:"isEndSegment",value:function(t,e){return 0===e||e>=t.size()-2}},{key:"hasIntersection",value:function(){return null!==this._interiorIntersection}},{key:"isDone",value:function(){return!this._findAllIntersections&&null!==this._interiorIntersection}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Er]}}],[{key:"createAllIntersectionsFinder",value:function(e){var n=new t(e);return n.setFindAllIntersections(!0),n}},{key:"createAnyIntersectionFinder",value:function(e){return new t(e)}},{key:"createIntersectionCounter",value:function(e){var n=new t(e);return n.setFindAllIntersections(!0),n.setKeepIntersections(!1),n}}]),t}();ss.constructor_=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new w,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};var os=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"execute",value:function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()}},{key:"getIntersections",value:function(){return this._segInt.getIntersections()}},{key:"isValid",value:function(){return this.execute(),this._isValid}},{key:"setFindAllIntersections",value:function(t){this._findAllIntersections=t}},{key:"checkInteriorIntersections",value:function(){this._isValid=!0,this._segInt=new ss(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Zi;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null}},{key:"checkValid",value:function(){if(this.execute(),!this._isValid)throw new ei(this.getErrorMessage(),this._segInt.getInteriorIntersection())}},{key:"getErrorMessage",value:function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+oe.toLineString(t[0],t[1])+" and "+oe.toLineString(t[2],t[3])}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeIntersections",value:function(e){var n=new t(e);return n.setFindAllIntersections(!0),n.isValid(),n.getIntersections()}}]),t}();os.constructor_=function(){this._li=new ue,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};var as=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"checkValid",value:function(){this._nv.checkValid()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"toSegmentStrings",value:function(t){for(var e=new w,n=t.iterator();n.hasNext();){var i=n.next();e.add(new rs(i.getCoordinates(),i))}return e}},{key:"checkValid",value:function(e){new t(e).checkValid()}}]),t}();as.constructor_=function(){this._nv=null;var t=arguments[0];this._nv=new os(as.toSegmentStrings(t))};var us=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"collectLines",value:function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}}},{key:"labelIsolatedLine",value:function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)}},{key:"build",value:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList}},{key:"collectLineEdge",value:function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!ys.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))}},{key:"findCoveredLineEdges",value:function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}}},{key:"labelIsolatedLines",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}}},{key:"buildLines",value:function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=(n.getLabel(),this._geometryFactory.createLineString(n.getCoordinates()));this._resultLineList.add(i),n.setInResult(!0)}}},{key:"collectBoundaryTouchEdge",value:function(t,e,n){var i=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(m.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(ys.isResultOfOp(i,e)&&e===ys.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();us.constructor_=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new w,this._resultLineList=new w;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};var ls=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filterCoveredNodeToPoint",value:function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}}},{key:"extractNonCoveredResultNodes",value:function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==ys.INTERSECTION)){var i=n.getLabel();ys.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}}},{key:"build",value:function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ls.constructor_=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new w;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};var cs=function(){function t(){c(this,t),this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=new u,this._commonSignExp=null}return f(t,[{key:"getCommon",value:function(){return h.longBitsToDouble(this._commonBits)}},{key:"add",value:function(e){var n=h.doubleToLongBits(e);return this._isFirst?(this._commonBits=n,this._commonSignExp=t.signExpBits(this._commonBits),this._isFirst=!1,null):t.signExpBits(n)!==this._commonSignExp?(this._commonBits.high=0,this._commonBits.low=0,null):(this._commonMantissaBitsCount=t.numCommonMostSigMantissaBits(this._commonBits,n),void(this._commonBits=t.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))}},{key:"toString",value:function(){if(1===arguments.length){var t=arguments[0],e=h.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+u.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBit",value:function(t,e){var n=1<<e%32;return e<32?0!=(t.low&n)?1:0:0!=(t.high&n)?1:0}},{key:"signExpBits",value:function(t){return t.high>>>20}},{key:"zeroLowerBits",value:function(t,e){var n="low";if(e>32&&(t.low=0,e%=32,n="high"),e>0){var i=e<32?~((1<<e)-1):0;t[n]&=i}return t}},{key:"numCommonMostSigMantissaBits",value:function(e,n){for(var i=0,r=52;r>=0;r--){if(t.getBit(e,r)!==t.getBit(n,r))return i;i++}return 52}}]),t}(),hs=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"addCommonBits",value:function(t){var e=new gs(this._commonCoord);t.apply(e),t.geometryChanged()}},{key:"removeCommonBits",value:function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new k(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new gs(e);return t.apply(n),t.geometryChanged(),t}},{key:"getCommonCoordinate",value:function(){return this._commonCoord}},{key:"add",value:function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(),fs=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)}},{key:"getCommonCoordinate",value:function(){return new k(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[W]}}]),t}();fs.constructor_=function(){this._commonBitsX=new cs,this._commonBitsY=new cs};var gs=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)}},{key:"isDone",value:function(){return!1}},{key:"isGeometryChanged",value:function(){return!0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[xt]}}]),t}();gs.constructor_=function(){this.trans=null;var t=arguments[0];this.trans=t},hs.CommonCoordinateFilter=fs,hs.Translater=gs,hs.constructor_=function(){this._commonCoord=null,this._ccFilter=new fs};var vs=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"selfSnap",value:function(t){return new es(t).snapTo(t,this._snapTolerance)}},{key:"removeCommonBits",value:function(t){this._cbr=new hs,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e}},{key:"prepareResult",value:function(t){return this._cbr.addCommonBits(t),t}},{key:"getResultGeometry",value:function(t){var e=this.snap(this._geom),n=ys.overlayOp(e[0],e[1],t);return this.prepareResult(n)}},{key:"checkValid",value:function(t){t.isValid()||q.out.println("Snapped geometry is invalid")}},{key:"computeSnapTolerance",value:function(){this._snapTolerance=es.computeOverlaySnapTolerance(this._geom[0],this._geom[1])}},{key:"snap",value:function(t){var e=this.removeCommonBits(t);return es.snap(e[0],e[1],this._snapTolerance)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(e,n,i){return new t(e,n).getResultGeometry(i)}},{key:"union",value:function(e,n){return t.overlayOp(e,n,ys.UNION)}},{key:"intersection",value:function(e,n){return t.overlayOp(e,n,ys.INTERSECTION)}},{key:"symDifference",value:function(e,n){return t.overlayOp(e,n,ys.SYMDIFFERENCE)}},{key:"difference",value:function(e,n){return t.overlayOp(e,n,ys.DIFFERENCE)}}]),t}();vs.constructor_=function(){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null;var t=arguments[0],e=arguments[1];this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};var _s=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getResultGeometry",value:function(t){var e=null,n=!1,i=null;try{e=ys.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof y))throw t;i=t}if(!n)try{e=vs.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof y?i:t}return e}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(e,n,i){return new t(e,n).getResultGeometry(i)}},{key:"union",value:function(e,n){return t.overlayOp(e,n,ys.UNION)}},{key:"intersection",value:function(e,n){return t.overlayOp(e,n,ys.INTERSECTION)}},{key:"symDifference",value:function(e,n){return t.overlayOp(e,n,ys.SYMDIFFERENCE)}},{key:"difference",value:function(e,n){return t.overlayOp(e,n,ys.DIFFERENCE)}}]),t}();_s.constructor_=function(){this._geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this._geom[0]=t,this._geom[1]=e};var ds=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getArgGeometry",value:function(t){return this._arg[t].getGeometry()}},{key:"setComputationPrecision",value:function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ds.constructor_=function(){if(this._li=new ue,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new si(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];ds.constructor_.call(this,e,n,j.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new si(0,i,s),this._arg[1]=new si(1,r,s)}};var ys=function(t){i(n,ds);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"insertUniqueEdge",value:function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Un(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)}},{key:"getGraph",value:function(){return this._graph}},{key:"cancelDuplicateResultEdges",value:function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}}},{key:"isCoveredByLA",value:function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)}},{key:"computeGeometry",value:function(t,e,i,r){var s=new w;return s.addAll(t),s.addAll(e),s.addAll(i),s.isEmpty()?n.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(s)}},{key:"mergeSymLabels",value:function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()}},{key:"isCovered",value:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(t,i)!==ce.EXTERIOR)return!0}return!1}},{key:"replaceCollapsedEdges",value:function(){for(var t=new w,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)}},{key:"updateNodeLabelling",value:function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}}},{key:"getResultGeometry",value:function(t){return this.computeOverlay(t),this._resultGeom}},{key:"insertUniqueEdges",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}}},{key:"computeOverlay",value:function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new w;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),as.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new lr(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new us(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var r=new ls(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)}},{key:"labelIncompleteNode",value:function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)}},{key:"copyPoints",value:function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}}},{key:"findResultAreaEdges",value:function(t){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var i=e.next(),r=i.getLabel();r.isArea()&&!i.isInteriorAreaEdge()&&n.isResultOfOp(r.getLocation(0,Fn.RIGHT),r.getLocation(1,Fn.RIGHT),t)&&i.setInResult(!0)}}},{key:"computeLabelsFromDepths",value:function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(m.isTrue(!i.isNull(r,Fn.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Fn.LEFT,i.getLocation(r,Fn.LEFT)),m.isTrue(!i.isNull(r,Fn.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Fn.RIGHT,i.getLocation(r,Fn.RIGHT))))}}}},{key:"computeLabelling",value:function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()}},{key:"labelIncompleteNodes",value:function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}}},{key:"isCoveredByA",value:function(t){return!!this.isCovered(t,this._resultPolyList)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(t,e,i){return new n(t,e).getResultGeometry(i)}},{key:"union",value:function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return n.createEmptyResult(n.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}if(t.isGeometryCollection()||e.isGeometryCollection())throw new r("This method does not support GeometryCollection arguments");return _s.overlayOp(t,e,n.UNION)}},{key:"intersection",value:function(t,e){if(t.isEmpty()||e.isEmpty())return n.createEmptyResult(n.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var i=e;return ke.map(t,new(function(){function t(){c(this,t)}return f(t,[{key:"map",value:function(t){return n.intersection(t,i)}},{key:"interfaces_",get:function(){return[Ie]}}]),t}()))}return _s.overlayOp(t,e,n.INTERSECTION)}},{key:"symDifference",value:function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return n.createEmptyResult(n.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}if(t.isGeometryCollection()||e.isGeometryCollection())throw new r("This method does not support GeometryCollection arguments");return _s.overlayOp(t,e,n.SYMDIFFERENCE)}},{key:"resultDimension",value:function(t,e,i){var r=e.getDimension(),s=i.getDimension(),o=-1;switch(t){case n.INTERSECTION:o=Math.min(r,s);break;case n.UNION:o=Math.max(r,s);break;case n.DIFFERENCE:o=r;break;case n.SYMDIFFERENCE:o=Math.max(r,s)}return o}},{key:"createEmptyResult",value:function(t,e,i,r){var s=null;switch(n.resultDimension(t,e,i)){case-1:s=r.createGeometryCollection();break;case 0:s=r.createPoint();break;case 1:s=r.createLineString();break;case 2:s=r.createPolygon()}return s}},{key:"difference",value:function(t,e){if(t.isEmpty())return n.createEmptyResult(n.DIFFERENCE,t,e,t.getFactory());if(e.isEmpty())return t.copy();if(t.isGeometryCollection()||e.isGeometryCollection())throw new r("This method does not support GeometryCollection arguments");return _s.overlayOp(t,e,n.DIFFERENCE)}},{key:"isResultOfOp",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=t.getLocation(0),r=t.getLocation(1);return n.isResultOfOp(i,r,e)}if(3===arguments.length){var s=arguments[0],o=arguments[1],a=arguments[2];switch(s===ce.BOUNDARY&&(s=ce.INTERIOR),o===ce.BOUNDARY&&(o=ce.INTERIOR),a){case n.INTERSECTION:return s===ce.INTERIOR&&o===ce.INTERIOR;case n.UNION:return s===ce.INTERIOR||o===ce.INTERIOR;case n.DIFFERENCE:return s===ce.INTERIOR&&o!==ce.INTERIOR;case n.SYMDIFFERENCE:return s===ce.INTERIOR&&o!==ce.INTERIOR||s!==ce.INTERIOR&&o===ce.INTERIOR}return!1}}}]),n}();ys.constructor_=function(){this._ptLocator=new En,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new xr,this._resultPolyList=new w,this._resultLineList=new w,this._resultPointList=new w;var t=arguments[0],e=arguments[1];ds.constructor_.call(this,t,e),this._graph=new ri(new mr),this._geomFact=t.getFactory()},ys.INTERSECTION=1,ys.UNION=2,ys.DIFFERENCE=3,ys.SYMDIFFERENCE=4;var ps=Object.freeze({__proto__:null,snap:is,OverlayOp:ys}),ms=function(t){i(n,Br);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"getNext",value:function(){return this._next}},{key:"isInRing",value:function(){return null!==this._edgeRing}},{key:"setRing",value:function(t){this._edgeRing=t}},{key:"setLabel",value:function(t){this._label=t}},{key:"getLabel",value:function(){return this._label}},{key:"setNext",value:function(t){this._next=t}},{key:"getRing",value:function(){return this._edgeRing}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();ms.constructor_=function(){this._edgeRing=null,this._next=null,this._label=-1;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];Br.constructor_.call(this,t,e,n,i)};var ks=function(t){i(n,zr);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"getLine",value:function(){return this._line}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();ks.constructor_=function(){this._line=null;var t=arguments[0];this._line=t};var xs=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"visitInteriorRing",value:function(e,n){var i=e.getCoordinates(),r=i[0],s=t.findDifferentPoint(i,r),o=n.findEdgeInSameDirection(r,s),a=n.findEdgeEnd(o),u=null;a.getLabel().getLocation(0,Fn.RIGHT)===ce.INTERIOR?u=a:a.getSym().getLabel().getLocation(0,Fn.RIGHT)===ce.INTERIOR&&(u=a.getSym()),m.isTrue(null!==u,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(u)}},{key:"visitShellInteriors",value:function(t,e){if(t instanceof Bt){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof Yt)for(var i=t,r=0;r<i.getNumGeometries();r++){var s=i.getGeometryN(r);this.visitInteriorRing(s.getExteriorRing(),e)}}},{key:"getCoordinate",value:function(){return this._disconnectedRingcoord}},{key:"setInteriorEdgesInResult",value:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,Fn.RIGHT)===ce.INTERIOR&&n.setInResult(!0)}}},{key:"visitLinkedDirectedEdges",value:function(t){var e=t,n=t;do{m.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext()}while(n!==e)}},{key:"buildEdgeRings",value:function(t){for(var e=new w,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&null===i.getEdgeRing()){var r=new ur(i,this._geometryFactory);r.linkDirectedEdgesForMinimalEdgeRings();var s=r.buildMinimalRings();e.addAll(s)}}return e}},{key:"hasUnvisitedShellEdge",value:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var i=n.getEdges(),r=i.get(0);if(r.getLabel().getLocation(0,Fn.RIGHT)===ce.INTERIOR)for(var s=0;s<i.size();s++)if(!(r=i.get(s)).isVisited())return this._disconnectedRingcoord=r.getCoordinate(),!0}}return!1}},{key:"isInteriorsConnected",value:function(){var t=new w;this._geomGraph.computeSplitEdges(t);var e=new ri(new mr);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this._geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"findDifferentPoint",value:function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null}}]),t}();xs.constructor_=function(){this._geometryFactory=new te,this._geomGraph=null,this._disconnectedRingcoord=null;var t=arguments[0];this._geomGraph=t};var Es=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"createEdgeEndForNext",value:function(t,e,n,i){var r=n.segmentIndex+1;if(r>=t.getNumPoints()&&null===i)return null;var s=t.getCoordinate(r);null!==i&&i.segmentIndex===n.segmentIndex&&(s=i.coord);var o=new ti(t,n.coord,s,new Un(t.getLabel()));e.add(o)}},{key:"createEdgeEndForPrev",value:function(t,e,n,i){var r=n.segmentIndex;if(0===n.dist){if(0===r)return null;r--}var s=t.getCoordinate(r);null!==i&&i.segmentIndex>=r&&(s=i.coord);var o=new Un(t.getLabel());o.flip();var a=new ti(t,n.coord,s,o);e.add(a)}},{key:"computeEdgeEnds",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new w,n=t;n.hasNext();){var i=n.next();this.computeEdgeEnds(i,e)}return e}if(2===arguments.length){var r=arguments[0],s=arguments[1],o=r.getEdgeIntersectionList();o.addEndpoints();var a=o.iterator(),u=null,l=null;if(!a.hasNext())return null;var c=a.next();do{u=l,l=c,c=null,a.hasNext()&&(c=a.next()),null!==l&&(this.createEdgeEndForPrev(r,s,l,u),this.createEdgeEndForNext(r,s,l,c))}while(null!==l)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Es.constructor_=function(){};var Is=function(t){i(n,ti);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"insert",value:function(t){this._edgeEnds.add(t)}},{key:"print",value:function(t){t.println("EdgeEndBundle--\x3e Label: "+this._label);for(var e=this.iterator();e.hasNext();)e.next().print(t),t.println()}},{key:"iterator",value:function(){return this._edgeEnds.iterator()}},{key:"getEdgeEnds",value:function(){return this._edgeEnds}},{key:"computeLabelOn",value:function(t,e){for(var n=0,i=!1,r=this.iterator();r.hasNext();){var s=r.next().getLabel().getLocation(t);s===ce.BOUNDARY&&n++,s===ce.INTERIOR&&(i=!0)}var o=ce.NONE;i&&(o=ce.INTERIOR),n>0&&(o=si.determineBoundary(e,n)),this._label.setLocation(t,o)}},{key:"computeLabelSide",value:function(t,e){for(var n=this.iterator();n.hasNext();){var i=n.next();if(i.getLabel().isArea()){var r=i.getLabel().getLocation(t,e);if(r===ce.INTERIOR)return this._label.setLocation(t,e,ce.INTERIOR),null;r===ce.EXTERIOR&&this._label.setLocation(t,e,ce.EXTERIOR)}}}},{key:"getLabel",value:function(){return this._label}},{key:"computeLabelSides",value:function(t){this.computeLabelSide(t,Fn.LEFT),this.computeLabelSide(t,Fn.RIGHT)}},{key:"updateIM",value:function(t){Qn.updateIM(this._label,t)}},{key:"computeLabel",value:function(t){for(var e=!1,n=this.iterator();n.hasNext();)n.next().getLabel().isArea()&&(e=!0);this._label=e?new Un(ce.NONE,ce.NONE,ce.NONE):new Un(ce.NONE);for(var i=0;i<2;i++)this.computeLabelOn(i,t),e&&this.computeLabelSides(i)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();Is.constructor_=function(){if(this._edgeEnds=new w,1===arguments.length){var t=arguments[0];Is.constructor_.call(this,null,t)}else if(2===arguments.length){var e=arguments[1];ti.constructor_.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new Un(e.getLabel())),this.insert(e)}};var Ns=function(t){i(n,yr);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"updateIM",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().updateIM(t)}},{key:"insert",value:function(t){var e=this._edgeMap.get(t);null===e?(e=new Is(t),this.insertEdgeEnd(t,e)):e.insert(t)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();Ns.constructor_=function(){};var Cs=function(t){i(n,Jn);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"updateIMFromEdges",value:function(t){this._edges.updateIM(t)}},{key:"computeIM",value:function(t){t.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();Cs.constructor_=function(){var t=arguments[0],e=arguments[1];Jn.constructor_.call(this,t,e)};var Ss=function(t){i(n,ii);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"createNode",value:function(t){return new Cs(t,new Ns)}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();Ss.constructor_=function(){};var ws=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"insertEdgeEnds",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._nodes.add(n)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"copyNodesAndLabels",value:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var i=n.next();this._nodes.addNode(i.getCoordinate()).setLabel(e,i.getLabel().getLocation(e))}}},{key:"build",value:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=(new Es).computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(e)}},{key:"computeIntersectionNodes",value:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var i=n.next(),r=i.getLabel().getLocation(e),s=i.getEdgeIntersectionList().iterator();s.hasNext();){var o=s.next(),a=this._nodes.addNode(o.coord);r===ce.BOUNDARY?a.setLabelBoundary(e):a.getLabel().isNull(e)&&a.setLabel(e,ce.INTERIOR)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ws.constructor_=function(){this._nodes=new $n(new Ss)};var Ls=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isNodeEdgeAreaLabelsConsistent",value:function(){for(var t=this._nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this._geomGraph))return this._invalidPoint=e.getCoordinate().copy(),!1}return!0}},{key:"getInvalidPoint",value:function(){return this._invalidPoint}},{key:"hasDuplicateRings",value:function(){for(var t=this._nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next().getEdges().iterator();e.hasNext();){var n=e.next();if(n.getEdgeEnds().size()>1)return this._invalidPoint=n.getEdge().getCoordinate(0),!0}return!1}},{key:"isNodeConsistentArea",value:function(){var t=this._geomGraph.computeSelfNodes(this._li,!0,!0);return t.hasProperIntersection()?(this._invalidPoint=t.getProperIntersectionPoint(),!1):(this._nodeGraph.build(this._geomGraph),this.isNodeEdgeAreaLabelsConsistent())}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ls.constructor_=function(){this._li=new ue,this._geomGraph=null,this._nodeGraph=new ws,this._invalidPoint=null;var t=arguments[0];this._geomGraph=t};var Ts=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"buildIndex",value:function(){this._index=new Li;for(var t=0;t<this._rings.size();t++){var e=this._rings.get(t),n=e.getEnvelopeInternal();this._index.insert(n,e)}}},{key:"getNestedPoint",value:function(){return this._nestedPt}},{key:"isNonNested",value:function(){this.buildIndex();for(var t=0;t<this._rings.size();t++)for(var e=this._rings.get(t),n=e.getCoordinates(),i=this._index.query(e.getEnvelopeInternal()),r=0;r<i.size();r++){var s=i.get(r),o=s.getCoordinates();if(e!==s&&e.getEnvelopeInternal().intersects(s.getEnvelopeInternal())){var a=Ps.findPtNotNode(n,s,this._graph);if(null!==a&&en.isInRing(a,o))return this._nestedPt=a,!1}}return!0}},{key:"add",value:function(t){this._rings.add(t),this._totalEnv.expandToInclude(t.getEnvelopeInternal())}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Ts.constructor_=function(){this._graph=null,this._rings=new w,this._totalEnv=new R,this._index=null,this._nestedPt=null;var t=arguments[0];this._graph=t};var Rs=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getErrorType",value:function(){return this._errorType}},{key:"getMessage",value:function(){return t.errMsg[this._errorType]}},{key:"getCoordinate",value:function(){return this._pt}},{key:"toString",value:function(){var t="";return null!==this._pt&&(t=" at or near point "+this._pt),this.getMessage()+t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Rs.constructor_=function(){if(this._errorType=null,this._pt=null,1===arguments.length){var t=arguments[0];Rs.constructor_.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._errorType=e,null!==n&&(this._pt=n.copy())}},Rs.ERROR=0,Rs.REPEATED_POINT=1,Rs.HOLE_OUTSIDE_SHELL=2,Rs.NESTED_HOLES=3,Rs.DISCONNECTED_INTERIOR=4,Rs.SELF_INTERSECTION=5,Rs.RING_SELF_INTERSECTION=6,Rs.NESTED_SHELLS=7,Rs.DUPLICATE_RINGS=8,Rs.TOO_FEW_POINTS=9,Rs.INVALID_COORDINATE=10,Rs.RING_NOT_CLOSED=11,Rs.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];var Ps=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"checkInvalidCoordinates",value:function(){if(arguments[0]instanceof Array){for(var e=arguments[0],n=0;n<e.length;n++)if(!t.isValid(e[n]))return this._validErr=new Rs(Rs.INVALID_COORDINATE,e[n]),null}else if(arguments[0]instanceof Bt){var i=arguments[0];if(this.checkInvalidCoordinates(i.getExteriorRing().getCoordinates()),null!==this._validErr)return null;for(var r=0;r<i.getNumInteriorRing();r++)if(this.checkInvalidCoordinates(i.getInteriorRingN(r).getCoordinates()),null!==this._validErr)return null}}},{key:"checkHolesNotNested",value:function(t,e){for(var n=new Ts(e),i=0;i<t.getNumInteriorRing();i++){var r=t.getInteriorRingN(i);n.add(r)}n.isNonNested()||(this._validErr=new Rs(Rs.NESTED_HOLES,n.getNestedPoint()))}},{key:"checkConsistentArea",value:function(t){var e=new Ls(t);if(!e.isNodeConsistentArea())return this._validErr=new Rs(Rs.SELF_INTERSECTION,e.getInvalidPoint()),null;e.hasDuplicateRings()&&(this._validErr=new Rs(Rs.DUPLICATE_RINGS,e.getInvalidPoint()))}},{key:"isValid",value:function(){return this.checkValid(this._parentGeometry),null===this._validErr}},{key:"checkShellInsideHole",value:function(e,n,i){var r=e.getCoordinates(),s=n.getCoordinates(),o=t.findPtNotNode(r,n,i);if(null!==o&&!en.isInRing(o,s))return o;var a=t.findPtNotNode(s,e,i);return null!==a?en.isInRing(a,r)?a:null:(m.shouldNeverReachHere("points in shell and hole appear to be equal"),null)}},{key:"checkNoSelfIntersectingRings",value:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this._validErr)return null}}},{key:"checkConnectedInteriors",value:function(t){var e=new xs(t);e.isInteriorsConnected()||(this._validErr=new Rs(Rs.DISCONNECTED_INTERIOR,e.getCoordinate()))}},{key:"checkNoSelfIntersectingRing",value:function(t){for(var e=new dt,n=!0,i=t.iterator();i.hasNext();){var r=i.next();if(n)n=!1;else{if(e.contains(r.coord))return this._validErr=new Rs(Rs.RING_SELF_INTERSECTION,r.coord),null;e.add(r.coord)}}}},{key:"checkHolesInShell",value:function(e,n){for(var i=e.getExteriorRing(),r=new Je(i),s=0;s<e.getNumInteriorRing();s++){var o=e.getInteriorRingN(s),a=t.findPtNotNode(o.getCoordinates(),i,n);if(null===a)return null;if(ce.EXTERIOR===r.locate(a))return this._validErr=new Rs(Rs.HOLE_OUTSIDE_SHELL,a),null}}},{key:"checkTooFewPoints",value:function(t){if(t.hasTooFewPoints())return this._validErr=new Rs(Rs.TOO_FEW_POINTS,t.getInvalidPoint()),null}},{key:"getValidationError",value:function(){return this.checkValid(this._parentGeometry),this._validErr}},{key:"checkValid",value:function(){if(arguments[0]instanceof Ft){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof Vt){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof zt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),null!==this._validErr)return null;if(this.checkClosedRing(n),null!==this._validErr)return null;var i=new si(0,n);if(this.checkTooFewPoints(i),null!==this._validErr)return null;var r=new ue;i.computeSelfNodes(r,!0,!0),this.checkNoSelfIntersectingRings(i)}else if(arguments[0]instanceof Dt){var s=arguments[0];if(this.checkInvalidCoordinates(s.getCoordinates()),null!==this._validErr)return null;var o=new si(0,s);this.checkTooFewPoints(o)}else if(arguments[0]instanceof Bt){var a=arguments[0];if(this.checkInvalidCoordinates(a),null!==this._validErr)return null;if(this.checkClosedRings(a),null!==this._validErr)return null;var u=new si(0,a);if(this.checkTooFewPoints(u),null!==this._validErr)return null;if(this.checkConsistentArea(u),null!==this._validErr)return null;if(!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(u),null!==this._validErr))return null;if(this.checkHolesInShell(a,u),null!==this._validErr)return null;if(this.checkHolesNotNested(a,u),null!==this._validErr)return null;this.checkConnectedInteriors(u)}else if(arguments[0]instanceof Yt){for(var l=arguments[0],c=0;c<l.getNumGeometries();c++){var h=l.getGeometryN(c);if(this.checkInvalidCoordinates(h),null!==this._validErr)return null;if(this.checkClosedRings(h),null!==this._validErr)return null}var f=new si(0,l);if(this.checkTooFewPoints(f),null!==this._validErr)return null;if(this.checkConsistentArea(f),null!==this._validErr)return null;if(!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(f),null!==this._validErr))return null;for(var g=0;g<l.getNumGeometries();g++){var v=l.getGeometryN(g);if(this.checkHolesInShell(v,f),null!==this._validErr)return null}for(var _=0;_<l.getNumGeometries();_++){var d=l.getGeometryN(_);if(this.checkHolesNotNested(d,f),null!==this._validErr)return null}if(this.checkShellsNotNested(l,f),null!==this._validErr)return null;this.checkConnectedInteriors(f)}else if(arguments[0]instanceof Et)for(var y=arguments[0],p=0;p<y.getNumGeometries();p++){var m=y.getGeometryN(p);if(this.checkValid(m),null!==this._validErr)return null}else if(arguments[0]instanceof H){var k=arguments[0];if(this._validErr=null,k.isEmpty())return null;if(k instanceof Ft)this.checkValid(k);else if(k instanceof Vt)this.checkValid(k);else if(k instanceof zt)this.checkValid(k);else if(k instanceof Dt)this.checkValid(k);else if(k instanceof Bt)this.checkValid(k);else if(k instanceof Yt)this.checkValid(k);else{if(!(k instanceof Et))throw new rt(k.getClass().getName());this.checkValid(k)}}}},{key:"setSelfTouchingRingFormingHoleValid",value:function(t){this._isSelfTouchingRingFormingHoleValid=t}},{key:"checkShellNotNested",value:function(e,n,i){var r=e.getCoordinates(),s=n.getExteriorRing(),o=s.getCoordinates(),a=t.findPtNotNode(r,s,i);if(null===a)return null;if(!en.isInRing(a,o))return null;if(n.getNumInteriorRing()<=0)return this._validErr=new Rs(Rs.NESTED_SHELLS,a),null;for(var u=null,l=0;l<n.getNumInteriorRing();l++){var c=n.getInteriorRingN(l);if(null===(u=this.checkShellInsideHole(e,c,i)))return null}this._validErr=new Rs(Rs.NESTED_SHELLS,u)}},{key:"checkClosedRings",value:function(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this._validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this._validErr)return null}},{key:"checkClosedRing",value:function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this._validErr=new Rs(Rs.RING_NOT_CLOSED,e)}}},{key:"checkShellsNotNested",value:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var i=t.getGeometryN(n).getExteriorRing(),r=0;r<t.getNumGeometries();r++)if(n!==r){var s=t.getGeometryN(r);if(this.checkShellNotNested(i,s,e),null!==this._validErr)return null}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"findPtNotNode",value:function(t,e,n){for(var i=n.findEdge(e).getEdgeIntersectionList(),r=0;r<t.length;r++){var s=t[r];if(!i.isIntersection(s))return s}return null}},{key:"isValid",value:function(){if(arguments[0]instanceof H)return new t(arguments[0]).isValid();if(arguments[0]instanceof k){var e=arguments[0];return!(h.isNaN(e.x)||h.isInfinite(e.x)||h.isNaN(e.y)||h.isInfinite(e.y))}}}]),t}();Ps.constructor_=function(){this._parentGeometry=null,this._isSelfTouchingRingFormingHoleValid=!1,this._validErr=null;var t=arguments[0];this._parentGeometry=t};var Os=function(){function e(){c(this,e),e.constructor_.apply(this,arguments)}return f(e,[{key:"isIncluded",value:function(){return this._isIncluded}},{key:"getCoordinates",value:function(){if(null===this._ringPts){for(var t=new T,n=this._deList.iterator();n.hasNext();){var i=n.next(),r=i.getEdge();e.addEdge(r.getLine().getCoordinates(),i.getEdgeDirection(),t)}this._ringPts=t.toCoordinateArray()}return this._ringPts}},{key:"isIncludedSet",value:function(){return this._isIncludedSet}},{key:"isValid",value:function(){return this.getCoordinates(),!(this._ringPts.length<=3)&&(this.getRing(),Ps.isValid(this._ring))}},{key:"build",value:function(t){var e=t;do{this.add(e),e.setRing(this),e=e.getNext(),m.isTrue(null!==e,"found null DE in ring"),m.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t)}},{key:"isOuterHole",value:function(){return!!this._isHole&&!this.hasShell()}},{key:"getPolygon",value:function(){var t=null;if(null!==this._holes){t=new Array(this._holes.size()).fill(null);for(var e=0;e<this._holes.size();e++)t[e]=this._holes.get(e)}return this._factory.createPolygon(this._ring,t)}},{key:"isHole",value:function(){return this._isHole}},{key:"isProcessed",value:function(){return this._isProcessed}},{key:"addHole",value:function(){if(arguments[0]instanceof zt){var t=arguments[0];null===this._holes&&(this._holes=new w),this._holes.add(t)}else if(arguments[0]instanceof e){var n=arguments[0];n.setShell(this);var i=n.getRing();null===this._holes&&(this._holes=new w),this._holes.add(i)}}},{key:"setIncluded",value:function(t){this._isIncluded=t,this._isIncludedSet=!0}},{key:"getOuterHole",value:function(){if(this.isHole())return null;for(var t=0;t<this._deList.size();t++){var e=this._deList.get(t).getSym().getRing();if(e.isOuterHole())return e}return null}},{key:"computeHole",value:function(){var t=this.getRing();this._isHole=G.isCCW(t.getCoordinates())}},{key:"hasShell",value:function(){return null!==this._shell}},{key:"isOuterShell",value:function(){return null!==this.getOuterHole()}},{key:"getLineString",value:function(){return this.getCoordinates(),this._factory.createLineString(this._ringPts)}},{key:"toString",value:function(){return oe.toLineString(new Kt(this.getCoordinates()))}},{key:"getShell",value:function(){return this.isHole()?this._shell:this}},{key:"add",value:function(t){this._deList.add(t)}},{key:"getRing",value:function(){if(null!==this._ring)return this._ring;this.getCoordinates(),this._ringPts.length<3&&q.out.println(this._ringPts);try{this._ring=this._factory.createLinearRing(this._ringPts)}catch(t){if(!(t instanceof P))throw t;q.out.println(this._ringPts)}return this._ring}},{key:"updateIncluded",value:function(){if(this.isHole())return null;for(var t=0;t<this._deList.size();t++){var e=this._deList.get(t).getSym().getRing().getShell();if(null!==e&&e.isIncludedSet())return this.setIncluded(!e.isIncluded()),null}}},{key:"setShell",value:function(t){this._shell=t}},{key:"setProcessed",value:function(t){this._isProcessed=t}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"findDirEdgesInRing",value:function(t){var e=t,n=new w;do{n.add(e),e=e.getNext(),m.isTrue(null!==e,"found null DE in ring"),m.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t);return n}},{key:"addEdge",value:function(t,e,n){if(e)for(var i=0;i<t.length;i++)n.add(t[i],!1);else for(var r=t.length-1;r>=0;r--)n.add(t[r],!1)}},{key:"findEdgeRingContaining",value:function(t,e){for(var n=t.getRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),s=null,o=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getRing(),c=l.getEnvelopeInternal();if(!c.equals(i)&&c.contains(i)){r=$.ptNotInList(n.getCoordinates(),l.getCoordinates());var h=!1;en.isInRing(r,l.getCoordinates())&&(h=!0),h&&(null===s||o.contains(c))&&(o=(s=u).getRing().getEnvelopeInternal())}}return s}}]),e}(),bs=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"compare",value:function(t,e){var n=e;return t.getRing().getEnvelope().compareTo(n.getRing().getEnvelope())}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[_]}}]),t}();bs.constructor_=function(){},Os.EnvelopeComparator=bs,Os.constructor_=function(){this._factory=null,this._deList=new w,this._lowestEdge=null,this._ring=null,this._ringPts=null,this._holes=null,this._shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this._factory=t};var Ms=function(t){i(n,Wr);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"findEdgeRing",value:function(t){var e=new Os(this._factory);return e.build(t),e}},{key:"computeDepthParity",value:function(){if(0===arguments.length)for(;;)return null}},{key:"computeNextCWEdges",value:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();n.computeNextCWEdges(e)}}},{key:"addEdge",value:function(t){if(t.isEmpty())return null;var e=$.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),s=this.getNode(i),o=new ms(r,s,e[1],!0),a=new ms(s,r,e[e.length-2],!1),u=new ks(t);u.setDirectedEdges(o,a),this.add(u)}},{key:"deleteCutEdges",value:function(){this.computeNextCWEdges(),n.findLabeledEdgeRings(this._dirEdges);for(var t=new w,e=this._dirEdges.iterator();e.hasNext();){var i=e.next();if(!i.isMarked()){var r=i.getSym();if(i.getLabel()===r.getLabel()){i.setMarked(!0),r.setMarked(!0);var s=i.getEdge();t.add(s.getLine())}}}return t}},{key:"getEdgeRings",value:function(){this.computeNextCWEdges(),n.label(this._dirEdges,-1);var t=n.findLabeledEdgeRings(this._dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new w,i=this._dirEdges.iterator();i.hasNext();){var r=i.next();if(!r.isMarked()&&!r.isInRing()){var s=this.findEdgeRing(r);e.add(s)}}return e}},{key:"getNode",value:function(t){var e=this.findNode(t);return null===e&&(e=new Ur(t),this.add(e)),e}},{key:"convertMaximalToMinimalEdgeRings",value:function(t){for(var e=t.iterator();e.hasNext();){var i=e.next(),r=i.getLabel(),s=n.findIntersectionNodes(i,r);if(null!==s)for(var o=s.iterator();o.hasNext();){var a=o.next();n.computeNextCCWEdges(a,r)}}}},{key:"deleteDangles",value:function(){for(var t=this.findNodesOfDegree(1),e=new ot,i=new vn,r=t.iterator();r.hasNext();)i.push(r.next());for(;!i.isEmpty();){var s=i.pop();n.deleteAllEdges(s);for(var o=s.getOutEdges().getEdges().iterator();o.hasNext();){var a=o.next();a.setMarked(!0);var u=a.getSym();null!==u&&u.setMarked(!0);var l=a.getEdge();e.add(l.getLine());var c=a.getToNode();1===n.getDegreeNonDeleted(c)&&i.push(c)}}return e}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"findLabeledEdgeRings",value:function(t){for(var e=new w,i=1,r=t.iterator();r.hasNext();){var s=r.next();if(!s.isMarked()&&!(s.getLabel()>=0)){e.add(s);var o=Os.findDirEdgesInRing(s);n.label(o,i),i++}}return e}},{key:"getDegreeNonDeleted",value:function(t){for(var e=0,n=t.getOutEdges().getEdges().iterator();n.hasNext();)n.next().isMarked()||e++;return e}},{key:"deleteAllEdges",value:function(t){for(var e=t.getOutEdges().getEdges().iterator();e.hasNext();){var n=e.next();n.setMarked(!0);var i=n.getSym();null!==i&&i.setMarked(!0)}}},{key:"label",value:function(t,e){for(var n=t.iterator();n.hasNext();)n.next().setLabel(e)}},{key:"computeNextCWEdges",value:function(t){for(var e=null,n=null,i=t.getOutEdges().getEdges().iterator();i.hasNext();){var r=i.next();r.isMarked()||(null===e&&(e=r),null!==n&&n.getSym().setNext(r),n=r)}null!==n&&n.getSym().setNext(e)}},{key:"computeNextCCWEdges",value:function(t,e){for(var n=null,i=null,r=t.getOutEdges().getEdges(),s=r.size()-1;s>=0;s--){var o=r.get(s),a=o.getSym(),u=null;o.getLabel()===e&&(u=o);var l=null;a.getLabel()===e&&(l=a),null===u&&null===l||(null!==l&&(i=l),null!==u&&(null!==i&&(i.setNext(u),i=null),null===n&&(n=u)))}null!==i&&(m.isTrue(null!==n),i.setNext(n))}},{key:"getDegree",value:function(t,e){for(var n=0,i=t.getOutEdges().getEdges().iterator();i.hasNext();)i.next().getLabel()===e&&n++;return n}},{key:"findIntersectionNodes",value:function(t,e){var i=t,r=null;do{var s=i.getFromNode();n.getDegree(s,e)>1&&(null===r&&(r=new w),r.add(s)),i=i.getNext(),m.isTrue(null!==i,"found null DE in ring"),m.isTrue(i===t||!i.isInRing(),"found DE already in ring")}while(i!==t);return r}}]),n}();Ms.constructor_=function(){this._factory=null;var t=arguments[0];this._factory=t};var Ds=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getGeometry",value:function(){return null===this._geomFactory&&(this._geomFactory=new te),this.polygonize(),this._extractOnlyPolygonal?this._geomFactory.buildGeometry(this._polyList):this._geomFactory.createGeometryCollection(te.toGeometryArray(this._polyList))}},{key:"getInvalidRingLines",value:function(){return this.polygonize(),this._invalidRingLines}},{key:"findValidRings",value:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isValid()?e.add(r):n.add(r.getLineString())}}},{key:"polygonize",value:function(){if(null!==this._polyList)return null;if(this._polyList=new w,null===this._graph)return null;this._dangles=this._graph.deleteDangles(),this._cutEdges=this._graph.deleteCutEdges();var e=this._graph.getEdgeRings(),n=new w;this._invalidRingLines=new w,this._isCheckingRingsValid?this.findValidRings(e,n,this._invalidRingLines):n=e,this.findShellsAndHoles(n),t.assignHolesToShells(this._holeList,this._shellList),Le.sort(this._shellList,new Os.EnvelopeComparator);var i=!0;this._extractOnlyPolygonal&&(t.findDisjointShells(this._shellList),i=!1),this._polyList=t.extractPolygons(this._shellList,i)}},{key:"getDangles",value:function(){return this.polygonize(),this._dangles}},{key:"getCutEdges",value:function(){return this.polygonize(),this._cutEdges}},{key:"getPolygons",value:function(){return this.polygonize(),this._polyList}},{key:"add",value:function(){if(E(arguments[0],I))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.add(e)}else if(arguments[0]instanceof Dt){var n=arguments[0];this._geomFactory=n.getFactory(),null===this._graph&&(this._graph=new Ms(this._geomFactory)),this._graph.addEdge(n)}else arguments[0]instanceof H&&arguments[0].apply(this._lineStringAdder)}},{key:"setCheckRingsValid",value:function(t){this._isCheckingRingsValid=t}},{key:"findShellsAndHoles",value:function(t){this._holeList=new w,this._shellList=new w;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),n.isHole()?this._holeList.add(n):this._shellList.add(n)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"findOuterShells",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getOuterHole();null===i||i.isProcessed()||(n.setIncluded(!0),i.setProcessed(!0))}}},{key:"extractPolygons",value:function(t,e){for(var n=new w,i=t.iterator();i.hasNext();){var r=i.next();(e||r.isIncluded())&&n.add(r.getPolygon())}return n}},{key:"assignHolesToShells",value:function(e,n){for(var i=e.iterator();i.hasNext();){var r=i.next();t.assignHoleToShell(r,n)}}},{key:"assignHoleToShell",value:function(t,e){var n=Os.findEdgeRingContaining(t,e);null!==n&&n.addHole(t)}},{key:"findDisjointShells",value:function(e){t.findOuterShells(e);var n=null;do{n=!1;for(var i=e.iterator();i.hasNext();){var r=i.next();r.isIncludedSet()||(r.updateIncluded(),r.isIncludedSet()||(n=!0))}}while(n)}}]),t}(),As=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){t instanceof Dt&&this.p.add(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[X]}}]),t}();As.constructor_=function(){this.p=null;var t=arguments[0];this.p=t},Ds.LineStringAdder=As,Ds.constructor_=function(){if(this._lineStringAdder=new As(this),this._graph=null,this._dangles=new w,this._cutEdges=new w,this._invalidRingLines=new w,this._holeList=null,this._shellList=null,this._polyList=null,this._isCheckingRingsValid=!0,this._extractOnlyPolygonal=null,this._geomFactory=null,0===arguments.length)Ds.constructor_.call(this,!1);else if(1===arguments.length){var t=arguments[0];this._extractOnlyPolygonal=t}};var Fs=Object.freeze({__proto__:null,Polygonizer:Ds}),Gs=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"insertEdgeEnds",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._nodes.add(n)}}},{key:"computeProperIntersectionIM",value:function(t,e){var n=this._arg[0].getGeometry().getDimension(),i=this._arg[1].getGeometry().getDimension(),r=t.hasProperIntersection(),s=t.hasProperInteriorIntersection();2===n&&2===i?r&&e.setAtLeast("212101212"):2===n&&1===i?(r&&e.setAtLeast("FFF0FFFF2"),s&&e.setAtLeast("1FFFFF1FF")):1===n&&2===i?(r&&e.setAtLeast("F0FFFFFF2"),s&&e.setAtLeast("1F1FFFFFF")):1===n&&1===i&&s&&e.setAtLeast("0FFFFFFFF")}},{key:"labelIsolatedEdges",value:function(t,e){for(var n=this._arg[t].getEdgeIterator();n.hasNext();){var i=n.next();i.isIsolated()&&(this.labelIsolatedEdge(i,e,this._arg[e].getGeometry()),this._isolatedEdges.add(i))}}},{key:"labelIsolatedEdge",value:function(t,e,n){if(n.getDimension()>0){var i=this._ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,i)}else t.getLabel().setAllLocations(e,ce.EXTERIOR)}},{key:"computeIM",value:function(){var t=new he;if(t.set(ce.EXTERIOR,ce.EXTERIOR,2),!this._arg[0].getGeometry().getEnvelopeInternal().intersects(this._arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1);var e=this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new Es,i=n.computeEdgeEnds(this._arg[0].getEdgeIterator());this.insertEdgeEnds(i);var r=n.computeEdgeEnds(this._arg[1].getEdgeIterator());return this.insertEdgeEnds(r),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t}},{key:"labelNodeEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg)}},{key:"copyNodesAndLabels",value:function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._nodes.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}}},{key:"labelIntersectionNodes",value:function(t){for(var e=this._arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next(),o=this._nodes.find(s.coord);o.getLabel().isNull(t)&&(i===ce.BOUNDARY?o.setLabelBoundary(t):o.setLabel(t,ce.INTERIOR))}}},{key:"labelIsolatedNode",value:function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setAllLocations(e,n)}},{key:"computeIntersectionNodes",value:function(t){for(var e=this._arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next(),o=this._nodes.addNode(s.coord);i===ce.BOUNDARY?o.setLabelBoundary(t):o.getLabel().isNull(t)&&o.setLabel(t,ce.INTERIOR)}}},{key:"labelIsolatedNodes",value:function(){for(var t=this._nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();m.isTrue(n.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}}},{key:"updateIM",value:function(t){for(var e=this._isolatedEdges.iterator();e.hasNext();)e.next().updateIM(t);for(var n=this._nodes.iterator();n.hasNext();){var i=n.next();i.updateIM(t),i.updateIMFromEdges(t)}}},{key:"computeDisjointIM",value:function(t){var e=this._arg[0].getGeometry();e.isEmpty()||(t.set(ce.INTERIOR,ce.EXTERIOR,e.getDimension()),t.set(ce.BOUNDARY,ce.EXTERIOR,e.getBoundaryDimension()));var n=this._arg[1].getGeometry();n.isEmpty()||(t.set(ce.EXTERIOR,ce.INTERIOR,n.getDimension()),t.set(ce.EXTERIOR,ce.BOUNDARY,n.getBoundaryDimension()))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Gs.constructor_=function(){this._li=new ue,this._ptLocator=new En,this._arg=null,this._nodes=new $n(new Ss),this._im=null,this._isolatedEdges=new w,this._invalidPoint=null;var t=arguments[0];this._arg=t};var qs=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"isContainedInBoundary",value:function(t){if(t instanceof Bt)return!1;if(t instanceof Ft)return this.isPointContainedInBoundary(t);if(t instanceof Dt)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0}},{key:"isLineSegmentContainedInBoundary",value:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()))return!0;return!1}},{key:"isLineStringContainedInBoundary",value:function(t){for(var e=t.getCoordinateSequence(),n=new k,i=new k,r=0;r<e.size()-1;r++)if(e.getCoordinate(r,n),e.getCoordinate(r+1,i),!this.isLineSegmentContainedInBoundary(n,i))return!1;return!0}},{key:"isPointContainedInBoundary",value:function(){if(arguments[0]instanceof Ft){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof k){var e=arguments[0];return e.x===this._rectEnv.getMinX()||e.x===this._rectEnv.getMaxX()||e.y===this._rectEnv.getMinY()||e.y===this._rectEnv.getMaxY()}}},{key:"contains",value:function(t){return!!this._rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"contains",value:function(e,n){return new t(e).contains(n)}}]),t}();qs.constructor_=function(){this._rectEnv=null;var t=arguments[0];this._rectEnv=t.getEnvelopeInternal()};var Bs=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"intersects",value:function(t,e){var n=new R(t,e);if(!this._rectEnv.intersects(n))return!1;if(this._rectEnv.intersects(t))return!0;if(this._rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var i=t;t=e,e=i}var r=!1;return e.y>t.y&&(r=!0),r?this._li.computeIntersection(t,e,this._diagDown0,this._diagDown1):this._li.computeIntersection(t,e,this._diagUp0,this._diagUp1),!!this._li.hasIntersection()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Bs.constructor_=function(){this._li=new ue,this._rectEnv=null,this._diagUp0=null,this._diagUp1=null,this._diagDown0=null,this._diagDown1=null;var t=arguments[0];this._rectEnv=t,this._diagUp0=new k(t.getMinX(),t.getMinY()),this._diagUp1=new k(t.getMaxX(),t.getMaxY()),this._diagDown0=new k(t.getMinX(),t.getMaxY()),this._diagDown1=new k(t.getMaxX(),t.getMinY())};var Vs=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"intersects",value:function(t){if(!this._rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new zs(this._rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new Ys(this._rectangle);if(n.applyTo(t),n.containsPoint())return!0;var i=new Us(this._rectangle);return i.applyTo(t),!!i.intersects()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"intersects",value:function(e,n){return new t(e).intersects(n)}}]),t}();Vs.constructor_=function(){this._rectangle=null,this._rectEnv=null;var t=arguments[0];this._rectangle=t,this._rectEnv=t.getEnvelopeInternal()};var zs=function(t){i(n,Pe);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"isDone",value:function(){return!0===this._intersects}},{key:"visit",value:function(t){var e=t.getEnvelopeInternal();return this._rectEnv.intersects(e)?this._rectEnv.contains(e)||e.getMinX()>=this._rectEnv.getMinX()&&e.getMaxX()<=this._rectEnv.getMaxX()||e.getMinY()>=this._rectEnv.getMinY()&&e.getMaxY()<=this._rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}},{key:"intersects",value:function(){return this._intersects}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();zs.constructor_=function(){this._rectEnv=null,this._intersects=!1;var t=arguments[0];this._rectEnv=t};var Ys=function(t){i(n,Pe);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"isDone",value:function(){return!0===this._containsPoint}},{key:"visit",value:function(t){if(!(t instanceof Bt))return null;var e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;for(var n=new k,i=0;i<4;i++)if(this._rectSeq.getCoordinate(i,n),e.contains(n)&&sn.containsPointInPolygon(n,t))return this._containsPoint=!0,null}},{key:"containsPoint",value:function(){return this._containsPoint}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();Ys.constructor_=function(){this._rectSeq=null,this._rectEnv=null,this._containsPoint=!1;var t=arguments[0];this._rectSeq=t.getExteriorRing().getCoordinateSequence(),this._rectEnv=t.getEnvelopeInternal()};var Us=function(t){i(n,Pe);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"intersects",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!0===this._hasIntersection}},{key:"visit",value:function(t){var e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;var n=we.getLines(t);this.checkIntersectionWithLineStrings(n)}},{key:"checkIntersectionWithLineStrings",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this._hasIntersection)return null}}},{key:"checkIntersectionWithSegments",value:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this._p0),e.getCoordinate(n,this._p1),this._rectIntersector.intersects(this._p0,this._p1))return this._hasIntersection=!0,null}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();Us.constructor_=function(){this._rectEnv=null,this._rectIntersector=null,this._hasIntersection=!1,this._p0=new k,this._p1=new k;var t=arguments[0];this._rectEnv=t.getEnvelopeInternal(),this._rectIntersector=new Bs(this._rectEnv)};var Xs=function(t){i(n,ds);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"getIntersectionMatrix",value:function(){return this._relate.computeIM()}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"covers",value:function(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||new n(t,e).getIntersectionMatrix().isCovers())}},{key:"intersects",value:function(t,e){if(!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal()))return!1;if(t.isRectangle())return Vs.intersects(t,e);if(e.isRectangle())return Vs.intersects(e,t);if(t.isGeometryCollection()||e.isGeometryCollection()){for(var i=0;i<t.getNumGeometries();i++)for(var r=0;r<e.getNumGeometries();r++)if(t.getGeometryN(i).intersects(e.getGeometryN(r)))return!0;return!1}return new n(t,e).getIntersectionMatrix().isIntersects()}},{key:"touches",value:function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new n(t,e).getIntersectionMatrix().isTouches(t.getDimension(),e.getDimension())}},{key:"equalsTopo",value:function(t,e){return!!t.getEnvelopeInternal().equals(e.getEnvelopeInternal())&&n.relate(t,e).isEquals(t.getDimension(),e.getDimension())}},{key:"relate",value:function(){return 2===arguments.length?new n(arguments[0],arguments[1]).getIntersectionMatrix():3===arguments.length?new n(arguments[0],arguments[1],arguments[2]).getIntersectionMatrix():void 0}},{key:"overlaps",value:function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new n(t,e).getIntersectionMatrix().isOverlaps(t.getDimension(),e.getDimension())}},{key:"crosses",value:function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new n(t,e).getIntersectionMatrix().isCrosses(t.getDimension(),e.getDimension())}},{key:"contains",value:function(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?qs.contains(t,e):new n(t,e).getIntersectionMatrix().isContains())}}]),n}();Xs.constructor_=function(){if(this._relate=null,2===arguments.length){var t=arguments[0],e=arguments[1];ds.constructor_.call(this,t,e),this._relate=new Gs(this._arg)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];ds.constructor_.call(this,n,i,r),this._relate=new Gs(this._arg)}};var Hs=Object.freeze({__proto__:null,RelateOp:Xs}),Ws=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"union",value:function(){for(var t=new En,e=new dt,n=0;n<this._pointGeom.getNumGeometries();n++){var i=this._pointGeom.getGeometryN(n).getCoordinate();t.locate(i,this._otherGeom)===ce.EXTERIOR&&e.add(i)}if(0===e.size())return this._otherGeom;var r,s=$.toCoordinateArray(e);return r=1===s.length?this._geomFact.createPoint(s[0]):this._geomFact.createMultiPointFromCoords(s),xe.combine(r,this._otherGeom)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"union",value:function(e,n){return new t(e,n).union()}}]),t}();Ws.constructor_=function(){this._pointGeom=null,this._otherGeom=null,this._geomFact=null;var t=arguments[0],e=arguments[1];this._pointGeom=t,this._otherGeom=e,this._geomFact=e.getFactory()};var js=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"reduceToGeometries",value:function(t){for(var e=new w,n=t.iterator();n.hasNext();){var i=n.next(),r=null;E(i,C)?r=this.unionTree(i):i instanceof H&&(r=i),e.add(r)}return e}},{key:"extractByEnvelope",value:function(t,e,n){for(var i=new w,r=0;r<e.getNumGeometries();r++){var s=e.getGeometryN(r);s.getEnvelopeInternal().intersects(t)?i.add(s):n.add(s)}return this._geomFactory.buildGeometry(i)}},{key:"unionOptimized",value:function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return xe.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)}},{key:"union",value:function(){if(null===this._inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new Li(t.STRTREE_NODE_CAPACITY),n=this._inputPolys.iterator();n.hasNext();){var i=n.next();e.insert(i.getEnvelopeInternal(),i)}this._inputPolys=null;var r=e.itemsTree();return this.unionTree(r)}},{key:"binaryUnion",value:function(){if(1===arguments.length){var e=arguments[0];return this.binaryUnion(e,0,e.size())}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(r-i<=1){var s=t.getGeometry(n,i);return this.unionSafe(s,null)}if(r-i==2)return this.unionSafe(t.getGeometry(n,i),t.getGeometry(n,i+1));var o=Math.trunc((r+i)/2),a=this.binaryUnion(n,i,o),u=this.binaryUnion(n,o,r);return this.unionSafe(a,u)}}},{key:"repeatedUnion",value:function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e}},{key:"unionSafe",value:function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)}},{key:"unionActual",value:function(e,n){return t.restrictToPolygons(e.union(n))}},{key:"unionTree",value:function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)}},{key:"unionUsingEnvelopeIntersection",value:function(t,e,n){var i=new w,r=this.extractByEnvelope(n,t,i),s=this.extractByEnvelope(n,e,i),o=this.unionActual(r,s);return i.add(o),xe.combine(i)}},{key:"bufferUnion",value:function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"restrictToPolygons",value:function(t){if(E(t,qt))return t;var e=Re.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(te.toPolygonArray(e))}},{key:"getGeometry",value:function(t,e){return e>=t.size()?null:t.get(e)}},{key:"union",value:function(e){return new t(e).union()}}]),t}();js.constructor_=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new w)},js.STRTREE_NODE_CAPACITY=4;var Ks=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"unionNoOpt",value:function(t){var e=this._geomFact.createPoint();return _s.overlayOp(t,e,ys.UNION)}},{key:"unionWithNull",value:function(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)}},{key:"extract",value:function(){if(E(arguments[0],I))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.extract(e)}else if(arguments[0]instanceof H){var n=arguments[0];null===this._geomFact&&(this._geomFact=n.getFactory()),Ee.extract(n,H.TYPENAME_POLYGON,this._polygons),Ee.extract(n,H.TYPENAME_LINESTRING,this._lines),Ee.extract(n,H.TYPENAME_POINT,this._points)}}},{key:"union",value:function(){if(null===this._geomFact)return null;var t=null;if(this._points.size()>0){var e=this._geomFact.buildGeometry(this._points);t=this.unionNoOpt(e)}var n=null;if(this._lines.size()>0){var i=this._geomFact.buildGeometry(this._lines);n=this.unionNoOpt(i)}var r=null;this._polygons.size()>0&&(r=js.union(this._polygons));var s,o=this.unionWithNull(n,r);return null===(s=null===t?o:null===o?t:Ws.union(t,o))?this._geomFact.createGeometryCollection():s}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"union",value:function(){if(1===arguments.length){if(E(arguments[0],I))return new t(arguments[0]).union();if(arguments[0]instanceof H)return new t(arguments[0]).union()}else if(2===arguments.length){return new t(arguments[0],arguments[1]).union()}}}]),t}();Ks.constructor_=function(){if(this._polygons=new w,this._lines=new w,this._points=new w,this._geomFact=null,1===arguments.length){if(E(arguments[0],I)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof H){var e=arguments[0];this.extract(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geomFact=i,this.extract(n)}};var Zs=Object.freeze({__proto__:null,UnaryUnionOp:Ks}),Qs=Object.freeze({__proto__:null,IsValidOp:Ps,ConsistentAreaTester:Ls}),Js=Object.freeze({__proto__:null,BoundaryOp:Nt,IsSimpleOp:tr,buffer:br,distance:Fr,linemerge:$r,overlay:ps,polygonize:Fs,relate:Hs,union:Zs,valid:Qs}),$s=function(t){i(r,Ut.CoordinateOperation);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"edit",value:function(){if(2===arguments.length&&arguments[1]instanceof H&&arguments[0]instanceof Array){var t=arguments[0],n=arguments[1];if(0===t.length)return null;for(var i=new Array(t.length).fill(null),s=0;s<t.length;s++){var o=new k(t[s]);this._targetPM.makePrecise(o),i[s]=o}var a=new T(i,!1).toCoordinateArray(),u=0;n instanceof Dt&&(u=2),n instanceof zt&&(u=4);var c=i;return this._removeCollapsed&&(c=null),a.length<u?c:a}return e(l(r.prototype),"edit",this).apply(this,arguments)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}]),r}();$s.constructor_=function(){this._targetPM=null,this._removeCollapsed=!0;var t=arguments[0],e=arguments[1];this._targetPM=t,this._removeCollapsed=e};var to=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"fixPolygonalTopology",value:function(t){var e=t;this._changePrecisionModel||(e=this.changePM(t,this._targetPM));var n=Or.bufferOp(e,0),i=n;return this._changePrecisionModel||(i=t.getFactory().createGeometry(n)),i}},{key:"reducePointwise",value:function(t){var e=null;if(this._changePrecisionModel){var n=this.createFactory(t.getFactory(),this._targetPM);e=new Ut(n)}else e=new Ut;var i=this._removeCollapsed;return t.getDimension()>=2&&(i=!0),e.edit(t,new $s(this._targetPM,i))}},{key:"changePM",value:function(t,e){return this.createEditor(t.getFactory(),e).edit(t,new Ut.NoOpGeometryOperation)}},{key:"setRemoveCollapsedComponents",value:function(t){this._removeCollapsed=t}},{key:"createFactory",value:function(t,e){return new te(e,t.getSRID(),t.getCoordinateSequenceFactory())}},{key:"setChangePrecisionModel",value:function(t){this._changePrecisionModel=t}},{key:"reduce",value:function(t){var e=this.reducePointwise(t);return this._isPointwise?e:E(e,qt)?Ps.isValid(e)?e:this.fixPolygonalTopology(e):e}},{key:"setPointwise",value:function(t){this._isPointwise=t}},{key:"createEditor",value:function(t,e){if(t.getPrecisionModel()===e)return new Ut;var n=this.createFactory(t,e);return new Ut(n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"reduce",value:function(e,n){return new t(n).reduce(e)}},{key:"reducePointwise",value:function(e,n){var i=new t(n);return i.setPointwise(!0),i.reduce(e)}}]),t}();to.constructor_=function(){this._targetPM=null,this._removeCollapsed=!0,this._changePrecisionModel=!1,this._isPointwise=!1;var t=arguments[0];this._targetPM=t};var eo=Object.freeze({__proto__:null,GeometryPrecisionReducer:to}),no=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"simplifySection",value:function(t,e){if(t+1===e)return null;this._seg.p0=this._pts[t],this._seg.p1=this._pts[e];for(var n=-1,i=t,r=t+1;r<e;r++){var s=this._seg.distance(this._pts[r]);s>n&&(n=s,i=r)}if(n<=this._distanceTolerance)for(var o=t+1;o<e;o++)this._usePt[o]=!1;else this.simplifySection(t,i),this.simplifySection(i,e)}},{key:"setDistanceTolerance",value:function(t){this._distanceTolerance=t}},{key:"simplify",value:function(){this._usePt=new Array(this._pts.length).fill(null);for(var t=0;t<this._pts.length;t++)this._usePt[t]=!0;this.simplifySection(0,this._pts.length-1);for(var e=new T,n=0;n<this._pts.length;n++)this._usePt[n]&&e.add(new k(this._pts[n]));return e.toCoordinateArray()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(e,n){var i=new t(e);return i.setDistanceTolerance(n),i.simplify()}}]),t}();no.constructor_=function(){this._pts=null,this._usePt=null,this._distanceTolerance=null,this._seg=new le;var t=arguments[0];this._pts=t};var io=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"setEnsureValid",value:function(t){this._isEnsureValidTopology=t}},{key:"getResultGeometry",value:function(){return this._inputGeom.isEmpty()?this._inputGeom.copy():new ro(this._isEnsureValidTopology,this._distanceTolerance).transform(this._inputGeom)}},{key:"setDistanceTolerance",value:function(t){if(t<0)throw new r("Tolerance must be non-negative");this._distanceTolerance=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(e,n){var i=new t(e);return i.setDistanceTolerance(n),i.getResultGeometry()}}]),t}(),ro=function(t){i(r,Ce);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"transformPolygon",value:function(t,n){if(t.isEmpty())return null;var i=e(l(r.prototype),"transformPolygon",this).call(this,t,n);return n instanceof Yt?i:this.createValidArea(i)}},{key:"createValidArea",value:function(t){return this._isEnsureValidTopology?t.buffer(0):t}},{key:"transformCoordinates",value:function(t,e){var n,i=t.toCoordinateArray();return n=0===i.length?new Array(0).fill(null):no.simplify(i,this._distanceTolerance),this._factory.getCoordinateSequenceFactory().create(n)}},{key:"transformMultiPolygon",value:function(t,n){var i=e(l(r.prototype),"transformMultiPolygon",this).call(this,t,n);return this.createValidArea(i)}},{key:"transformLinearRing",value:function(t,n){var i=n instanceof Bt,s=e(l(r.prototype),"transformLinearRing",this).call(this,t,n);return!i||s instanceof zt?s:null}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}]),r}();ro.constructor_=function(){this._isEnsureValidTopology=!0,this._distanceTolerance=null;var t=arguments[0],e=arguments[1];this._isEnsureValidTopology=t,this._distanceTolerance=e},io.DPTransformer=ro,io.constructor_=function(){this._inputGeom=null,this._distanceTolerance=null,this._isEnsureValidTopology=!0;var t=arguments[0];this._inputGeom=t};var so=function(t){i(n,le);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"getIndex",value:function(){return this._index}},{key:"getParent",value:function(){return this._parent}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();so.constructor_=function(){if(this._parent=null,this._index=null,2===arguments.length){var t=arguments[0],e=arguments[1];so.constructor_.call(this,t,e,null,-1)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3];le.constructor_.call(this,n,i),this._parent=r,this._index=s}};var oo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"addToResult",value:function(t){this._resultSegs.add(t)}},{key:"asLineString",value:function(){return this._parentLine.getFactory().createLineString(t.extractCoordinates(this._resultSegs))}},{key:"getResultSize",value:function(){var t=this._resultSegs.size();return 0===t?0:t+1}},{key:"getParent",value:function(){return this._parentLine}},{key:"getSegment",value:function(t){return this._segs[t]}},{key:"getParentCoordinates",value:function(){return this._parentLine.getCoordinates()}},{key:"getMinimumSize",value:function(){return this._minimumSize}},{key:"asLinearRing",value:function(){return this._parentLine.getFactory().createLinearRing(t.extractCoordinates(this._resultSegs))}},{key:"getSegments",value:function(){return this._segs}},{key:"init",value:function(){var t=this._parentLine.getCoordinates();this._segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new so(t[e],t[e+1],this._parentLine,e);this._segs[e]=n}}},{key:"getResultCoordinates",value:function(){return t.extractCoordinates(this._resultSegs)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"extractCoordinates",value:function(t){for(var e=new Array(t.size()+1).fill(null),n=null,i=0;i<t.size();i++)n=t.get(i),e[i]=n.p0;return e[e.length-1]=n.p1,e}}]),t}();oo.constructor_=function(){if(this._parentLine=null,this._segs=null,this._resultSegs=new w,this._minimumSize=null,1===arguments.length){var t=arguments[0];oo.constructor_.call(this,t,2)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._parentLine=e,this._minimumSize=n,this.init()}};var ao=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"remove",value:function(t){this._index.remove(new R(t.p0,t.p1),t)}},{key:"add",value:function(){if(arguments[0]instanceof oo)for(var t=arguments[0].getSegments(),e=0;e<t.length;e++){var n=t[e];this.add(n)}else if(arguments[0]instanceof le){var i=arguments[0];this._index.insert(new R(i.p0,i.p1),i)}}},{key:"query",value:function(t){var e=new R(t.p0,t.p1),n=new uo(t);return this._index.query(e,n),n.getItems()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();ao.constructor_=function(){this._index=new mi};var uo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"visitItem",value:function(t){var e=t;R.intersects(e.p0,e.p1,this._querySeg.p0,this._querySeg.p1)&&this._items.add(t)}},{key:"getItems",value:function(){return this._items}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ye]}}]),t}();uo.constructor_=function(){this._querySeg=null,this._items=new w;var t=arguments[0];this._querySeg=t};var lo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"flatten",value:function(t,e){var n=this._linePts[t],i=this._linePts[e],r=new le(n,i);return this.remove(this._line,t,e),this._outputIndex.add(r),r}},{key:"hasBadIntersection",value:function(t,e,n){return!!this.hasBadOutputIntersection(n)||!!this.hasBadInputIntersection(t,e,n)}},{key:"setDistanceTolerance",value:function(t){this._distanceTolerance=t}},{key:"simplifySection",value:function(t,e,n){n+=1;var i=new Array(2).fill(null);if(t+1===e){var r=this._line.getSegment(t);return this._line.addToResult(r),null}var s=!0;this._line.getResultSize()<this._line.getMinimumSize()&&n+1<this._line.getMinimumSize()&&(s=!1);var o=new Array(1).fill(null),a=this.findFurthestPoint(this._linePts,t,e,o);o[0]>this._distanceTolerance&&(s=!1);var u=new le;if(u.p0=this._linePts[t],u.p1=this._linePts[e],i[0]=t,i[1]=e,this.hasBadIntersection(this._line,i,u)&&(s=!1),s){var l=this.flatten(t,e);return this._line.addToResult(l),null}this.simplifySection(t,a,n),this.simplifySection(a,e,n)}},{key:"hasBadOutputIntersection",value:function(t){for(var e=this._outputIndex.query(t).iterator();e.hasNext();){var n=e.next();if(this.hasInteriorIntersection(n,t))return!0}return!1}},{key:"findFurthestPoint",value:function(t,e,n,i){var r=new le;r.p0=t[e],r.p1=t[n];for(var s=-1,o=e,a=e+1;a<n;a++){var u=t[a],l=r.distance(u);l>s&&(s=l,o=a)}return i[0]=s,o}},{key:"simplify",value:function(t){this._line=t,this._linePts=t.getParentCoordinates(),this.simplifySection(0,this._linePts.length-1,0)}},{key:"remove",value:function(t,e,n){for(var i=e;i<n;i++){var r=t.getSegment(i);this._inputIndex.remove(r)}}},{key:"hasInteriorIntersection",value:function(t,e){return this._li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this._li.isInteriorIntersection()}},{key:"hasBadInputIntersection",value:function(e,n,i){for(var r=this._inputIndex.query(i).iterator();r.hasNext();){var s=r.next();if(this.hasInteriorIntersection(s,i)){if(t.isInLineSection(e,n,s))continue;return!0}}return!1}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"isInLineSection",value:function(t,e,n){if(n.getParent()!==t.getParent())return!1;var i=n.getIndex();return i>=e[0]&&i<e[1]}}]),t}();lo.constructor_=function(){this._li=new ue,this._inputIndex=new ao,this._outputIndex=new ao,this._line=null,this._linePts=null,this._distanceTolerance=0;var t=arguments[0],e=arguments[1];this._inputIndex=t,this._outputIndex=e};var co=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"setDistanceTolerance",value:function(t){this._distanceTolerance=t}},{key:"simplify",value:function(t){for(var e=t.iterator();e.hasNext();)this._inputIndex.add(e.next());for(var n=t.iterator();n.hasNext();){var i=new lo(this._inputIndex,this._outputIndex);i.setDistanceTolerance(this._distanceTolerance),i.simplify(n.next())}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();co.constructor_=function(){this._inputIndex=new ao,this._outputIndex=new ao,this._distanceTolerance=0};var ho=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getResultGeometry",value:function(){return this._inputGeom.isEmpty()?this._inputGeom.copy():(this._linestringMap=new Qt,this._inputGeom.apply(new go(this)),this._lineSimplifier.simplify(this._linestringMap.values()),new fo(this._linestringMap).transform(this._inputGeom))}},{key:"setDistanceTolerance",value:function(t){if(t<0)throw new r("Tolerance must be non-negative");this._lineSimplifier.setDistanceTolerance(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(e,n){var i=new t(e);return i.setDistanceTolerance(n),i.getResultGeometry()}}]),t}(),fo=function(t){i(r,Ce);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"transformCoordinates",value:function(t,n){if(0===t.size())return null;if(n instanceof Dt){var i=this._linestringMap.get(n);return this.createCoordinateSequence(i.getResultCoordinates())}return e(l(r.prototype),"transformCoordinates",this).call(this,t,n)}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}]),r}();fo.constructor_=function(){this._linestringMap=null;var t=arguments[0];this._linestringMap=t};var go=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){if(t instanceof Dt){var e=t;if(e.isEmpty())return null;var n=e.isClosed()?4:2,i=new oo(e,n);this.tps._linestringMap.put(e,i)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[X]}}]),t}();go.constructor_=function(){this.tps=null;var t=arguments[0];this.tps=t},ho.LineStringTransformer=fo,ho.LineStringMapBuilderFilter=go,ho.constructor_=function(){this._inputGeom=null,this._lineSimplifier=new co,this._linestringMap=null;var t=arguments[0];this._inputGeom=t};var vo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"simplifyVertex",value:function(t){for(var e=t,n=e.getArea(),i=null;null!==e;){var r=e.getArea();r<n&&(n=r,i=e),e=e._next}return null!==i&&n<this._tolerance&&i.remove(),t.isLive()?n:-1}},{key:"simplify",value:function(){var t=_o.buildLine(this._pts),e=this._tolerance;do{e=this.simplifyVertex(t)}while(e<this._tolerance);var n=t.getCoordinates();return n.length<2?[n[0],new k(n[0])]:n}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(e,n){return new t(e,n).simplify()}}]),t}(),_o=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getCoordinates",value:function(){var t=new T,e=this;do{t.add(e._pt,!1),e=e._next}while(null!==e);return t.toCoordinateArray()}},{key:"getArea",value:function(){return this._area}},{key:"updateArea",value:function(){if(null===this._prev||null===this._next)return this._area=t.MAX_AREA,null;this._area=Math.abs(ge.area(this._prev._pt,this._pt,this._next._pt))}},{key:"remove",value:function(){var t=this._prev,e=this._next,n=null;return null!==this._prev&&(this._prev.setNext(e),this._prev.updateArea(),n=this._prev),null!==this._next&&(this._next.setPrev(t),this._next.updateArea(),null===n&&(n=this._next)),this._isLive=!1,n}},{key:"isLive",value:function(){return this._isLive}},{key:"setPrev",value:function(t){this._prev=t}},{key:"setNext",value:function(t){this._next=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"buildLine",value:function(e){for(var n=null,i=null,r=0;r<e.length;r++){var s=new t(e[r]);null===n&&(n=s),s.setPrev(i),null!==i&&(i.setNext(s),i.updateArea()),i=s}return n}}]),t}();_o.constructor_=function(){this._pt=null,this._prev=null,this._next=null,this._area=_o.MAX_AREA,this._isLive=!0;var t=arguments[0];this._pt=t},_o.MAX_AREA=h.MAX_VALUE,vo.VWVertex=_o,vo.constructor_=function(){this._pts=null,this._tolerance=null;var t=arguments[0],e=arguments[1];this._pts=t,this._tolerance=e*e};var yo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"setEnsureValid",value:function(t){this._isEnsureValidTopology=t}},{key:"getResultGeometry",value:function(){return this._inputGeom.isEmpty()?this._inputGeom.copy():new po(this._isEnsureValidTopology,this._distanceTolerance).transform(this._inputGeom)}},{key:"setDistanceTolerance",value:function(t){if(t<0)throw new r("Tolerance must be non-negative");this._distanceTolerance=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(e,n){var i=new t(e);return i.setDistanceTolerance(n),i.getResultGeometry()}}]),t}(),po=function(t){i(r,Ce);var n=s(r);function r(){var t;return c(this,r),t=n.call(this),r.constructor_.apply(a(t),arguments),t}return f(r,[{key:"transformPolygon",value:function(t,n){if(t.isEmpty())return null;var i=e(l(r.prototype),"transformPolygon",this).call(this,t,n);return n instanceof Yt?i:this.createValidArea(i)}},{key:"createValidArea",value:function(t){return this._isEnsureValidTopology?t.buffer(0):t}},{key:"transformCoordinates",value:function(t,e){var n,i=t.toCoordinateArray();return n=0===i.length?new Array(0).fill(null):vo.simplify(i,this._distanceTolerance),this._factory.getCoordinateSequenceFactory().create(n)}},{key:"transformMultiPolygon",value:function(t,n){var i=e(l(r.prototype),"transformMultiPolygon",this).call(this,t,n);return this.createValidArea(i)}},{key:"transformLinearRing",value:function(t,n){var i=n instanceof Bt,s=e(l(r.prototype),"transformLinearRing",this).call(this,t,n);return!i||s instanceof zt?s:null}},{key:"getClass",value:function(){return r}},{key:"interfaces_",get:function(){return[]}}]),r}();po.constructor_=function(){this._isEnsureValidTopology=!0,this._distanceTolerance=null;var t=arguments[0],e=arguments[1];this._isEnsureValidTopology=t,this._distanceTolerance=e},yo.VWTransformer=po,yo.constructor_=function(){this._inputGeom=null,this._distanceTolerance=null,this._isEnsureValidTopology=!0;var t=arguments[0];this._inputGeom=t};var mo=Object.freeze({__proto__:null,DouglasPeuckerSimplifier:io,TopologyPreservingSimplifier:ho,VWSimplifier:yo}),ko=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"splitAt",value:function(){if(1===arguments.length){var e=arguments[0],n=this._minimumLen/this._segLen;if(e.distance(this._seg.p0)<this._minimumLen)return this._splitPt=this._seg.pointAlong(n),null;if(e.distance(this._seg.p1)<this._minimumLen)return this._splitPt=t.pointAlongReverse(this._seg,n),null;this._splitPt=e}else if(2===arguments.length){var i=arguments[0],r=arguments[1],s=this.getConstrainedLength(i)/this._segLen;r.equals2D(this._seg.p0)?this._splitPt=this._seg.pointAlong(s):this._splitPt=t.pointAlongReverse(this._seg,s)}}},{key:"setMinimumLength",value:function(t){this._minimumLen=t}},{key:"getConstrainedLength",value:function(t){return t<this._minimumLen?this._minimumLen:t}},{key:"getSplitPoint",value:function(){return this._splitPt}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"pointAlongReverse",value:function(t,e){var n=new k;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n}}]),t}();ko.constructor_=function(){this._seg=null,this._segLen=null,this._splitPt=null,this._minimumLen=0;var t=arguments[0];this._seg=t,this._segLen=t.getLength()};var xo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"findSplitPoint",value:function(t,e){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();xo.constructor_=function(){};var Eo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"findSplitPoint",value:function(e,n){var i=e.getLineSegment(),r=i.getLength()/2,s=new ko(i),o=t.projectedSplitPoint(e,n),a=2*o.distance(n)*.8;return a>r&&(a=r),s.setMinimumLength(a),s.splitAt(o),s.getSplitPoint()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[xo]}}],[{key:"projectedSplitPoint",value:function(t,e){return t.getLineSegment().project(e)}}]),t}();Eo.constructor_=function(){};var Io=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"triArea",value:function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)}},{key:"isInCircleDDNormalized",value:function(t,e,n,i){var r=A.valueOf(t.x).selfSubtract(i.x),s=A.valueOf(t.y).selfSubtract(i.y),o=A.valueOf(e.x).selfSubtract(i.x),a=A.valueOf(e.y).selfSubtract(i.y),u=A.valueOf(n.x).selfSubtract(i.x),l=A.valueOf(n.y).selfSubtract(i.y),c=r.multiply(a).selfSubtract(o.multiply(s)),h=o.multiply(l).selfSubtract(u.multiply(a)),f=u.multiply(s).selfSubtract(r.multiply(l)),g=r.multiply(r).selfAdd(s.multiply(s)),v=o.multiply(o).selfAdd(a.multiply(a)),_=u.multiply(u).selfAdd(l.multiply(l));return g.selfMultiply(h).selfAdd(v.selfMultiply(f)).selfAdd(_.selfMultiply(c)).doubleValue()>0}},{key:"checkRobustInCircle",value:function(e,n,i,r){var s=t.isInCircleNonRobust(e,n,i,r),o=t.isInCircleDDSlow(e,n,i,r),a=t.isInCircleCC(e,n,i,r),u=ge.circumcentre(e,n,i);q.out.println("p radius diff a = "+Math.abs(r.distance(u)-e.distance(u))/e.distance(u)),s===o&&s===a||(q.out.println("inCircle robustness failure (double result = "+s+", DD result = "+o+", CC result = "+a+")"),q.out.println(oe.toLineString(new Kt([e,n,i,r]))),q.out.println("Circumcentre = "+oe.toPoint(u)+" radius = "+e.distance(u)),q.out.println("p radius diff a = "+Math.abs(r.distance(u)/e.distance(u)-1)),q.out.println("p radius diff b = "+Math.abs(r.distance(u)/n.distance(u)-1)),q.out.println("p radius diff c = "+Math.abs(r.distance(u)/i.distance(u)-1)),q.out.println())}},{key:"isInCircleDDFast",value:function(e,n,i,r){var s=A.sqr(e.x).selfAdd(A.sqr(e.y)).selfMultiply(t.triAreaDDFast(n,i,r)),o=A.sqr(n.x).selfAdd(A.sqr(n.y)).selfMultiply(t.triAreaDDFast(e,i,r)),a=A.sqr(i.x).selfAdd(A.sqr(i.y)).selfMultiply(t.triAreaDDFast(e,n,r)),u=A.sqr(r.x).selfAdd(A.sqr(r.y)).selfMultiply(t.triAreaDDFast(e,n,i));return s.selfSubtract(o).selfAdd(a).selfSubtract(u).doubleValue()>0}},{key:"isInCircleCC",value:function(t,e,n,i){var r=ge.circumcentre(t,e,n),s=t.distance(r);return i.distance(r)-s<=0}},{key:"isInCircleNormalized",value:function(t,e,n,i){var r=t.x-i.x,s=t.y-i.y,o=e.x-i.x,a=e.y-i.y,u=n.x-i.x,l=n.y-i.y;return(r*r+s*s)*(o*l-u*a)+(o*o+a*a)*(u*s-r*l)+(u*u+l*l)*(r*a-o*s)>0}},{key:"isInCircleDDSlow",value:function(e,n,i,r){var s=A.valueOf(r.x),o=A.valueOf(r.y),a=A.valueOf(e.x),u=A.valueOf(e.y),l=A.valueOf(n.x),c=A.valueOf(n.y),h=A.valueOf(i.x),f=A.valueOf(i.y),g=a.multiply(a).add(u.multiply(u)).multiply(t.triAreaDDSlow(l,c,h,f,s,o)),v=l.multiply(l).add(c.multiply(c)).multiply(t.triAreaDDSlow(a,u,h,f,s,o)),_=h.multiply(h).add(f.multiply(f)).multiply(t.triAreaDDSlow(a,u,l,c,s,o)),d=s.multiply(s).add(o.multiply(o)).multiply(t.triAreaDDSlow(a,u,l,c,h,f));return g.subtract(v).add(_).subtract(d).doubleValue()>0}},{key:"isInCircleNonRobust",value:function(e,n,i,r){return(e.x*e.x+e.y*e.y)*t.triArea(n,i,r)-(n.x*n.x+n.y*n.y)*t.triArea(e,i,r)+(i.x*i.x+i.y*i.y)*t.triArea(e,n,r)-(r.x*r.x+r.y*r.y)*t.triArea(e,n,i)>0}},{key:"isInCircleRobust",value:function(e,n,i,r){return t.isInCircleNormalized(e,n,i,r)}},{key:"triAreaDDSlow",value:function(t,e,n,i,r,s){return n.subtract(t).multiply(s.subtract(e)).subtract(i.subtract(e).multiply(r.subtract(t)))}},{key:"triAreaDDFast",value:function(t,e,n){var i=A.valueOf(e.x).selfSubtract(t.x).selfMultiply(A.valueOf(n.y).selfSubtract(t.y)),r=A.valueOf(e.y).selfSubtract(t.y).selfMultiply(A.valueOf(n.x).selfSubtract(t.x));return i.selfSubtract(r)}}]),t}();Io.constructor_=function(){};var No=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"circleCenter",value:function(e,n){var i=new t(this.getX(),this.getY()),r=this.bisector(i,e),s=this.bisector(e,n),o=new B(r,s),a=null;try{a=new t(o.getX(),o.getY())}catch(r){if(!(r instanceof O))throw r;q.err.println("a: "+i+"  b: "+e+"  c: "+n),q.err.println(r)}return a}},{key:"dot",value:function(t){return this._p.x*t.getX()+this._p.y*t.getY()}},{key:"magn",value:function(){return Math.sqrt(this._p.x*this._p.x+this._p.y*this._p.y)}},{key:"getZ",value:function(){return this._p.z}},{key:"bisector",value:function(t,e){var n=e.getX()-t.getX(),i=e.getY()-t.getY(),r=new B(t.getX()+n/2,t.getY()+i/2,1),s=new B(t.getX()-i+n/2,t.getY()+n+i/2,1);return new B(r,s)}},{key:"equals",value:function(){if(1===arguments.length){var t=arguments[0];return this._p.x===t.getX()&&this._p.y===t.getY()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this._p.distance(e.getCoordinate())<n}}},{key:"getCoordinate",value:function(){return this._p}},{key:"isInCircle",value:function(t,e,n){return Io.isInCircleRobust(t._p,e._p,n._p,this._p)}},{key:"interpolateZValue",value:function(t,e,n){var i=t.getX(),r=t.getY(),s=e.getX()-i,o=n.getX()-i,a=e.getY()-r,u=n.getY()-r,l=s*u-o*a,c=this.getX()-i,h=this.getY()-r,f=(u*c-o*h)/l,g=(-a*c+s*h)/l;return t.getZ()+f*(e.getZ()-t.getZ())+g*(n.getZ()-t.getZ())}},{key:"midPoint",value:function(e){return new t((this._p.x+e.getX())/2,(this._p.y+e.getY())/2,(this._p.z+e.getZ())/2)}},{key:"rightOf",value:function(t){return this.isCCW(t.dest(),t.orig())}},{key:"isCCW",value:function(t,e){return(t._p.x-this._p.x)*(e._p.y-this._p.y)-(t._p.y-this._p.y)*(e._p.x-this._p.x)>0}},{key:"getX",value:function(){return this._p.x}},{key:"crossProduct",value:function(t){return this._p.x*t.getY()-this._p.y*t.getX()}},{key:"setZ",value:function(t){this._p.z=t}},{key:"times",value:function(e){return new t(e*this._p.x,e*this._p.y)}},{key:"cross",value:function(){return new t(this._p.y,-this._p.x)}},{key:"leftOf",value:function(t){return this.isCCW(t.orig(),t.dest())}},{key:"toString",value:function(){return"POINT ("+this._p.x+" "+this._p.y+")"}},{key:"sub",value:function(e){return new t(this._p.x-e.getX(),this._p.y-e.getY())}},{key:"getY",value:function(){return this._p.y}},{key:"classify",value:function(e,n){var i=n.sub(e),r=this.sub(e),s=i.crossProduct(r);return s>0?t.LEFT:s<0?t.RIGHT:i.getX()*r.getX()<0||i.getY()*r.getY()<0?t.BEHIND:i.magn()<r.magn()?t.BEYOND:e.equals(this)?t.ORIGIN:n.equals(this)?t.DESTINATION:t.BETWEEN}},{key:"sum",value:function(e){return new t(this._p.x+e.getX(),this._p.y+e.getY())}},{key:"distance",value:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))}},{key:"circumRadiusRatio",value:function(t,e){var n=this.circleCenter(t,e),i=this.distance(n,t),r=this.distance(this,t),s=this.distance(t,e);return s<r&&(r=s),(s=this.distance(e,this))<r&&(r=s),i/r}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"interpolateZ",value:function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=e.distance(n),r=t.distance(e),s=n.z-e.z;return e.z+s*(r/i)}if(4===arguments.length){var o=arguments[0],a=arguments[1],u=arguments[2],l=arguments[3],c=a.x,h=a.y,f=u.x-c,g=l.x-c,v=u.y-h,_=l.y-h,d=f*_-g*v,y=o.x-c,p=o.y-h,m=(_*y-g*p)/d,k=(-v*y+f*p)/d;return a.z+m*(u.z-a.z)+k*(l.z-a.z)}}}]),t}();No.constructor_=function(){if(this._p=null,1===arguments.length){var t=arguments[0];this._p=new k(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._p=new k(e,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];this._p=new k(i,r,s)}},No.LEFT=0,No.RIGHT=1,No.BEYOND=2,No.BEHIND=3,No.BETWEEN=4,No.ORIGIN=5,No.DESTINATION=6;var Co=function(t){i(n,No);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"getConstraint",value:function(){return this._constraint}},{key:"setOnConstraint",value:function(t){this._isOnConstraint=t}},{key:"merge",value:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this._constraint=t._constraint)}},{key:"isOnConstraint",value:function(){return this._isOnConstraint}},{key:"setConstraint",value:function(t){this._isOnConstraint=!0,this._constraint=t}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}]),n}();Co.constructor_=function(){this._isOnConstraint=null,this._constraint=null;var t=arguments[0];No.constructor_.call(this,t)};var So=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"equalsNonOriented",value:function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())}},{key:"toLineSegment",value:function(){return new le(this._vertex.getCoordinate(),this.dest().getCoordinate())}},{key:"dest",value:function(){return this.sym().orig()}},{key:"oNext",value:function(){return this._next}},{key:"equalsOriented",value:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))}},{key:"dNext",value:function(){return this.sym().oNext().sym()}},{key:"lPrev",value:function(){return this._next.sym()}},{key:"rPrev",value:function(){return this.sym().oNext()}},{key:"rot",value:function(){return this._rot}},{key:"oPrev",value:function(){return this._rot._next._rot}},{key:"sym",value:function(){return this._rot._rot}},{key:"setOrig",value:function(t){this._vertex=t}},{key:"lNext",value:function(){return this.invRot().oNext().rot()}},{key:"getLength",value:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())}},{key:"invRot",value:function(){return this._rot.sym()}},{key:"setDest",value:function(t){this.sym().setOrig(t)}},{key:"setData",value:function(t){this._data=t}},{key:"getData",value:function(){return this._data}},{key:"delete",value:function(){this._rot=null}},{key:"orig",value:function(){return this._vertex}},{key:"rNext",value:function(){return this._rot._next.invRot()}},{key:"toString",value:function(){var t=this._vertex.getCoordinate(),e=this.dest().getCoordinate();return oe.toLineString(t,e)}},{key:"isLive",value:function(){return null!==this._rot}},{key:"getPrimary",value:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()}},{key:"dPrev",value:function(){return this.invRot().oNext().invRot()}},{key:"setNext",value:function(t){this._next=t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"makeEdge",value:function(e,n){var i=new t,r=new t,s=new t,o=new t;i._rot=r,r._rot=s,s._rot=o,o._rot=i,i.setNext(i),r.setNext(o),s.setNext(s),o.setNext(r);var a=i;return a.setOrig(e),a.setDest(n),a}},{key:"swap",value:function(e){var n=e.oPrev(),i=e.sym().oPrev();t.splice(e,n),t.splice(e.sym(),i),t.splice(e,n.lNext()),t.splice(e.sym(),i.lNext()),e.setOrig(n.dest()),e.setDest(i.dest())}},{key:"splice",value:function(t,e){var n=t.oNext().rot(),i=e.oNext().rot(),r=e.oNext(),s=t.oNext(),o=i.oNext(),a=n.oNext();t.setNext(r),e.setNext(s),n.setNext(o),i.setNext(a)}},{key:"connect",value:function(e,n){var i=t.makeEdge(e.dest(),n.orig());return t.splice(i,e.lNext()),t.splice(i.sym(),n),i}}]),t}();So.constructor_=function(){this._rot=null,this._vertex=null,this._next=null,this._data=null};var wo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"insertSite",value:function(t){var e=this._subdiv.locate(t);if(this._subdiv.isVertexOfEdge(e,t))return e;this._subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this._subdiv.delete(e.oNext()));var n=this._subdiv.makeEdge(e.orig(),t);So.splice(n,e);var i=n;do{e=(n=this._subdiv.connect(e,n.sym())).oPrev()}while(e.lNext()!==i);for(;;){var r=e.oPrev();if(r.dest().rightOf(e)&&t.isInCircle(e.orig(),r.dest(),e.dest()))So.swap(e),e=e.oPrev();else{if(e.oNext()===i)return n;e=e.oNext().lPrev()}}}},{key:"insertSites",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();wo.constructor_=function(){this._subdiv=null,this._isUsingTolerance=!1;var t=arguments[0];this._subdiv=t,this._isUsingTolerance=t.getTolerance()>0};var Lo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"locate",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Lo.constructor_=function(){};var To=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"init",value:function(){this._lastEdge=this.findEdge()}},{key:"locate",value:function(t){this._lastEdge.isLive()||this.init();var e=this._subdiv.locateFromEdge(t,this._lastEdge);return this._lastEdge=e,e}},{key:"findEdge",value:function(){return this._subdiv.getEdges().iterator().next()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Lo]}}]),t}();To.constructor_=function(){this._subdiv=null,this._lastEdge=null;var t=arguments[0];this._subdiv=t,this.init()};var Ro=function(t){i(n,y);var e=s(n);function n(){var t;return c(this,n),t=e.call(this),n.constructor_.apply(a(t),arguments),t}return f(n,[{key:"getSegment",value:function(){return this._seg}},{key:"getClass",value:function(){return n}},{key:"interfaces_",get:function(){return[]}}],[{key:"msgWithSpatial",value:function(t,e){return null!==e?t+" [ "+e+" ]":t}}]),n}();Ro.constructor_=function(){if(this._seg=null,1===arguments.length){if("string"==typeof arguments[0]){var t=arguments[0];y.constructor_.call(this,t)}else if(arguments[0]instanceof le){var e=arguments[0];y.constructor_.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this._seg=new le(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];y.constructor_.call(this,Ro.msgWithSpatial(n,i)),this._seg=new le(i)}};var Po=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"visit",value:function(t){}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Po.constructor_=function(){};var Oo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getTriangleVertices",value:function(t){var e=new Do;return this.visitTriangles(e,t),e.getTriangleVertices()}},{key:"isFrameVertex",value:function(t){return!!t.equals(this._frameVertex[0])||!!t.equals(this._frameVertex[1])||!!t.equals(this._frameVertex[2])}},{key:"isVertexOfEdge",value:function(t,e){return!(!e.equals(t.orig(),this._tolerance)&&!e.equals(t.dest(),this._tolerance))}},{key:"connect",value:function(t,e){var n=So.connect(t,e);return this._quadEdges.add(n),n}},{key:"getVoronoiCellPolygon",value:function(t,e){var n=new w,i=t;do{var r=t.rot().orig().getCoordinate();n.add(r),t=t.oPrev()}while(t!==i);var s=new T;s.addAll(n,!1),s.closeRing(),s.size()<4&&(q.out.println(s),s.add(s.get(s.size()-1),!0));var o=s.toCoordinateArray(),a=e.createPolygon(e.createLinearRing(o)),u=i.orig();return a.setUserData(u.getCoordinate()),a}},{key:"setLocator",value:function(t){this._locator=t}},{key:"initSubdiv",value:function(){var t=this.makeEdge(this._frameVertex[0],this._frameVertex[1]),e=this.makeEdge(this._frameVertex[1],this._frameVertex[2]);So.splice(t.sym(),e);var n=this.makeEdge(this._frameVertex[2],this._frameVertex[0]);return So.splice(e.sym(),n),So.splice(n.sym(),t),t}},{key:"isFrameBorderEdge",value:function(e){var n=new Array(3).fill(null);t.getTriangleEdges(e,n);var i=new Array(3).fill(null);t.getTriangleEdges(e.sym(),i);var r=e.lNext().dest();if(this.isFrameVertex(r))return!0;var s=e.sym().lNext().dest();return!!this.isFrameVertex(s)}},{key:"makeEdge",value:function(t,e){var n=So.makeEdge(t,e);return this._quadEdges.add(n),n}},{key:"visitTriangles",value:function(t,e){this._visitedKey++;var n=new vn;n.push(this._startingEdge);for(var i=new ot;!n.empty();){var r=n.pop();if(!i.contains(r)){var s=this.fetchTriangleToVisit(r,n,e,i);null!==s&&t.visit(s)}}}},{key:"isFrameEdge",value:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))}},{key:"isOnEdge",value:function(t,e){return this._seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate()),this._seg.distance(e)<this._edgeCoincidenceTolerance}},{key:"getEnvelope",value:function(){return new R(this._frameEnv)}},{key:"createFrame",value:function(t){var e,n=t.getWidth(),i=t.getHeight();e=n>i?10*n:10*i,this._frameVertex[0]=new No((t.getMaxX()+t.getMinX())/2,t.getMaxY()+e),this._frameVertex[1]=new No(t.getMinX()-e,t.getMinY()-e),this._frameVertex[2]=new No(t.getMaxX()+e,t.getMinY()-e),this._frameEnv=new R(this._frameVertex[0].getCoordinate(),this._frameVertex[1].getCoordinate()),this._frameEnv.expandToInclude(this._frameVertex[2].getCoordinate())}},{key:"getTriangleCoordinates",value:function(t){var e=new Ao;return this.visitTriangles(e,t),e.getTriangles()}},{key:"getVertices",value:function(t){for(var e=new ot,n=this._quadEdges.iterator();n.hasNext();){var i=n.next(),r=i.orig();!t&&this.isFrameVertex(r)||e.add(r);var s=i.dest();!t&&this.isFrameVertex(s)||e.add(s)}return e}},{key:"fetchTriangleToVisit",value:function(t,e,n,i){var r=t,s=0,o=!1;do{this._triEdges[s]=r,this.isFrameEdge(r)&&(o=!0);var a=r.sym();i.contains(a)||e.push(a),i.add(r),s++,r=r.lNext()}while(r!==t);return o&&!n?null:this._triEdges}},{key:"getEdges",value:function(){if(0===arguments.length)return this._quadEdges;if(1===arguments.length){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var s=r.next();n[i++]=t.createLineString([s.orig().getCoordinate(),s.dest().getCoordinate()])}return t.createMultiLineString(n)}}},{key:"getVertexUniqueEdges",value:function(t){for(var e=new w,n=new ot,i=this._quadEdges.iterator();i.hasNext();){var r=i.next(),s=r.orig();n.contains(s)||(n.add(s),!t&&this.isFrameVertex(s)||e.add(r));var o=r.sym(),a=o.orig();n.contains(a)||(n.add(a),!t&&this.isFrameVertex(a)||e.add(o))}return e}},{key:"getTriangleEdges",value:function(t){var e=new Mo;return this.visitTriangles(e,t),e.getTriangleEdges()}},{key:"getPrimaryEdges",value:function(t){this._visitedKey++;var e=new w,n=new vn;n.push(this._startingEdge);for(var i=new ot;!n.empty();){var r=n.pop();if(!i.contains(r)){var s=r.getPrimary();!t&&this.isFrameEdge(s)||e.add(s),n.push(r.oNext()),n.push(r.sym().oNext()),i.add(r),i.add(r.sym())}}return e}},{key:"delete",value:function(t){So.splice(t,t.oPrev()),So.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),i=t.rot().sym();this._quadEdges.remove(t),this._quadEdges.remove(e),this._quadEdges.remove(n),this._quadEdges.remove(i),t.delete(),e.delete(),n.delete(),i.delete()}},{key:"locateFromEdge",value:function(t,e){for(var n=0,i=this._quadEdges.size(),r=e;;){if(++n>i)throw new Ro(r.toLineSegment());if(t.equals(r.orig())||t.equals(r.dest()))break;if(t.rightOf(r))r=r.sym();else if(t.rightOf(r.oNext())){if(t.rightOf(r.dPrev()))break;r=r.dPrev()}else r=r.oNext()}return r}},{key:"getTolerance",value:function(){return this._tolerance}},{key:"getVoronoiCellPolygons",value:function(t){this.visitTriangles(new bo,!0);for(var e=new w,n=this.getVertexUniqueEdges(!1).iterator();n.hasNext();){var i=n.next();e.add(this.getVoronoiCellPolygon(i,t))}return e}},{key:"getVoronoiDiagram",value:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(te.toGeometryArray(e))}},{key:"getTriangles",value:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var s=r.next();n[i++]=t.createPolygon(t.createLinearRing(s))}return t.createGeometryCollection(n)}},{key:"insertSite",value:function(t){var e=this.locate(t);if(t.equals(e.orig(),this._tolerance)||t.equals(e.dest(),this._tolerance))return e;var n=this.makeEdge(e.orig(),t);So.splice(n,e);var i=n;do{e=(n=this.connect(e,n.sym())).oPrev()}while(e.lNext()!==i);return i}},{key:"locate",value:function(){if(1===arguments.length){if(arguments[0]instanceof No){var t=arguments[0];return this._locator.locate(t)}if(arguments[0]instanceof k){var e=arguments[0];return this._locator.locate(new No(e))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this._locator.locate(new No(n));if(null===r)return null;var s=r;r.dest().getCoordinate().equals2D(n)&&(s=r.sym());var o=s;do{if(o.dest().getCoordinate().equals2D(i))return o;o=o.oNext()}while(o!==s);return null}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"getTriangleEdges",value:function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new r("Edges do not form a triangle")}}]),t}(),bo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"visit",value:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),i=t[2].orig().getCoordinate(),r=ge.circumcentre(e,n,i),s=new No(r),o=0;o<3;o++)t[o].rot().setOrig(s)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Po]}}]),t}();bo.constructor_=function(){};var Mo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getTriangleEdges",value:function(){return this._triList}},{key:"visit",value:function(t){this._triList.add(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Po]}}]),t}();Mo.constructor_=function(){this._triList=new w};var Do=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"visit",value:function(t){this._triList.add([t[0].orig(),t[1].orig(),t[2].orig()])}},{key:"getTriangleVertices",value:function(){return this._triList}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Po]}}]),t}();Do.constructor_=function(){this._triList=new w};var Ao=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"checkTriangleSize",value:function(t){t.length>=2?oe.toLineString(t[0],t[1]):t.length>=1&&oe.toPoint(t[0])}},{key:"visit",value:function(t){this._coordList.clear();for(var e=0;e<3;e++){var n=t[e].orig();this._coordList.add(n.getCoordinate())}if(this._coordList.size()>0){this._coordList.closeRing();var i=this._coordList.toCoordinateArray();if(4!==i.length)return null;this._triCoords.add(i)}}},{key:"getTriangles",value:function(){return this._triCoords}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Po]}}]),t}();Ao.constructor_=function(){this._coordList=new T,this._triCoords=new w},Oo.TriangleCircumcentreVisitor=bo,Oo.TriangleEdgesListVisitor=Mo,Oo.TriangleVertexListVisitor=Do,Oo.TriangleCoordinatesVisitor=Ao,Oo.constructor_=function(){this._visitedKey=0,this._quadEdges=new w,this._startingEdge=null,this._tolerance=null,this._edgeCoincidenceTolerance=null,this._frameVertex=new Array(3).fill(null),this._frameEnv=null,this._locator=null,this._seg=new le,this._triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this._tolerance=e,this._edgeCoincidenceTolerance=e/Oo.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this._startingEdge=this.initSubdiv(),this._locator=new To(this)},Oo.EDGE_COINCIDENCE_TOL_FACTOR=1e3;var Fo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getLineSegment",value:function(){return this._ls}},{key:"getEndZ",value:function(){return this._ls.getCoordinate(1).z}},{key:"getStartZ",value:function(){return this._ls.getCoordinate(0).z}},{key:"intersection",value:function(t){return this._ls.intersection(t.getLineSegment())}},{key:"getStart",value:function(){return this._ls.getCoordinate(0)}},{key:"getEnd",value:function(){return this._ls.getCoordinate(1)}},{key:"getEndY",value:function(){return this._ls.getCoordinate(1).y}},{key:"getStartX",value:function(){return this._ls.getCoordinate(0).x}},{key:"equalsTopo",value:function(t){return this._ls.equalsTopo(t.getLineSegment())}},{key:"getStartY",value:function(){return this._ls.getCoordinate(0).y}},{key:"setData",value:function(t){this._data=t}},{key:"getData",value:function(){return this._data}},{key:"getEndX",value:function(){return this._ls.getCoordinate(1).x}},{key:"toString",value:function(){return this._ls.toString()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Fo.constructor_=function(){if(this._ls=null,this._data=null,2===arguments.length){var t=arguments[0],e=arguments[1];this._ls=new le(t,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._ls=new le(n,i),this._data=r}else if(6===arguments.length){var s=arguments[0],o=arguments[1],a=arguments[2],u=arguments[3],l=arguments[4],c=arguments[5];Fo.constructor_.call(this,new k(s,o,a),new k(u,l,c))}else if(7===arguments.length){var h=arguments[0],f=arguments[1],g=arguments[2],v=arguments[3],_=arguments[4],d=arguments[5],y=arguments[6];Fo.constructor_.call(this,new k(h,f,g),new k(v,_,d),y)}};var Go=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getInitialVertices",value:function(){return this._initialVertices}},{key:"getKDT",value:function(){return this._kdt}},{key:"enforceConstraints",value:function(){this.addConstraintVertices();var e=0,n=0;do{n=this.enforceGabriel(this._segments),e++}while(n>0&&e<t.MAX_SPLIT_ITER)}},{key:"insertSites",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}}},{key:"getVertexFactory",value:function(){return this._vertexFactory}},{key:"getPointArray",value:function(){for(var t=new Array(this._initialVertices.size()+this._segVertices.size()).fill(null),e=0,n=this._initialVertices.iterator();n.hasNext();){var i=n.next();t[e++]=i.getCoordinate()}for(var r=this._segVertices.iterator();r.hasNext();){var s=r.next();t[e++]=s.getCoordinate()}return t}},{key:"setConstraints",value:function(t,e){this._segments=t,this._segVertices=e}},{key:"computeConvexHull",value:function(){var t=new te,e=this.getPointArray(),n=new dn(e,t);this._convexHull=n.getConvexHull()}},{key:"addConstraintVertices",value:function(){this.computeConvexHull(),this.insertSites(this._segVertices)}},{key:"findNonGabrielPoint",value:function(t){var e=t.getStart(),n=t.getEnd(),i=new k((e.x+n.x)/2,(e.y+n.y)/2),r=e.distance(i),s=new R(i);s.expandBy(r);for(var o=this._kdt.query(s),a=null,u=h.MAX_VALUE,l=o.iterator();l.hasNext();){var c=l.next().getCoordinate();if(!c.equals2D(e)&&!c.equals2D(n)){var f=i.distance(c);if(f<r){(null===a||f<u)&&(a=c,u=f)}}}return a}},{key:"getConstraintSegments",value:function(){return this._segments}},{key:"setSplitPointFinder",value:function(t){this._splitFinder=t}},{key:"getConvexHull",value:function(){return this._convexHull}},{key:"getTolerance",value:function(){return this._tolerance}},{key:"enforceGabriel",value:function(t){for(var e=new w,n=0,i=new w,r=t.iterator();r.hasNext();){var s=r.next(),o=this.findNonGabrielPoint(s);if(null!==o){this._splitPt=this._splitFinder.findSplitPoint(s,o);var a=this.createVertex(this._splitPt,s);this.insertSite(a).getCoordinate().equals2D(this._splitPt);var u=new Fo(s.getStartX(),s.getStartY(),s.getStartZ(),a.getX(),a.getY(),a.getZ(),s.getData()),l=new Fo(a.getX(),a.getY(),a.getZ(),s.getEndX(),s.getEndY(),s.getEndZ(),s.getData());e.add(u),e.add(l),i.add(s),n+=1}}return t.removeAll(i),t.addAll(e),n}},{key:"createVertex",value:function(){if(1===arguments.length){var t=arguments[0];return null!==this._vertexFactory?this._vertexFactory.createVertex(t,null):new Co(t)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=null;return(i=null!==this._vertexFactory?this._vertexFactory.createVertex(e,n):new Co(e)).setOnConstraint(!0),i}}},{key:"getSubdivision",value:function(){return this._subdiv}},{key:"computeBoundingBox",value:function(){var e=t.computeVertexEnvelope(this._initialVertices),n=t.computeVertexEnvelope(this._segVertices),i=new R(e);i.expandToInclude(n);var r=.2*i.getWidth(),s=.2*i.getHeight(),o=Math.max(r,s);this._computeAreaEnv=new R(i),this._computeAreaEnv.expandBy(o)}},{key:"setVertexFactory",value:function(t){this._vertexFactory=t}},{key:"formInitialDelaunay",value:function(){this.computeBoundingBox(),this._subdiv=new Oo(this._computeAreaEnv,this._tolerance),this._subdiv.setLocator(new To(this._subdiv)),this._incDel=new wo(this._subdiv),this.insertSites(this._initialVertices)}},{key:"insertSite",value:function(){if(arguments[0]instanceof Co){var t=arguments[0],e=this._kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var n=e.getData();return n.merge(t),n}return this._incDel.insertSite(t),t}if(arguments[0]instanceof k){var i=arguments[0];this.insertSite(this.createVertex(i))}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeVertexEnvelope",value:function(t){for(var e=new R,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i.getCoordinate())}return e}}]),t}();Go.constructor_=function(){this._initialVertices=null,this._segVertices=null,this._segments=new w,this._subdiv=null,this._incDel=null,this._convexHull=null,this._splitFinder=new Eo,this._kdt=null,this._vertexFactory=null,this._computeAreaEnv=null,this._splitPt=null,this._tolerance=null;var t=arguments[0],e=arguments[1];this._initialVertices=new w(t),this._tolerance=e,this._kdt=new li(e)},Go.MAX_SPLIT_ITER=99;var qo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"create",value:function(){if(null!==this._subdiv)return null;var e=t.envelope(this._siteCoords),n=t.toVertices(this._siteCoords);this._subdiv=new Oo(e,this._tolerance),new wo(this._subdiv).insertSites(n)}},{key:"setTolerance",value:function(t){this._tolerance=t}},{key:"setSites",value:function(){if(arguments[0]instanceof H){var e=arguments[0];this._siteCoords=t.extractUniqueCoordinates(e)}else if(E(arguments[0],I)){var n=arguments[0];this._siteCoords=t.unique($.toCoordinateArray(n))}}},{key:"getEdges",value:function(t){return this.create(),this._subdiv.getEdges(t)}},{key:"getSubdivision",value:function(){return this.create(),this._subdiv}},{key:"getTriangles",value:function(t){return this.create(),this._subdiv.getTriangles(t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"extractUniqueCoordinates",value:function(e){if(null===e)return new T;var n=e.getCoordinates();return t.unique(n)}},{key:"envelope",value:function(t){for(var e=new R,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i)}return e}},{key:"unique",value:function(t){var e=$.copyDeep(t);return pt.sort(e),new T(e,!1)}},{key:"toVertices",value:function(t){for(var e=new w,n=t.iterator();n.hasNext();){var i=n.next();e.add(new No(i))}return e}}]),t}();qo.constructor_=function(){this._siteCoords=null,this._tolerance=0,this._subdiv=null};var Bo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"createSiteVertices",value:function(t){for(var e=new w,n=t.iterator();n.hasNext();){var i=n.next();this._constraintVertexMap.containsKey(i)||e.add(new Co(i))}return e}},{key:"create",value:function(){if(null!==this._subdiv)return null;var e=qo.envelope(this._siteCoords),n=new w;null!==this._constraintLines&&(e.expandToInclude(this._constraintLines.getEnvelopeInternal()),this.createVertices(this._constraintLines),n=t.createConstraintSegments(this._constraintLines));var i=this.createSiteVertices(this._siteCoords),r=new Go(i,this._tolerance);r.setConstraints(n,new w(this._constraintVertexMap.values())),r.formInitialDelaunay(),r.enforceConstraints(),this._subdiv=r.getSubdivision()}},{key:"setTolerance",value:function(t){this._tolerance=t}},{key:"setConstraints",value:function(t){this._constraintLines=t}},{key:"setSites",value:function(t){this._siteCoords=qo.extractUniqueCoordinates(t)}},{key:"getEdges",value:function(t){return this.create(),this._subdiv.getEdges(t)}},{key:"getSubdivision",value:function(){return this.create(),this._subdiv}},{key:"getTriangles",value:function(t){return this.create(),this._subdiv.getTriangles(t)}},{key:"createVertices",value:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var i=new Co(e[n]);this._constraintVertexMap.put(e[n],i)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"createConstraintSegments",value:function(){if(1===arguments.length){for(var e=arguments[0],n=we.getLines(e),i=new w,r=n.iterator();r.hasNext();){var s=r.next();t.createConstraintSegments(s,i)}return i}if(2===arguments.length)for(var o=arguments[0],a=arguments[1],u=o.getCoordinates(),l=1;l<u.length;l++)a.add(new Fo(u[l-1],u[l]))}}]),t}();Bo.constructor_=function(){this._siteCoords=null,this._constraintLines=null,this._tolerance=0,this._subdiv=null,this._constraintVertexMap=new gt};var Vo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"create",value:function(){if(null!==this._subdiv)return null;var t=qo.envelope(this._siteCoords);this._diagramEnv=t;var e=Math.max(this._diagramEnv.getWidth(),this._diagramEnv.getHeight());this._diagramEnv.expandBy(e),null!==this._clipEnv&&this._diagramEnv.expandToInclude(this._clipEnv);var n=qo.toVertices(this._siteCoords);this._subdiv=new Oo(t,this._tolerance),new wo(this._subdiv).insertSites(n)}},{key:"getDiagram",value:function(e){this.create();var n=this._subdiv.getVoronoiDiagram(e);return t.clipGeometryCollection(n,this._diagramEnv)}},{key:"setTolerance",value:function(t){this._tolerance=t}},{key:"setSites",value:function(){if(arguments[0]instanceof H){var t=arguments[0];this._siteCoords=qo.extractUniqueCoordinates(t)}else if(E(arguments[0],I)){var e=arguments[0];this._siteCoords=qo.unique($.toCoordinateArray(e))}}},{key:"setClipEnvelope",value:function(t){this._clipEnv=t}},{key:"getSubdivision",value:function(){return this.create(),this._subdiv}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"clipGeometryCollection",value:function(t,e){for(var n=t.getFactory().toGeometry(e),i=new w,r=0;r<t.getNumGeometries();r++){var s=t.getGeometryN(r),o=null;e.contains(s.getEnvelopeInternal())?o=s:e.intersects(s.getEnvelopeInternal())&&(o=n.intersection(s)).setUserData(s.getUserData()),null===o||o.isEmpty()||i.add(o)}return t.getFactory().createGeometryCollection(te.toGeometryArray(i))}}]),t}();Vo.constructor_=function(){this._siteCoords=null,this._tolerance=0,this._subdiv=null,this._clipEnv=null,this._diagramEnv=null};var zo=Object.freeze({__proto__:null,Vertex:No}),Yo=Object.freeze({__proto__:null,ConformingDelaunayTriangulationBuilder:Bo,DelaunayTriangulationBuilder:qo,VoronoiDiagramBuilder:Vo,quadedge:zo}),Uo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getSegmentIndex",value:function(){return this._segmentIndex}},{key:"getComponentIndex",value:function(){return this._componentIndex}},{key:"isEndpoint",value:function(t){var e=t.getGeometryN(this._componentIndex).getNumPoints()-1;return this._segmentIndex>=e||this._segmentIndex===e&&this._segmentFraction>=1}},{key:"isValid",value:function(t){if(this._componentIndex<0||this._componentIndex>=t.getNumGeometries())return!1;var e=t.getGeometryN(this._componentIndex);return!(this._segmentIndex<0||this._segmentIndex>e.getNumPoints()||this._segmentIndex===e.getNumPoints()&&0!==this._segmentFraction||this._segmentFraction<0||this._segmentFraction>1)}},{key:"normalize",value:function(){this._segmentFraction<0&&(this._segmentFraction=0),this._segmentFraction>1&&(this._segmentFraction=1),this._componentIndex<0&&(this._componentIndex=0,this._segmentIndex=0,this._segmentFraction=0),this._segmentIndex<0&&(this._segmentIndex=0,this._segmentFraction=0),1===this._segmentFraction&&(this._segmentFraction=0,this._segmentIndex+=1)}},{key:"toLowest",value:function(e){var n=e.getGeometryN(this._componentIndex).getNumPoints()-1;return this._segmentIndex<n?this:new t(this._componentIndex,n,1,!1)}},{key:"getCoordinate",value:function(e){var n=e.getGeometryN(this._componentIndex),i=n.getCoordinateN(this._segmentIndex);if(this._segmentIndex>=n.getNumPoints()-1)return i;var r=n.getCoordinateN(this._segmentIndex+1);return t.pointAlongSegmentByFraction(i,r,this._segmentFraction)}},{key:"getSegmentFraction",value:function(){return this._segmentFraction}},{key:"getSegment",value:function(t){var e=t.getGeometryN(this._componentIndex),n=e.getCoordinateN(this._segmentIndex);if(this._segmentIndex>=e.getNumPoints()-1){var i=e.getCoordinateN(e.getNumPoints()-2);return new le(i,n)}var r=e.getCoordinateN(this._segmentIndex+1);return new le(n,r)}},{key:"clamp",value:function(t){if(this._componentIndex>=t.getNumGeometries())return this.setToEnd(t),null;if(this._segmentIndex>=t.getNumPoints()){var e=t.getGeometryN(this._componentIndex);this._segmentIndex=e.getNumPoints()-1,this._segmentFraction=1}}},{key:"setToEnd",value:function(t){this._componentIndex=t.getNumGeometries()-1;var e=t.getGeometryN(this._componentIndex);this._segmentIndex=e.getNumPoints()-1,this._segmentFraction=1}},{key:"compareTo",value:function(t){var e=t;return this._componentIndex<e._componentIndex?-1:this._componentIndex>e._componentIndex?1:this._segmentIndex<e._segmentIndex?-1:this._segmentIndex>e._segmentIndex?1:this._segmentFraction<e._segmentFraction?-1:this._segmentFraction>e._segmentFraction?1:0}},{key:"copy",value:function(){return new t(this._componentIndex,this._segmentIndex,this._segmentFraction)}},{key:"toString",value:function(){return"LinearLoc["+this._componentIndex+", "+this._segmentIndex+", "+this._segmentFraction+"]"}},{key:"isOnSameSegment",value:function(t){return this._componentIndex===t._componentIndex&&(this._segmentIndex===t._segmentIndex||t._segmentIndex-this._segmentIndex==1&&0===t._segmentFraction||this._segmentIndex-t._segmentIndex==1&&0===this._segmentFraction)}},{key:"snapToVertex",value:function(t,e){if(this._segmentFraction<=0||this._segmentFraction>=1)return null;var n=this.getSegmentLength(t),i=this._segmentFraction*n,r=n-i;i<=r&&i<e?this._segmentFraction=0:r<=i&&r<e&&(this._segmentFraction=1)}},{key:"compareLocationValues",value:function(t,e,n){return this._componentIndex<t?-1:this._componentIndex>t?1:this._segmentIndex<e?-1:this._segmentIndex>e?1:this._segmentFraction<n?-1:this._segmentFraction>n?1:0}},{key:"getSegmentLength",value:function(t){var e=t.getGeometryN(this._componentIndex),n=this._segmentIndex;this._segmentIndex>=e.getNumPoints()-1&&(n=e.getNumPoints()-2);var i=e.getCoordinateN(n),r=e.getCoordinateN(n+1);return i.distance(r)}},{key:"isVertex",value:function(){return this._segmentFraction<=0||this._segmentFraction>=1}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[g]}}],[{key:"getEndLocation",value:function(e){var n=new t;return n.setToEnd(e),n}},{key:"pointAlongSegmentByFraction",value:function(t,e,n){if(n<=0)return t;if(n>=1)return e;var i=(e.x-t.x)*n+t.x,r=(e.y-t.y)*n+t.y,s=(e.z-t.z)*n+t.z;return new k(i,r,s)}},{key:"compareLocationValues",value:function(t,e,n,i,r,s){return t<i?-1:t>i?1:e<r?-1:e>r?1:n<s?-1:n>s?1:0}}]),t}();Uo.constructor_=function(){if(this._componentIndex=0,this._segmentIndex=0,this._segmentFraction=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._componentIndex=t._componentIndex,this._segmentIndex=t._segmentIndex,this._segmentFraction=t._segmentFraction}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Uo.constructor_.call(this,0,e,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];this._componentIndex=i,this._segmentIndex=r,this._segmentFraction=s,this.normalize()}else if(4===arguments.length){var o=arguments[0],a=arguments[1],u=arguments[2],l=arguments[3];this._componentIndex=o,this._segmentIndex=a,this._segmentFraction=u,l&&this.normalize()}};var Xo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getComponentIndex",value:function(){return this._componentIndex}},{key:"getLine",value:function(){return this._currentLine}},{key:"getVertexIndex",value:function(){return this._vertexIndex}},{key:"getSegmentEnd",value:function(){return this._vertexIndex<this.getLine().getNumPoints()-1?this._currentLine.getCoordinateN(this._vertexIndex+1):null}},{key:"next",value:function(){if(!this.hasNext())return null;this._vertexIndex++,this._vertexIndex>=this._currentLine.getNumPoints()&&(this._componentIndex++,this.loadCurrentLine(),this._vertexIndex=0)}},{key:"loadCurrentLine",value:function(){if(this._componentIndex>=this._numLines)return this._currentLine=null,null;this._currentLine=this._linearGeom.getGeometryN(this._componentIndex)}},{key:"getSegmentStart",value:function(){return this._currentLine.getCoordinateN(this._vertexIndex)}},{key:"isEndOfLine",value:function(){return!(this._componentIndex>=this._numLines||this._vertexIndex<this._currentLine.getNumPoints()-1)}},{key:"hasNext",value:function(){return!(this._componentIndex>=this._numLines||this._componentIndex===this._numLines-1&&this._vertexIndex>=this._currentLine.getNumPoints())}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"segmentEndVertexIndex",value:function(t){return t.getSegmentFraction()>0?t.getSegmentIndex()+1:t.getSegmentIndex()}}]),t}();Xo.constructor_=function(){if(this._linearGeom=null,this._numLines=null,this._currentLine=null,this._componentIndex=0,this._vertexIndex=0,1===arguments.length){var t=arguments[0];Xo.constructor_.call(this,t,0,0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Xo.constructor_.call(this,e,n.getComponentIndex(),Xo.segmentEndVertexIndex(n))}else if(3===arguments.length){var i=arguments[0],s=arguments[1],o=arguments[2];if(!E(i,vt))throw new r("Lineal geometry is required");this._linearGeom=i,this._numLines=i.getNumGeometries(),this._componentIndex=s,this._vertexIndex=o,this.loadCurrentLine()}};var Ho=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"indexOf",value:function(t){return this.indexOfFromStart(t,null)}},{key:"indexOfFromStart",value:function(t,e){for(var n=h.MAX_VALUE,i=0,r=0,s=-1,o=new le,a=new Xo(this._linearGeom);a.hasNext();a.next())if(!a.isEndOfLine()){o.p0=a.getSegmentStart(),o.p1=a.getSegmentEnd();var u=o.distance(t),l=o.segmentFraction(t),c=a.getComponentIndex(),f=a.getVertexIndex();u<n&&(null===e||e.compareLocationValues(c,f,l)<0)&&(i=c,r=f,s=l,n=u)}return n===h.MAX_VALUE?new Uo(e):new Uo(i,r,s)}},{key:"indexOfAfter",value:function(t,e){if(null===e)return this.indexOf(t);var n=Uo.getEndLocation(this._linearGeom);if(n.compareTo(e)<=0)return n;var i=this.indexOfFromStart(t,e);return m.isTrue(i.compareTo(e)>=0,"computed location is before specified minimum location"),i}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"indexOf",value:function(e,n){return new t(e).indexOf(n)}},{key:"indexOfAfter",value:function(e,n,i){return new t(e).indexOfAfter(n,i)}}]),t}();Ho.constructor_=function(){this._linearGeom=null;var t=arguments[0];this._linearGeom=t};var Wo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"indicesOf",value:function(t){var e=t.getGeometryN(0).getCoordinateN(0),n=t.getGeometryN(t.getNumGeometries()-1),i=n.getCoordinateN(n.getNumPoints()-1),r=new Ho(this._linearGeom),s=new Array(2).fill(null);return s[0]=r.indexOf(e),0===t.getLength()?s[1]=s[0].copy():s[1]=r.indexOfAfter(i,s[0]),s}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"indicesOf",value:function(e,n){return new t(e).indicesOf(n)}}]),t}();Wo.constructor_=function(){this._linearGeom=null;var t=arguments[0];this._linearGeom=t};var jo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getGeometry",value:function(){return this.endLine(),this._geomFact.buildGeometry(this._lines)}},{key:"getLastCoordinate",value:function(){return this._lastPt}},{key:"endLine",value:function(){if(null===this._coordList)return null;if(this._ignoreInvalidLines&&this._coordList.size()<2)return this._coordList=null,null;var t=this._coordList.toCoordinateArray(),e=t;this._fixInvalidLines&&(e=this.validCoordinateSequence(t)),this._coordList=null;var n=null;try{n=this._geomFact.createLineString(e)}catch(t){if(!(t instanceof r))throw t;if(!this._ignoreInvalidLines)throw t}null!==n&&this._lines.add(n)}},{key:"setFixInvalidLines",value:function(t){this._fixInvalidLines=t}},{key:"add",value:function(){if(1===arguments.length){var t=arguments[0];this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];null===this._coordList&&(this._coordList=new T),this._coordList.add(e,n),this._lastPt=e}}},{key:"setIgnoreInvalidLines",value:function(t){this._ignoreInvalidLines=t}},{key:"validCoordinateSequence",value:function(t){return t.length>=2?t:[t[0],t[0]]}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();jo.constructor_=function(){this._geomFact=null,this._lines=new w,this._coordList=null,this._ignoreInvalidLines=!1,this._fixInvalidLines=!1,this._lastPt=null;var t=arguments[0];this._geomFact=t};var Ko=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"computeLinear",value:function(t,e){var n=new jo(this._line.getFactory());n.setFixInvalidLines(!0),t.isVertex()||n.add(t.getCoordinate(this._line));for(var i=new Xo(this._line,t);i.hasNext()&&!(e.compareLocationValues(i.getComponentIndex(),i.getVertexIndex(),0)<0);i.next()){var r=i.getSegmentStart();n.add(r),i.isEndOfLine()&&n.endLine()}return e.isVertex()||n.add(e.getCoordinate(this._line)),n.getGeometry()}},{key:"computeLine",value:function(t,e){var n=this._line.getCoordinates(),i=new T,r=t.getSegmentIndex();t.getSegmentFraction()>0&&(r+=1);var s=e.getSegmentIndex();1===e.getSegmentFraction()&&(s+=1),s>=n.length&&(s=n.length-1),t.isVertex()||i.add(t.getCoordinate(this._line));for(var o=r;o<=s;o++)i.add(n[o]);e.isVertex()||i.add(e.getCoordinate(this._line)),i.size()<=0&&i.add(t.getCoordinate(this._line));var a=i.toCoordinateArray();return a.length<=1&&(a=[a[0],a[0]]),this._line.getFactory().createLineString(a)}},{key:"extract",value:function(t,e){return e.compareTo(t)<0?this.reverse(this.computeLinear(e,t)):this.computeLinear(t,e)}},{key:"reverse",value:function(t){return t instanceof Dt||t instanceof It?t.reverse():(m.shouldNeverReachHere("non-linear geometry encountered"),null)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"extract",value:function(e,n,i){return new t(e).extract(n,i)}}]),t}();Ko.constructor_=function(){this._line=null;var t=arguments[0];this._line=t};var Zo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"clampIndex",value:function(t){var e=t.copy();return e.clamp(this._linearGeom),e}},{key:"project",value:function(t){return Ho.indexOf(this._linearGeom,t)}},{key:"checkGeometryType",value:function(){if(!(this._linearGeom instanceof Dt||this._linearGeom instanceof It))throw new r("Input geometry must be linear")}},{key:"extractPoint",value:function(){if(1===arguments.length)return arguments[0].getCoordinate(this._linearGeom);if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.toLowest(this._linearGeom);return n.getSegment(this._linearGeom).pointAlongOffset(n.getSegmentFraction(),e)}}},{key:"isValidIndex",value:function(t){return t.isValid(this._linearGeom)}},{key:"getEndIndex",value:function(){return Uo.getEndLocation(this._linearGeom)}},{key:"getStartIndex",value:function(){return new Uo}},{key:"indexOfAfter",value:function(t,e){return Ho.indexOfAfter(this._linearGeom,t,e)}},{key:"extractLine",value:function(t,e){return Ko.extract(this._linearGeom,t,e)}},{key:"indexOf",value:function(t){return Ho.indexOf(this._linearGeom,t)}},{key:"indicesOf",value:function(t){return Wo.indicesOf(this._linearGeom,t)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();Zo.constructor_=function(){this._linearGeom=null;var t=arguments[0];this._linearGeom=t,this.checkGeometryType()};var Qo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"indexOf",value:function(t){return this.indexOfFromStart(t,-1)}},{key:"indexOfFromStart",value:function(t,e){for(var n=h.MAX_VALUE,i=e,r=0,s=new le,o=new Xo(this._linearGeom);o.hasNext();){if(!o.isEndOfLine()){s.p0=o.getSegmentStart(),s.p1=o.getSegmentEnd();var a=s.distance(t),u=this.segmentNearestMeasure(s,t,r);a<n&&u>e&&(i=u,n=a),r+=s.getLength()}o.next()}return i}},{key:"indexOfAfter",value:function(t,e){if(e<0)return this.indexOf(t);var n=this._linearGeom.getLength();if(n<e)return n;var i=this.indexOfFromStart(t,e);return m.isTrue(i>=e,"computed index is before specified minimum index"),i}},{key:"segmentNearestMeasure",value:function(t,e,n){var i=t.projectionFactor(e);return i<=0?n:i<=1?n+i*t.getLength():n+t.getLength()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"indexOf",value:function(e,n){return new t(e).indexOf(n)}},{key:"indexOfAfter",value:function(e,n,i){return new t(e).indexOfAfter(n,i)}}]),t}();Qo.constructor_=function(){this._linearGeom=null;var t=arguments[0];this._linearGeom=t};var Jo=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getLength",value:function(t){for(var e=0,n=new Xo(this._linearGeom);n.hasNext();){if(!n.isEndOfLine()){var i=n.getSegmentStart(),r=n.getSegmentEnd().distance(i);if(t.getComponentIndex()===n.getComponentIndex()&&t.getSegmentIndex()===n.getVertexIndex())return e+r*t.getSegmentFraction();e+=r}n.next()}return e}},{key:"resolveHigher",value:function(t){if(!t.isEndpoint(this._linearGeom))return t;var e=t.getComponentIndex();if(e>=this._linearGeom.getNumGeometries()-1)return t;do{e++}while(e<this._linearGeom.getNumGeometries()-1&&0===this._linearGeom.getGeometryN(e).getLength());return new Uo(e,0,0)}},{key:"getLocation",value:function(){if(1===arguments.length){var t=arguments[0];return this.getLocation(t,!0)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e;e<0&&(i=this._linearGeom.getLength()+e);var r=this.getLocationForward(i);return n?r:this.resolveHigher(r)}}},{key:"getLocationForward",value:function(t){if(t<=0)return new Uo;for(var e=0,n=new Xo(this._linearGeom);n.hasNext();){if(n.isEndOfLine()){if(e===t){var i=n.getComponentIndex(),r=n.getVertexIndex();return new Uo(i,r,0)}}else{var s=n.getSegmentStart(),o=n.getSegmentEnd().distance(s);if(e+o>t){var a=(t-e)/o,u=n.getComponentIndex(),l=n.getVertexIndex();return new Uo(u,l,a)}e+=o}n.next()}return Uo.getEndLocation(this._linearGeom)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"getLength",value:function(e,n){return new t(e).getLength(n)}},{key:"getLocation",value:function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return new t(e).getLocation(n)}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];return new t(i).getLocation(r,s)}}}]),t}();Jo.constructor_=function(){this._linearGeom=null;var t=arguments[0];this._linearGeom=t};var $o=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"clampIndex",value:function(t){var e=this.positiveIndex(t),n=this.getStartIndex();if(e<n)return n;var i=this.getEndIndex();return e>i?i:e}},{key:"locationOf",value:function(){if(1===arguments.length){var t=arguments[0];return Jo.getLocation(this._linearGeom,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return Jo.getLocation(this._linearGeom,e,n)}}},{key:"project",value:function(t){return Qo.indexOf(this._linearGeom,t)}},{key:"positiveIndex",value:function(t){return t>=0?t:this._linearGeom.getLength()+t}},{key:"extractPoint",value:function(){if(1===arguments.length){var t=arguments[0];return Jo.getLocation(this._linearGeom,t).getCoordinate(this._linearGeom)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=Jo.getLocation(this._linearGeom,e).toLowest(this._linearGeom);return i.getSegment(this._linearGeom).pointAlongOffset(i.getSegmentFraction(),n)}}},{key:"isValidIndex",value:function(t){return t>=this.getStartIndex()&&t<=this.getEndIndex()}},{key:"getEndIndex",value:function(){return this._linearGeom.getLength()}},{key:"getStartIndex",value:function(){return 0}},{key:"indexOfAfter",value:function(t,e){return Qo.indexOfAfter(this._linearGeom,t,e)}},{key:"extractLine",value:function(t,e){new Zo(this._linearGeom);var n=this.clampIndex(t),i=this.clampIndex(e),r=n===i,s=this.locationOf(n,r),o=this.locationOf(i);return Ko.extract(this._linearGeom,s,o)}},{key:"indexOf",value:function(t){return Qo.indexOf(this._linearGeom,t)}},{key:"indicesOf",value:function(t){var e=Wo.indicesOf(this._linearGeom,t);return[Jo.getLength(this._linearGeom,e[0]),Jo.getLength(this._linearGeom,e[1])]}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();$o.constructor_=function(){this._linearGeom=null;var t=arguments[0];this._linearGeom=t};var ta=Object.freeze({__proto__:null,LengthIndexedLine:$o,LengthLocationMap:Jo,LinearGeometryBuilder:jo,LinearIterator:Xo,LinearLocation:Uo,LocationIndexedLine:Zo}),ea=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"transform",value:function(t,e){for(var n=new w,i=t.iterator();i.hasNext();)n.add(e.execute(i.next()));return n}},{key:"select",value:function(t,e){for(var n=new w,i=t.iterator();i.hasNext();){var r=i.next();Boolean.TRUE.equals(e.execute(r))&&n.add(r)}return n}},{key:"apply",value:function(t,e){for(var n=t.iterator();n.hasNext();)e.execute(n.next())}}]),t}();ea.Function=function(){},ea.constructor_=function(){};var na=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){this.pts[this.n++]=t}},{key:"getCoordinates",value:function(){return this.pts}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[W]}}]),t}();na.constructor_=function(){this.pts=null,this.n=0;var t=arguments[0];this.pts=new Array(t).fill(null)};var ia=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"filter",value:function(t){this._n++}},{key:"getCount",value:function(){return this._n}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[W]}}]),t}();ia.constructor_=function(){this._n=0};var ra=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"count",value:function(t){var e=this._counts.get(t);return null===e?0:e.count()}},{key:"add",value:function(t){var e=this._counts.get(t);null===e?this._counts.put(t,new sa(1)):e.increment()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(),sa=function(){function t(){c(this,t),t.constructor_.apply(this,arguments)}return f(t,[{key:"count",value:function(){return this.count}},{key:"increment",value:function(){this.count++}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}();sa.constructor_=function(){if(this.count=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.count=t}},ra.Counter=sa,ra.constructor_=function(){this._counts=new Qt};var oa=Object.freeze({__proto__:null,CollectionUtil:ea,CoordinateArrayFilter:na,CoordinateCountFilter:ia,GeometricShapeFactory:Oe,NumberUtil:n,ObjectCounter:ra,PriorityQueue:Ii,StringUtil:Ot,UniqueCoordinateArrayFilter:_n}),aa=function(){function t(){c(this,t)}return f(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"union",value:function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ys.createEmptyResult(ys.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),_s.overlayOp(t,e,ys.UNION)}}]),t}();H.prototype.equalsTopo=function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&Xs.relate(this,t).isEquals(this.getDimension(),t.getDimension())},H.prototype.union=function(){if(0===arguments.length)return Ks.union(this);if(1===arguments.length){var t=arguments[0];return aa.union(this,t)}},H.prototype.isValid=function(){return Ps.isValid(this)},H.prototype.intersection=function(t){return ys.intersection(this,t)},H.prototype.covers=function(t){return Xs.covers(this,t)},H.prototype.coveredBy=function(t){return Xs.covers(t,this)},H.prototype.touches=function(t){return Xs.touches(this,t)},H.prototype.intersects=function(t){return Xs.intersects(this,t)},H.prototype.within=function(t){return Xs.contains(t,this)},H.prototype.overlaps=function(t){return Xs.overlaps(this,t)},H.prototype.disjoint=function(t){return Xs.disjoint(this,t)},H.prototype.crosses=function(t){return Xs.crosses(this,t)},H.prototype.buffer=function(){if(1===arguments.length){var t=arguments[0];return Or.bufferOp(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return Or.bufferOp(this,e,n)}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];return Or.bufferOp(this,i,r,s)}},H.prototype.convexHull=function(){return new dn(this).getConvexHull()},H.prototype.relate=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===arguments.length){var i=arguments[0];return Xs.relate(this,i)}if(2===arguments.length){var r=arguments[0],s=arguments[1];return Xs.relate(this,r).matches(s)}},H.prototype.getCentroid=function(){if(this.isEmpty())return this._factory.createPoint();var t=fn.getCentroid(this);return this.createPointFromInternalCoord(t,this)},H.prototype.getInteriorPoint=function(){if(this.isEmpty())return this._factory.createPoint();var t=this.getDimension(),e=(0===t?new xn(this):1===t?new kn(this):new pn(this)).getInteriorPoint();return this.createPointFromInternalCoord(e,this)},H.prototype.symDifference=function(t){return ys.symDifference(this,t)},H.prototype.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},H.prototype.toText=function(){return(new oe).write(this)},H.prototype.toString=function(){this.toText()},H.prototype.contains=function(t){return Xs.contains(this,t)},H.prototype.difference=function(t){return ys.difference(this,t)},H.prototype.isSimple=function(){return new tr(this).isSimple()},H.prototype.isWithinDistance=function(t,e){return!(this.getEnvelopeInternal().distance(t.getEnvelopeInternal())>e)&&Ar.isWithinDistance(this,t,e)},H.prototype.distance=function(t){return Ar.distance(this,t)},H.prototype.isEquivalentClass=function(t){return this.getClass()===t.getClass()},t.algorithm=Cn,t.densify=Ln,t.dissolve=An,t.geom=Ae,t.geomgraph=oi,t.index=Pi,t.io=Fi,t.linearref=ta,t.noding=$i,t.operation=Js,t.precision=eo,t.simplify=mo,t.triangulate=Yo,t.util=oa,t.version="2.1.2 (83b5aee)",Object.defineProperty(t,"__esModule",{value:!0})});
},{}],"Ihx5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SplitAction=void 0;var t=u(require("ol/src/ol/Feature")),e=require("./vl-mapactions-select-action"),n=require("./vl-mapactions-mapaction"),r=require("./vl-mapactions-draw-action"),o=a(require("jsts")),i=require("ol/src/ol/geom");function c(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return c=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=c();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function u(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){return function(){var e,n=w(t);if(h()){var r=w(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b(this,e)}}function b(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?g(t):e}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(c){y(u,n.MapAction);var a=v(u);function u(n,c,l){var s;f(this,u);var p=new o.io.OL3Parser;p.inject(i.Point,i.LineString,i.LinearRing,i.Polygon,i.MultiPoint,i.MultiLineString,i.MultiPolygon);var y=[],d=new e.SelectAction(n,function(t){t&&(s.selectAction.deactivate(),s.drawAction.activate())},l),v=new r.DrawAction(n,"LineString",function(e){var n=s.selectAction.selectedFeature,r=p.read(n.getGeometry().getPolygons()[0]),a=p.read(e.getGeometry()),u=r.getExteriorRing().union(a),l=new o.operation.polygonize.Polygonizer;l.add(u);for(var f=[],y=l.getPolygons().iterator();y.hasNext();){var d=new i.MultiPolygon([]);d.appendPolygon(p.write(y.next())),f.push(new t.default({geometry:d}))}c&&c(n,f),s.selectAction.clearFeatures(),setTimeout(function(){s.drawAction.deactivate(),s.selectAction.activate()})},l);return(s=a.call(this,y)).interactions=y,s.selectAction=d,s.drawAction=v,s}return p(u,[{key:"activate",value:function(){this.map.addAction(this.selectAction),this.map.addAction(this.drawAction),this.selectAction.activate()}},{key:"deactivate",value:function(){this.selectAction.deactivate(),this.drawAction.deactivate()}}]),u}();exports.SplitAction=m;
},{"ol/src/ol/Feature":"ZfC4","./vl-mapactions-select-action":"Qta4","./vl-mapactions-mapaction":"rfU2","./vl-mapactions-draw-action":"ddC2","jsts":"ySAT","ol/src/ol/geom":"q8kg"}],"PRVA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranslateAction=void 0;var t=require("./vl-mapactions-mapaction"),e=r(require("ol/src/ol/interaction/Select")),n=r(require("ol/src/ol/interaction/Translate"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=f(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){return function(){var e,n=d(t);if(v()){var r=d(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return y(this,e)}}function y(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?b(t):e}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(r){l(i,t.MapAction);var o=p(i);function i(t,r){var u;c(this,i);var a=new e.default({layers:[t],style:t.selectionStyle}),f={features:a.getFeatures(),layers:[t]},l=new n.default(f);return(u=o.call(this,[a,l])).selectInteraction=a,u.translateInteraction=l,u.translateInteraction.on("translateend",function(t){t.features.forEach(function(t){r(t,function(t){t.getGeometry().setCoordinates(t.get("entity").geometry.coordinates)}),u.selectInteraction.getFeatures().clear()})}),u.translateOptions=f,u}return u(i,[{key:"deactivate",value:function(){this.selectInteraction.getFeatures().clear(),a(d(i.prototype),"deactivate",this).call(this)}}]),i}();exports.TranslateAction=h;
},{"./vl-mapactions-mapaction":"rfU2","ol/src/ol/interaction/Select":"jAtE","ol/src/ol/interaction/Translate":"MSuo"}],"wWzN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"CustomMap",{enumerable:!0,get:function(){return e.CustomMap}}),Object.defineProperty(exports,"MapWithActions",{enumerable:!0,get:function(){return t.MapWithActions}}),Object.defineProperty(exports,"BoxSelectAction",{enumerable:!0,get:function(){return n.BoxSelectAction}}),Object.defineProperty(exports,"DeleteAction",{enumerable:!0,get:function(){return r.DeleteAction}}),Object.defineProperty(exports,"DrawAction",{enumerable:!0,get:function(){return o.DrawAction}}),Object.defineProperty(exports,"DrawLijnstukAction",{enumerable:!0,get:function(){return i.DrawLijnstukAction}}),Object.defineProperty(exports,"DrawRectangleAction",{enumerable:!0,get:function(){return c.DrawRectangleAction}}),Object.defineProperty(exports,"HighlightAction",{enumerable:!0,get:function(){return a.HighlightAction}}),Object.defineProperty(exports,"MapAction",{enumerable:!0,get:function(){return s.MapAction}}),Object.defineProperty(exports,"MeasureAction",{enumerable:!0,get:function(){return u.MeasureAction}}),Object.defineProperty(exports,"ModifyAction",{enumerable:!0,get:function(){return p.ModifyAction}}),Object.defineProperty(exports,"ModifyAndTranslateAction",{enumerable:!0,get:function(){return l.ModifyAndTranslateAction}}),Object.defineProperty(exports,"SelectAction",{enumerable:!0,get:function(){return f.SelectAction}}),Object.defineProperty(exports,"SelectActions",{enumerable:!0,get:function(){return m.SelectActions}}),Object.defineProperty(exports,"ShowInfoAction",{enumerable:!0,get:function(){return j.ShowInfoAction}}),Object.defineProperty(exports,"ShowInfoSelectAction",{enumerable:!0,get:function(){return b.ShowInfoSelectAction}}),Object.defineProperty(exports,"SplitAction",{enumerable:!0,get:function(){return A.SplitAction}}),Object.defineProperty(exports,"Tooltips",{enumerable:!0,get:function(){return d.Tooltips}}),Object.defineProperty(exports,"TranslateAction",{enumerable:!0,get:function(){return g.TranslateAction}}),Object.defineProperty(exports,"SnapInteraction",{enumerable:!0,get:function(){return y.SnapInteraction}});var e=require("./vl-mapactions-custom-map.js"),t=require("./vl-mapactions-map-with-actions.js"),n=require("./vl-mapactions-box-select-action.js"),r=require("./vl-mapactions-delete-action.js"),o=require("./vl-mapactions-draw-action.js"),i=require("./vl-mapactions-draw-lijnstuk-action.js"),c=require("./vl-mapactions-draw-rectangle-action.js"),a=require("./vl-mapactions-highlight-action.js"),s=require("./vl-mapactions-mapaction.js"),u=require("./vl-mapactions-measure-action.js"),p=require("./vl-mapactions-modify-action.js"),l=require("./vl-mapactions-modify-and-translate-action.js"),f=require("./vl-mapactions-select-action.js"),m=require("./vl-mapactions-select-actions.js"),j=require("./vl-mapactions-show-info-action.js"),b=require("./vl-mapactions-show-info-select-action.js"),A=require("./vl-mapactions-split-action.js"),d=require("./vl-mapactions-tooltips.js"),g=require("./vl-mapactions-translate-action.js"),y=require("./vl-mapactions-snap-interaction.js");
},{"./vl-mapactions-custom-map.js":"wvKl","./vl-mapactions-map-with-actions.js":"KXx2","./vl-mapactions-box-select-action.js":"e1Xu","./vl-mapactions-delete-action.js":"yZTS","./vl-mapactions-draw-action.js":"ddC2","./vl-mapactions-draw-lijnstuk-action.js":"Qbec","./vl-mapactions-draw-rectangle-action.js":"N6fZ","./vl-mapactions-highlight-action.js":"AUpx","./vl-mapactions-mapaction.js":"rfU2","./vl-mapactions-measure-action.js":"CfY0","./vl-mapactions-modify-action.js":"pL2N","./vl-mapactions-modify-and-translate-action.js":"KVt3","./vl-mapactions-select-action.js":"Qta4","./vl-mapactions-select-actions.js":"LHew","./vl-mapactions-show-info-action.js":"fRbi","./vl-mapactions-show-info-select-action.js":"BsYb","./vl-mapactions-split-action.js":"Ihx5","./vl-mapactions-tooltips.js":"slT2","./vl-mapactions-translate-action.js":"PRVA","./vl-mapactions-snap-interaction.js":"jQkn"}]},{},["wWzN"], null)
//# sourceMappingURL=/vl-mapactions-all.js.map